(function(){var g=function(){window.guideBridge.connect(function(){if(!window.FD||!FD.FP||!0!==FD.FP.readOnlyFormat)if(window.guideBridge.hasAutoSaveStarted())f();else window.guideBridge.on("guideAutoSaveStart",function(){f()})})},f=function(){var c=h(),d=c.enableAnonymous,a=c.fpWhen;if(a){a=1E3*parseInt(a);var e=function(){c=h();var b=c.metadata;FD.FP.isAnonymous&&!d||!window.guideBridge.hasAutoSaveStarted()||window.FD.FP.AF._handleDraftSaveWrapper({isAutoSaveTriggered:!0,metadataToSave:b,enableAnonymous:d})};
e();setInterval(function(){e()},a)}},h=function(){var c=!1,d={},a=window.guideBridge.getAutoSaveInfo(),e,b;if(a&&(a.hasOwnProperty("autoSaveInterval")&&(e=a.autoSaveInterval),a.hasOwnProperty("metadataselector")&&(b=a.metadataselector),b=b&&"global"===b?(b=window.guideBridge.getGlobalMetaInfo())&&b.hasOwnProperty("metadata")?b.metadata:null:a.fpmetadata,a.hasOwnProperty("enableAnonymous")&&(c=a.enableAnonymous),b))if("object"===typeof b)for(var k in b)a=JSON.parse(b[k]),d[a.key]=window.guideBridge._guide._compileExpression(a.value).call(window.guideBridge._guide);
else"string"===typeof b&&(a=JSON.parse(b),d[a.key]=window.guideBridge._guide._compileExpression(a.value).call(window.guideBridge._guide));return{metadata:d,enableAnonymous:c,fpWhen:e}};window.guideBridge?g():window.addEventListener("bridgeInitializeStart",function(){g()})})();