/*
 jQuery Mobile 1.4.1
 Git HEAD hash: 18c1e32bfc4e0e92756dedc105d799131607f5bb <> Date: Wed Feb 12 2014 22:15:20 UTC
 http://jquerymobile.com

 Copyright 2010, 2014 jQuery Foundation, Inc. and other contributors
 Released under the MIT license.
 http://jquery.org/license

 code snippet for just swipe-right and swipe-left
*/
(function(f){f.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};if(!f.browser){var d=f.uaMatch(navigator.userAgent),g={};d.browser&&(g[d.browser]=!0,g.version=d.version);g.chrome?g.webkit=!0:g.webkit&&(g.safari=!0);f.browser=g}})($);
(function(f,d){function g(c,e,l){var k=c.prototype;var h=e&&e.hasOwnProperty("constructor")?e.constructor:function(){c.apply(this,arguments)};f.extend(h,c);b.prototype=c.prototype;h.prototype=new b;h._super=c.prototype;h._superClass=c;if(e)for(var p in e)"_defaults"==p&&(e[p]=f.extend({},k[p],e[p])),h.prototype[p]=e[p];l&&f.extend(h,l);h.prototype.constructor=h;h.__super__=c.prototype;return h}d.ns=d.ns||function(c){c=c.split(".");for(var e=window,l,k=0,h=c.length;k<h;k++)l=c[k],e[l]=e[l]||{},e=e[l];
return e};var a=d.ut.Class=function(c){this.options=f.extend({},this.options,c);this.options.jsonModel||(this.options.jsonModel={});this.jsonModel=this.options.jsonModel;this.initialize.apply(this,arguments)};f.extend(a.prototype,{initialize:function(){},xfaUtil:function(){return d.ut.XfaUtil.prototype},copyArray:function(c,e,l){var k=this.getOrElse(l,"keepReference",!0);if(c instanceof Array){for(var h=0;h<c.length;h++){if(c[h]instanceof Array){var p=this._createDestination(e,h,k,[]);this.copyArray(c[h],
p,l)}else"object"==typeof c[h]?(p=this._createDestination(e,h,k,{}),this.copyObject(c[h],p,l)):p=c[h];e[h]=p}e.length>c.length&&e.splice(c.length,e.length-c.length)}},copyObject:function(c,e,l){var k=this.getOrElse(l,"keepReference",!0),h=this.getOrElse(l,"exceptions",[]),p=this.getOrElse(l,"transformMaps",{});if("object"==typeof c)for(var q in c)-1==h.indexOf(q)&&(c[q]instanceof Array?(e[q]=this._createDestination(e,q,k,[]),this.copyArray(c[q],e[q],l)):"object"==typeof c[q]&&null!=c[q]?(e[q]=this._createDestination(e,
q,k,{}),this.copyObject(c[q],e[q],l)):f.isUndefined(p[q])?e[q]=c[q]:e[q]=p[q](c[q],l,c))},_createDestination:function(c,e,l,k){return l?f.isObject(c)&&!c.hasOwnProperty(e)?k:c[e]||k:k},_disableFunctions:function(c){var e=function(){},l=!f.isFunction(c);f.each(f.functions(this),function(k){if(l||c(k))this[k]=e},this)},getOrElse:function(c){var e=c;if(2>arguments.length)return e;if(2==arguments.length){if(f.isUndefined(e))return f.clone(arguments[1])}else{var l=(arguments[1]||"").split("."),k=arguments[2];
f.each(l,function(h){e=f.isObject(e)?e[h]:void 0},this);if(f.isUndefined(e))return f.clone(k)}return e},jqId:function(c){return d.ut.XfaUtil.prototype.jqId(c)},logger:function(){return this.xfaUtil().getLogger()},validateInput:function(c,e,l){if("undefined"!==typeof c&&null!==c)switch(e){case "string":c+="";break;case "object":"object"!==typeof c&&(c=l);break;case "integer":c=parseInt(c);isNaN(c)&&(c=l);break;case "measurement":break;default:e instanceof Array&&(~e.indexOf(c)||(c=l))}return c}});
f.extend(a,{defineProps:function(c){f.each(c,function(e,l){e.resolve&&(this.prototype.hasOwnProperty("resolveProperties")||(this.prototype.resolveProperties=this.prototype.resolveProperties?f.clone(this.prototype.resolveProperties):[]),this.prototype.resolveProperties.push(l));Object.defineProperty(this.prototype,l,e)},this)},extend:function(c){c=g(this,c);c.extend=this.extend;return c},addMixins:function(c){f.isArray(c)||(c=[c]);f.each(c,function(e){e.normalProperties&&f.extend(this.prototype,e.normalProperties);
e.propertyDescriptors&&this.defineProps(e.propertyDescriptors)},this)}});var b=function(){}})(_,window.xfalib);
(function(f,d){d.ut.XMLUtils={dataSom2xpath:function(g){var a="";f.isEmpty(g)||(f.each(g.split(/\]\./).slice(4),function(b){var c=b.lastIndexOf("[");a+=b.substring(0,c+1)+(parseInt(b.substring(c+1))+1)+"]/"}),f.isEmpty(a)?a=g:"/"===a[a.length-1]&&(a=a.slice(0,-1)));return a},iteratorToArray:function(g){for(var a=[],b=g?g.iterateNext():null;null!=b;)a.push(b),b=g.iterateNext();return a},evaluateXPath:function(g,a,b,c,e){try{if(f.isEmpty(g)||!f.isString(g)||!(a instanceof Node))return null;f.isUndefined(document.evaluate)&&
wgxpath.install();var l=a instanceof Document?a:a.ownerDocument,k=l.evaluate?l:document;g=this.sanitizeXPath(g);return k.evaluate(g,a,b,c,e)}catch(h){d.ut.XfaUtil.prototype.getLogger().error("Could not evaluate xpath: "+g+h)}},sanitizeXPath:function(g){g=g.split("/");return f.map(g,function(a){return a.replace(/\[(.*\D+.*)\]|\[\]/g,"")}).join("/")},createElementsFromXPath:function(g,a,b){if(null!=g||null!=a){g=g.split("/");var c=b?f.initial(g):g,e=a;f.each(c,function(l,k){if(null==l.match(/^([^[]+)(\[(\d+)\])?/))return d.ut.XfaUtil.prototype.getLogger().error("Unsupported expression in Bindref "+
l),null;e=this.findOrCreateElement(l,e,k===c.length-1)},this);return e}return null},_getElementNameAndIndexFromXPathPart:function(g){g=g.match(/^([^[]+)(?:\[(\d+|\*)\])?/);return null!==g?{name:g[1],index:g[2]||0}:null},createElement:function(g,a){return a.ownerDocument.createElement(g)},findOrCreateElement:function(g,a,b){try{if(null==a)return null;var c=this.evaluateXPath(g,a,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null).iterateNext();if(null==c){var e=this._getElementNameAndIndexFromXPathPart(g);
if(null!=e)if(b&&e.name.match(/^@/)){var l=e.name.replace(/^@/,"");c=a.ownerDocument.createAttribute(l);a.setAttributeNode(c)}else c=a.ownerDocument.createElement(e.name),a.appendChild(c)}return c}catch(k){d.ut.XfaUtil.prototype.getLogger().error("Following exception occurred while executing findOrCreateElement "+k)}},getXFARootFormElementFromXML:function(g){f.isUndefined(document.evaluate)&&wgxpath.install();var a=g instanceof Element,b=a?g.nodeName:g.documentElement.nodeName;g=a?g:g.documentElement;
if("xdp:xdp"===b||"xdp"===b)d.ut.XfaUtil.prototype.isIE()?g=g.firstElementChild.firstElementChild.firstElementChild:(b=this.evaluateXPath("*/xfa:data/*",g,formBridge.nsResolver,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null),g=b.iterateNext());return g},getNamespaces:function(g){var a={_default:null};f.each(g.attributes,function(b){var c=b.name.match(/^xmlns(?::(.*))?/);if(c=null!=c?c[1]||"_default":null)a[c]=b.value});return a},getNsResolver:function(g){return function(a){return function(b){return formBridge.nsResolver(b)||
a[b]}}(this.getNamespaces(g))},removeDefaultNamespace:function(g){return g.replace(/(\s+)(xmlns=('[^']*'|"[^"]*"))(?=[^<>]*>)/g,"$1")}}})(_,xfalib);
(function(f,d,g){var a={a:"xfa",b:"xfaView",c:"xfaPerf"},b=["off","console","server","consoleServer"],c=d.ut.Logger=d.ut.Class.extend({LOG_COUNT:{level:{FATAL:0,ERROR:0,WARN:0,INFO:0,DEBUG:0,TRACE:0,ALL:0},category:{xfa:0,xfaView:0,xfaPerf:0,Unknown:0}},OFF:0,FATAL:1,ERROR:2,WARN:3,INFO:4,DEBUG:5,TRACE:6,ALL:7,logLevelNames:"OFF FATAL ERROR WARN INFO DEBUG TRACE ALL".split(" "),initialize:function(){var e=this;c._super.initialize.call(this);this.logs={};this.logMessages="";this.logServiceProxy=this.options.logServiceProxy;
this.contextPath=this.options.contextPath;this.renderContext=this.options.renderContext;this.jsonModel.logConfigString&&f.extend(this.jsonModel,this.parse(this.jsonModel.logConfigString));f.each(this.jsonModel.category,function(l){e.LOG_COUNT.category[l]=0})},parse:function(e){var l=e.split("-"),k=f.first(l);l=f.rest(l);var h={on:"0"===k?"false":"true",category:[],level:[],type:b[parseInt(k)]};f.each(l,function(p,q){(q=p.match(/^([A-Za-z]+)(\d+)$/))&&3===q.length?(p=this.getOrElse(a,q[1],this.getOrElse(this.jsonModel,
"categoryAcronyms."+q[1],q[1])),h.category.push(p),h.level.push(parseInt(q[2]))):this.consoleHandler(this.resolveMessage(d.locale.LogMessages["ALC-FRM-901-020"],[p,e]))},this);return h},resolveMessage:function(e,l){l=l||[];return e.replace(/{(\d+)}/g,function(k,h){return"undefined"!=typeof l[h]?l[h]:k})},log:function(e,l,k,h){var p=new Date,q=p.getDate(),t=p.getMonth()+1,m=p.getFullYear(),r=p.getMilliseconds(),u=p.getSeconds(),v=p.getMinutes();p=p.getHours();q=q+"."+t+"."+m+" "+p+":"+v+":"+u+":"+
r;if(this.jsonModel&&this.jsonModel.category)for(t=0;t<this.jsonModel.category.length;t++)0!=l&&this.jsonModel.level[t]>=l&&this.jsonModel.category[t]==e&&"true"==this.jsonModel.on&&(m=k,h&&(m=this.resolveMessage(k,h)),r="",r+=q,r+=" *"+this.logLevelNames[l]+"*",r+=" ["+e+"]",r+="  "+m+"\r\n",this.logMessages+=r,"console"==this.jsonModel.type||"consoleServer"==this.jsonModel.type)&&(++this.LOG_COUNT.category[e||"Unknown"],++this.LOG_COUNT.level[this.logLevelNames[8>parseInt(l)?l:7]],this.consoleHandler(r,
l))},consoleHandler:function(e,l){if("undefined"!=typeof console){l="string"===typeof this.logLevelNames[l]?this.logLevelNames[l].toLowerCase():"log";var k=console.log;"function"===typeof console[l]&&(k=console[l]);k.call(console,"\n\n\n"+e);if("error"!==l)try{n.test}catch(h){h.stack&&k.call(console,h.stack.replace("ReferenceError: n is not defined",""))}}},_getLogServiceProxyUrl:function(){var e="";return e=this.logServiceProxy?e+this.logServiceProxy:e+((this.contextPath&&"/"!=this.contextPath?this.contextPath:
"")+"/content/xfaforms/profiles/default.log.html")},_invokeAtServer:function(e){e={async:!0,url:this._getLogServiceProxyUrl(),type:"POST",contentType:"application/x-www-form-urlencoded; charset\x3dUTF-8",data:e};g.ajax(e)},isServerLoggingEnabled:function(){return"true"!=this.jsonModel.on||"server"!=this.jsonModel.type&&"consoleServer"!=this.jsonModel.type?!1:!0},serverHandler:function(){this._invokeAtServer({logMessages:this.logMessages,renderContext:this.renderContext});this.logMessages=""},fatal:function(e,
l,k){this.log(e,this.FATAL,l,k)},error:function(e,l,k){this.log(e,this.ERROR,l,k)},warn:function(e,l,k){this.log(e,this.WARN,l,k)},info:function(e,l,k){this.log(e,this.INFO,l,k)},debug:function(e,l,k){this.log(e,this.DEBUG,l,k)},trace:function(e,l,k){this.log(e,this.TRACE,l,k)},isLogEnabled:function(e,l){return"true"==this.jsonModel.on&&(e=this.jsonModel.category.indexOf(e),this.jsonModel.level[e]>=l)?!0:!1}})})(_,xfalib,$);
(function(f,d){var g=/\s+/;d.ut.EventClass=d.ut.Class.extend({on:function(a,b,c){var e=f.isFunction(b)?b:null;if(!b||!b.handleEvent&&!e)return!1;var l=this._callbacks||(this._callbacks={});a=l[a]||(l[a]=[]);if(e){c=c||this;if(f.find(a,function(k){return k.fn==e&&k.context==c},this))return!1;a.push({fn:e,context:c})}else{if(~a.indexOf(b))return!1;a.push(b)}return!0},off:function(a,b,c){var e,l;if(l=this._callbacks){if(!a&&!b)return delete this._callbacks,this;var k=f.isFunction(b)?b:null;for(a=a?a.split(g):
f.keys(l);e=a.shift();)l[e]=f.filter(l[e],function(h){if("undefined"!==typeof b){if(k&&h.fn==k&&h.context==c||!k&&b===h)return!1}else return!1;return!0}),l[e].length||delete l[e];return this}},trigger:function(a){var b,c;if(!(c=this._callbacks))return this;a=a.split(g);for(var e=f.rest(arguments);b=a.shift();)f.each(c[b],function(l){l.fn&&l.context?l.fn.apply(l.context,e):f.isFunction(l.handleEvent)&&l.handleEvent.apply(l,e)});return this}})})(_,xfalib);
(function(f,d,g){var a=g.ut.XfaUtil=function(){},b=null,c=!1,e=[],l=function(k){e.push(k);!1===c&&(d(window).one("destroy.xfa",function(){f.each(e,function(h){clearTimeout(h)});e=[];c=!1}),c=!0)};f.extend(a.prototype,{_globalUniqueId:(new Date).getTime(),logger:null,formScaleFactor:1,getOrElse:g.ut.Class.prototype.getOrElse,_xtgEventName:{$formready:"ready",$layoutready:"ready"},generateUID:function(){return"UID"+ ++a.prototype._globalUniqueId},matchJsonType:function(k,h){return k&&h&&a.prototype.getOrElse(k._class,
"").toLowerCase()==(""+h).toLowerCase()},$data:function(k,h,p){d.data(k,"_xfaInitialized")||(d(k).data(),d.data(k,"_xfaInitialized",!0));return d.data(k,h,p)},$css:function(k,h){var p={fillOpacity:!0,"fill-opacity":!0,fontWeight:!0,"font-weight":!0,lineHeight:!0,"line-height":!0,zIndex:!0,"z-index":!0,opacity:!0,orphans:!0,widows:!0,zoom:!0},q;for(q in h){var t=h[q];f.isNumber(t)&&!p[q]&&(t+="px");k.style[q]=t}},isTableHF:function(k){k=(f.find(k.children,function(h){return"assist"==h._class},this)||
{}).role;return"TH"==k||"TF"==k?!0:!1},getUiOneOfChildTag:function(k){if(k=f.find(k.children,function(p){return"ui"==p._class})){var h=g.runtime.xfa._templateSchema._getOneOfChild("ui");if(k=f.find(k.children,function(p){return 1==h[p._class]}))return k._class}},dIndexOf:function(k,h){var p=-1;f.find(k,function(q,t){return q==h&&(p=t)});return p},splitStringByWidth:function(k,h,p){var q=k.length;do{var t=g.view.util.TextMetrics.measureExtent(k.slice(0,q),{refEl:p,maxWidth:-1}).width;q--}while(t>h);
return q!=k.length-1?k.slice(0,q+1):k},isRepeatabeEl:function(k){return"subform"==k||"subformSet"==k?!0:!1},stripOrCall:function(k,h,p){if(k)return{changed:!1,jsonDifference:{}};if(f.isFunction(h))return h.apply(this,p)},partialStripOrCall:function(k,h){h=h.call(this,k);h.changed||(1===k?h={changed:!0,jsonDifference:{_class:this.jsonModel._class,name:this.jsonModel.name}}:h.jsonDifference={});return h},stripObject:function(k,h){if(f.isEmpty(k)||!f.isObject(k))return!0;var p=!1;f.each(f.keys(k),function(q){var t=
!1;f.contains(h,q)?p=!0:(f.isArray(k[q])?f.each(k[q],function(m){m=a.prototype.stripObject(m,h);t=t||m}):f.isObject(k[q])&&(t=a.prototype.stripObject(k[q],h)),t?p=!0:delete k[q])});return p},computeDomJsonDiff:function(k,h){var p=!0;k.hasOwnProperty("_modelChanged")&&(p=k._modelChanged);var q={};p?this.copyObject(k.jsonModel,q,{exceptions:["children","{default}","extras"]}):q={_class:k.className};!p&&k.jsonModel.hasOwnProperty("name")&&(q.name=k.jsonModel.name);"FS_EXTRAS"===k.name&&3===h&&(k._childModified=
!0);return{changed:p,jsonDifference:q}},getLogger:function(){return a.prototype.logger||a.prototype.getOrElse(g,"runtime.xfa.Logger",null)},getErrorManager:function(){return a.prototype.getOrElse(g,"runtime.xfa.ErrorManager",null)},XFA_CLICK_EVENT:"xfaclick",XFA_EXIT_EVENT:"xfaexit",XFA_ENTER_EVENT:"xfaenter",XFA_CHANGE_EVENT:"xfachange",XFA_PREOPEN_EVENT:"xfapreopen",btwn:function(k,h,p){return k>h&&k<p},isWebkit:function(){return!!d.browser.webkit||/webkit/.test(navigator.userAgent.toLowerCase())||
!!window.chrome||!!d.browser.chrome||/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||!!d.browser.safari||!!window.webkitURL||/safari/.test(navigator.userAgent.toLowerCase())&&/apple computer/.test(navigator.vendor.toLowerCase())},clearTimeoutOnDestroy:function(k){l(k)},isSafari:function(){return/safari/.test(navigator.userAgent.toLowerCase())&&/apple computer/.test(navigator.vendor.toLowerCase())},getLocaleStrings:function(){return g.locale.Strings},getLogMessages:function(){return g.locale.LogMessages},
registerLocaleProperties:function(k){b=k},getDefaultLocaleProperty:function(k){var h=b||this.getOrElse(g,"script.Xfa._defaultLocale",null);return this.getOrElse(h,k,null)},encodeScriptableTags:function(k){if(f.isString(k))return k.replace(/<(\/?)(script[^<>]*)>/gi,"\x26lt;$1$2\x26gt;").replace(/<(\/?)(img[^<>]*)>/gi,"\x26lt;$1$2\x26gt;").replace(/<(\/?)(video[^<>]*)>/gi,"\x26lt;$1$2\x26gt;").replace(/<(\/?)(audio[^<>]*)>/gi,"\x26lt;$1$2\x26gt;")},jqId:function(k){return"#"+k.replace(/(#|:|\.|\[|\])/g,
"\\$1")},_triggerOnBridge:function(k,h,p,q,t){h=g.script.XfaModelEvent.createEvent(k,h,p,q,t);formBridge&&window.formBridge.trigger(k,h)},padString:function(k,h,p){k+="";return k.length>=h?k:Array(h-k.length+1).join(p||"0")+k},isIE:function(){return d.browser.msie||"Netscape"===navigator.appName&&navigator.userAgent.match(/Trident\//)},detectIE:function(){if(d.browser.msie&&d.browser.version&&parseInt(d.browser.version,10))return parseInt(d.browser.version,10);var k=window.navigator.userAgent,h=k.indexOf("MSIE ");
if(0<h)return parseInt(k.substring(h+5,k.indexOf(".",h)),10);if(0<k.indexOf("Trident/"))return h=k.indexOf("rv:"),parseInt(k.substring(h+3,k.indexOf(".",h)),10);h=k.indexOf("Edge/");return 0<h?parseInt(k.substring(h+5,k.indexOf(".",h)),10):!1},detectChrome:function(){return!!window.chrome||!!d.browser.chrome||/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())},isHTML:function(k){if(k&&/<[a-z][\s\S]*>/.test(k))try{return 0<d(k).length}catch(h){return!1}else return!1},isNonPrintableKey:function(k){return k&&
!f.contains("MozPrintableKey Divide Multiply Subtract Add Enter Decimal Spacebar Del".split(" "),k)&&1!=k.length},_isIpad:function(){return null!=navigator.userAgent.match(/iPad/i)},_tableCheckForAccessibility:function(k){var h=k.model.getElement("assist",0,!0);return this.getOrElse(k,"layoutModel.layout",null)==g.view.LayoutConst.LAYOUT_TABLE||"Table"==this.getOrElse(h,"role",null)},_getToolTipText:function(k){var h=k.getElement("assist",0,!0),p="";1!=this.getOrElse(h,"speak.disable",0)&&(p=this.getOrElse(h,
"toolTip.value","")||this.getOrElse(h,"speak.value","")||this.getOrElse(k,"jsonModel.name",""));return p},_getMandatoryMessage:function(k){var h=k._defaults.validate.message.defaultMessage;return(k=this.getOrElse(k,"validate.message.nullTest",h))&&k.value?k.value:h.value},_compareVal:function(k,h,p){return k&&h?p?k>=h:k>h:!1}});if(d.browser.msie||d.browser.mozilla)a.prototype.$css=function(k,h){d(k).css(h)}})(_,$,xfalib);
(function(f,d,g){g.ut.Utilities={isIE11:function(){return!!navigator.userAgent.match(/Trident.*rv:11\./)},checkMinMozillaVersion:function(a){return!this.isIE11()&&d.browser.mozilla&&parseInt(d.browser.version)>=a},getObjectFromKeyValueStringList:function(a){var b={},c;f.each(a,function(e,l){(c=e.split("\x3d"))&&1<c.length&&(b[c[0]]=c[1])});return b},_getNameWithoutMarker:function(a){var b=a.indexOf("__afAttachment__");-1!==b&&(a=a.substring(b+16,a.length));return a},_isDataContainerSupported:function(){try{var a=
new DataTransfer;if(a&&a.items)return!0}catch(b){}return!1}}})(_,$,xfalib);
(function(f,d){(d.ut.Scanner=d.ut.Class.extend({initialize:function(){this._pos=0},isEOF:function(){return this.jsonModel._str.length<=this._pos},peek:function(){return this.isEOF()?null:this.jsonModel._str.charAt(this._pos)},optionalConsumeChar:function(g){return this.jsonModel._str.charAt(this._pos)==g?(this._pos++,g):null},getNCharIQS:function(){this._pos++;if(this.jsonModel._str.length<=this._pos){var g=this.jsonModel._str.charAt(this._pos);if("'"!=g)return g;if(moveNextExpectedChar("'"))return this.jsonModel._str.charAt(this._pos)}return null},
moveNextExpectedChar:function(g){for(this._pos++;this._pos<this.jsonModel._str.length&&this.jsonModel._str.charAt(this._pos)!=g;)this._pos++;return this._pos<this.jsonModel._str.length},readInteger:function(g){if(this.pos+g>this.jsonModel._str.length)return null;var a=d.ut.PictureUtils.parseIntExact(this.jsonModel._str,this._pos,g);this._pos+=g;return a}})).lookupNext=function(g,a,b){var c=g.length;if(a>=c)return null;var e={};e.startPos=a;var l=g.charAt(a),k=!1;if("'"==l)for(b=a+1;b<c;b++){if("'"==
g.charAt(b)){e.type=1;e.len=b-a+1;k=!0;break}}else{if("a"<=l&&"z">=l||"A"<=l&&"Z">=l||b.call(null,l)){k=c;for(b=1;a+b<c;b++)if(g.charAt(a+b)!=l){k=a+b;break}e.type=2;e.len=k-a;e.patChar=l;e.patPos=a}else e.type="?"==l||"+"==l||"*"==l?3:4,e.len=1;k=!0}if(k)return e;throw"Picture is invalid.";}})(_,xfalib);
(function(f,d){var g=d.ut.PictureFmt=function(){};g.DatePicturePattern=/^date(?:\([a-zA-Z]*_[a-zA-Z]*\))?\{([\w\W]*?)\}$/;g.TimePicturePattern=/^time(?:\([a-zA-Z]*_[a-zA-Z]*\))?\{([\w\W]*?)\}$/;g.TextPicturePattern=/^text\{([\w\W]*?)\}$/;g.NumPicturePattern=/^num\{([\w\W]*?)\}$/;g.parse=function(a,b,c){c=new d.ut.PictureEngine({jsonModel:{locale:c}});var e=g.DatePicturePattern.exec(b);if(e&&e[1])return c.parseDate(a,e[1]);if((e=g.TimePicturePattern.exec(b))&&e[1])return c.parseTime(a,e[1]);if((e=
g.TextPicturePattern.exec(b))&&e[1])return c.parseText(a,e[1]);if((e=g.NumPicturePattern.exec(b))&&e[1])return c.parseNumeric(a,e[1]);throw"Invalid picture clause "+b;};g.format=function(a,b,c,e,l){var k=new d.ut.PictureEngine({jsonModel:{locale:c}}),h=g.DatePicturePattern.exec(b);if(h&&h[1])return k.formatDate(a,h[1]);if((h=g.TimePicturePattern.exec(b))&&h[1])return k.formatTime(a,h[1]);if((h=g.TextPicturePattern.exec(b))&&h[1])return k.formatText(a,h[1],e);if((h=g.NumPicturePattern.exec(b))&&h[1])return k.formatNumeric(a,
h[1],c,e,l);throw"Invalid picture clause "+b;};g.formatTest=function(a,b,c,e,l){try{var k=g.format(a,b,c,e,l)}catch(p){return!1}if(f.isString(k)){try{var h=g.parse(k,b,c)}catch(p){return!1}if(!f.isString(h)&&h!==k)return!1}else return!1;return!0};g.parseDate=function(a,b,c){var e=g.DatePicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});return e&&e[1]?c.parseDate(a,e[1]):c.parseDate(a,b)};g.formatDate=function(a,b,c){var e=g.DatePicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});
return e&&e[1]?c.formatDate(a,e[1]):c.formatDate(a,b)};g.parseTime=function(a,b,c){var e=g.TimePicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});return e&&e[1]?c.parseTime(a,e[1]):c.parseTime(a,b)};g.formatTime=function(a,b,c){var e=g.TimePicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});return e&&e[1]?c.formatTime(a,e[1]):c.formatTime(a,b)};g.parseText=function(a,b,c){var e=g.TextPicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});return e&&
e[1]?c.parseText(a,e[1]):c.parseText(a,b)};g.formatText=function(a,b,c,e){var l=g.TextPicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});return l&&l[1]?c.formatText(a,l[1],e):c.formatText(a,b,e)};g.parseNumeric=function(a,b,c){var e=g.NumPicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});return e&&e[1]?c.parseNumeric(a,e[1]):c.parseNumeric(a,b)};g.formatNumeric=function(a,b,c){var e=g.NumPicturePattern.exec(b);c=new d.ut.PictureEngine({jsonModel:{locale:c}});
return e&&e[1]?c.formatNumeric(a,e[1]):c.formatNumeric(a,b)};g.parseDateTime=function(a,b,c,e,l){};g.formatDateTime=function(a,b,c,e,l){}})(_,xfalib);
(function(f,d){var g=d.ut.PictureUtils=function(){};g.padding=function(b,c,e,l){return(["0","00","000","0000"][c-1]+b).slice(-c)};g.parseIntAggressive=function(b,c,e){for(var l={},k=0,h=-1,p=0;p<e&&c+p<b.length;p++){var q=b.charAt(c+p);if("0"<=q&&"9">=q)k=10*k+(q-0);else{h=p;break}}-1==h&&(h=e);l.value=k;l.len=h;return l};g.parseIntExact=function(b,c,e){var l=0;g.assert(c+e<=b.length,"mismatch");for(var k=0;k<e;k++){var h=b.charAt(c+k);if("0"<=h&&"9">=h)l=10*l+(h-0);else throw"unexpected currentChar in PictureUtils.parseInt";
}return l};g.isDigit=function(b){return/[0-9]/.test(b)};g.inString=function(b,c){return 0<=c.indexOf(b)};var a=/[\u0041-\u005a\u0061-\u007a\u00aa-\u00aa\u00b5-\u00b5\u00ba-\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u0236\u0250-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ee-\u02ee\u037a-\u037a\u0386-\u0386\u0388-\u038a\u038c-\u038c\u038e-\u03a1\u03a3-\u03ce\u03d0-\u03f5\u03f7-\u03fb\u0400-\u0481\u048a-\u04ce\u04d0-\u04f5\u04f8-\u04f9\u0500-\u050f\u0531-\u0556\u0559-\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u063a\u0640-\u064a\u066e-\u066f\u0671-\u06d3\u06d5-\u06d5\u06e5-\u06e6\u06ee-\u06ef\u06fa-\u06fc\u06ff-\u06ff\u0710-\u0710\u0712-\u072f\u074d-\u074f\u0780-\u07a5\u07b1-\u07b1\u0904-\u0939\u093d-\u093d\u0950-\u0950\u0958-\u0961\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2-\u09b2\u09b6-\u09b9\u09bd-\u09bd\u09dc-\u09dd\u09df-\u09e1\u09f0-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e-\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd-\u0abd\u0ad0-\u0ad0\u0ae0-\u0ae1\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d-\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b71-\u0b71\u0b83-\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c-\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb5\u0bb7-\u0bb9\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c60-\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd-\u0cbd\u0cde-\u0cde\u0ce0-\u0ce1\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d60-\u0d61\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd-\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e81-\u0e82\u0e84-\u0e84\u0e87-\u0e88\u0e8a-\u0e8a\u0e8d-\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5-\u0ea5\u0ea7-\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd-\u0ebd\u0ec0-\u0ec4\u0ec6-\u0ec6\u0edc-\u0edd\u0f00-\u0f00\u0f40-\u0f47\u0f49-\u0f6a\u0f88-\u0f8b\u1000-\u1021\u1023-\u1027\u1029-\u102a\u1050-\u1055\u10a0-\u10c5\u10d0-\u10f8\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1206\u1208-\u1246\u1248-\u1248\u124a-\u124d\u1250-\u1256\u1258-\u1258\u125a-\u125d\u1260-\u1286\u1288-\u1288\u128a-\u128d\u1290-\u12ae\u12b0-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0-\u12c0\u12c2-\u12c5\u12c8-\u12ce\u12d0-\u12d6\u12d8-\u12ee\u12f0-\u130e\u1310-\u1310\u1312-\u1315\u1318-\u131e\u1320-\u1346\u1348-\u135a\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7-\u17d7\u17dc-\u17dc\u1820-\u1877\u1880-\u18a8\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1d00-\u1d6b\u1e00-\u1e9b\u1ea0-\u1ef9\u1f00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59-\u1f59\u1f5b-\u1f5b\u1f5d-\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe-\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071-\u2071\u207f-\u207f\u2102-\u2102\u2107-\u2107\u210a-\u2113\u2115-\u2115\u2119-\u211d\u2124-\u2124\u2126-\u2126\u2128-\u2128\u212a-\u212d\u212f-\u2131\u2133-\u2139\u213d-\u213f\u2145-\u2149\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312c\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fa5\ua000-\ua48c\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e-\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/;
g.isLetter=function(b){return a.test(b)};g.isLetterOrDigit=function(b){return this.isLetter(b)||this.isDigit(b)};g.skipUntil=function(b,c,e){for(var l=e;l<b.length;){var k=l;if(0<=c.indexOf(b.charAt(k++)))break;l=k}return l-e};g.matchString=function(b,c,e){if(c+e.length>b.length)return!1;for(var l=0;l<e.length;l++)if(e.charAt(l)!=b.charAt(c+l))return!1;return!0};g.assert=function(b,c){if(!b)throw c;};g.getLocaleObject=function(b,c){return null!==b&&d.runtime.xfa?d.runtime.xfa._getLocaleSymbols(b,
c):d.ut.XfaUtil.prototype.getDefaultLocaleProperty(c)};g.getHashOfLocaleObject=function(b,c){if(!g.getHashOfLocaleObject[b+"_"+c]){var e={};f.each(g.getLocaleObject(b,c),function(l){l=(l+"").toLowerCase();for(var k=0,h=0;h<l.length;h++)k+=(h+1)*l.charCodeAt(h);e[k]=e[k]||[];e[k].push(l)});g.getHashOfLocaleObject[b+"_"+c]=e}return g.getHashOfLocaleObject[b+"_"+c]};g.convertNumberToLocale=function(b,c){b=g.getLocaleObject(b,"numberSymbols.zero").charCodeAt(0);c+="";for(var e=[],l=0;l<c.length;l++)e.push(String.fromCharCode(b+
parseInt(c.charAt(l))));return e.join("")};g.parsePictureClause=function(b){if(null===b||void 0===b)return[];for(var c=!1,e=!1,l=!1,k="",h="",p="",q,t=[],m=/^num$|^text$|^date$/,r=/^[a-zA-Z]*_[a-zA-Z]*$/,u=0,v=0;u<b.length;u++)if(q=b.charAt(u),e&&"'"!==q)p+=q;else switch(q){case "'":if(!c)return null;e=!e;p+=q;break;case "{":if(c||l||""===h)return null;c=!0;break;case "}":if(!c||l&&""===p||""===h)return null;v=0;c=!1;if(null===m.exec(h)||""!==k&&null===r.exec(k))return null;t.push({category:h,mask:p,
locale:k});break;case "|":if(""===h||c||l)return null;h=p=k="";c=l=!1;break;case "(":if(""===h||1===v)return null;c?p+=q:l=!0;v++;break;case ")":if(!l&&!c||0===v)return null;c&&(p+=q);l=!1;v--;break;default:if(c)p+=q;else if(l)k+=q;else if(""===h||""===p&&""===k)h+=q;else return null}return c||l||e||0!==v?null:t}})(_,xfalib);
(function(f,d){d.ut.VisitorBase=d.ut.Class.extend({consume:function(g){switch(g.type){case 1:this.consumeStringLiteral(g);break;case 2:this.consumeSubPattern(g);break;case 3:this.consumeStringWildCard(g);break;case 4:this.consumeCharLiteral(g)}},acceptPatternChar:function(g){return!1},getPicture:function(){return this.jsonModel._sPicture},abstractMethod:function(){throw"Not implemented";},consumeStringWildCard:this.abstractMethod,consumeStringLiteral:this.abstractMethod,consumeCharLiteral:this.abstractMethod,
consumeSubPattern:this.abstractMethod,getResult:this.abstractMethod})})(_,xfalib);
(function(f,d){var g=d.ut.NumPictureDesc=d.ut.Class.extend({initialize:function(){this.hasPercent=this.hasSign=this.hasExpon=this.hasRadix=!1;this.intDigit=this.fracDigit=0;this._mbRightParenSeen=this._mbLeftParenSeen=!1;this._compactPattern();this._xlatePattern();g._super.initialize.call(this)},getPicture:function(){return this.jsonModel._sPicture},_match2Char:function(a,b,c){return c+1<this.jsonModel._sPicture.length?this.jsonModel._sPicture.charAt(c)==a&&this.jsonModel._sPicture.charAt(c+1)==b:
!1},_xlatePattern:function(){for(var a=0,b=d.ut.Scanner.lookupNext(this.jsonModel._sPicture,a,this._acceptPatternChar);null!=b;)this._consume(b),a+=b.len,b=d.ut.Scanner.lookupNext(this.jsonModel._sPicture,a,this._acceptPatternChar)},_compactPattern:function(){for(var a=[],b=0,c=this.jsonModel._sPicture.length;b<c;b++)this._match2Char("D","B",b)?(a.push("D"),b++):this._match2Char("d","b",b)?(a.push("d"),b++):this._match2Char("C","R",b)?(a.push("C"),b++):this._match2Char("c","r",b)?(a.push("c"),b++):
a.push(this.jsonModel._sPicture.charAt(b));this.jsonModel._sPicture=a.join("")},_acceptPatternChar:function(a){return d.ut.PictureUtils.inString(a,"(%$,.)89BCDERSVZbcdrsvzt")},_consume:function(a){2==a.type&&this._subConsume(a.patChar,a.len)},_subConsume:function(a,b){switch(a){case "E":if(1<b||this.hasExpon||0==this.fracDigit+this.intDigit)throw"Illegal Numeric Picture: more than one Expon";this.hasExpon=!0;break;case "(":if(1<b||this._mbLeftParenSeen||0<this.fracDigit+this.intDigit)throw"Illegal Numeric Picture:  ()";
this._mbLeftParenSeen=!0;break;case ")":if(1<b||!this._mbLeftParenSeen||this._mbRightParenSeen)throw"Illegal Numeric Picture:  ()";this._mbRightParenSeen=!0;0<this.fracDigit+this.intDigit&&(this.hasSign=!0);break;case "S":case "s":case "C":case "c":case "D":case "d":this.hasSign=!0;break;case "%":this.hasPercent=!0;break;case ".":case "V":case "v":if(1<b||this.hasRadix)throw"Illegal Numeric Picture: too many vV.";this._mbFracStartSeen=this.hasRadix=!0;break;case "8":case "9":case "Z":case "z":this.hasRadix?
this.fracDigit+=b:this.intDigit+=b}},parseNumberInfo:function(a){var b=a,c=Number(b),e=!1;0>c&&(e=!0,c=-c,b=b.replace("-",""));this.hasPercent&&(c*=100,b=""+c);var l=0;if(this.hasExpon){b=Math.pow(10,this.intDigit);if(c<b)for(;10*c<b;)c*=10,l--;else for(;c>b;)c/=10,l++;b=c+""}var k=b.indexOf(".",0);this.fracDigit<(0>k?0:b.length-k-1)&&(c=c.toFixed(this.fracDigit),b=c+"");0==b.indexOf("0")&&0!=a.indexOf("0")&&(b=b.substring(1));k=b.indexOf(".",0);a=0>k?b.length:k;c=this.intDigit-a;if(0>c)throw"Exit: most significant "+
c+" digit lost";return{integerDigit:a,radixPos:k,fractionDigit:0>k?0:b.length-k-1,msText:b,shift:l,isNegative:e,padding:c}}});g.gsDB="DB";g.gsCR="CR";g.gsE="E";g.gsDSP="  ";g.gsSSP=" "})(_,xfalib);
(function(f,d){var g=d.ut.TimeInfo=d.ut.Class.extend({initialize:function(){this.mThousandthOfSecond=this.mSecondOfMinute=this.mMinuteOfHour=this.mHourOfDay=this.mHourOfMeriDiem=-1},getISOTime:function(){var a="";0<this.mThousandthOfSecond&&(a="-"+this.formatNum(this.mThousandthOfSecond,3));if(0<this.mSecondOfMinute||""!=a)a=this.formatNum(this.mSecondOfMinute,2)+a,a=":"+a;if(0<this.mMinuteOfHour||""!=a)a=this.formatNum(this.mMinuteOfHour,2)+a,a=":"+a;return a=this.formatNum(this.mHourOfDay,2)+a},
formatNum:function(a,b){0>a&&(a=0);return d.ut.PictureUtils.padding(a,b)},getDate:function(){var a=new Date;this.setTime(a);return a},setTime:function(a){a.setHours(this.mHourOfDay);a.setMinutes(this.mMinuteOfHour);a.setSeconds(this.mSecondOfMinute);a.setMilliseconds(this.mThousandthOfSecond)}});g.Parse=function(a,b){var c=new d.ut.Scanner({jsonModel:{_str:a}});a=c.readInteger(2);b=-1;c.isEOF()||(c.optionalConsumeChar(":"),b=c.readInteger(2));var e=-1;c.isEOF()||(c.optionalConsumeChar(":"),e=c.readInteger(2));
var l=-1;c.isEOF()||(c.optionalConsumeChar("-"),l=c.readInteger(3));c=new d.ut.TimeInfo;g.setPropertyIfNotNull(c,a,"mHourOfDay");g.setPropertyIfNotNull(c,b,"mMinuteOfHour");g.setPropertyIfNotNull(c,e,"mSecondOfMinute");g.setPropertyIfNotNull(c,l,"mThousandthOfSecond");return c};g.setPropertyIfNotNull=function(a,b,c){null!=b&&(b=Number(b),isNaN(b)||(a[c]=b))}})(_,xfalib);
(function(f,d){var g=d.ut.DateInfo=d.ut.Class.extend({initialize:function(a){a&&!a.isParsingCall&&(this.date=new Date,this._year=this.date.getFullYear(),this._month=this.date.getMonth()+1,this._day=this.date.getDay());g._super.initialize.call(this)},formatNum:function(a,b){0>a&&(a=0);return d.ut.PictureUtils.padding(a,b)},getDate:function(){return this.date},setDate:function(){this.date=new Date(this._year,this._month-1,this._day)},getISODate:function(){var a=[];a.push(this.formatNum(this._year,4));
a.push("-");a.push(this.formatNum(this._month,2));a.push("-");a.push(this.formatNum(this._day,2));return a.join("")},year:function(a){if(a&&0<a&&9999>=a)this._year=a;else throw"undefined year";},month:function(a){if(a&&0<a&&13>a)this._month=a;else throw"Invalid month "+a;},_leapYear:function(){var a=this._year;return 0==a%400||0!=a%100&&0==a%4},_maxDate:function(a){return this._leapYear()&&2==a?29:g.dates[a-1]},day:function(a){if(a&&0<a&&a<=this._maxDate(this._month||0))this._day=a;else throw"Invalid Date "+
a+" for the month "+this._month;},validate:function(a,b,c){this.year(a);this.month(b);this.day(c)}});g.ParseIsoString=function(a,b){if((b=/^(\d{4})(?:-?(\d{1,2})(?:-?(\d{1,2}))?)?(?:T((\d{2}):(\d{2}):(\d{2}))Z)?$/.exec(a))&&4<=b.length){var c=new g;a=new Date(a);if(b[4]&&null!=a)c.year(a.getFullYear()),c.month(a.getMonth()+1),c.day(a.getDate());else try{c.year(Number(b[1])),c.month(Number(b[2])),c.day(Number(b[3]))}catch(e){return null}c.setDate();return c}return null};g.Parse=function(a,b,c){b=b||
"en_US";var e=d.ut.PictureUtils.getLocaleObject(b,"datePatterns"),l=this.ParseIsoString(a,b);if(!f.isEmpty(l))return l;!1===c&&f.find(e,function(k){try{return l=d.ut.PictureFmt.parseDate(a,k,b),!0}catch(h){return!1}});l=l||a;return g.ParseIsoString(l)};g.dates=[31,28,31,30,31,30,31,31,30,31,30,31];g.daysOfWeek="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")})(_,xfalib);
(function(f,d){d.ut.PictureEngine=d.ut.Class.extend({_lookupNext:d.ut.Scanner.lookupNext,MAX_XFA_PREC:8,MAX_DBL_DIG:18,MAX_INT_DIG:10,MAX_DBL_WIDTH:15,INTEGRAL_FMT:0,DECIMAL_FMT:1,CURRENCY_FMT:2,PERCENT_FMT:3,parseDate:function(g,a,b){return this._acceptVisitor(new d.ut.DateParsingVisitor({jsonModel:{_sPicture:a,_dataString:g,_locale:this.jsonModel.locale}}))},formatDate:function(g,a){g=d.ut.DateInfo.Parse(g,this.jsonModel.locale,"undefined"!==typeof a);return null==g?null:this._acceptVisitor(new d.ut.DateFormattingVisitor({jsonModel:{_sPicture:a,
_dateInfo:g,_locale:this.jsonModel.locale}}))},parseTime:function(g,a){return this._acceptVisitor(new d.ut.TimeParsingVisitor({jsonModel:{_sPicture:a,_dataString:g}}))},formatTime:function(g,a){g=d.ut.TimeInfo.Parse(g,this.jsonModel.locale);return null==g?null:this._acceptVisitor(new d.ut.TimeFormattingVisitor({jsonModel:{_sPicture:a,_timeInfo:g}}))},parseText:function(g,a){return this._acceptVisitor(new d.ut.TextParsingVisitor({jsonModel:{_sPicture:a,_dataString:g}}))},formatText:function(g,a,b){return this._acceptVisitor(new d.ut.TextFormattingVisitor({jsonModel:{_sPicture:a,
_text:g,relaxed:b}}))},parseNumeric:function(g,a){g=new d.ut.NumParsingVisitor({jsonModel:{_sPicture:a,_dataString:g,_locale:this.jsonModel.locale}});g.parse();return g.getResult()},formatNumeric:function(g,a,b,c,e){b=a;c&&e&&(b=this.getNumberFormat(a,1,{formatOption:"WITH_GROUPINGS",precision:this.getNumberPrecision(g),width:g.length}));return this._acceptVisitor(new d.ut.NumFormattingVisitor({jsonModel:{_sPicture:b,_locale:this.jsonModel.locale},text:g}))},_acceptVisitor:function(g){this._scanPattern(g);
return g.getResult()},_scanPattern:function(g){for(var a=0,b=g.getPicture(),c=this._lookupNext(b,a,g.acceptPatternChar);null!=c;)g.consume(c),a+=c.len,c=this._lookupNext(b,a,g.acceptPatternChar)},_swallow:function(g,a,b){if(f.isEmpty(g)||0==b)return g;a+b>g.length&&(b=a+b-g.length);return g.substr(0,a)+g.substr(offset+b)},_replaceAll:function(g,a,b,c){return g.substr(0,b)+a+g.substr(b+c)},_skipOver:function(g,a,b){for(var c=b,e;c<g.length;){e=c;if(-1==a.indexOf(g[e]))break;e++;c=e}return c-b},getNumberFormat:function(g,
a,b){if(a<this.INTEGRAL_FMT||this.PERCENT_FMT<a)a=this.DECIMAL_FMT;var c;-1!=(c=g.indexOf("|"))&&(g=this._swallow(g,0,c+1));-1==(c=g.indexOf("."))&&-1==(c=g.indexOf("v"))&&-1==(c=g.indexOf("V"))&&-1==(c=g.indexOf("E"))&&-1==(c=g.indexOf(" "))&&-1==(c=g.indexOf("%"))&&(c=g.length);c&&1!=this._skipOver(g,"89zZ",c-1)&&(c=g.length);var e;if(-1!=(e=g.indexOf("z,"))){var l=c;var k;-1!=(k=g.indexOf(",",e+2))&&(l=k);l=l>e+2?Array(l-e).join("z"):Array(1).join("z")}else e=0;k=0;var h=this.MAX_INT_DIG;if(a!=
this.INTEGRAL_FMT){k=b.precision;var p=0==(k&128);k&=127;127==k&&(k=this._skipOver(g,"89zZ",c+1));h=void 0!=b.width?b.width:this.MAX_DBL_DIG;-1!=g.indexOf("s")&&(h+=1);-1!=g.indexOf("(")&&(h+=1);-1!=g.indexOf(")")&&(h+=1);var q=this._skipOver(g,"89zZ",c+1);0<k&&k<q&&(h+=q-k);if(p&&0<k&&h>k)for(k<=g.length-1-c&&(h+=g.length-1-c-k),p=h-1;p>this.MAX_DBL_WIDTH&&!(k<=g.length-1-c);p--)k--}a==this.CURRENCY_FMT&&(-1!=g.indexOf("$")&&h++,-1!=g.indexOf(" ")&&(h+=1));if(a==this.PERCENT_FMT)a=this._skipOver(g,
"89zZ",c+1),g=this._replaceAll(g,"",a,0),-1!=g.indexOf("%")&&h++;else if(a==this.INTEGRAL_FMT||0==k)a=this._skipOver(g,"89zZ",c+1),g=this._replaceAll(g,"",c,a+1);else if("WITH_EIGHTS"==b.formatOption){for(;-1!=(a=g.indexOf("z"));)this._replaceAll(g,"8",a,1);for(;g.Length()-c<=k;)g=this._replaceAll(g,"8",c+1,0)}else if("WITH_ZEDS"==b.formatOption&&"KEEP_NINES"!=b.formatOption){for(;-1!=(a=g.indexOf("9"));)this._replaceAll(g,"z",a,1);for(;g.Length()-c<=k;)this._replaceAll(g,"z",c+1,0)}if(l)if("WITHOUT_GROUPINGS"==
b.formatOption)for(k=e+1,this._replaceAll(g,"z",k,1);-1!=k&&k<c;)k=g.indexOf(","),g=this._replaceAll(g,"z",k,1);else"WITH_GROUPINGS"==b.formatOption&&(l=this._replaceAll(l,",",0,1),h+=(h+l.length)/l.length);else l="z";for(;g.length<h;)g=this._replaceAll(g,l,e+1,0);return g},getNumberPrecision:function(g){var a,b=-1;if(-1!=(a=g.indexOf("."))){for(;a<=g.length;a++)b++;return b}return 0}})})(_,xfalib);
(function(f,d){var g=d.ut.FormattingVisitorBase=d.ut.VisitorBase.extend({initialize:function(){this._buffer=[];g._super.initialize.call(this)},consumeStringWildCard:function(a){this._buffer.push(" ")},consumeStringLiteral:function(a){this._buffer.push(this.jsonModel._sPicture.substr(a.startPos+1,a.len-2))},consumeCharLiteral:function(a){this._buffer.push(""+this.jsonModel._sPicture.charAt(a.startPos))}})})(_,xfalib);
(function(f,d){var g=d.ut.ParsingVisitorBase=d.ut.VisitorBase.extend({initialize:function(){this._strLen=this.jsonModel._dataString.length;this._strPos=0;g._super.initialize.call(this)},consumeStringWildCard:function(a){if("?"==chr)this._strPos<this._strLen&&(this._strPos+=1);else if("+"==chr){if(this._strPos>=this._strLen)throw"Mismatch";for(this._strPos+=1;this._strPos<this._strLen;)this._strPos+=1}else if("*"==chr)for(;this._strPos<this._strLen;)this._strPos+=1},consumeStringLiteral:function(a){for(var b=
0;b<a.len-2;b++)if(this.jsonModel._sPicture.charAt(a.startPos+b+1)!=this.jsonModel._dataString.charAt(this._strPos+b))throw"Mismatch"+this.jsonModel._sPicture.substr(a.startPos,a.len);this._strPos+=a.len-2},consumeCharLiteral:function(a){if(this.jsonModel._sPicture.charAt(a.startPos)==this.jsonModel._dataString.charAt(this._strPos))this._strPos+=1;else throw"Mismatch";}})})(_,xfalib);
(function(f,d){var g=d.ut.PictureUtils;d.ut.DateFormattingVisitor=d.ut.FormattingVisitorBase.extend({consumeSubPattern:function(a){var b=a.len;switch(a.patChar){case "D":a=this.jsonModel._dateInfo.date.getDate();switch(b){case 2:a=g.padding(a,2)}this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,a));break;case "J":break;case "M":a=this.jsonModel._dateInfo.date.getMonth();switch(b){case 1:this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,a+1));break;case 2:this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,
g.padding(a+1,2)));break;case 3:b=g.getLocaleObject(this.jsonModel._locale,"calendarSymbols.abbrmonthNames");this._buffer.push(b[a]);break;case 4:b=g.getLocaleObject(this.jsonModel._locale,"calendarSymbols.monthNames"),this._buffer.push(b[a])}break;case "E":a=this.jsonModel._dateInfo.date.getDay();switch(b){case 1:this._buffer.push(a);break;case 3:b=g.getLocaleObject(this.jsonModel._locale,"calendarSymbols.abbrdayNames");this._buffer.push(b[a]);break;case 4:b=g.getLocaleObject(this.jsonModel._locale,
"calendarSymbols.dayNames");this._buffer.push(b[a]);break;default:throw"unsupported Picture Clause ";}break;case "e":break;case "G":break;case "Y":a=this.jsonModel._dateInfo.date.getFullYear();switch(b){case 2:if(2029<a||1930>a)throw"unsupported "+a+" by pattern YY";a=g.padding(a%100,2);break;case 4:a=g.padding(a,4)}this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,a));break;case "w":break;case "W":break;default:throw"Unsupported pattern";}},getResult:function(){return this._buffer.join("")}})})(_,
xfalib);
(function(f,d){var g=d.ut.TextFormattingVisitor=d.ut.FormattingVisitorBase.extend({initialize:function(){this._textPos=0;this._relaxed="undefined"===typeof this.jsonModel.relaxed?!0:this.jsonModel.relaxed;g._super.initialize.call(this)},consumeSubPattern:function(a){var b=a.patChar;a=a.len;for(var c=0;c<a&&(!this._relaxed||this._textPos<this.jsonModel._text.length);c++)switch(b){case "9":var e=this.jsonModel._text.charAt(this._textPos++);if(!d.ut.PictureUtils.isDigit(e))throw"TextFormatting: not a digit as expected";this._buffer.push(e);
break;case "A":e=this.jsonModel._text.charAt(this._textPos++);if(!d.ut.PictureUtils.isLetter(e))throw"TextFormatting: not a character as expected";this._buffer.push(e);break;case "O":case "0":e=this.jsonModel._text.charAt(this._textPos++);if(""!==e&&!d.ut.PictureUtils.isLetter(e)&&!d.ut.PictureUtils.isDigit(e))throw"TextFormatting: not a character or digit as expected";this._buffer.push(e);break;case "X":e=this.jsonModel._text.charAt(this._textPos++);this._buffer.push(e);break;case "t":this._buffer.push("\t");
break;default:this._buffer.push(b)}},getResult:function(){if(this._textPos<this.jsonModel._text.length)throw"TextFormatting: picture clause smaller than input Text";return this._buffer.join("")},acceptPatternChar:function(a){return d.ut.PictureUtils.inString(a,"9AO0Xt")},consumeCharLiteral:function(a){this._buffer.push(""+this.jsonModel._sPicture.charAt(a.startPos));this.jsonModel._sPicture.charAt(a.startPos)==this.jsonModel._text.charAt(a.startPos)&&this._textPos++}})})(_,xfalib);
(function(f,d){d.ut.TimeFormattingVisitor=d.ut.FormattingVisitorBase.extend({consumeSubPattern:function(g){var a=g.patChar;g=g.len;switch(a){case "H":case "K":var b=this.jsonModel._timeInfo.mHourOfDay;"K"==a&&(b+=1);switch(g){case 1:this._buffer.push(b);break;case 2:this._buffer.push(d.ut.PictureUtils.padding(b,2))}break;case "M":a=this.jsonModel._timeInfo.mMinuteOfHour;switch(g){case 1:this._buffer.push(a);break;case 2:this._buffer.push(d.ut.PictureUtils.padding(a,2))}break;case "S":a=this.jsonModel._timeInfo.mSecondOfMinute;
switch(g){case 1:this._buffer.push(a);break;case 2:this._buffer.push(d.ut.PictureUtils.padding(a,2))}break;case "F":this._buffer.push(d.ut.PictureUtils.padding(this.jsonModel._timeInfo.mThousandthOfSecond,3));break;default:throw"Unsupported pattern";}},getResult:function(){return this._buffer.join("")}})})(_,xfalib);
(function(f,d){var g=d.ut.PictureUtils,a=d.ut.NumFormattingVisitor=d.ut.FormattingVisitorBase.extend({initialize:function(b){a._super.initialize.call(this);this._textPos=0;this._mbSignAddedToOutput=this._mbDigitAddedToOutput=!1;this._nScannedPatternDigit=0;this._mbRadixSeen=!1;this._pictureDesc=new d.ut.NumPictureDesc({jsonModel:{_sPicture:this.jsonModel._sPicture}});this.jsonModel._sPicture=this._pictureDesc.getPicture();this._numberInfo=this._pictureDesc.parseNumberInfo(b.text);this._mbNegative=
this._numberInfo.isNegative;this._msText=this._numberInfo.msText;this._leadingPadding=this._numberInfo.padding;this._mNumberSymbols=d.ut.PictureUtils.getLocaleObject(this.jsonModel._locale,"numberSymbols");this._mCurrencySymbols=d.ut.PictureUtils.getLocaleObject(this.jsonModel._locale,"currencySymbols")},_checkAndAddDecimalPoint:function(b){this._mAddRadix&&(this._buffer.push(this._fmtStr(this._mNumberSymbols.decimal,b)),this._mAddRadix=!1)},consumeSubPattern:function(b){var c=b.patChar;b=b.len;switch(c){case "9":case "8":case "Z":case "z":for(this._mbSignAddedToOutput||
this._ensureSignIsAdded();0<b--;)if(this._mbRadixSeen)this._nScannedPatternDigit++<this._numberInfo.fractionDigit?(e=this._msText.charAt(this._textPos++),this._ensureCharIsDigit(e),this._checkAndAddDecimalPoint(),this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,e)),this._mbDigitAddedToOutput=!0):"9"==c||"Z"==c?(this._checkAndAddDecimalPoint(),this._buffer.push(this._matchChr(this._mNumberSymbols.zero))):"8"==c&&(e=this._msText.charAt(this._textPos++),""!=e&&this._ensureCharIsDigit(e)&&
(this._checkAndAddDecimalPoint(),this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,e)),this._mbDigitAddedToOutput=!0));else if(this._leadingPadding>this._nScannedPatternDigit++){var e=null;this._mbDigitAddedToOutput?e=this._mNumberSymbols.zero:"9"==c||"8"==c?(e=this._mNumberSymbols.zero,this._mbDigitAddedToOutput=!0):"Z"==c&&(e=" ");e&&this._buffer.push(this._matchChr(e))}else e=this._msText.charAt(this._textPos++),this._ensureCharIsDigit(e),this._buffer.push(g.convertNumberToLocale(this.jsonModel._locale,
e)),this._mbDigitAddedToOutput=!0;break;case "E":this._buffer.push("E");this._buffer.push(""+this._numberInfo.shift);break;case "C":this._buffer.push(this._mbNegative?d.ut.NumPictureDesc.gsCR:d.ut.NumPictureDesc.gsDSP);break;case "c":this._mbNegative&&this._buffer.push(d.ut.NumPictureDesc.gsCR);break;case "D":this._buffer.push(this._mbNegative?d.ut.NumPictureDesc.gsDB:d.ut.NumPictureDesc.gsDSP);break;case "d":this._mbNegative&&this._buffer.push(d.ut.NumPictureDesc.gsDB);break;case "S":case "s":this._mbNegative?
this._buffer.push(this._fmtStr(this._mNumberSymbols.minus)):"S"==c&&this._buffer.push(this._matchChr(" "));break;case "V":case ".":case "v":this._textPos<this._msText.length&&"."==this._msText.charAt(this._textPos)&&this._textPos++;if("V"==c||"."==c)this._mAddRadix=!0;this._mbRadixSeen=!0;this._nScannedPatternDigit=0;break;case 65292:case ",":for(;0<b--;)this._mbDigitAddedToOutput&&this._buffer.push(this._fmtStr(this._mNumberSymbols.grouping)),this._mbCommaSeen=!0;break;case 65284:case "$":for(;0<
b--;)this._buffer.push(this._fmtStr(this._mCurrencySymbols.symbol));break;case 65285:case "%":for(;0<b--;)this._buffer.push(this._fmtStr(this._mNumberSymbols.percent));break;case 65288:case 65289:case "(":case ")":this._buffer.push(this._matchChr(this._mbNegative?c:" "))}},_ensureCharIsDigit:function(b){if("0">b||"9"<b)throw"Nuberic Formatting: not a digit as expected "+b;},_fmtStr:function(b){return b},_matchStr:function(b){return b},_matchChr:function(b){return b},_ensureSignIsAdded:function(){!this._mbNegative||
this._mbDigitAddedToOutput||this._pictureDesc.hasSign||(this._buffer.push(this._mNumberSymbols.minus),this._mbSignAddedToOutput=!0)},getResult:function(){return this._buffer.join("")},acceptPatternChar:function(b){return d.ut.PictureUtils.inString(b,"(%$,.)89BCDERSVZbcdrsvzt")}})})(_,xfalib);
(function(f,d){var g=d.ut.TimeParsingVisitor=d.ut.ParsingVisitorBase.extend({initialize:function(){this._timeInfo=new d.ut.TimeInfo;g._super.initialize.call(this)},consumeSubPattern:function(a){var b=a.patChar;a=a.len;var c=this._strPos,e=a;this._assert(c+a<=this.jsonModel._dataString.length,"Mismatch");switch(b){case "h":if(-1!=this._timeInfo.mHourOfMeriDiem||-1!=this._timeInfo.mHourOfDay)throw"ambiguity time string";b=-1;switch(a){case 1:a=this.parseIntAggressive(this.jsonModel._dataString,c,2);
b=a.value;e=a.len;break;case 2:b=this.parseIntExact(this.jsonModel._dataString,c,2)}this._timeInfo.mHourOfMeriDiem=b-1;this._assert(0<=this._timeInfo.mHourOfMeriDiem&&11>=this._timeInfo.mHourOfMeriDiem,"Invalid Hour Of MeriDiem value.");break;case "k":if(-1!=this._timeInfo.mHourOfMeriDiem||-1!=this._timeInfo.mHourOfDay)throw"ambiguity time string";b=-1;switch(a){case 1:a=this.parseIntAggressive(this.jsonModel._dataString,c,2);b=a.value;e=a.len;break;case 2:b=this.parseIntExact(this.jsonModel._dataString,
c,2)}this._timeInfo.mHourOfMeriDiem=b;this._assert(0<=this._timeInfo.mHourOfMeriDiem&&11>=this._timeInfo.mHourOfMeriDiem,"Invalid hour of meriDiem value.");break;case "H":if(-1!=this._timeInfo.mHourOfMeriDiem||-1!=this._timeInfo.mHourOfDay)throw"ambiguity time string";b=-1;switch(a){case 1:a=this.parseIntAggressive(this.jsonModel._dataString,c,2);b=a.value;e=a.len;break;case 2:b=this.parseIntExact(this.jsonModel._dataString,c,2)}this._timeInfo.mHourOfDay=b;this._assert(0<=this._timeInfo.mHourOfDay&&
23>=this._timeInfo.mHourOfDay,"Invalid hour of day value.");break;case "K":if(-1!=this._timeInfo.mHourOfMeriDiem||-1!=this._timeInfo.mHourOfDay)throw"ambiguity time string";b=-1;switch(a){case 1:a=this.parseIntAggressive(this.jsonModel._dataString,c,2);b=a.value;e=a.len;break;case 2:b=this.parseIntExact(this.jsonModel._dataString,c,2)}this._timeInfo.mHourOfDay=b-1;this._assert(0<=this._timeInfo.mHourOfDay&&23>=this._timeInfo.mHourOfDay,"Invalid hour of day value.");break;case "M":if(-1!=this._timeInfo.mMinuteOfHour)throw"ambiguity time string";
b=-1;switch(a){case 1:a=this.parseIntAggressive(this.jsonModel._dataString,c,2);b=a.value;e=a.len;break;case 2:b=this.parseIntExact(this.jsonModel._dataString,c,2)}this._timeInfo.mMinuteOfHour=b;this._assert(0<=this._timeInfo.mMinuteOfHour&&59>=this._timeInfo.mMinuteOfHour,"Invalid minute of hour.");break;case "S":if(-1!=this._timeInfo.mSecondOfMinute)throw"ambiguity time string";b=-1;switch(a){case 1:a=this.parseIntAggressive(this.jsonModel._dataString,c,2);b=a.value;e=a.len;break;case 2:b=this.parseIntExact(this.jsonModel._dataString,
c,2)}this._timeInfo.mSecondOfMinute=b;this._assert(0<=this._timeInfo.mSecondOfMinute&&59>=this._timeInfo.mSecondOfMinute,"Invalid second of minute.");break;case "F":this._assert(3==a,"Invalid pattern F.");this._timeInfo.mThousandthOfSecond=this.parseIntExact(this.jsonModel._dataString,c,3);this._assert(0<=this._timeInfo.mThousandthOfSecond&&999>=this._timeInfo.mThousandthOfSecond,"Invalid thousand of second.");break;default:throw"Unsupported pattern";}this._strPos+=e},parseIntAggressive:d.ut.PictureUtils.parseIntAggressive,
parseIntExact:d.ut.PictureUtils.parseIntExact,getResult:function(){return this._timeInfo.getISOTime()},getTimeInfo:function(){return this._timeInfo},_assert:function(a,b){if(!a)throw b;}})})(_,xfalib);
(function(f,d){var g=d.ut.TextParsingVisitor=d.ut.ParsingVisitorBase.extend({initialize:function(){g._super.initialize.call(this);this._buffer=[]},consumeSubPattern:function(a){var b=a.patChar;a=a.len;for(var c=0;c<a;c++)switch(b){case "9":var e=this.jsonModel._dataString.charAt(this._strPos++);if(!d.ut.PictureUtils.isDigit(e))throw"TextParsing: not a digit as expected";this._buffer.push(e);break;case "A":e=this.jsonModel._dataString.charAt(this._strPos++);if(!d.ut.PictureUtils.isLetter(e))throw"TextParsing: not a character as expected";
this._buffer.push(e);break;case "O":case "0":e=this.jsonModel._dataString.charAt(this._strPos++);if(!d.ut.PictureUtils.isLetterOrDigit(e))throw"TextParsing: not a character or digit as expected";this._buffer.push(e);break;case "X":e=this.jsonModel._dataString.charAt(this._strPos++);this._buffer.push(e);break;case "t":if("\t"==this.jsonModel._dataString.charAt(this._strPos++))this._buffer.push("\t");else throw"TextParsing: not a Tab as expected";break;default:if(this.jsonModel._dataString.charAt(this._strPos++)==
b)this._buffer.push(b);else throw"TextParsing: not '"+b+"' as expected";}},getResult:function(){if(this._strPos<this.jsonModel._dataString.length)throw"TextParsing: picture clause smaller than input Text";return this._buffer.join("")},acceptPatternChar:function(a){return d.ut.PictureUtils.inString(a,"9AO0Xt")}})})(_,xfalib);
(function(f,d){d.ut.NumParsingVisitor=d.ut.ParsingVisitorBase.extend({initialize:function(g){this._pictureDesc=new d.ut.NumPictureDesc({jsonModel:{_sPicture:this.jsonModel._sPicture}});this.jsonModel._sPicture=this._pictureDesc.getPicture();this._buffer=[];this._strPos=0;this._mbSignSeen=this._mbDigitSeen=this._mbNegative=this._hasRadix=!1;this._mBacktrack=null;this._mbExponSeen=this._hasPercent=!1;this._mNumberSymbols=d.ut.PictureUtils.getLocaleObject(this.options._locale,"numberSymbols");this._mCurrencySymbols=
d.ut.PictureUtils.getLocaleObject(this.options._locale,"currencySymbols")},_lookupNext:d.ut.Scanner.lookupNext,parse:function(){for(var g=0;;){try{for(var a=this._lookupNext(this.jsonModel._sPicture,g,this.acceptPatternChar);null!=a;)this.consume(a),g+=a.len,a=this._lookupNext(this.jsonModel._sPicture,g,this.acceptPatternChar)}catch(b){if(this._mBacktrack){g=this._mBacktrack.patPos;this._buffer.length=0;this._strPos=this._mBacktrack.strPos;this._mbDigitSeen=!1;this._mBacktrack=null;continue}}break}},
consumeSubPattern:function(g){var a=g.patChar,b=g.len;switch(a){case "9":case "8":case "Z":case "z":for(;0<b--;){if(this._mbDigitSeen)if(c=this.jsonModel._dataString.charAt(this._strPos),d.ut.PictureUtils.isDigit(c))this._buffer.push(c);else{if("z"!=a)throw"TextParsing: not a digit as expected";}else{var c=this.jsonModel._dataString.charAt(this._strPos);"-"==c&&(this._mbNegative=!0,c=this.jsonModel._dataString.charAt(++this._strPos));if("9"==a||"8"==a){if(!d.ut.PictureUtils.isDigit(c))throw"TextParsing: not a digit as expected";
this._buffer.push(c);this._mbDigitSeen=!0}else if("Z"==a)if(d.ut.PictureUtils.isDigit(c))this._buffer.push(c),this._mbDigitSeen=!0;else{if(" "!=c)throw"TextParsing: not a digit or space as expected";}else if(d.ut.PictureUtils.isDigit(c))this._buffer.push(c),this._mbDigitSeen=!0,this._mBacktrack={patPos:g.patPos+g.len-b,strPos:this._strPos};else throw"TextParsing: not a digit or space as expected";}++this._strPos}break;case "V":case "v":case ".":if(this._matchStr(this._mNumberSymbols.decimal))this._hasRadix=
!0,this._buffer.push("."),this._mbDigitSeen=!0;else throw"TextParsing: not a radix as expected";break;case "E":if(this._matchStr("E"))for(this._buffer.push("E"),this._matchStr("+")||this._matchStr("-")&&this.jsonModel._buffer.push("-"),g=this.jsonModel._dataString.length;this._strPos<g&&d.ut.PictureUtils.isDigit(this.jsonModel._dataString.charAt(this._strPos));)this._buffer.push(this.jsonModel._dataString.charAt(this._strPos++));break;case "C":if(this._matchStr(d.ut.NumPictureDesc.gsCR))this._mbNegative=
!0;else if(!this._matchStr(d.ut.NumPictureDesc.gsDSP))throw"TextParsing: not a CR as expected";break;case "c":this._matchStr(d.ut.NumPictureDesc.gsCR)&&(this._mbNegative=!0);break;case "D":if(this._matchStr(d.ut.NumPictureDesc.gsDB))this._mbNegative=!0;else if(!this._matchStr(d.ut.NumPictureDesc.gsDSP))throw"TextParsing: not a CR as expected";break;case "d":this._matchStr(d.ut.NumPictureDesc.gsDB)&&(this._mbNegative=!0);break;case "S":if(this._matchStr(this._mNumberSymbols.negative,!1))this._mbNegative=
!0;else if(!this._matchStr(" "))throw"TextParsing: not a CR as expected";break;case "s":this._matchStr(this._mNumberSymbols.negative,!1)&&(this._mbNegative=!0);break;case 65292:case ",":for(;0<b--;)if(!this._matchStr(this._mNumberSymbols.grouping,!1))throw"TextParsing: not a grouping symbol as expected";break;case 65284:case "$":for(;0<b--;)if(!this._matchStr(this._mCurrencySymbols.symbol,!1))throw"TextParsing: not a grouping symbol as expected";break;case 65285:case "%":for(;0<b--;)if(!this._matchStr(this._mNumberSymbols.percent,
!1))throw"TextParsing: not a grouping symbol as expected";this._hasPercent=!0;break;case 65288:case 65289:case "(":case ")":if(this._matchStr(a,!1))this._mbNegative=!0;else if(!this._matchStr(" "))throw"TextParsing: not parentesis as expected";break;case "t":for(;0<b--;)this._matchStr("\t",!1)}},getResult:function(){var g=this._buffer.join("");if(this._hasPercent){var a=[];g=Number(g).toString();var b=g.indexOf("."),c=b-2;0==c?a.push("0"):-1==c?a.push("0.0"):-3==c&&(c=g.length-2);for(var e=0;e<g.length;e++)e==
c&&a.push("."),e!=b&&a.push(g.charAt(e));g=a.join("")}g=Number(g);this._mbNegative&&(g=-g);return g.toString()},_matchStr:function(g){return d.ut.PictureUtils.matchString(this.jsonModel._dataString,this._strPos,g)?(this._strPos+=g.length,!0):!1},acceptPatternChar:function(g){return d.ut.PictureUtils.inString(g,"(%$,.)89BCDERSVZbcdrsvzt")}})})(_,xfalib);
(function(f,d){var g=d.ut.DateParsingVisitor=d.ut.ParsingVisitorBase.extend({initialize:function(){this._dateInfo=new d.ut.DateInfo({isParsingCall:!0});this._dayOfMonth=this._monthOfYear=this._yearOfEra=null;g._super.initialize.call(this)},consumeSubPattern:function(a){var b=a.patChar,c=a.len;a=this._strPos;var e=c;this._assert(a+c<=this.jsonModel._dataString.length,"Mismatch");switch(b){case "D":switch(c){case 1:e=d.ut.PictureUtils.parseIntAggressive(this.jsonModel._dataString,a,2);this._dayOfMonth=
e.value;e=e.len;break;case 2:this._dayOfMonth=d.ut.PictureUtils.parseIntExact(this.jsonModel._dataString,a,2)}this._assert(31>=this._dayOfMonth&&0<this._dayOfMonth,"Invalid date string1");break;case "J":break;case "M":b="";switch(c){case 1:e=d.ut.PictureUtils.parseIntAggressive(this.jsonModel._dataString,a,2);this._monthOfYear=e.value;e=e.len;break;case 2:this._monthOfYear=d.ut.PictureUtils.parseIntExact(this.jsonModel._dataString,a,2);break;case 3:b="calendarSymbols.abbrmonthNames";break;case 4:b=
"calendarSymbols.monthNames"}if(b){c=d.ut.PictureUtils.getHashOfLocaleObject(this.jsonModel._locale,b);var l=this.jsonModel._dataString.toLowerCase(),k=0,h="";for(e=0;a+e<l.length&&!(k+=(e+1)*l.charCodeAt(a+e),h+=l.charAt(a+e),e++,c[k]&&-1<c[k].indexOf(h)););this._monthOfYear=f.map(d.ut.PictureUtils.getLocaleObject(this.jsonModel._locale,b),function(p){return p.toLowerCase()}).indexOf(h)+1}this._assert(12>=this._monthOfYear&&0<this._monthOfYear,"Invalid date string2");break;case "E":b="";switch(c){case 1:e=
1;break;case 3:b="calendarSymbols.abbrdayNames";break;case 4:b="calendarSymbols.dayNames";break;default:throw"unsupported Picture Clause ";}if(b)for(c=d.ut.PictureUtils.getHashOfLocaleObject(this.jsonModel._locale,b),e=0,l=this.jsonModel._dataString.toLowerCase(),k=0,h="";a+e<l.length&&!(k+=(e+1)*l.charCodeAt(a+e),h+=l.charAt(a+e),e++,c[k]&&-1<c[k].indexOf(h)););break;case "e":break;case "G":break;case "Y":switch(c){case 2:this._yearOfEra=d.ut.PictureUtils.parseIntExact(this.jsonModel._dataString,
a,2);this._yearOfEra+=2E3;2029<=this._yearOfEra&&(this._yearOfEra-=100);break;case 4:this._yearOfEra=d.ut.PictureUtils.parseIntExact(this.jsonModel._dataString,a,4)}this._assert(9999>=this._yearOfEra&&0<=this._yearOfEra,"Invalid date string3");break;case "w":break;case "W":break;default:throw"Unsupported pattern";}this._yearOfEra&&this._monthOfYear&&this._dayOfMonth&&this._dateInfo.validate(this._yearOfEra,this._monthOfYear,this._dayOfMonth);this._strPos+=e},getDate:function(){return this._dateInfo.date},
getResult:function(){if(this._strPos<this.jsonModel._dataString.length)throw"DateParsing: picture clause smaller than input Date";return this._dateInfo.getISODate()},_assert:function(a,b){if(!a)throw b;}})})(_,xfalib);(function(f,d,g){g.ut.LocalizationUtil=g.ut.Class.extend({getLocalizedMessage:function(a,b,c){c&&(b=b.replace(/{(\d+)}/g,function(l,k){return"undefined"!=typeof c[k]?c[k]:l}));var e="";a&&(e+=" ["+a+"]");return e+("  "+b+"\r\n")}})})(_,$,xfalib);
$(document).ready(function(){var f=$(".fileupload .guide-fu-attach-button").html(),d=$(".fileupload input").attr("aria-label");$(".guide-fu-attach-button").html("");$("\x3cspan class\x3d'fileName'\x3e\x3c/span\x3e").appendTo(".guide-fu-attach-button");$("\x3cspan class\x3d'button'\x3e\x3c/span\x3e").appendTo(".guide-fu-attach-button");$(".guide-fu-attach-button .fileName").html(d);$(".guide-fu-attach-button .button").html(f);$(".guideFileUpload.fileupload .guideFieldError").insertAfter(".guideFileUpload.fileupload .afFileUpload.fileUpload button");
$('\x3cdiv class\x3d"loader d-none"\x3e\x3c/div\x3e').insertAfter(".fileUpload button .fileName");$(".fileupload .guide-fu-attach-button").on("keypress",function(g){13==g.keyCode&&g.preventDefault()})});
(function(f,d,g){g.view.util.TextMetrics={xfaUtil:g.ut.XfaUtil.prototype,ERROR_MARGIN:1,$measureEl:null,initialize:function(a){a?this.$measureEl=a:(a=d("\x3cdiv\x3e\x3c/div\x3e"),a.attr("id","textMetrics"),this.xfaUtil.$css(a.get(0),{left:-1E3,top:-1E3,position:"absolute",visibility:"hidden"}),this.$measureEl=a,d("body").append(this.$measureEl))},measureExtent:function(a,b){a+=" ";this.$measureEl||this.initialize();b=b||{};var c={},e=d(b.refEl||"\x3cdiv\x3e\x3c/div\x3e"),l=e.get(0);c.fontSize=e.css("fontSize")||
b["font-size"]||b.fontSize;c.fontStyle=e.css("fontStyle")||b["font-style"]||b.fontStyle;c.fontWeight=e.css("fontWeight")||b["font-weight"]||b.fontWeight;c.fontFamily=e.css("fontFamily")||b["font-family"]||b.fontFamily;c.lineHeight=l.style.lineHeight||b["line-height"]||b.lineHeight;c.letterSpacing=e.css("letterSpacing")||b["letter-spacing"]||b.letterSpacing;c.whiteSpace=e.css("whiteSpace")||b["white-space"]||b.whiteSpace||"pre-wrap";d.browser.mozilla&&e.is("textarea")&&(c.whiteSpace="pre-wrap");c.wordBreak=
e.css("wordBreak")||b["word-break"]||b.wordBreak||"break-all";c.wordWrap=e.css("wordWrap")||b["word-wrap"]||b.wordWrap||"break-word";c.width=this._elWidth(l,b);c.height=this._elHeight(l,b);c.minWidth=this._elMinWidth(l,b);c.minHeight=this._elMinHeight(l,b);c.maxWidth=this._elMaxWidth(l,b);c.maxHeight=this._elMaxHeight(l,b);this.xfaUtil.$css(this.$measureEl.get(0),c);"text/html"===b.contentType?b.skipXSSProtection?this.$measureEl.html(a):this.$measureEl.html(g.ut.XfaUtil.prototype.encodeScriptableTags(a)):
this.$measureEl.text(a);a=this.$measureEl.width();c=this.$measureEl.height();if(a==Math.ceil(b.width)||a==Math.floor(b.width))a=b.width;else if(b.maxWidth>a||a>b.minWidth>0&&0>(b.maxWidth||-1))a+=1;c==Math.ceil(b.height)||c==Math.floor(b.height)?c=b.height:e.is("textarea")&&(b.maxHeight>c||c>b.minHeight>0&&0>(b.maxHeight||-1))&&(c+=1);this.$measureEl.empty();return{width:a,height:c}},_elWidth:function(a,b){return b.minWidth&&-1<b.minWidth?"auto":b.maxWidth&&-1<b.maxWidth?"auto":b.width||"auto"},_elHeight:function(a,
b){return"text/html"===b.contentType||b.isDraw?"auto":d(a).is("textarea")?b.minHeight&&-1<b.minHeight?"auto":b.maxHeight&&-1<b.maxHeight?"auto":b.height||"auto":b.height||"auto"},_elMinWidth:function(a,b){return b.minWidth&&-1<b.minWidth?b.minWidth:"0"},_elMinHeight:function(a,b){return b.minHeight&&-1<b.minHeight?b.minHeight:"0"},_elMaxWidth:function(a,b){return b.maxWidth&&-1<b.maxWidth?b.maxWidth:"none"},_elMaxHeight:function(a,b){return b.maxHeight&&-1<b.maxHeight?b.maxHeight:"none"},_destroy:function(){d("#textMetrics").remove();
this.$measureEl=null}}})(_,$,xfalib);
(function(f){f.alertBox={verticalOffset:-75,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.01,overlayColor:"#FFF",draggable:!1,dialogClass:null,imageDirectory:"..",images:["A_Warning_Lg_N.png","A_Alert2_Lg_N.png","C_QuestionBubble_Xl_N.png","A_InfoBlue_32x32_N.png"],alert:function(d,g,a,b){this._show(d,a,g,null,"OK",function(c){b&&b(c)})},okCancel:function(d,g,a,b){this._show(d,a,g,null,"OK-Cancel",function(c){b&&b(c)})},yesNo:function(d,g,a,b){this._show(d,a,g,null,"Yes-No",function(c){b&&
b(c)})},yesNoCancel:function(d,g,a,b){this._show(d,a,g,null,"Yes-No-Cancel",function(c){b&&b(c)})},_createBox:function(d,g,a){var b=this;f("#"+d).after("\x3cdiv id\x3d'msgBox_panel'\x3e");_.each(g.split("-"),function(c,e){var l=xfalib.locale.Strings[c.toLowerCase()]?xfalib.locale.Strings[c.toLowerCase()]:c;f("#msgBox_panel").append("\x3cinput type\x3d'button' value\x3d'"+l+"' id \x3d 'msgBox_"+c+"' class\x3dmsgbox_input /\x3e");f("#msgBox_"+c).click(function(){b._hide();a(!e)});e||f("msgBox_"+c).focus()})},
_show:function(d,g,a,b,c,e){this._hide();this._overlay("show");f("BODY").append('\x3cdiv id\x3d"msgBox_container"\x3e\x3ch1 id\x3d"msgBox_title"\x3e\x3c/h1\x3e\x3cdiv id\x3d"msgBox_content"\x3e\x3cdiv id\x3d"msgBox_message"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e');this.dialogClass&&f("#msgBox_container").addClass(f.alertBox.dialogClass);f("#msgBox_container").css({position:"absolute",zIndex:99999,padding:0,margin:0});f("#msgBox_title").text(g);f("#msgBox_content").addClass("msgBoxType"+d);a=xfalib.ut.XfaUtil.prototype.encodeScriptableTags(a.replace(/\n/g,
"\x3cbr /\x3e"));f("#msgBox_message").html(a);f("#msgBox_container").css({minWidth:f("#msgBox_container").outerWidth(),maxWidth:f("#msgBox_container").outerWidth()});this._reposition();this._maintainPosition(!0);this._createBox("msgBox_message",c,e)},_hide:function(){f("#msgBox_container").remove();this._overlay("hide");this._maintainPosition(!1)},_overlay:function(d){switch(d){case "show":this._overlay("hide");f("BODY").append('\x3cdiv id\x3d"msgBox_overlay"\x3e\x3c/div\x3e');f("#msgBox_overlay").css({position:"absolute",
zIndex:99998,top:"0px",left:"0px",width:"100%",height:f(document).height(),background:this.overlayColor,opacity:this.overlayOpacity});break;case "hide":f("#msgBox_overlay").remove()}},_reposition:function(){var d=f(window).height()/xfalib.ut.XfaUtil.prototype.formScaleFactor,g=f(window).width()/xfalib.ut.XfaUtil.prototype.formScaleFactor,a=f(window).scrollTop()/xfalib.ut.XfaUtil.prototype.formScaleFactor,b=f(window).scrollLeft()/xfalib.ut.XfaUtil.prototype.formScaleFactor;d=d/2-f("#msgBox_container").outerHeight()/
2+this.verticalOffset;g=g/2-f("#msgBox_container").outerWidth()/2+this.horizontalOffset;0>d&&(d=0);0>g&&(g=0);f.browser.msie&&6>=parseInt(f.browser.version)&&(d+=a);f("#msgBox_container").css({top:d+a+"px",left:g+b+"px"});f("#msgBox_overlay").height(f(document).height())},_maintainPosition:function(d){if(this.repositionOnResize)switch(d){case !0:f(window).on("resize",this._reposition);break;case !1:f(window).off("resize",this._reposition)}}}})($);
(function(f,d,g){g.view.util.HtmlUtil={getHTMLSupportedAttr:function(a,b){try{return a[b]}catch(c){}},elementSupportsAttribute:function(a,b){a=document.createElement(a);if(b in a)return d(a).remove(),!0;d(a).remove();return!1}}})(_,$,xfalib);
(function(f,d,g){g.view.util.Styles={xfaUtil:g.ut.XfaUtil.prototype,_deviceResolution:144,_in2mmFactor:25.4,_pdfResolution:72,getStyleForEdge:function(a,b,c){var e={raised:"outset",dashDot:"dashed",dashDotDot:"dashed",dashed:"dashed",dotted:"dotted",embossed:"groove",etched:"inset",lowered:"ridge",solid:"solid"};if(a&&"hidden"!=a.jsonModel.presence&&"invisible"!=a.jsonModel.presence){c["border"+b+"width"]=this._subPixelValue(this._convertToPx(a.getAttribute("thickness")))||"1px";if(a.getElement("color")&&
""!=a.getElement("color").getAttribute("value")){var l=a.getElement("color").getAttribute("value");c["border"+b+"color"]="rgb("+l+")"}else c["border"+b+"color"]="rgb(0,0,0)";c["border"+b+"style"]=e[a.getAttribute("stroke")]||"solid"}else return c["border"+b+"width"]="0px",1},getStyleForBorder:function(a){if(a){var b=a.getElement("edge",0,!0),c=a.getElement("edge",1,!0),e=a.getElement("edge",2,!0),l=a.getElement("edge",3,!0);if(b||c||e||l){a={};var k=this.getStyleForEdge(b,"-top-",a);c=this.getStyleForEdge(c||
b,"-right-",a);e=this.getStyleForEdge(e||b,"-bottom-",a);b=this.getStyleForEdge(l||b,"-left-",a);if(1!=k||1!=c||1!=e||1!=b)return a}}return null},_convertToPx:function(a){if(!a)return 0;var b=a=""+a;0<=a.indexOf("in")?b=this._mm2px(parseFloat(a)*this._in2mmFactor):0<=a.indexOf("mm")?b=this._mm2px(a):0<=a.indexOf("cm")?b=this._mm2px(10*parseFloat(a)):0<=a.indexOf("pt")?b=parseFloat(a)*(this._deviceResolution/this._pdfResolution):0<=a.indexOf("px")&&(b=parseFloat(a));return b},_mm2px:function(a){return(f.isNumber(a)?
a:parseFloat(a))*(1/25.4)*this._deviceResolution},_subPixelValue:function(a){return.01<a?Math.max(a,1):a}}})(_,$,xfalib);
(function(f,d,g){g.view.util.traversalManager={_computTabIndex:function(a){var b=a._pageNumber();b=this._tabIndexBasedOnRange(b);this.geographicalOrder=[];this._createGeographicalOrder(a);this._createFinalTraversalOrder(b);this._lastFieldTabbed=null},_tabIndexBasedOnRange:function(a){var b=new g.ut.Version(formBridge.userConfig.behaviorConfig);b=(b=b.isOn("mfRangeTabIndex")||b.isOn("rangeTabIndex"))?parseInt(b):1E3;return a*b},_createGeographicalOrder:function(a){a=this._sortViewGeographically(a.childViews);
f.each(a,function(b){b=b.view;var c=this._getMapOfInstanceCheck(b),e=this._isViewEligibleForTabbing(b);(c.isField&&!c.isChildOfExclGroup||c.isSubform||c.isDraw||c.isExclGroup)&&e&&this.geographicalOrder.push({view:b,visited:!1});c.isContainer&&e&&this._createGeographicalOrder(b)},this)},_sortViewGeographically:function(a){var b=[];f.each(a,function(c){var e=c.$el.offset(),l=g.ut.XfaUtil.prototype.padString(parseInt(e.left),5,"0"),k=c._marginTop();e=e.top-parseFloat(k);l=parseInt(""+parseInt(e)+l);
b.push({positionalReference:l,view:c})});return f.sortBy(b,function(c){return c.positionalReference})},_createFinalTraversalOrder:function(a){for(var b=this.geographicalOrder.length,c,e,l=0,k=0;;){l>=b&&(l=0);c=this.geographicalOrder[l];if(!c||c.visited)l++;else{c.visited=!0;k++;c=c.view;e=this._getMapOfInstanceCheck(c);var h=c.model;e.isSubform?h&&h.getTraversalObject()?(e=h.getNextTraversalSom(g.template.Constants.firstTraversal),e=this._findViewInGeographicalOrderArray(e),l=-1!=e?e:l+1):l++:e.isField||
e.isDraw?(e.isField&&(c.updateTabIndex(a),this._lastFieldTabbed=c,a++),h&&h.getTraversalObject()?(e=h.getNextTraversalSom(g.template.Constants.nextTraversal),e=this._findViewInGeographicalOrderArray(e),l=-1!=e?e:l+1):l=this._findNextViewToBeTraversed(l)):e.isExclGroup?h&&h.getTraversalObject()?(e=h.getNextTraversalSom(g.template.Constants.nextTraversal),e=this._findViewInGeographicalOrderArray(e),l=-1!=e?e:l+1,e=h.getNextTraversalSom(g.template.Constants.firstTraversal),a=this._updateTabIndexOfExclGroupChildren(c,
a,e)):(a=this._updateTabIndexOfExclGroupChildren(c,a),l=this._findTraversalInExclGroupChildren(c,l)):l++}if(k>=b){this._renderNextPageFuture();break}}},_getParentNextTraversal:function(a,b,c){a=a.parentView;var e=a.model,l=b.parentView.model;if(e&&l&&e.somExpression!=l.somExpression)if(a&&a instanceof g.view.SubformView)if(e.getTraversalObject()){if(b=e.getNextTraversalSom(g.template.Constants.nextTraversal),b=this._findViewInGeographicalOrderArray(b),-1!=b&&!this.geographicalOrder[b].visited)return b}else this._getParentNextTraversal(a,
b,c);else this._getParentNextTraversal(a,b,c);else return-1;return c++},_findViewInGeographicalOrderArray:function(a){return f.findIndex(this.geographicalOrder,function(b){return(b=b.view.model)&&b.somExpression==a})},_findNextViewToBeTraversed:function(a){var b=this.geographicalOrder[a].view,c=this._getNextUnvisited(a);if(-1!=c){var e=this.geographicalOrder[c].view;a=this._getParentNextTraversal(b,e,a);return-1!=a?a:c}return a++},_getNextUnvisited:function(a){for(var b=this.geographicalOrder.length,
c=0,e;c<b;){e=(c+a)%b;if(!this.geographicalOrder[e].visited)return e;c++}return-1},_updateTabIndexOfExclGroupChildren:function(a,b,c){f.each(a.childViews,function(e){this._isViewEligibleForTabbing(e)&&(c&&e.model.somExpression==c?(b++,e.updateTabIndex(b-1),this._lastFieldTabbed=e):e.updateTabIndex(b))},this);c||(this._lastFieldTabbed=a.childViews[0]);return++b},_findTraversalInExclGroupChildren:function(a,b){a=this._sortViewGeographically(a.childViews);var c=null,e=null,l=null,k=null;c=null;c=-1;
a.reverse();(c=f.find(a,function(h){e=h.view;if((l=e.model)&&(k=l.getTraversalObject()))return 0<k.length}))?(c=c.model.getNextTraversalSom(g.template.Constants.nextTraversal),c=this._findViewInGeographicalOrderArray(c),b=-1!=c?c:b+1):b=this._findNextViewToBeTraversed(b);return b},_isViewEligibleForTabbing:function(a){return a._initialized&&"hidden"!=a.$el.css("visibility")?!0:!1},_getMapOfInstanceCheck:function(a){var b={};b.isSubform=a instanceof g.view.SubformView;b.isField=a instanceof g.view.FieldView;
b.isDraw=a instanceof g.view.XfaDrawView;b.isExclGroup=a instanceof g.view.ExclGroupView;b.isChildOfExclGroup=a.parentView instanceof g.view.ExclGroupView;b.isContainer=a instanceof g.view.ContainerView;return b},_renderNextPageFuture:function(){if(this._lastFieldTabbed)this._lastFieldTabbed.$el.one("focusin.traversalManager",function(){var a=window.formBridge?window.formBridge.pagingManager():null;d(window).on("keyup.traversalManager",function(b){9==(b.keyCode?b.keyCode:b.which)&&a&&a.hasMorePages()&&
(a.renderNextPage(),d(window).off("keyup.traversalManager"))})})},_destroy:function(){this.geographicalOrder=null}}})(_,$,xfalib);
(function(f,d,g){g.view.util.ErrorManager=g.ut.Class.extend({options:{warningMessageVisible:!1,errorMessageVisible:!1},initialize:function(){d(window).on("destroy.xfa",function(){d("#error-msg").hide();d("#warning-msg").hide()})},onFieldEnter:function(a){var b=a.element;if(a.option("errorMessage")||a.option("warningMessage")){var c=d(b).offset(),e={};e.left=1/g.ut.XfaUtil.prototype.formScaleFactor*c.left+b.width()+5+"px";e.top=1/g.ut.XfaUtil.prototype.formScaleFactor*c.top+"px";a.option("errorMessage")?
(a.$css(d("#error-msg").get(0),e),d("#error-msg").text(a.option("errorMessage")).show(),a.option("errorMessageVisible",!0)):a.option("warningMessage")&&(a.$css(d("#warning-msg").get(0),e),d("#warning-msg").text(a.option("warningMessage")).show(),a.option("warningMessageVisible",!0))}},onFieldExit:function(a){a.option("errorMessageVisible")?(d("#error-msg").hide(),a.option("errorMessageVisible",!1)):a.option("warningMessageVisible")&&(d("#warning-msg").hide(),a.option("warningMessageVisible",!1))},
markError:function(a,b,c){"warning"!=c?(1>d("#error-msg").length&&d("\x3cdiv id\x3d'error-msg' role\x3d'alert'\x3e\x3c/div\x3e").appendTo("body"),a.option("errorMessage",b),a.element.addClass("dataInvalid")):(1>d("#warning-msg").length&&d("\x3cdiv id\x3d'warning-msg' role\x3d'alert'\x3e\x3c/div\x3e").appendTo("body"),a.option("warningMessage",b))},clearError:function(a){this.onFieldExit(a);a.element.removeClass("dataInvalid");a.option("errorMessage",null);a.option("warningMessage",null)}})})(_,$,
xfalib);
(function(f,d,g){var a=g.ut.XfaUtil.prototype,b={container:"body",yearsPerView:16,width:433,viewHeight:248,locale:{days:"SMTWTFS".split(""),months:"January February March April May June July August September October November December".split(" "),zero:"0",clearText:"Clear",name:"en_US"},format:"YYYY-MM-DD",pickerType:"date",positioning:null,showCalendarIcon:!1},c=[31,28,31,30,31,30,31,31,30,31,30,31],e={Month:{caption:"Year",li:null,key:"day",upDown:7},Year:{caption:"Yearset",li:"Month",key:"month",upDown:3},
Yearset:{caption:null,li:"Year",key:"year",upDown:4}},l=function(){this.initialized=!1};d.extend(l.prototype,{create:function(h){var p=this,q="";this.options=d.extend({},b,h);this.options.positioning=null;window.guideBridge&&this.options.width>window.innerWidth&&0<window.innerWidth&&(this.options.width=window.innerWidth-20);this.options.pickerType.match(/date/)&&(q+='\x3cdiv class\x3d"dp-header"\x3e\x3cdiv class\x3d"dp-leftnav"\x3e\x3c/div\x3e\x3cdiv class\x3d"dp-caption"\x3e\x3c/div\x3e\x3cdiv class\x3d"dp-rightnav"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"view dp-monthview"\x3e\x3c/div\x3e\x3cdiv class\x3d"view dp-yearview"\x3e\x3c/div\x3e\x3cdiv class\x3d"view dp-yearsetview"\x3e\x3c/div\x3e');
this.options.pickerType.match(/time/)&&(q+='\x3cdiv class\x3d"dp-header"\x3e\x3cdiv class\x3d"dp-leftnav"\x3e\x3c/div\x3e\x3cdiv class\x3d"dp-caption"\x3e\x3c/div\x3e\x3cdiv class\x3d"dp-rightnav"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"view dp-monthview"\x3e\x3c/div\x3e\x3cdiv class\x3d"view dp-yearview"\x3e\x3c/div\x3e\x3cdiv class\x3d"view dp-yearsetview"\x3e\x3c/div\x3e');q+='\x3cdiv class\x3d"dp-clear"\x3e\x3ca\x3e\x3c/a\x3e\x3c/div\x3e';d.extend(this,{selectedDay:0,selectedMonth:0,selectedYear:0,
currentDay:0,currentMonth:0,currentYear:0,touchSupported:g.ut.TouchUtil.TOUCH_ENABLED,_visible:!1,_defaultView:"Month",_keysEnabled:!1,$dp:d("\x3cdiv\x3e\x3c/div\x3e").addClass("datetimepicker").width(this.options.width).append(q).addClass("datePickerTarget").appendTo(this.options.container).toggleClass("datetimepicker-notouch",this.touchSupported),$month:d(".dp-monthview",this.$dp).height(this.options.viewHeight),$year:d(".dp-yearview",this.$dp).height(this.options.viewHeight),$yearset:d(".dp-yearsetview",
this.$dp).height(this.options.viewHeight)});this.actualWidth=Math.floor(this.$dp.width());d(".dp-clear a",this.$dp).on("click",d.proxy(this._clearDate,this));h=d(".dp-leftnav",this.$dp).on("click",function(t){p._adjustDate(-1,p.view)}).outerWidth(!0);q=d(".dp-rightnav",this.$dp).on("click",function(t){p._adjustDate(1,p.view)}).outerWidth(!0);this.$caption=d(".dp-caption",this.$dp).width(this.actualWidth-h-q).on("click",function(t){p.$caption.hasClass("disabled")||p._layout(e[p.view].caption)});d(this.$dp).on("click",
function(t){p.touchSupported||p._curInstance.$field.focus()});d(window).on("touchstart.datetimepicker mousedown.datetimepicker",p._checkWindowClicked);this._curInstance=null},_attachField:function(h,p,q){q=this._newInst(h,p,q);var t=this,m=function(r){0!=a.$data(r.target,"datetimepicker").access&&(t._curInstance||t._activateField(r),t.options.showCalendarIcon?r.type===t.getEvent()&&(t._iconClicked?(t._iconClicked=!1,t._show()):(t._hide(),t._curInstance.$field.focus())):r.type!==t.getEvent()&&("focus"!==
r.type||t.touchSupported||t.scriptFocus)||t._show(r),t._clickedWindow=!0,t.scriptFocus=!1)};a.$data(h[0],"datetimepicker",q);h.on(this.getEvent(),m).focus(m).blur(function(r){!t._clickedWindow||!t.options.showCalendarIcon&&t.touchSupported||(t._hide(),t._deactivateField(),t._clickedWindow=!0)});if(p.showCalendarIcon)d("\x3cdiv\x3e\x3c/div\x3e").addClass("datepicker-calendar-icon").insertAfter(h).css({width:p.iconWidth+"px",height:p.iconWidth+"px"}).on(this.getEvent(),function(r){t._iconClicked=!0;
h.click()})},_newInst:function(h,p,q){return{$field:h,locale:p.locale,positioning:p.positioning||h,access:p.access,selectedDate:p.value,editValue:p.editValue,minValidDate:p.minValidDate,maxValidDate:p.maxValidDate,exclMinDate:p.exclMinDate,exclMaxDate:p.exclMaxDate}},_checkWindowClicked:function(h){var p=k;p._curInstance&&(d(h.target).closest(".datePickerTarget").length?p._clickedWindow=!1:p.touchSupported?(p._hide(),p._curInstance.$field[0].blur(),p._deactivateField()):p._clickedWindow=!0)},_hotKeys:function(h){var p=
!1;switch(h.keyCode){case 9:k._clickedWindow=!0;k._hide();p=!1;break;case 27:k._hide();p=!0;break;case 40:if(!this._visible){this._show();return}this.$focusedDate.addClass("dp-focus")}if(k._visible&&this._keysEnabled){var q=e[this.view].key,t=e[this.view].upDown;switch(h.keyCode){case 32:this.hotKeyPressed=!0;this.$focusedDate&&this.$focusedDate.trigger("click");this.hotKeyPressed=!1;p=!0;break;case 37:h.shiftKey?d(".dp-leftnav",this.$dp).triggerHandler("click"):this._adjustDate(-1,q);p=!0;break;
case 38:h.shiftKey?this.$caption.triggerHandler("click"):this._adjustDate(-t,q);p=!0;break;case 39:h.shiftKey?d(".dp-rightnav",this.$dp).triggerHandler("click"):this._adjustDate(1,q);p=!0;break;case 40:this._adjustDate(t,q),p=!0}}p&&h.preventDefault()},_show:function(){if(0!=this._curInstance.access){this.options.locale=this._curInstance.locale;if(!this._visible){var h=g.ut.DateInfo.ParseIsoString(this._curInstance.selectedDate);h=null!=h?h.getDate():new Date;this.selectedDay=this.currentDay=h.getDate();
this.selectedMonth=this.currentMonth=h.getMonth();this.selectedYear=this.currentYear=h.getFullYear();this.maxValidDate=(h=this.options.maxValidDate?g.ut.DateInfo.ParseIsoString(this._curInstance.maxValidDate):null)?h.getDate():null;this.minValidDate=(h=this.options.minValidDate?g.ut.DateInfo.ParseIsoString(this._curInstance.minValidDate):null)?h.getDate():null;this.exclMaxDate=this._curInstance.exclMaxDate;this.exclMinDate=this._curInstance.exclMinDate;d(".dp-clear a",this.$dp).text(this.options.locale.clearText);
this._layout("Month");this._position();this.$dp.show();this._visible=!0;this.options.showCalendarIcon&&this._curInstance.$field.attr("readonly",!0)}this.options.showCalendarIcon&&!this.touchSupported&&this._curInstance.$field.focus()}},_position:function(){var h=this._curInstance.positioning,p=window.scrollX/g.ut.XfaUtil.prototype.formScaleFactor,q=window.scrollY/g.ut.XfaUtil.prototype.formScaleFactor,t=window.innerHeight/g.ut.XfaUtil.prototype.formScaleFactor,m=window.innerWidth/g.ut.XfaUtil.prototype.formScaleFactor,
r=h.outerHeight(!0);h.outerWidth(!0);var u=h.offset().top/g.ut.XfaUtil.prototype.formScaleFactor+r,v=h.offset().left/g.ut.XfaUtil.prototype.formScaleFactor;h={top:u+"px",left:v+"px"};t=u+this.$dp.outerHeight(!0)-t-q;0<t&&(r=u-r-this.$dp.outerHeight(!0)-20,r<q&&(r=u-t,a.isWebkit()&&!this.options.showCalendarIcon&&this._curInstance.$field.trigger("onoverlap.datetimepicker")),h.top=r+"px");v+this.$dp.outerWidth(!0)>p+m&&(p=p+m-this.$dp.outerWidth(!0)-20,h.left=p+"px");a.$css(this.$dp.get(0),h);return this},
_layout:function(h){null==h?this._hide():(this.view&&this["$"+this.view.toLowerCase()].hide(),this.view=h,this.$caption.toggleClass("disabled",!e[this.view].caption),this["$"+this.view.toLowerCase()].show(),this["show"+this.view]());return this},showMonth:function(){var h=this,p=new Date(this.currentYear,this.currentMonth),q=this._maxDate(this.currentMonth),t=this._maxDate((this.currentMonth+12)%12),m=(new Date(this.currentYear,this.currentMonth,1)).getDay(),r=Math.ceil((m+q)/7)+1,u,v;this.tabulateView({caption:this.options.locale.months[this.currentMonth]+
", "+this._convertNumberToLocale(this.currentYear),header:this.options.locale.days,numRows:r,numColumns:7,elementAt:function(w,x){w=7*(w-1)+x-m+1;v=h._convertNumberToLocale(w);u=w;if(1>w)v=h._convertNumberToLocale(t+w),u=-1;else if(w>q)v=h._convertNumberToLocale(w-q),u=-1;else if(p.setDate(w),w=g.ut.XfaUtil.prototype._compareVal,w(p,h.maxValidDate,h.exclMaxDate)||w(h.minValidDate,p,h.exclMinDate))u=-1;return{data:u,display:v}}})},showYear:function(){var h=this,p=this.minValidDate?new Date(this.minValidDate.getFullYear(),
this.minValidDate.getMonth()):null,q=this.maxValidDate?new Date(this.maxValidDate.getFullYear(),this.maxValidDate.getMonth()):null,t=new Date(this.currentYear,0),m,r;this.tabulateView({caption:this._convertNumberToLocale(this.currentYear),numRows:4,numColumns:3,elementAt:function(u,v){m=r=3*u+v;t.setMonth(r);if(p&&t<p||q&&t>q)m=-1;return{data:m,display:h.options.locale.months[r]}}})},showYearset:function(){var h,p=this.minValidDate?new Date(this.minValidDate.getFullYear(),0):null,q=this.maxValidDate?
new Date(this.maxValidDate.getFullYear()+1,0):null,t=new Date,m,r=this;this.tabulateView({caption:this._convertNumberToLocale(this.currentYear-this.options.yearsPerView/2)+"-"+this._convertNumberToLocale(this.currentYear-this.options.yearsPerView/2+this.options.yearsPerView-1),numRows:4,numColumns:4,elementAt:function(u,v){m=h=r.currentYear-8+(4*u+v);t.setFullYear(h);if(p&&t<p||q&&t>q)m=-1;return{data:m,display:r._convertNumberToLocale(h)}}})},insertRow:function(h,p,q,t){var m=this["$"+this.view.toLowerCase()],
r=this.actualWidth/p.length,u=d("ul",m).eq(h),v,w,x=this;u.length||(u=d("\x3cul\x3e\x3c/ul\x3e").appendTo(m).toggleClass("header",q));u.height(t);for(h=d("li",u).length;h++<p.length;)if(m=d("\x3cli\x3e\x3c/li\x3e").appendTo(u),!q)m.on("click",d.proxy(this._selectDate,this));f.each(p,function(A,y){v=d("li",u).eq(y);q?v.text(p[y]):(w=p[y],a.$data(v.get(0),"value",w.data),x._checkDateIsFocussed(w.data)&&(x.$focusedDate&&x.$focusedDate.removeClass("dp-focus"),x.$focusedDate=v,x._keysEnabled&&x.$focusedDate.addClass("dp-focus")),
v.toggleClass("dp-selected",x._checkDateIsSelected(w.data)).toggleClass("disabled",-1==w.data).text(w.display).attr("title",w.data));v.css({height:t+"px",width:r+"px","line-height":t+"px"})});return u},tabulateView:function(h){var p=0,q=[],t=this.options.viewHeight/h.numRows,m;this.$caption.text(h.caption);for(h.header&&this.insertRow(p++,h.header,!0,t);p<h.numRows;){for(m=0;m<h.numColumns;)q[m]=h.elementAt(p,m),m++;this.insertRow(p++,q,!1,t)}for(p=d(".dp-"+this.view.toLowerCase()+"view ul:visible").length;p>
h.numRows;)d(".dp-"+this.view.toLowerCase()+"view ul").eq(--p).hide();for(;h.numRows>p;)d(".dp-"+this.view.toLowerCase()+"view ul").eq(p++).show()},_activateField:function(h){this._curInstance=a.$data(h.target,"datetimepicker");this._curInstance.$field.trigger("onfocus1.datetimepicker").addClass("datePickerTarget");this.options.showCalendarIcon&&this._curInstance.$field.parent().addClass("datePickerTarget");this.touchSupported||this._keysEnabled||(d(window).on("keydown.datetimepicker",d.proxy(this._hotKeys,
this)),this._keysEnabled=!0)},_deactivateField:function(){this._curInstance&&(this._keysEnabled&&(d(window).off("keydown.datetimepicker"),this._keysEnabled=!1),this._curInstance.$field.trigger("onfocusout.datetimepicker").removeClass("datePickerTarget"),this.options.showCalendarIcon&&this._curInstance.$field.parent().removeClass("datePickerTarget"),this._curInstance=null)},_hide:function(){this._visible&&(this.$dp.hide(),this._curInstance.$field.trigger("onclose.datetimepicker"),this._visible=!1,
this.options.showCalendarIcon&&this._curInstance.$field.attr("readonly",!1))},_adjustDate:function(h,p){switch(p.toLowerCase()){case "day":this.currentDay+=h;h=this._maxDate(this.currentMonth);if(1>this.currentDay)return h=this._maxDate((this.currentMonth-1+12)%12),this.currentDay=h+this.currentDay,this._adjustDate(-1,"month");if(this.currentDay>h)return this.currentDay-=h,this._adjustDate(1,"month");break;case "month":this.currentMonth+=h;11<this.currentMonth&&(this.currentYear++,this.currentMonth=
0);0>this.currentMonth&&(this.currentYear--,this.currentMonth=11);break;case "year":this.currentYear+=h;break;case "yearset":this.currentYear+=h*this.options.yearsPerView}this._layout(this.view)},_checkDateIsSelected:function(h){switch(this.view.toLowerCase()){case "month":return this.currentYear==this.selectedYear&&this.currentMonth==this.selectedMonth&&h==this.selectedDay;case "year":return this.currentYear==this.selectedYear&&this.selectedMonth==h;case "yearset":return this.selectedYear==h}},_checkDateIsFocussed:function(h){switch(this.view.toLowerCase()){case "month":return h==
this.currentDay;case "year":return this.currentMonth==h;case "yearset":return this.currentYear==h}},_convertNumberToLocale:function(h){var p=this.options.locale.zero.charCodeAt(0);h+="";for(var q=[],t=0;t<h.length;t++)q.push(String.fromCharCode(p+parseInt(h.charAt(t))));return q.join("")},_clearDate:function(){var h=this._curInstance.$field.val()?!1:!0;this.selectedYear=this.selectedMonth=-1;this._curInstance.selectedDate="";this._curInstance.$field.val("");h||this._curInstance.$field.trigger("onvaluechange.datetimepicker",
[{selectedDate:""}]);d(".dp-selected",this["$"+this.view.toLowerCase()]).removeClass("dp-selected")},getEvent:function(){return"click"},_pad2:function(h){return 10>h?"0"+h:h},toString:function(){return this.selectedYear+"-"+this._pad2(this.selectedMonth+1)+"-"+this._pad2(this.selectedDay)},_selectDate:function(h){var p=a.$data(h.target,"value"),q=e[this.view].li;if(-1!=p){switch(this.view.toLowerCase()){case "month":this.selectedMonth=this.currentMonth;this.selectedYear=this.currentYear;this.selectedDay=
p;this._curInstance.selectedDate=this.toString();p=this._curInstance.editValue(this.toString());this._curInstance.$field.val(p);this._curInstance.$field.trigger("onvaluechange.datetimepicker",[{selectedDate:p}]);d(".dp-selected",this["$"+this.view.toLowerCase()]).removeClass("dp-selected");d(h.target).addClass("dp-selected");break;case "year":this.currentMonth=p;break;case "yearset":this.currentYear=p}this._layout(q);this.touchSupported?null==q&&this._deactivateField():this.hotKeyPressed||(this.scriptFocus=
!0)}},_leapYear:function(){return 0==this.currentYear%400||0!=this.currentYear%100&&0==this.currentYear%4},_maxDate:function(h){return this._leapYear()&&1==h?29:c[h]},_access:function(h){if("undefined"==typeof h)return this.access;this.access=h},_value:function(h){if("undefined"==typeof h)return this.$field.val();this.selectedDate=h;var p=this.editValue(h);p||(p=h);this.$field.val(p)}});var k=new l;d.fn.adobeDateTimePicker=function(h,p){k.initialized||(k.create(h),k.initialized=!0);if("object"===
typeof h)k._attachField(this,h);else if("string"===typeof h)if(2==arguments.length)k["_"+h].apply(a.$data(this[0],"datetimepicker"),[p]);else return k["_"+h].apply(a.$data(this[0],"datetimepicker"));return this}})(_,$,xfalib);
(function(f){f.ut.TouchUtil=function(){var d=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),g=!(!window.MSPointerEvent&&!window.PointerEvent),a="mousedown",b="mousemove",c="mouseup",e="MouseEvent";window.PointerEvent?(a="pointerdown",b="pointermove",c="pointerup",e="PointerEvent"):window.MSPointerEvent?(a="MSPointerDown",b="MSPointerMove",c="MSPointerUp",e="MSPointerEvent"):d&&(a="touchstart",b="touchmove",c="touchend",e="TouchEvent");return{TOUCH_ENABLED:d,POINTER_EVENT:e,
POINTER_ENABLED:g,POINTER_DOWN:a,POINTER_MOVE:b,POINTER_UP:c,getTouchEvent:function(l){if(g)var k=l.originalEvent;else d&&(k=l.originalEvent||l,k=k.touches[0]);return k||l},getPointerEvent:function(l){if("function"===typeof PointerEvent)var k=new PointerEvent(l,{bubbles:!0,cancelable:!0});else k=document.createEvent(e),k.initEvent(l,!0,!0);return k},getTouches:function(l){var k=[];d&&l.originalEvent&&l.originalEvent.touches&&(k=l.originalEvent.touches);return k}}}()})(xfalib);
(function(f){f.widget("xfaWidget.abstractWidget",{$userControl:null,$data:xfalib.ut.XfaUtil.prototype.$data,$css:xfalib.ut.XfaUtil.prototype.$css,getOrElse:xfalib.ut.Class.prototype.getOrElse,dIndexOf:xfalib.ut.XfaUtil.prototype.dIndexOf,btwn:xfalib.ut.XfaUtil.prototype.btwn,logger:xfalib.ut.XfaUtil.prototype.getLogger,localeStrings:xfalib.ut.XfaUtil.prototype.getLocaleStrings,logMsgs:xfalib.ut.XfaUtil.prototype.getLogMessages,errorManager:xfalib.ut.XfaUtil.prototype.getErrorManager,_widgetName:"abstractWidget",
_blackListedAttributes:["type"],options:{name:"",value:null,commitProperty:"value",displayValue:null,screenReaderText:null,tabIndex:0,role:null,paraStyles:null,dir:null,errorMessage:null,warningMessage:null,hScrollDisabled:!1,placeholder:"",isValid:!0,mandatory:!1},getOptionsMap:function(){return{tabIndex:function(d){this.$userControl.attr("tabindex",d)},role:function(d){d&&this.$userControl.attr("role",d)},screenReaderText:function(d){d&&this.$userControl.attr("aria-label",d)},paraStyles:function(d){d&&
this.$css(this.$userControl.get(0),d)},dir:function(d){d&&this.$userControl.attr("dir",this.options.dir)},height:function(d){d&&this.$css(this.$userControl[0],{height:d})},width:function(d){d&&this.$css(this.$userControl[0],{width:d})},isValid:function(d){d?this.$userControl.removeAttr("aria-invalid"):this.$userControl.attr("aria-invalid",!0)},color:function(d){_.isEmpty(d)||this.$css(this.$userControl[0],{color:"rgb("+d+")"})},"font-style":function(d){_.isEmpty(d)||this.$css(this.$userControl[0],
{"font-style":d})},mandatory:function(d){d?this.$userControl.attr("aria-required",!0):this.$userControl.removeAttr("aria-required")}}},getEventMap:function(){return{focus:xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT,blur:xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT,click:xfalib.ut.XfaUtil.prototype.XFA_CLICK_EVENT}},copyAttributesFromSrcToDest:function(d,g){var a=this;null!=d&&d[0]&&d[0].attributes&&null!=g&&f.each(d[0].attributes,function(){this.specified&&null!=this.value&&_.isString(this.value)&&
0<this.value.length&&-1===a._blackListedAttributes.indexOf(this.name)&&g.attr(this.name,this.value)})},_create:function(){this.widgetEventPrefix="";this.element.addClass(this._widgetName);this.$userControl=this.render();this.optionsHandler=this.getOptionsMap();this.eventMap=this.getEventMap();this._initializeOptions();this._initializeEventHandlers();this.errObj=this.errorManager();"undefined"===typeof guidelib&&this.$css(this.$userControl.get(0),{"box-sizing":"border-box",position:"absolute"})},_initializeEventHandlers:function(){xfalib.ut.XfaUtil.prototype.getLogger().debug("xfa",
"initialize event handlers for "+this._widgetName);_.each(this.eventMap,function(d,g){var a=this;if(d){d instanceof Array||(d=[d]);for(var b=0;b<d.length;b++)xfalib.ut.XfaUtil.prototype.getLogger().debug("xfa","binding "+g+" with "+d[b]),this.$userControl.on(g,function(c){return function(e){xfalib.ut.XfaUtil.prototype.getLogger().debug("xfa","trigger "+e.type+" xfa-event "+c);a._preProcessEvent.apply(a,[c,e]);e.namespace="";e.namespace_re="";a._trigger(c,e);a._postProcessEvent.apply(a,[c,e])}}(d[b]))}},
this)},_preProcessEvent:function(d,g){d==this.options.commitEvent&&this.preProcessCommit(g);switch(d){case xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT:this.preProcessEnter(g);break;case xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT:this.preProcessExit(g);break;case xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT:this.preProcessChange(g);break;case xfalib.ut.XfaUtil.prototype.XFA_CLICK_EVENT:this.preProcessClick(g)}},_postProcessEvent:function(d,g){d==this.options.commitEvent&&this.postProcessCommit(g);
switch(d){case xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT:this.postProcessEnter(g);break;case xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT:this.postProcessExit(g);break;case xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT:this.postProcessChange(g);break;case xfalib.ut.XfaUtil.prototype.XFA_CLICK_EVENT:this.postProcessClick(g)}},_initializeOptions:function(){_.each(this.optionsHandler,function(d,g){"function"===typeof d&&d.apply(this,[this.options[g]])},this)},_setOption:function(d,g){this.options[d]!=
g&&(this.options[d]=g,"function"===typeof this.optionsHandler[d]&&this.optionsHandler[d].apply(this,[this.options[d]]))},option:function(d,g){if(1!==arguments.length||"string"!==typeof d||!this.options.hasOwnProperty(d)||void 0!==this.options[d])return f.Widget.prototype.option.apply(this,arguments)},destroy:function(){this.$userControl.removeClass(this._widgetName)},render:function(){var d=0<this.element.children().length?f(this.element.children().get(0)):this.element;d.attr("name",this.options.name);
return d},preProcessCommit:function(d){this.options.value=this.getCommitValue();xfalib.ut.XfaUtil.prototype.getLogger().debug("xfa","passing commit value "+this.options.value+"to model ")},getCommitValue:function(){},preProcessExit:function(d){},preProcessEnter:function(d){"open"===this.options.access&&(this._showError(),this.showValue())},preProcessChange:function(d){},preProcessClick:function(d){},postProcessCommit:function(d){this.showDisplayValue()},postProcessExit:function(d){"open"===this.options.access&&
(this.showDisplayValue(),this._hideError())},postProcessEnter:function(d){},postProcessChange:function(d){},postProcessClick:function(d){},showDisplayValue:function(){this.$userControl.val(this.options.displayValue)},_isValueSame:function(){return null===this.options.value&&""===this.$userControl.val()||this.options.value===this.$userControl.val()},showValue:function(){this._isValueSame()||this.$userControl.val(this.options.value)},focus:function(){var d=this;setTimeout(function(){d.$userControl[0].focus()},
1)},click:function(){this.focus();this.$userControl.triggerHandler("click")},_showError:function(){if(this.errObj&&_.isFunction(this.errObj.onFieldEnter))this.errObj.onFieldEnter(this)},_calculatePaddingForVAlign:function(d){var g=f.browser.mozilla&&!xfalib.ut.Utilities.isIE11()&&this.options.multiLine,a=this.options.paraStyles&&("bottom"==this.options.paraStyles["vertical-align"]||"top"==this.options.paraStyles["vertical-align"]);g&&a||f.browser.msie&&this.options.multiLine||(d=-.01<d?Math.abs(d):
d,this.options.paraStyles&&0<d&&(g=this.options.paraStyles["vertical-align"],"bottom"==g?(d-=this.options.paraStyles["padding-bottom"],this.$userControl.css("padding-top",d),this.padding=this.$userControl.css("padding-top")):"top"==g||"middle"!=g&&void 0==g?(this.options.paraStyles["padding-top"]&&(d-=this.options.paraStyles["padding-top"]),this.$userControl.css("padding-bottom",d),this.padding=this.$userControl.css("padding-bottom")):this.options.multiLine&&"middle"==g&&(d=d/2-this.options.paraStyles["padding-bottom"],
this.options.paraStyles["padding-top"]&&(d+=this.options.paraStyles["padding-top"]),this.$userControl.css("padding-top",d))))},_handleVAlignOnExit:function(d){this.options.paraStyles&&(d=xfalib.view.util.TextMetrics.measureExtent(this.options.displayValue,{refEl:this.$userControl.get(0),maxHeight:-1}).height,this._calculatePaddingForVAlign(this.options.height-d))},_handleVAlignOnEnter:function(d){d=f.browser.msie&&this.options.multiLine;this.options.paraStyles&&!d&&(d=this.options.paraStyles["vertical-align"],
"bottom"==d&&this.padding?this.$userControl.css("padding-top",this.padding):"top"==d&&this.padding&&this.$userControl.css("padding-bottom",this.padding))},_hideError:function(){if(this.errObj&&_.isFunction(this.errObj.onFieldExit))this.errObj.onFieldExit(this)},markError:function(d,g){this.errObj&&_.isFunction(this.errObj.markError)&&this.errObj.markError(this,d,g)},clearError:function(){this.errObj&&_.isFunction(this.errObj.clearError)&&this.errObj.clearError(this)},getEditValue:function(d){if(null==
this.options.editPattern)return d;try{return xfalib.ut.PictureFmt.format(d,this.options.editPattern)}catch(g){return null}},parseEditValue:function(d){if(null==this.options.editPattern)return d;try{return xfalib.ut.PictureFmt.parse(d,this.options.editPattern)}catch(g){return d}}})})($);
(function(f){f.widget("xfaWidget.defaultWidget",f.xfaWidget.abstractWidget,{_widgetName:"defaultWidget",getOptionsMap:function(){var d=f.xfaWidget.abstractWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{access:function(g){switch(g){case "open":this.$userControl.removeAttr("readOnly");this.$userControl.removeAttr("aria-readonly");this.$userControl.removeAttr("disabled");this.$userControl.removeAttr("aria-disabled");break;case "nonInteractive":case "protected":this.$userControl.attr("disabled",
"disabled");this.$userControl.attr("aria-disabled","true");break;case "readOnly":this.$userControl.attr("readOnly","readOnly");this.$userControl.attr("aria-readonly","true");break;default:this.$userControl.removeAttr("disabled"),this.$userControl.removeAttr("aria-disabled")}},displayValue:function(g){this.options.commitProperty?f.browser.mozilla&&"value"==this.options.commitProperty?this.$userControl.val(this._displayEmptyStringForIE(this.options.displayValue)):(this.$userControl.prop(this.options.commitProperty,
this._displayEmptyStringForIE(this.options.displayValue)),this.$userControl.attr(this.options.commitProperty,this._displayEmptyStringForIE(this.options.displayValue))):this.logger().debug("xfaView","[DefaultWidget._update], User Control or Commit Property is null")},placeholder:function(g){this.$userControl.attr("placeholder",g)}})},_displayEmptyStringForIE:function(d){return null==d&&xfalib.ut.XfaUtil.prototype.detectIE()?"":d},render:function(){var d=f.xfaWidget.abstractWidget.prototype.render.apply(this,
arguments);this._attachEventHandlers(d);return d},getCommitValue:function(){var d=this.$userControl.val();this.options.hScrollDisabled&&!this.options.multiLine&&(d=xfalib.ut.XfaUtil.prototype.splitStringByWidth(this.$userControl.val(),this.$userControl.width(),this.$userControl.get(0)));return d},_attachEventHandlers:function(d){d.keydown(f.proxy(this._handleKeyDown,this));d.keypress(f.proxy(this._handleKeyPress,this));d.on("paste",f.proxy(this._handlePaste,this));d.on("cut",f.proxy(this._handleCut,
this))},_compositionUpdateCallback:function(d){return!1},_attachCompositionEventHandlers:function(d){var g=!1,a=this,b=function(){var c=window.getSelection();c.selectAllChildren(a.$userControl[0]);c.collapseToEnd()};d.keyup(function(c){g&&(a._compositionUpdateCallback(c)&&b(),g=!1)});d.on("compositionstart",function(c){}).on("compositionupdate",function(c){a._compositionUpdateCallback(c)&&b()}).on("compositionend",function(c){g=!0}).on("keydown",function(c){229!==c.which&&(g=!1)})},_handleKeyDown:function(d){13!=
d.keyCode&&13!=d.charCode&&13!=d.which||d.preventDefault()},_handleKeyPress:function(d){13!=d.keyCode&&13!=d.charCode&&13!=d.which||d.preventDefault()}})})($);
(function(f,d){f.widget("xfaWidget.dateTimeEdit",f.xfaWidget.defaultWidget,{_widgetName:"dateTimeEdit",getEventMap:function(){var g=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return!1===this._nativeWidget?f.extend({},g,{"onfocus1.datetimepicker":xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT,"onvaluechange.datetimepicker":xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,"onfocusout.datetimepicker":xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT,"onoverlap.datetimepicker":xfalib.ut.XfaUtil.prototype.XFA_CLICK_EVENT,
input:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,focus:null,blur:null}):f.extend({},g,{change:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT})},_getAdobeDatePickerOptionsMap:function(g){return{access:function(a){switch(a){case "open":this.$userControl.adobeDateTimePicker("access",!0);break;case "nonInteractive":case "protected":case "readOnly":this.$userControl.adobeDateTimePicker("access",!1)}g.access.apply(this,arguments)},displayValue:function(a){this.$userControl.adobeDateTimePicker("value",this.options.value);
this.showDisplayValue()}}},_getNativeDatePickerOptionsMap:function(g){return{displayValue:function(a){this.showDisplayValue()}}},getOptionsMap:function(){var g=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments),a=!1===this._nativeWidget?this._getAdobeDatePickerOptionsMap(g):this._getNativeDatePickerOptionsMap(g);return f.extend({},g,a,{paraStyles:function(b){g.paraStyles.apply(this,arguments);this._handleVAlignOnExit()},access:function(b){g.access.apply(this,arguments);this.getOptionsMap().width.apply(this,
[this.options.width])},width:function(b){g.width.apply(this,arguments);this.options.showCalendarIcon&&b&&"open"==this.options.access&&this.$userControl.width(b>this.options.calendarIconWidth?b-this.options.calendarIconWidth:b)},height:function(b){g.height.apply(this,arguments);this._handleVAlignOnExit()},screenReaderText:function(b){var c=this.options.editPattern,e=this._nativeWidget?"mm/dd/yyyy":"YYYY-MM-DD",l=/(?:date){0,1}{(.*)}/;if(c="string"===typeof c?c.match(l)[1]:e)var k=xfalib.ut.LocalizationUtil.prototype.getLocalizedMessage("",
xfalib.locale.Strings.datePickerAriaLabel||"Please Enter date in {0} format only",[c]);this.$userControl.attr("aria-label",void 0!==b?b+" "+k:b)}})},postProcessExit:function(g){f.xfaWidget.defaultWidget.prototype.postProcessExit.apply(this,arguments);this._handleVAlignOnExit()},preProcessEnter:function(g){f.xfaWidget.defaultWidget.prototype.preProcessEnter.apply(this,arguments);this._handleVAlignOnEnter()},preProcessChange:function(g){!0===this._nativeWidget&&(this.options.value=this.$userControl.val())},
showDisplayValue:function(){!1===this._nativeWidget?f.xfaWidget.defaultWidget.prototype.showDisplayValue.apply(this,arguments):this.showValue()},showValue:function(){0==this._nativeWidget?this.$userControl.adobeDateTimePicker("value",this.options.value):f.xfaWidget.defaultWidget.prototype.showValue.apply(this,arguments);f.xfaWidget.textField.prototype._selectOnFocusInIE.apply(this,arguments)},getCommitValue:function(){if(!1===this._nativeWidget){var g=this.$userControl.adobeDateTimePicker("value");
return this.parseEditValue(g)}return f.xfaWidget.defaultWidget.prototype.getCommitValue.apply(this,arguments)},render:function(){var g=this,a=this.getOrElse(this.$data(this.element.get(0),"xfamodel"),"textstyle",""),b=f.xfaWidget.abstractWidget.prototype.render.apply(this,arguments),c=b;var e=this.element.find("input").attr("style")||"";this._nativeWidget=!0;if(!1===this.options.useNativeWidget||"date"!==b[0].type)this._nativeWidget=!1,b=this.element.find("input")[0].id,this.element.children().remove(),
f("\x3cdiv\x3e\x3c/div\x3e").css({position:"relative",width:"100%",height:"100%"}).append(f("\x3cinput type\x3d'text'/\x3e")).appendTo(this.element),b=f("input",this.element).attr("style",a).attr("name",this.options.name).attr("id",b).adobeDateTimePicker({positioning:this.element,locale:{months:this.options.months,days:this.options.days,zero:this.options.zero,clearText:this.options.clearText},access:this.options.access,value:this.options.value,showCalendarIcon:this.options.showCalendarIcon,iconWidth:this.options.calendarIconWidth,
minValidDate:this.options.minValidDate,maxValidDate:this.options.maxValidDate,exclMinDate:this.options.exclMinDate,exclMaxDate:this.options.exclMaxDate,editValue:function(l){return g.getEditValue(l)}});this._attachEventHandlers(b);a=(this.element.find("input").attr("style")||"")+e;this.element.find("input").attr("style",a);window.guideBridge&&this.copyAttributesFromSrcToDest(c,this.element.find("input"));return b}})})($,_);
(function(f){f.widget("xfaWidget.numericInput",f.xfaWidget.defaultWidget,{_widgetName:"numericInput",options:{value:null,curValue:null,pos:0,lengthLimitVisible:!0,zero:"0",decimal:".",minus:"-"},_matchArray:{integer:"^[+-]?{digits}*$",decimal:"^[+-]?{digits}{leading}({decimal}{digits}{fraction})?$","float":"^[+-]?{digits}*({decimal}{digits}*)?$"},_regex:null,_engRegex:null,_writtenInLocale:!1,_previousCompositionVal:"",getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,
arguments);return f.extend({},d,{paraStyles:function(g){d.paraStyles.apply(this,arguments);this._handleVAlignOnExit()},height:function(g){g&&(this.$css(this.$userControl[0],{height:g}),this._handleVAlignOnExit())}})},getEventMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},d,{"onKeyInput.numericInput":xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT})},_getDigits:function(){for(var d=this.options.zero.charCodeAt(0),g="",a=0;10>a;a++)g+=String.fromCharCode(d+
a);return"["+g+"]"},_escape:function(d){return d.replace(".","\\.")},postProcessExit:function(d){f.xfaWidget.defaultWidget.prototype.postProcessExit.apply(this,arguments);this._handleVAlignOnExit()},preProcessEnter:function(d){f.xfaWidget.defaultWidget.prototype.preProcessEnter.apply(this,arguments);this._handleVAlignOnEnter()},render:function(){var d=this._matchArray[this.options.dataType];if(d){var g=this.options.leadDigits,a=this.options.fracDigits;a=a&&-1!=a?"{0,"+a+"}":"*";d=d.replace("{leading}",
g&&-1!=g?"{0,"+g+"}":"*").replace("{fraction}",a);g=d.replace(/{digits}/g,this._getDigits()).replace("{decimal}",this._escape(this.options.decimal));d=d.replace(/{digits}/g,"[0-9]").replace("{decimal}","\\.");this._processValue=!("[0123456789]"==this._getDigits()&&"."==this.options.decimal);this._regex=new RegExp(g,"g");this._engRegex=new RegExp(d,"g")}return f.xfaWidget.defaultWidget.prototype.render.apply(this,arguments)},getCommitValue:function(){var d=f.xfaWidget.defaultWidget.prototype.getCommitValue.apply(this,
arguments);0<d.length&&this._processValue&&!d.match(this._engRegex)?(this._writtenInLocale=!0,d=this._convertValueFromLocale(d)):this._writtenInLocale=!1;d&&d.length>=this.options.combCells&&(d=d.slice(0,this.options.combCells));return this._previousCompositionVal=d},_compositionUpdateCallback:function(d){var g=!1,a=this.options.leadDigits,b=this.options.fracDigits;if(-1!==a){var c=this.$userControl.val();"compositionupdate"===d.type&&d.originalEvent.data&&(c+=d.originalEvent.data.substr(d.originalEvent.data.length-
1));d=a+(-1!==b?b+this.options.decimal.length:0);-1===c.indexOf(this.options.decimal)&&(d=a);a=c.match(this._regex);g=!a;null===a?(this.$userControl.val(this._previousCompositionVal),g=!0):g?(g=c.substr(0,d),this.$userControl.val(g),this._previousCompositionVal=g,g=!0):this._previousCompositionVal=c}return g},_attachEventHandlers:function(d){f.xfaWidget.defaultWidget.prototype._attachEventHandlers.apply(this,arguments);f.xfaWidget.defaultWidget.prototype._attachCompositionEventHandlers.apply(this,
arguments)},_handleKeyInput:function(d,g,a){if(d.ctrlKey&&!_.contains(["paste","cut"],d.type))return!0;f.xfaWidget.defaultWidget.prototype._handleKeyDown.apply(this,arguments);this.options.lengthLimitVisible=!0;var b=this.$userControl.prop(this.options.commitProperty)||"",c=xfalib.view.util.HtmlUtil.getHTMLSupportedAttr(this.$userControl[0],"selectionStart"),e=!(void 0===c||null===c);c=c||0;var l=xfalib.view.util.HtmlUtil.getHTMLSupportedAttr(this.$userControl[0],"selectionEnd")||0,k=parseInt(this.options.combCells)||
0,h=g;0<k&&(h=g.substr(0,k-b.length+l-c));if(!e)return!0;e=b.substr(0,c)+h+b.substr(l);if(null!=this._regex&&!e.match(this._regex)&&!e.match(this._engRegex)||!_.contains(["keydown","cut"],d.type)&&k&&(b.length>=k||e.length>k)&&c===l)return d.preventDefault(),!1;this._previousCompositionVal=this.options.curValue=b;this.options.pos=c;this.options.hScrollDisabled&&!_.contains(["keydown","cut"],d.type)&&(b=xfalib.view.util.TextMetrics.measureExtent(e,{refEl:this.$userControl[0],maxWidth:-1}).width,!d.ctrlKey&&
b>this.$userControl.width()-5&&(d.preventDefault(),this.options.lengthLimitVisible=!1));this.$userControl.trigger({type:"onKeyInput.numericInput",originalType:d.type,character:g,keyCode:d.keyCode||0,charCode:d.charCode||0,which:d.which||0,ctrlKey:d.ctrlKey||d.metaKey||!1,shiftKey:d.shiftKey||!1,keyDown:!1,selectionStart:c,selectionEnd:l})},_handleKeyDown:function(d){if(d){var g=d.charCode||d.which||d.keyCode||0;if(8==g||46==g)this._handleKeyInput(d,"",g);else if(32==g)return d.preventDefault(),!1}},
_isValidChar:function(d){var g=String.fromCharCode(this.options.zero.charCodeAt(0)+9);return d>=this.options.zero&&d<=g||d===this.options.decimal||d===this.options.minus},_handleKeyPress:function(d){if(d){var g=d.charCode||d.which||d.keyCode||0,a=String.fromCharCode(g);if(xfalib.ut.XfaUtil.prototype.isNonPrintableKey(d.key))return!0;if(this._isValidChar(a))this._handleKeyInput(d,a,g);else if(!d.ctrlKey)return d.preventDefault(),!1}},_handlePaste:function(d){if(d){var g=void 0;window.clipboardData&&
window.clipboardData.getData?g=window.clipboardData.getData("Text"):d.originalEvent.clipboardData&&d.originalEvent.clipboardData.getData&&(g=d.originalEvent.clipboardData.getData("text/plain"));if(g)if(_.every(g.split(""),function(a){return this._isValidChar(a)},this))this._handleKeyInput(d,g,0);else if(!d.ctrlKey)return d.preventDefault(),!1}},_handleCut:function(d){d&&this._handleKeyInput(d,"",0)},_convertValueToLocale:function(d){var g=this.options.zero.charCodeAt(0);return _.map(d,function(a){return"."==
a?this.options.decimal:"-"==a?this.options.minus:String.fromCharCode(parseInt(a)+g)},this).join("")},_convertValueFromLocale:function(d){var g=this.options.zero.charCodeAt(0);return _.map(d,function(a){return a==this.options.decimal?".":a==this.options.minus?"-":(a.charCodeAt(0)-g).toString()},this).join("")},showValue:function(){this._isValueSame()||(this.options.value&&this._writtenInLocale?this.$userControl.val(this._convertValueToLocale(this.options.value)):this.$userControl.val(this.options.value));
f.xfaWidget.textField.prototype._selectOnFocusInIE.apply(this,arguments)}})})($);
(function(f,d){f.widget("xfaWidget.dropDownList",f.xfaWidget.defaultWidget,{_widgetName:"dropDownList",options:{value:[],items:[],editable:!1,placeholder:"",displayValue:[]},widgetSkeleton:'\x3cselect name\x3d"" style\x3d"" size \x3d "1"\x3e\x3coption id\x3d"emptyValue" value\x3d""\x3e\x3c/option\x3e\x3c/select\x3e',optionSkeleton:"\x3coption data-user-option\x3e\x3c/option\x3e",optGroupSkeleton:'\x3coptgroup label\x3d""\x3e\x3c/optgroup\x3e',AF_OPTGROUP_NAME:"afOptGroupName",PLACE_HOLDER_STYLE_CLASS:"placeHolder",
getOptionsMap:function(){var g=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},g,{value:function(a){d.isArray(a)||(a=[a]);var b=!1,c=this;f("option",this.$userControl).each(function(e){e=f(this).val();d.contains(a,e)?(f(this).prop("selected",!0),b=!0):(f(this).prop("selected",!1),"emptyValue"===this.id&&(f(this).val("").html(c.options.placeholder),0==c.options.placeholder.length&&f(this).hide()))});0==a.length||null==a[0]?this.$userControl.children("#emptyValue").prop("selected",
!0):b||this.$userControl.children("#emptyValue").text(a[0]).prop("selected",!0).val(d.escape(a[0])).show();this.$userControl.toggleClass(this.PLACE_HOLDER_STYLE_CLASS,0==a.length||null==a)},items:function(a){d.isArray(a)||(a=[a]);var b,c,e=[],l=f("optgroup",this.$userControl);if(0==l.length){var k=this.$userControl.find("[selected]");this.$userControl.children("option[data-user-option]").remove()}for(c=b=0;c<a.length;c++){var h=a[c];if("afOptGroupName"!=h.save)e.push(h);else{var p=l[b++];b>l.length&&
(p=this.addGroup(h.display));d.isUndefined(p)||p.label==h.display||(p.label=h.display||"");0!=c&&(this.handleOptions(q,e),e=[]);var q=p}}for(;b<l.length;)p=l[b++],this.deleteGroup(p.label);0!=e.length&&this.handleOptions(q,e,k)},displayValue:function(){},placeholder:function(a){},access:function(a){switch(a){case "open":this.$userControl.removeAttr("disabled");this.$userControl.removeAttr("aria-disabled");break;case "nonInteractive":case "protected":case "readOnly":this.$userControl.attr("disabled",
"disabled");this.$userControl.attr("aria-disabled","true");break;default:this.$userControl.removeAttr("disabled"),this.$userControl.removeAttr("aria-disabled")}}})},getEventMap:function(){var g=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},g,{focus:[xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT,xfalib.ut.XfaUtil.prototype.XFA_PREOPEN_EVENT],change:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT})},render:function(){var g=this.element.find("select").attr("style"),
a=1;this.element.addClass(this._widgetName);this.element.children().remove();var b=d.uniqueId("select"),c=this.getOrElse(this.$data(this.element.get(0),"xfamodel"),"textstyle",""),e=f(this.widgetSkeleton).attr("style",c).attr("name",b);this.options.editable&&e.addClass("combobox");this.options.items&&0<this.options.items.length&&(a=this.options.items.length);this.options.multiSelect&&(e.addClass("multiDropdown"),e.attr("multiple","multiple"),e.attr("size",a),e.attr("data-multiple-selection","true"));
var l=e;d.each(this.options.items,function(k){var h=d.isString(k.save)?k.save.replace(/"/g,"\x26quot;"):"";h===this.AF_OPTGROUP_NAME?l=f(this.optGroupSkeleton).attr("label",k.display).appendTo(e):f(this.optionSkeleton).val(h).text(k.display).appendTo(l)},this);this.element.append(e);a=this.element.children().eq(0).attr("name",this.options.name);this._attachEventHandlers(a);g=this.element.find("select").attr("style")+g;this.element.find("select").attr("style",g);return a},handleOptions:function(g,
a,b){d.isUndefined(g)&&(g=this.$userControl[0]);for(var c=f("option[data-user-option]",g),e=0,l=0;e<c.length&&l<a.length;e++,l++){var k=c[e],h=a[l];k.text!=h.display&&(k.text=h.display||"");k.value!=h.save&&(k.value=h.save||"")}for(;e<c.length;)this.deleteOption(c[e++]);for(;l<a.length;)this.addOption(g,a[l++],b)},addOption:function(g,a,b){var c=f(this.optionSkeleton).val(a.save).text(a.display);c.appendTo(g);b&&a.save===b.val()&&a.display===b.text()&&c.prop("selected",!0);if(this.options.value&&
d.isString(this.options.value))var e=this.options.value.split("\n");else d.isArray(this.options.value)&&(e=this.options.value);e&&0<=e.indexOf(a.save)&&(g=this.$userControl.children("#emptyValue"),g.val("").html(this.options.placeholder).prop("selected",!1),0==this.options.placeholder.length&&g.hide(),this.$userControl.children().filter(function(){return this.value==a.save}).prop("selected",!0))},deleteOption:function(g){this.$userControl.find("option[value\x3d"+g.value+"]").remove()},addGroup:function(g){var a=
document.createElement("OPTGROUP");a.label=g;this.$userControl[0].appendChild(a);return a},deleteGroup:function(g){this.$userControl.children().remove("optgroup[label\x3d"+g+"]")},addItem:function(g){var a=new Option(g.sDisplayVal||"",g.sSaveVal||"");f(a).attr("role","option");this.$userControl[0].add(a,null);d.contains(this.options.value,g.sSaveVal)&&(this.$userControl.children("#emptyValue").val("").html("").prop("selected",!1).hide(),this.$userControl.find("option[value\x3d"+g.sSaveVal+"]").prop("selected",
!0))},clearItems:function(){this.$userControl.children().not("#emptyValue").remove()},deleteItem:function(g){this.$userControl[0].item(0)&&"emptyValue"==this.$userControl[0].item(0).id&&(g+=1);this.$userControl[0].remove(g)},getCommitValue:function(g){return f("option:selected",this.$userControl).map(function(){return f(this).val()}).get()},showDisplayValue:function(){},destroy:function(){this.element.removeClass(this._widgetName).children().remove().text("");f.xfaWidget.defaultWidget.prototype.destroy.apply(this,
arguments)},_handleKeyDown:function(g){13!=g.keyCode&&f.xfaWidget.defaultWidget.prototype._handleKeyDown.apply(this,arguments)},showValue:function(){}})})($,_);
(function(f){f.widget("xfaWidget.listBox",f.xfaWidget.defaultWidget,{_widgetName:"listBoxWidget",options:{value:[],items:[],multiSelect:!1},getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{width:function(g){this.options.width=.95*g;d.width.apply(this,[this.options.width])},access:function(){},value:function(g){var a=this.options.value,b=this,c=!1;_.isArray(a)||(a=[a]);this.$userControl.children().each(function(){var e=f(this).attr("data-save");
a&&_.contains(a,e)?(b._selectListItem(f(this)),c=!0,f.data(this,"_xfaInitialized")||(f(this).data(),f.data(this,"_xfaInitialized",!0)),f.data(this,"selected",!0)):(f(this).removeClass("item-selected"),f(this).addClass("item-selectable"),f(this).attr("tabIndex","-1"))});c||f(this.$userControl.children().get(0)).attr("tabIndex",this.options.tabIndex)},items:function(g){_.isArray(g)||(g=[g]);var a=this.$userControl.children();if(a.length>g.length)for(var b=a.length;b>g.length;b--)this.deleteItem(b-1);
else if(a.length<g.length)for(b=g.length;b>a.length;b--)this.addItem({sDisplayVal:g[b-1].display,sSaveVal:g[b-1].save});_.each(g,function(c,e){e=f(a[e]);e.text()!=c.display&&e.text(c.display||"");e.attr("data-save")!=c.save&&e.attr("data-save",c.save||"")})},displayValue:function(){},tabIndex:function(){var g=this.$userControl.children(".item-selected"),a=this.$userControl.children();g.length?g.eq(0).attr("tabIndex",this.options.tabIndex):0<a.length&&a.eq(0).attr("tabIndex",this.options.tabIndex)}})},
getEventMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},d,{listboxenter:xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT,listboxexit:xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT,listboxchange:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,focus:null,blur:null})},showDisplayValue:function(){},render:function(){this.element.addClass(this._widgetName);this.element.children().remove();var d=this.getOrElse(this.$data(this.element.get(0),"xfamodel"),
"textstyle",""),g=_.template('\x3col style\x3d"position:absolute;\x3c%\x3dtextStyle%\x3e" role\x3d"listbox"\x3e\x3c% _.each(items, function(item){ %\x3e\x3c% var saveItem \x3d item.save ? item.save.replace(/"/g,"\x26quot;"):null %\x3e\x3cli role\x3d"option" data-save\x3d"\x3c% print(saveItem) %\x3e" data-selected\x3d"false"\x3e\x3c% print(item.display) %\x3e\x3c/li\x3e\x3c%})%\x3e\x3c/ol\x3e');d=_.extend({textStyle:d},this.options);g=g(d);this.element.html(xfalib.ut.XfaUtil.prototype.encodeScriptableTags(g));
g=f(this.element.children().get(0)).attr("name",this.options.name);this._attachEventHandlers(g);return g},focus:function(){0<this.$userControl.children(".item-selected").length?this.$userControl.children(".item-selected")[0].focus():0<this.$userControl.children().length&&this.$userControl.children()[0].focus()},addItem:function(d){f("\x3cli\x3e\x3c/li\x3e").attr("data-save",d.sSaveVal||"").text(d.sDisplayVal||"").appendTo(this.$userControl).click(f.proxy(this._handleItemClick,this)).focus(f.proxy(this._handleItemFocus,
this));_.contains(this.options.value,d.sSaveVal)&&this._selectListItem(this.$userControl.find("[data-save\x3d"+d.sSaveVal+"]"))},clearItems:function(){f(this.$userControl).empty()},deleteItem:function(d){f(this.$userControl).children("li").each(function(g,a){g==d&&f(a).off("click").off("focus").remove()})},_attachEventHandlers:function(d){var g=this;d.keydown(f.proxy(this._hotKeys,this)).children().on("mousedown",function(){1==g.inFocus&&(g.mouseDown=!0)}).click(f.proxy(this._handleItemClick,this)).focus(f.proxy(this._handleItemFocus,
this)).blur(f.proxy(this._handleFocusOut,this))},_hotKeys:function(d){if("open"==this.options.access&&this.itemInFocus)switch(d.which){case 38:var g=f(this.itemInFocus).prev();g&&(this.keyDown=!0,g.focus(),this.keyDown=!1);d.preventDefault();break;case 40:if(g=f(this.itemInFocus).next())this.keyDown=!0,g.focus(),this.keyDown=!1;d.preventDefault();break;case 91:case 92:d.preventDefault();break;case 32:this._toggleItem(this.itemInFocus),d.preventDefault()}},_toggleItem:function(d){var g=f(d),a=this.options.multiSelect;
this.$data(d,"selected",!this.$data(d,"selected"));d=this.$data(d,"selected");a||(a=this.$userControl.children(".item-selected"),a.length&&(this.$data(a[0],"selected",!1),a.removeClass("item-selected").addClass("item-selectable")));g.toggleClass("item-selectable",!d).toggleClass("item-selected",d);this.$userControl.trigger("listboxchange")},getCommitValue:function(){var d=this;return this.$userControl.children().map(function(){return d.$data(this,"selected")?f(this).attr("data-save"):null}).get()},
_handleItemFocus:function(d){"open"==this.options.access&&(this.itemInFocus=d.target,this.keyDown||this.mouseDown||this.$userControl.trigger("listboxenter"),this.mouseDown=!1,this.inFocus=!0)},_handleItemClick:function(d){1==this.mouseDown&&(this.mouseDown=!1);"open"==this.options.access&&this._toggleItem(d.target)},_handleFocusOut:function(){this.keyDown||this.mouseDown||(this.$userControl.trigger("listboxexit"),this.inFocus=!1)},_selectListItem:function(d){d&&d.length&&d.removeClass("item-selectable").addClass("item-selected").attr("tabIndex",
this.options.tabIndex)},destroy:function(){this.element.removeClass(this._widgetName).children().remove().text("");f.xfaWidget.defaultWidget.prototype.destroy.apply(this,arguments)}})})($);
(function(f){f.widget("xfaWidget.nwkListBox",f.xfaWidget.dropDownList,{_widgetName:"nwkListBox",options:{value:[],multiSelect:!1},render:function(){var d=f.xfaWidget.dropDownList.prototype.render.apply(this,arguments);d&&(d.children("#emptyValue").remove(),this.options.multiSelect&&d.attr("multiple","multiple"));this._updateSelectSize(d);return d},addItem:function(d){f.xfaWidget.dropDownList.prototype.addItem.apply(this,arguments);this._updateSelectSize()},clearItems:function(){f.xfaWidget.dropDownList.prototype.clearItems.apply(this,
arguments);this._updateSelectSize()},deleteItem:function(d){f.xfaWidget.dropDownList.prototype.deleteItem.apply(this,arguments);this._updateSelectSize()},_updateSelectSize:function(d){d=d||this.$userControl;d.attr("size",(this.options.items||[]).length)},showValue:function(){}})})($);
(function(f){f.widget("xfaWidget.xfaButton",f.xfaWidget.defaultWidget,{_widgetName:"xfaButton",options:{value:null,svgCaption:!1},getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{access:function(g){switch(g){case "open":this.$userControl.removeAttr("disabled");this.$userControl.removeAttr("aria-disabled");break;case "nonInteractive":case "protected":case "readOnly":this.$userControl.attr("disabled","disabled");this.$userControl.attr("aria-disabled",
"true");break;default:this.$userControl.removeAttr("disabled"),this.$userControl.removeAttr("aria-disabled")}},value:function(){},displayValue:function(){},svgCaption:function(g){g&&this.$userControl.removeAttr("value")}})},_attachEventHandlers:function(d){d.click(function(){this.focus()})},getCommitValue:function(){return this.options.value},showValue:function(){},showDisplayValue:function(){}})})($);
(function(f){f.widget("xfaWidget.XfaCheckBox",f.xfaWidget.defaultWidget,{_widgetName:"XfaCheckBox",options:{value:null,state:-1,states:2,values:[],mandatory:!1},checkedState:!1,clickPending:!1,getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{access:function(g){switch(g){case "open":this.$userControl.removeAttr("disabled");this.$userControl.removeAttr("aria-disabled");break;case "nonInteractive":case "protected":case "readOnly":this.$userControl.attr("disabled",
"disabled");this.$userControl.attr("aria-disabled","true");break;default:this.$userControl.removeAttr("disabled"),this.$userControl.removeAttr("aria-disabled")}},displayValue:function(g){this.$userControl.attr(this.options.commitProperty,this.options.value);this._state(this.dIndexOf(this.options.values,this.options.value));this.$userControl.attr("checked",this.checkedState?"checked":null);this.$userControl.prop("checked",this.checkedState?"checked":null);this.$userControl.attr("aria-checked",this.checkedState);
2==this.options.state?this.$userControl.addClass("neutral"):3==this.options.states&&this.$userControl.removeClass("neutral")},allowNeutral:function(g){g=parseInt(g);if(0==g||1==g)this.options.states=2+g},paraStyles:function(g){d.paraStyles.apply(this,arguments);this._handleVAlignOnExit()}})},getEventMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},d,{xfacheckboxchange:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,xfacheckboxclick:xfalib.ut.XfaUtil.prototype.XFA_CLICK_EVENT,
change:null,click:null})},_attachEventHandlers:function(d){var g=this,a=function(b){g.inFocus||(g.focus(),g.inFocus=!0)};d.click(a).change(a).blur(function(b){g.inFocus=!1});d.change(f.proxy(this._handleChange,this)).click(f.proxy(this._handleClick,this))},getCommitValue:function(){this._state((this.options.state+1)%this.options.states);this.$userControl.attr("checked",this.checkedState?"checked":null);this.$userControl.attr("aria-checked",this.checkedState);2==this.options.state?this.$userControl.addClass("neutral"):
3==this.options.states&&this.$userControl.removeClass("neutral");return this.options.values[this.options.state]},_handleVAlignOnExit:function(d){},_handleChange:function(d){this.$userControl.trigger("xfacheckboxchange");!0===this.clickPending?(this.clickPending=!1,this.$userControl.trigger("xfacheckboxclick")):this.clickPending=!0},_handleClick:function(d){d=xfalib.ut.XfaUtil.prototype.detectChrome();var g=xfalib.ut.XfaUtil.prototype.detectIE(),a=this.$userControl.attr("type");!f.browser.mozilla&&
!d||g||!1!==this.clickPending||("radio"!==a||!1!==this.checkedState)&&"checkbox"!==a?(this.$userControl.trigger("xfacheckboxclick"),this.clickPending=!1):this.clickPending=!0},_state:function(d){if(void 0==d)return this.options.state;this.options.state=d;this.checkedState=0==d||2==d},click:function(){"radio"===this.$userControl.attr("type")&&0===this.options.state||this.$userControl.trigger("change");this.$userControl.triggerHandler("click")}})})($);
(function(f){f.widget("xfaWidget.textField",f.xfaWidget.defaultWidget,{_widgetName:"textField",options:{curValue:null,pos:0,lengthLimitVisible:!0,maxChars:0,flag:"",html5Type:"text",length:null,minLength:0,totalLengthMessage:"",minimumLengthMessage:""},getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{maxChars:function(g){this._maxCharsReached(this.options.value)&&(g=this.options.value.slice(0,g),this._setOption("value",g),
this._setOption("displayValue",g))},"multiLine ":function(g){this.options.multiLine?this.$userControl.attr("aria-multiline","true"):this.$userControl.removeAttr("aria-multiline","false")},height:function(g){g&&(this.$css(this.$userControl[0],{height:g}),this._handleVAlignOnExit())},width:function(g){d.width.apply(this,arguments);this._handleVAlignOnExit()},paraStyles:function(g){d.paraStyles.apply(this,arguments);this._handleVAlignOnExit()}})},render:function(){var d=f.xfaWidget.defaultWidget.prototype.render.apply(this,
arguments);if(d&&0<d.length&&this.options.html5Type){var g=this.options.minLength,a=this.options.maxChars,b=this.options.length;isMinLengthSet=null!=g&&0<g;isMaxLengthSet=null!=a&&0<a;isLengthSet=null!=b&&0<b;isMultiline=this.options.multiLine;minLengthMsg=this.options.minimumLengthMessage;totLengthMsg=this.options.totalLengthMessage;pattern="";isMinLengthSet&&(d.attr("minlength",parseInt(g)),minLengthMsg&&0<minLengthMsg.length&&d.attr("title",this.options.minimumLengthMessage));isMaxLengthSet&&d.attr("maxlength",
parseInt(a));isMinLengthSet&&isMaxLengthSet?pattern+=".{"+g+","+a+"}":isMinLengthSet&&(pattern+=".{"+g+",}");isLengthSet&&(isMultiline&&(d.attr("minlength",parseInt(b)),d.attr("maxlength",parseInt(b))),totLengthMsg&&0<totLengthMsg.length&&d.attr("title",this.options.totalLengthMessage),pattern=".{"+b+","+b+"}");(this.options.required||isMinLengthSet||isMaxLengthSet||isLengthSet)&&d.attr("required",!0);pattern&&0<pattern.length&&!isMultiline&&d.attr("pattern",pattern)}return d},_handleVAlignOnExit:function(){var d=
_.isEmpty(this.$userControl.val()||this.options.displayValue);if(this.options.paraStyles&&!d)if(0<f(this.element[0]).find("textarea").length&&!d){var g={height:this.$userControl.css("height"),padding:this.$userControl.css("padding")};this.$css(this.$userControl[0],{height:"1px",padding:"0px"});d=this._getContentHeight();this.$css(this.$userControl[0],g);g=this.options.height;this._calculatePaddingForVAlign(g-d)}else f.xfaWidget.defaultWidget.prototype._handleVAlignOnExit.apply(this,arguments)},getEventMap:function(){var d=
f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},d,{"onKeyInput.textField":xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT})},_maxCharsReached:function(d){var g=!1,a=this.options.multiLine?"textarea":"input";this.options.html5Type&&xfalib.view.util.HtmlUtil.elementSupportsAttribute(a,"maxLength")&&(g=!0);return!g&&this.options.maxChars&&"0"!==this.options.maxChars&&d&&d.length>=this.options.maxChars},_handleKeyInput:function(d,g,a){if(d.ctrlKey&&!_.contains(["paste",
"cut"],d.type))return!0;this.options.multiLine||(f.xfaWidget.defaultWidget.prototype._handleKeyDown.apply(this,arguments),g=13==a?"":g);var b=this.$userControl.val(),c=xfalib.view.util.HtmlUtil.getHTMLSupportedAttr(this.$userControl[0],"selectionStart")||0,e=xfalib.view.util.HtmlUtil.getHTMLSupportedAttr(this.$userControl[0],"selectionEnd")||0,l=b.substr(0,c)+g+b.substr(e);this.options.curValue=b;if(!this.options.multiLine){if(this.options.lengthLimitVisible=!0,this.options.pos=c,this.options.hScrollDisabled&&
!_.contains(["keydown","cut"],d.type)&&(l=xfalib.view.util.TextMetrics.measureExtent(l,{refEl:this.$userControl[0],maxWidth:-1}).width,!d.ctrlKey&&l>this.$userControl.width()))return this.options.lengthLimitVisible=!1,d.preventDefault(),!1}else if(this.options.multiLine&&this.options.hScrollDisabled){var k=this.$userControl;k.css("padding","0px 0px 0px");k.one("input",function(){k.prop("scrollHeight")>k.prop("offsetHeight")&&(k.val(b).prop("selectionStart",e).prop("selectionEnd",e),g=null,a=0)})}if(!_.contains(["keydown",
"cut"],d.type)&&this._maxCharsReached(b)&&c===e)return d.preventDefault(),!1;this.$userControl.trigger({type:"onKeyInput.textField",originalType:d.type,character:g,keyCode:d.keyCode||0,charCode:d.charCode||0,which:d.which||0,ctrlKey:d.ctrlKey||d.metaKey||!1,shiftKey:d.shiftKey||!1,keyDown:!1,selectionStart:c,selectionEnd:e})},_handleKeyDown:function(d){if(d){var g=d.charCode||d.which||d.keyCode||0;8!=g&&46!=g||this._handleKeyInput(d,"",g)}},_handleKeyPress:function(d){if(d){var g=d.charCode||d.which||
d.keyCode||0,a=13==g?"\n":String.fromCharCode(g);if(xfalib.ut.XfaUtil.prototype.isNonPrintableKey(d.key))return!0;this._handleKeyInput(d,a,g)}},_compositionUpdateCallback:function(d){var g=this.$userControl.val();"compositionupdate"===d.type&&d.originalEvent.data&&(g+=d.originalEvent.data.substr(d.originalEvent.data.length-1));if(d=this._maxCharsReached(g))g=g.substr(0,this.options.maxChars),this.$userControl.val(g);return d},_attachEventHandlers:function(d){f.xfaWidget.defaultWidget.prototype._attachEventHandlers.apply(this,
arguments);f.xfaWidget.defaultWidget.prototype._attachCompositionEventHandlers.apply(this,arguments)},_handlePaste:function(d){if(d){var g=void 0;window.clipboardData&&window.clipboardData.getData?g=window.clipboardData.getData("Text"):d.originalEvent.clipboardData&&d.originalEvent.clipboardData.getData&&(g=d.originalEvent.clipboardData.getData("text/plain"));g&&this._handleKeyInput(d,g,0)}},_handleCut:function(d){d&&this._handleKeyInput(d,"",0)},postProcessExit:function(d){f.xfaWidget.defaultWidget.prototype.postProcessExit.apply(this,
arguments);this.options.multiLine&&this.options.hScrollDisabled||this._handleVAlignOnExit()},preProcessEnter:function(d){f.xfaWidget.defaultWidget.prototype.preProcessEnter.apply(this,arguments);this.options.multiLine&&this.options.hScrollDisabled||this._handleVAlignOnEnter()},_selectOnFocusInIE:function(){f.browser.msie&&!this._isValueSame()&&this.$userControl.select()},showValue:function(){f.xfaWidget.defaultWidget.prototype.showValue.apply(this,arguments);this._selectOnFocusInIE()},getCommitValue:function(){var d=
f.xfaWidget.defaultWidget.prototype.getCommitValue.apply(this,arguments);this._maxCharsReached(d)&&(d=d.slice(0,this.options.maxChars));this.$userControl.val(this.options.value);return d},_getContentHeight:function(){var d=Math.ceil(this.$userControl.get(0).scrollHeight);return d?d:this.options.fontSize}})})($);
(function(f){f.widget("xfaWidget.richTextField",f.xfaWidget.textField,{_widgetName:"richTextField",_richTextWidget:null,_changeAccess:function(d){switch(d){case "open":this._richTextWidget&&(this._richTextWidget.editor.enable(),this._richTextWidget.$toolbar.removeClass("hideToolbar"));break;case "readOnly":this._richTextWidget&&(this._richTextWidget.editor.disable(),this._richTextWidget.$toolbar.addClass("hideToolbar"))}},getOptionsMap:function(){var d=f.xfaWidget.textField.prototype.getOptionsMap.apply(this,
arguments);return f.extend({},d,{value:function(g){this._richTextWidget&&this._richTextWidget.setRichTextEditorContent(g)},access:function(g){this._changeAccess(g)}})},getEventMap:function(){if(xfalib.ut.XfaUtil.prototype.isIE()){var d=f.xfaWidget.textField.prototype.getEventMap.apply(this,arguments);return f.extend({},d,{"activate.richTextField":xfalib.ut.XfaUtil.prototype.XFA_ENTER_EVENT})}return f.xfaWidget.textField.prototype.getEventMap.apply(this,arguments)},render:function(){var d=this.element.find("div.richTextWidget").eq(0);
d.length?d.children().remove():(d=this.element.children().attr("class"),d='\x3cdiv class\x3d"richTextWidget '+d+'" id\x3d"richTextField_'+this.options.name+"_"+d+'"\x3e\x3c/div\x3e',this.element.children().remove(),this.element.append(d),d=this.element.find("div.richTextWidget").eq(0));d.append(this.options.value);return f.xfaWidget.defaultWidget.prototype.render.apply(this,arguments)},getCommitValue:function(){var d="";this._richTextWidget&&(d=this._richTextWidget.getRichTextEditorContent());return d},
preProcessEnter:function(d){f.xfaWidget.textField.prototype.preProcessEnter.apply(this,arguments);var g=this.$userControl.find("div.richTextWidget").eq(0);g.length||(g=this.element.find("div.richTextWidget").eq(0),this.changeDefaultToolbarConfig(),this.$userControl.parents(".richtextsupport").css("z-index","auto"));if(void 0!==window.Form&&void 0!==window.Form.rte&&null===this._richTextWidget){this._initializeRTEToolbar();this._richTextWidget=new window.Form.rte.RichTextEditor({selector:g.attr("id"),
toolbar:window.Form.rte.RichTextEditor.MFToolbar,data:this.options.value,locale:g.data("locale")});var a=this;this._richTextWidget.editor.on("blur:composer",function(){a.$userControl.trigger("blur")});this.options.access&&this._changeAccess(this.options.access)}},changeDefaultToolbarConfig:function(){if(window.Form&&window.Form.rte){var d=window.Form.rte.DefaultConfig;d.fontSize.defaultValue=this.options.fontSize;d.fontFamily.defaultValue=this.options.fontFamily;d.isFontInPx=!0;this.changeDefaultParaStyleUtility();
this.changeMissingParaStyleUtility();-1===d.fontSize.options.indexOf(this.options.fontSize)&&d.fontSize.options.push(this.options.fontSize);-1===d.fontFamily.options.indexOf(this.options.fontFamily)&&d.fontFamily.options.push(this.options.fontFamily)}},changeDefaultParaStyleUtility:function(){Form.rte.util.HtmlUtils.getDefaultParaStyle=function(d){var g="";d&&(g+="font-family:"+d.fontFamily.defaultValue+";",d.isFontInPx?(g+="font-size:"+d.fontSize.defaultValue+"px;",g+="letter-spacing:"+d.letterSpacing.defaultValue+
"px;"):(g+="font-size:"+d.fontSize.defaultValue+"pt;",g+="letter-spacing:"+d.letterSpacing.defaultValue+"pt;"),g+="color:#000000;text-align:left;");return g}},changeMissingParaStyleUtility:function(){Form.rte.util.HtmlUtils.getMissingParaStyle=function(d,g){d&&0<d.length?g&&(Form.rte.util.StringHelper.endsWith(d,";")||(d+=";"),0>d.indexOf("font-family")&&(d+="font-family:"+g.fontFamily.defaultValue+";"),0>d.indexOf("font-size")&&(d=g.isFontInPx?d+("font-size:"+g.fontSize.defaultValue+"px;"):d+("font-size:"+
g.fontSize.defaultValue+"pt;")),0>d.indexOf("letter-spacing")&&(d=g.isFontInPx?d+("letter-spacing:"+g.letterSpacing.defaultValue+"px;"):d+("letter-spacing:"+g.letterSpacing.defaultValue+"pt;")),0>d.indexOf("color")&&(d+="color:#000000;"),0>d.indexOf("text-align")&&(d+="text-align:left;")):d=Form.rte.util.HtmlUtils.getDefaultParaStyle(g);return d}},_initializeRTEToolbar:function(){window.Form.rte.RichTextEditor.MFToolbar=window.Form.rte.RichTextEditor.MFToolbar||{defaultMode:"basic",toolbars:{basic:{layout:[{items:[Form.rte.Commands.HEADER]},
{items:[Form.rte.Commands.BOLD,Form.rte.Commands.ITALIC,Form.rte.Commands.UNDERLINE]},{command:"lists",icon:"list",title:"List Type",type:"popover",placement:"bottom",items:[Form.rte.Commands.INSERT_UNORDERED_LIST,Form.rte.Commands.INSERT_ORDERED_LIST,Form.rte.Commands.INSERT_LOWERCASE_ALPHABET_LIST]},{title:"Expand",command:Form.rte.Commands.MODE,value:Form.rte.ToolbarMode.FULL,icon:"resize-full"}],floating:!0},full:{layout:[{items:[Form.rte.Commands.BOLD,Form.rte.Commands.ITALIC,Form.rte.Commands.UNDERLINE]},
{items:[Form.rte.Commands.SUPERSCRIPT,Form.rte.Commands.SUBSCRIPT]},{items:[Form.rte.Commands.HEADER,Form.rte.Commands.FONT_FAMILY,Form.rte.Commands.LINE_HEIGHT,Form.rte.Commands.FORE_COLOR,Form.rte.Commands.HILITE_COLOR,Form.rte.Commands.LINK]},{items:[Form.rte.Commands.INSERT_UNORDERED_LIST,Form.rte.Commands.INSERT_ORDERED_LIST,Form.rte.Commands.INSERT_LOWERCASE_ALPHABET_LIST]},{title:"Collapse",command:Form.rte.Commands.MODE,value:Form.rte.ToolbarMode.BASIC,icon:"resize-small",selected:!0}]}}}}})})($);
(function(f){f.widget("xfaWidget.imageField",f.xfaWidget.defaultWidget,{_widgetName:"imageField",options:{tabIndex:0,role:"img"},getEventMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},d,{imagechange:xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT})},getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{screenReaderText:function(g){g&&this.$userControl.attr("alt",g)},displayValue:function(g){g=
this.options.value?"data:;base64,"+this.options.value:"";this.$userControl.prop(this.options.commitProperty,g);this.$userControl.attr(this.options.commitProperty,g)},access:function(){},height:function(g){g&&"actual"!=this.options.aspect&&this.$css(this.$userControl[0],{"max-height":g})},width:function(g){g&&"actual"!=this.options.aspect&&this.$css(this.$userControl[0],{"max-width":g})},aspect:function(g){if("actual"==this.options.aspect){g=this.$userControl.attr("width");var a=this.$userControl.attr("height");
g=0<=g.indexOf("px")?g:g+"px";a=0<=a.indexOf("px")?a:a+"px";this._cropImage("0px",g,a,"0px");this.$userControl.removeAttr("height width")}else"none"!=this.options.aspect&&this.$userControl.attr({height:"auto",width:"auto"})}})},_cropImage:function(d,g,a,b){this.$userControl.css({clip:"rect("+d+","+g+","+a+","+b+")","clip-path":"polygon( 0px 0px, 0px "+a+","+g+" "+a+","+g+" 0px)"})},render:function(){var d=this;"undefined"!==typeof FileReader?this.reader=new FileReader:xfalib.ut.XfaUtil.prototype.getLogger().error("Image Field is supported only for HTML5 supported browsers.");
this.element&&(this.$widgetInput=this.element.find("input").on("change.imageField",function(){d._handleInputChange()}).click(function(g){g.stopPropagation()}),this.$widgetImg=this.element.on("click.imageField",function(){d._imageClick()}).find("img"));this.reader&&this.reader.addEventListener("load",function(){d.$widgetImg.attr("src",d.reader.result);d.$widgetImg.trigger("imagechange")},!1);return f.xfaWidget.defaultWidget.prototype.render.apply(this,arguments)},getCommitValue:function(){return this._extractData(this.$userControl.attr("src"))},
_handleInputChange:function(){this._displayImage()},_imageClick:function(d){this.$widgetInput.trigger("click")},_extractData:function(d){return d.replace(/data:.*;base64,/,"")},_displayImage:function(){var d=this.$widgetInput.get(0).files?this.$widgetInput.get(0).files[0]:null;d&&this._isFileOfImageType(d.name)&&this.reader&&this.reader.readAsDataURL(d)},_isFileOfImageType:function(d){return d?/\.(jpe?g|png|gif|tif|bmp)$/i.test(d):!1}})})($);
(function(f){f.widget("xfaWidget.signatureField",f.xfaWidget.defaultWidget,{_widgetName:"signatureField",getOptionsMap:function(){var d=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{displayValue:function(g){},access:function(g){}})},render:function(){var d=f.xfaWidget.defaultWidget.prototype.render.apply(this,arguments);d&&d.attr("readOnly","readonly").attr("disabled",!0);return d}})})($);
(function(f,d){function g(h,p,q,t,m){this._callback=m;this.canvasID=h;this._lineWidth=5;this.canvas=f("#"+h);this.context=this.canvas.get(0).getContext("2d");this.context.clearRect(0,0,this.canvas.width,this.canvas.height);this._enabled=!0;this.context.strokeStyle="#000000";this.canvasBorderWidth=parseInt(this.canvas.css("border-left-width"),10);this.context.lineWidth=this._lineWidth;this.lastMousePoint={x:0,y:0};this.canvas[0].width=q;this.canvas[0].height=t;p?this.context.drawImage(p,0,0):(this.context.fillStyle=
"#ffffff",this.context.clearRect(0,0,q,t));this.canvas.on(b.POINTER_DOWN,this.onCanvasMouseDown())}function a(){}var b=d.ut.TouchUtil,c=function(){return{localeString:function(h){return d.ut.XfaUtil.prototype.encodeScriptableTags(f.xfaWidget.abstractWidget.prototype.localeStrings()[h])||h}}}();g.prototype.setLineWidth=function(h){this._lineWidth=h};g.prototype.onCanvasMouseDown=function(){var h=this;return function(p){2>b.getTouches(p).length&&(h.mouseMoveHandler=h.onCanvasMouseMove(),h.mouseUpHandler=
h.onCanvasMouseUp(),document.addEventListener(b.POINTER_MOVE,h.mouseMoveHandler,{passive:!1}),f(document).on(b.POINTER_UP,h.mouseUpHandler),h.updateMousePosition(p),h.updateCanvas(p))}};g.prototype.onCanvasMouseMove=function(){var h=this;return function(p){if(2>b.getTouches(p).length)return h.updateCanvas(p),p.preventDefault(),!1}};g.prototype.onCanvasMouseUp=function(h){var p=this;return function(q){document.removeEventListener(b.POINTER_MOVE,p.mouseMoveHandler,{passive:!1});f(document).off(b.POINTER_UP,
p.mouseUpHandler);p.mouseMoveHandler=null;p.mouseUpHandler=null}};g.prototype.updateMousePosition=function(h){if(this._enabled){h=b.getTouchEvent(h);var p=this.canvas.offset();this.lastMousePoint.x=h.clientX+f(window).scrollLeft()-p.left-this.canvasBorderWidth;this.lastMousePoint.y=h.clientY+f(window).scrollTop()-p.top-this.canvasBorderWidth}};g.prototype._isInsideCanvas=function(h,p){return 0<=p&&p<this.canvas[0].height&&0<=h&&h<this.canvas[0].width};g.prototype.updateCanvas=function(h){if(this._enabled){var p=
parseInt(this.canvas[0].style.width,10);var q=parseInt(this.canvas[0].style.height,10);var t=p?this.canvas[0].width/p:1;var m=q?this.canvas[0].height/q:1;t/=d.ut.XfaUtil.prototype.formScaleFactor;m/=d.ut.XfaUtil.prototype.formScaleFactor;q=this.lastMousePoint.x*t;p=this.lastMousePoint.y*m;this.updateMousePosition(h);h=this.lastMousePoint.x*t;var r=this.lastMousePoint.y*m;t=Math.abs(h-q);m=Math.abs(r-p);(0<t||0<m)&&this._isInsideCanvas(q,p)&&this._isInsideCanvas(h,r)&&(this.context.beginPath(),this.context.moveTo(q,
p),this.context.lineTo(h,r),this.context.lineWidth=this._lineWidth,this.context.lineCap="round",this.context.stroke(),this._callback())}};g.prototype.toString=function(){return this.canvas.get(0).toDataURL("image/png")};g.prototype.setEnabled=function(h){this._enabled=h};g.prototype.clear=function(){var h=this.canvas[0];this.context.clearRect(0,0,h.width,h.height)};var e=function(){var h=function(){var q=['\x3cdiv id\x3d"iEBox_container" tabindex\x3d"0" role\x3d"dialog" aria-label\x3d"'+c.localeString("pleaseSignText")+
'"\x3e','\x3cdiv id\x3d"iEBox_panel"\x3e','\x3cdiv  id \x3d "iEBox_Cancel" class\x3d"iEBox_button" tabindex\x3d"0" role\x3d"button" aria-label\x3d"'+c.localeString("cancel")+'" title\x3d"'+c.localeString("cancel")+'" \x3e\x3c/div\x3e','\x3c/div\x3e\x3cdiv id\x3d"iEBox_content"\x3e\x3cdiv id\x3d"iEBox_canvases" align\x3dcenter\x3e\x3cdiv style\x3d"display:inline-block;"\x3e\x3ccanvas  id\x3d"iEBox_canvas" style\x3d"margin:0px;border-bottom:0px;" width\x3d"696" height\x3d"390" \x3e\x3c/canvas\x3e',
'\x3cfieldset id\x3d"iEBox_caption"\x3e\x3clegend align\x3d"center"\x3e'+c.localeString("pleaseSignText")+"\x3c/legend\x3e\x3c/fieldset\x3e",'\x3c/div\x3e\x3ccanvas id\x3d"iEBox_geoCanvasRight" width\x3d"0" height\x3d"0" \x3e\x3c/canvas\x3e\x3cdiv\x3e\x3ccanvas id\x3d"iEBox_geoCanvasBottom" width\x3d"0" height\x3d"0" \x3e\x3c/canvas\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv\x3e','\x3cdiv id\x3d"iEBox_Brush" class\x3d"iEBox_button" tabindex\x3d"0"  role\x3d"button" aria-label\x3d"'+c.localeString("brushes")+
'"  title\x3d"'+c.localeString("brushes")+'"\x3e\x3c/div\x3e','\x3cdiv id\x3d"iEBox_Clear" class\x3d"iEBox_button" tabindex\x3d"0"  role\x3d"button" aria-label\x3d"'+c.localeString("clear")+'"  title\x3d"'+c.localeString("clear")+'" \x3e\x3c/div\x3e','\x3cdiv id\x3d"iEBox_Geo" class\x3d"iEBox_button" tabindex\x3d"0"  role\x3d"button" aria-label\x3d"'+c.localeString("geolocation")+'"  title\x3d"'+c.localeString("geolocation")+'" \x3e\x3c/div\x3e','\x3cdiv id\x3d"iEBox_title"\x3e\x3c/div\x3e','\x3cdiv id\x3d"iEBox_Ok" class\x3d"iEBox_button" tabindex\x3d"0"  role\x3d"button" aria-label\x3d"'+
c.localeString("ok")+'"  title\x3d"'+c.localeString("ok")+'" \x3e\x3c/div\x3e','\x3c/div\x3e\x3c/div\x3e\x3cdiv id\x3d"iEBox_moveframe" \x3e\x3c/div\x3e\x3cdiv id\x3d"iEBox_brushList" \x3e\x3c/div\x3e\x3c/div\x3e'].join("");return function(){return q}},p={verticalOffset:0,horizontalOffset:0,repositionOnResize:!0,overlayOpacity:.75,overlayColor:"#CCCCCC",draggable:!0,_brushes:[2,3,4,5,6,7,8,9,10],_buttonsEnabled:{},_isOpen:!1,show:function(q,t){this._show(t);this._buttonsEnabled={Geo:!0,Clear:!0,Ok:!0,
Cancel:!0,Brush:!0}},setEnabled:function(q,t){this._buttonsEnabled[q]!=t&&((this._buttonsEnabled[q]=t)?f("#iEBox_"+q).empty('\x3cdiv style\x3d"background:white;width:100%;height:100%;opacity:0.75;"\x3e\x3c/div\x3e').removeClass("disable_button"):f("#iEBox_"+q).append('\x3cdiv style\x3d"background:white;width:100%;height:100%;opacity:0.75;"\x3e\x3c/div\x3e').addClass("disable_button"))},enableButtons:function(q){for(var t in q)this.setEnabled(t,q[t])},toggleBrushList:function(q){if("none"!=f("#iEBox_brushList").css("display"))f("#iEBox_brushList").css({display:"none"});
else{var t=document.onselectstart;document.onselectstart=function(){return!1};f("#iEBox_brushList").css({display:"block",visibility:"hidden"});f("#iEBox_brushList").offset(f("#iEBox_Brush").offset());f("#iEBox_brushList").offset({top:f("#iEBox_Brush").offset().top-f("#iEBox_brushList").height()});f("#iEBox_brushList").css({display:"block",visibility:"visible"});f("#iEBox_brushList").one("mouseleave",function(m){f("#iEBox_brushList").css({display:"none"});document.onselectstart=t})}},_attachCallbacks:function(q){var t=
this;_.each(["Cancel","Clear","Geo","Ok","Brush"],function(m,r){f("#iEBox_"+m).click(function(u){t._buttonsEnabled[m]&&(u.stopPropagation(),q(m))});f("#iEBox_"+m).keydown(function(u){!t._buttonsEnabled[m]||13!=u.keyCode&&13!=u.charCode&&13!=u.which||(u.stopPropagation(),q(m))})});_.each(f("#iEBox_brushList").children(),function(m,r){f(m).on(b.POINTER_UP,function(u){q("BrushSelect",t._brushes[r]);f("#iEBox_brushList").css({display:"none"})});f(m).on(b.POINTER_DOWN,function(u){u.preventDefault()})});
f("#iEBox_container").keydown(function(m){var r=document.querySelector("#iEBox_container"),u=document.querySelector("#iEBox_Ok"),v="Tab"===m.key||9===m.keyCode;27==m.keyCode||27==m.charCode||27==m.which?(m.stopPropagation(),m.preventDefault(),q("Cancel")):v&&(m.shiftKey&&document.activeElement===r?(u.focus(),m.preventDefault()):document.activeElement===u&&(r.focus(),m.preventDefault()))});this.draggable&&this._makeDraggable(b.TOUCH_ENABLED)},_makeDraggable:function(q){var t=!1,m,r,u,v,w;f("#iEBox_panel").on(b.POINTER_DOWN,
function(x){2>b.getTouches(x).length&&f(x.target).is("#iEBox_panel")&&(f("body")[0].addEventListener(b.POINTER_MOVE,v=function(A){if(2>b.getTouches(A).length&&t){A.preventDefault();var y=b.getTouchEvent(A);A=y.pageX-m;y=y.pageY-r;f("#iEBox_moveframe").offset({top:u.top+y,left:u.left+A})}},{passive:!1}),f("body").on(b.POINTER_UP,w=function(A){if(t){A=f("#iEBox_moveframe").offset();var y=f(window).scrollTop(),D=y+f(window).height();1>A.top-y&&(A.top=y);0<A.top-D+f("#iEBox_panel").height()&&(A.top=D-
f("#iEBox_panel").height());f("#iEBox_container").offset(A);f("#iEBox_moveframe").css({display:"none"}).offset(A);t=!1;f("body")[0].removeEventListener(b.POINTER_MOVE,v,{passive:!1});f("body").off(b.POINTER_UP,w)}}),x=b.getTouchEvent(x),t=!0,m=x.pageX,r=x.pageY,u=f("#iEBox_container").offset(),f("#iEBox_moveframe").css({display:"block"}),f("#iEBox_moveframe").offset(u),f("#iEBox_moveframe").css("width",f("#iEBox_container").css("width")),f("#iEBox_moveframe").css("height",f("#iEBox_container").css("height")))})},
_createBrushes:function(){_.each(this._brushes,function(q,t){t=document.createElement("DIV");var m=document.createElement("CANVAS"),r=m.getContext("2d");m.style.border="1px solid #AAAAAA";m.width=b.TOUCH_ENABLED?200:100;m.height=b.TOUCH_ENABLED?40:20;r.lineWidth=q;r.beginPath();r.moveTo(10,m.height/2);r.lineTo(m.width-10,m.height/2);r.stroke();t.appendChild(m);f("#iEBox_brushList").append(t)})},getIsOpen:function(){return p._isOpen},setIsOpen:function(q){p._isOpen=q},_show:function(q){p.hide();p._overlay("show");
f("BODY").append(h());p.setIsOpen(!0);f("#iEBox_container").focus();p._createBrushes();p._reposition();f("#iEBox_container");var t=f("#iEBox_canvas"),m=f("#iEBox_container").outerWidth(!0),r=f("#iEBox_container").outerHeight(!0);p.canvas_spacing={x:m-t[0].width,y:r-t[0].height};p._maintainPosition(!0);p._attachCallbacks(q)},hide:function(){f("#iEBox_container").remove();this._overlay("hide");p.setIsOpen(!1);this._maintainPosition(!1)},_overlayResize:function(q){f("#iEBox_overlay").height()!=f(document).height()&&
f("#iEBox_overlay").height(f(document).height())},_disableMove:function(q){q.preventDefault()},_overlay:function(q){switch(q){case "show":this._overlay("hide");f("BODY").append('\x3cdiv id\x3d"iEBox_overlay"\x3e\x3c/div\x3e');f("#iEBox_overlay").css({position:"fixed",zIndex:99997,top:"0px",left:"0px",width:"100%",height:f(document).height(),background:this.overlayColor,opacity:this.overlayOpacity});if(d.ut.XfaUtil.prototype.isSafari())f("#iEBox_overlay").on("touchmove",this._disableMove);f(document).on("scroll",
this._overlayResize);break;case "hide":d.ut.XfaUtil.prototype.isSafari()&&f("#iEBox_overlay").off("touchmove"),f("#iEBox_overlay").remove(),f(document).off("scroll",this._overlayResize)}},_resize:function(){var q=f(window).width(),t=f(window).height(),m=f("#iEBox_canvas")[0],r=f("#iEBox_geoCanvasBottom")[0],u=f("#iEBox_geoCanvasRight")[0],v=m.width+u.width,w=m.height+r.height;q=v+p.canvas_spacing.x-q;0>q&&(q=0);t=w+p.canvas_spacing.y-t;0>t&&(t=0);0<q||0<t?(t*v>w*q?(t=w-t,q=t*v/w):(q=v-q,t=q*w/v),
v=q*m.width/v,w=t*m.height/w,m.style.width=v+"px",m.style.height=w+"px",r.style.width=v+"px",r.style.height=t-w+"px",u.style.width=q-v+"px",u.style.height=w+"px",f("#iEBox_caption").width(Math.floor(v))):(m.style.width=m.width+"px",m.style.height=m.height+"px",r.style.width=r.width+"px",r.style.height=r.height+"px",u.style.width=u.width+"px",u.style.height=u.height+"px",f("#iEBox_caption").width(m.width))},_reposition:function(){f(window).height();f("#iEBox_container").outerHeight();var q=f(window).width()*
(1/d.ut.XfaUtil.prototype.formScaleFactor)/2-f("#iEBox_container").outerWidth()/2+p.horizontalOffset;0>q&&(q=0);f("#iEBox_container").css({top:f("#iEBox_container").outerHeight()/2+f(window).scrollTop()*(1/d.ut.XfaUtil.prototype.formScaleFactor)+"px",left:q+f(window).scrollLeft()*(1/d.ut.XfaUtil.prototype.formScaleFactor)+"px"});f("#iEBox_container").focus();f("#iEBox_overlay").height(f(document).height())},_maintainDialog:function(){p._resize();p._reposition()},_maintainPosition:function(q){if(p.repositionOnResize)switch(q){case !0:f(window).on("orientationchange",
p._maintainDialog);break;case !1:f(window).off("orientationchange",p._maintainDialog)}}};return p}();a.prototype={init:function(h,p){this._successHandler=h;this._errorHandler=p;this._active=!0;return this},_handleSuccess:function(h){this._successHandler(h)},_handleError:function(h){this._errorHandler(h)},query:function(){_that=this;navigator.geolocation.getCurrentPosition(function(h){_that._active&&_that._handleSuccess(h);_that._active=!1},function(h){_that._active&&_that._handleError(h);_that._active=
!1},{timeout:1E4})},cancel:function(){_that._active=!1}};var l={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d",encode:function(h){for(var p="",q,t,m,r,u,v,w=0;w<h.length;)q=h.charCodeAt(w++),t=h.charCodeAt(w++),m=h.charCodeAt(w++),r=q>>2,q=(q&3)<<4|t>>4,u=(t&15)<<2|m>>6,v=m&63,isNaN(t)?u=v=64:isNaN(m)&&(v=64),p=p+this._keyStr.charAt(r)+this._keyStr.charAt(q)+this._keyStr.charAt(u)+this._keyStr.charAt(v);return p},decode:function(h){var p="",q=0;for(h=h.replace(/[^A-Za-z0-9\+\/=]/g,
"");q<h.length;){var t=this._keyStr.indexOf(h.charAt(q++));var m=this._keyStr.indexOf(h.charAt(q++));var r=this._keyStr.indexOf(h.charAt(q++));var u=this._keyStr.indexOf(h.charAt(q++));t=t<<2|m>>4;m=(m&15)<<4|r>>2;var v=(r&3)<<6|u;p+=String.fromCharCode(t);64!=r&&(p+=String.fromCharCode(m));64!=u&&(p+=String.fromCharCode(v))}return p}},k=function(){var h={_LC_Scribble_MetaDataKey:"LC_SCIBBLE_METADATA",_isPng:function(p){return p&&0==p.replace(/\s+/g,"").indexOf("iVBORw0KGgo")},_update_crc:function(p,
q){var t;for(t=0;t<q.length;t++)p=this._XOR(h._crc_table[(this._XOR(p,q.charCodeAt(t))&255)>>>0],p>>>8);return p},_XOR:function(p,q){return(p^q)>>>0},_U32Int2Str:function(p){return String.fromCharCode(p>>>24&255)+String.fromCharCode(p>>>16&255)+String.fromCharCode(p>>>8&255)+String.fromCharCode(p>>>0&255)},_init_crc_table:function(){var p,q;h._crc_table=[];for(p=0;256>p;p++){var t=p;for(q=0;8>q;q++)t=0<(t&1)>>>0?h._XOR(3988292384,t>>>1):t>>>1;h._crc_table[p]=t}},_CRC:function(p){this._crc_table||
this._init_crc_table();return this._XOR(this._update_crc(4294967295,p),4294967295)},_prepareTextChunk:function(p,q){q=h._U32Int2Str(p.length);var t=h._U32Int2Str(h._CRC("tEXt"+p));return q+"tEXt"+p+t},_start:function(p){h._startTime=(new Date).getTime();h._startFun=p},_end:function(){(new Date).getTime()},_readU32Int:function(p){var q=p.d;return(q.charCodeAt(p.p++)<<24|q.charCodeAt(p.p++)<<16|q.charCodeAt(p.p++)<<8|q.charCodeAt(p.p++))>>>0},_readChunkType:function(p){var q=p.d;return q[p.p++]+q[p.p++]+
q[p.p++]+q[p.p++]},_makeReadOnly:function(p){h._start("_makeReadOnly");p={p:0,d:h._atob(p.replace(/\s+/g,""))};p.p+=8;var q=h._readU32Int(p);h._readChunkType(p);p.p+=q;h._readU32Int(p);q=h._prepareTextChunk(h._LC_Scribble_MetaDataKey+String.fromCharCode(0)+"true");p=p.d.substring(0,p.p)+q+p.d.substring(p.p);p=h._btoa(p);h._end();return p},_atob:function(p){return window.atob?atob(p):l.decode(p)},_btoa:function(p){return window.btoa?btoa(p):l.encode(p)},_isReadOnly:function(p){h._start("_isReadOnly");
if(h._isPng(p)){var q=h._LC_Scribble_MetaDataKey+String.fromCharCode(0)+"true";p={p:0,d:h._atob(p.replace(/\s+/g,""))};for(p.p+=8;p.p<p.d.length;){var t=h._readU32Int(p);if("tEXt"==h._readChunkType(p)&&p.d.indexOf(q,p.p)==p.p)return h._end(),!0;p.p+=t;h._readU32Int(p)}}h._end();return!1}};return h}();f.widget("xfaWidget.ScribbleImageField",f.xfaWidget.imageField,{_widgetName:"ScribbleImageField",_geoLocQuery:null,_emptyImageVal:null,_extraInfo:null,_defaultStatus:"\x26nbsp;",_enforceGeoLoc:!!navigator.userAgent.match(/iPad/i),
_sigCanvasWidth:696,_sigCanvasHeight:390,_geoCanvId:null,_geoLocAtBottom:!1,_geoCanvasHeight:100,_geoCanvasWidth:696,_is_readonly:!1,options:{tabIndex:0,role:"img"},getOptionsMap:function(){var h=f.xfaWidget.defaultWidget.prototype.getOptionsMap.apply(this,arguments);return f.extend({},h,{displayValue:function(p){this.options.commitProperty&&(p?(this.$userControl.removeClass("emptyScribble"),p=k._isPng(p)?"data:image/png;base64,"+this.options.value:"data:;base64,"+this.options.value,this._setValue(p)):
(this._displayValue(this._extractData(this._createEmptyImageData())),this.$userControl.addClass("emptyScribble"),this._is_readonly=!1))}})},getEventMap:function(){var h=f.xfaWidget.defaultWidget.prototype.getEventMap.apply(this,arguments);return f.extend({},h,{scribblefocus:d.ut.XfaUtil.prototype.XFA_ENTER_EVENT,click:null,scribbleclick:d.ut.XfaUtil.prototype.XFA_CLICK_EVENT,change:null,scribblechange:d.ut.XfaUtil.prototype.XFA_CHANGE_EVENT,blur:null,scribbleclose:d.ut.XfaUtil.prototype.XFA_EXIT_EVENT})},
aspectRatioToBeUsed:function(){if(this.options.aspectRatio&&0<parseFloat(this.options.aspectRatio))var h=1/parseFloat(this.options.aspectRatio);else{h=this.element.children("img");var p=h.attr("width"),q=h.attr("height");p=p?parseInt(p,10):h.width();h=(q?parseInt(q,10):h.height())/p}return h},_setUpCanvas:function(){var h=this.aspectRatioToBeUsed();var p=640;var q=640*h;480<q&&(q=480,p=480/h);1<=h?(this._geoCanvId="iEBox_geoCanvasBottom",this._geoLocAtBottom=!0,this._geoCanvasWidth=p,this._geoCanvasHeight=
Math.min(84,q/3),this._sigCanvasWidth=p,this._sigCanvasHeight=q-(this._enforceGeoLoc?this._geoCanvasHeight:0)):(this._geoCanvId="iEBox_geoCanvasRight",this._geoLocAtBottom=!1,this._geoCanvasHeight=q,this._geoCanvasWidth=Math.min(250,p/3),this._sigCanvasHeight=q,this._sigCanvasWidth=p-(this._enforceGeoLoc?this._geoCanvasWidth:0))},render:function(){var h=this.options.geoLocMandatoryOnIpad;"undefined"!=typeof h&&(this._enforceGeoLoc=this._enforceGeoLoc&&/^(true|1)$/i.test(f.trim(h)));this._wgtId="wid"+
~~(2E3*Math.random())+"_"+(new Date).getTime();h=f.xfaWidget.defaultWidget.prototype.render.apply(this,arguments);if(this.options.value||this.options.value!=this._emptyImageVal)this._is_readonly=!!k._isReadOnly(this.options.value);this._is_readonly?h.after("\x3cdiv id\x3d'"+this._wgtId+"' class\x3d'sc_popUpMenu'\x3e\x3c/div\x3e"):h.after("\x3cdiv id\x3d'"+this._wgtId+"' style\x3d'display:none;' class\x3d'sc_popUpMenu'\x3e\x3c/div\x3e");this._setUpCanvas();return h},click:function(){this.focus();var h=
this.element.length?this.element[0]:this.element;"open"==this.options.access&&(b.POINTER_ENABLED||b.TOUCH_ENABLED?(h.dispatchEvent(b.getPointerEvent(b.POINTER_DOWN)),h.dispatchEvent(b.getPointerEvent(b.POINTER_UP))):this.$userControl.triggerHandler("click"))},_attachEventHandlers:function(h){b.POINTER_ENABLED||b.TOUCH_ENABLED?this._attachTouchEventHandlers(h):this._attachMouseEventHandlers(h);h.keydown(f.proxy(this._handleKeyDown,this))},_attachEventHandlerForCrossIcon:function(h){var p=this;h.mouseenter(function(q){if("open"==
p.options.access&&(q.stopPropagation(),p._is_readonly)){f("#"+p._wgtId).css({display:"block"});var t;f("body").on("mousemove",t=function(m){m.target!=f("#"+p._wgtId)[0]&&m.target!=p.$userControl[0]&&(f("#"+p._wgtId).css({display:"none"}),f("body").off("mousemove",t))})}});setTimeout(function(){f("#"+p._wgtId).click(f.proxy(p._onCrossClick,p))},50)},_attachTouchEventHandlers:function(h){var p,q=this,t=this.element.length?this.element[0]:this.element;t.addEventListener(b.POINTER_DOWN,function(m){"open"==
q.options.access&&(m.preventDefault(),p=setTimeout(function(){p=0;q._onCrossClick(m)},1E3))});t.addEventListener(b.POINTER_UP,function(m){"open"==q.options.access&&(m.preventDefault(),p&&(clearTimeout(p),q._onImageClick(m)))});b.POINTER_ENABLED&&(this._attachEventHandlerForCrossIcon(h),setTimeout(function(){f("#"+q._wgtId).on(b.POINTER_UP,function(m){m.stopPropagation()})},50))},_attachMouseEventHandlers:function(h){var p=0,q=this;h.dblclick(function(t){"open"==q.options.access&&(t.preventDefault(),
t.stopPropagation(),p.val&&(clearTimeout(p),p=0),q._onCrossClick(t))}).click(function(t){q.$userControl.trigger("scribbleclick",t);"open"==q.options.access&&(t.preventDefault(),t.stopPropagation(),p?(clearTimeout(p),p=0):p=setTimeout(function(){p=0;q._onImageClick(t)},500))});this._attachEventHandlerForCrossIcon(h)},_onCrossClick:function(h){this._is_readonly&&(this.$userControl.trigger("scribblefocus",h),this.$userControl.trigger("scribbleclick",h),h.stopPropagation(),f.alertBox.yesNo(null,this.localeStrings().clearSignatureConfirm,
this.localeStrings().clearSignature,f.proxy(this._removeSigConfirmationHandler,this)))},_removeSigConfirmationHandler:function(h){h&&(this._saveValue(this._emptyImageVal),this._displayValue(this._extractData(this._createEmptyImageData())),this.$userControl.addClass("emptyScribble").trigger("scribbleclose",{}),this._is_readonly=!1)},_createEmptyImageData:function(){if(!this._emptyImageData){var h=document.createElement("canvas");h.style.width=this._sigCanvasWidth+"px";h.style.height=this._sigCanvasHeight+
"px";h.width=this._sigCanvasWidth;h.height=this._sigCanvasHeight;var p=h.getContext("2d");p.fillStyle="#ffffff";p.clearRect(0,0,this._sigCanvasWidth,this._sigCanvasHeight);this._emptyImageData=h.toDataURL("image/png")}return this._emptyImageData},getCommitValue:function(){return this.options.value},_saveValue:function(h){this.options.value=h;this.$userControl.trigger("scribblechange")},_displayValue:function(h){this.options.commitProperty?h&&this._setValue("data:image/png;base64,"+h):this.logger().debug("xfaView",
"[DefaultWidget._update], User Control or Commit Property is null")},_doOk:function(){var h=document.createElement("CANVAS"),p=f("#"+this._geoCanvId)[0],q=f("#iEBox_canvas")[0],t=h.getContext("2d");0<p.width&&0<p.height?this._geoLocAtBottom?(h.width=q.width,h.height=q.height+p.height,t.drawImage(q,0,0),t.drawImage(p,0,q.height)):(h.width=q.width+p.width,h.height=q.height,t.drawImage(q,0,0),t.drawImage(p,q.width,0)):(h.width=q.width,h.height=q.height,t.drawImage(q,0,0));e.hide();h=h.toDataURL("image/png");
if(h=this._extractData(h))h=k._makeReadOnly(h),this._saveValue(h),this._is_readonly=!0;this._geoLocQuery&&this._geoLocQuery.cancel();this.$userControl.trigger("scribbleclose")},_handleOk:function(){this._enforceGeoLoc?(this._geoLocQuery=(new a).init(f.proxy(function(h){this._geoQuerySuccessHandler(h);this._doOk()},this),f.proxy(this._geoQueryErrorHandler,this)),this._geoLocQuery.query(),this._showMessage(this.localeStrings().fetchGeoLocation)):this._doOk()},_handleCancel:function(){e.hide();this._geoLocQuery&&
this._geoLocQuery.cancel();this.$userControl.trigger("scribbleclose")},_handleClear:function(){this.myScribbleHandle.setEnabled(!0);this._is_readonly=!1;this._makeReadOnly(this._is_readonly);f("#iEBox_canvas")[0].width=this._sigCanvasWidth;f("#iEBox_caption").width(this._sigCanvasWidth);f("#iEBox_canvas")[0].height=this._sigCanvasHeight;var h=f("#"+this._geoCanvId)[0];e.enableButtons({Ok:!1,Clear:!1});h.width=0;h.height=0;e._resize();this._geoLocQuery&&this._geoLocQuery.cancel()},_makeReadOnly:function(h){e.enableButtons({Ok:!1,
Clear:!1,Geo:!h,Brush:!h});h&&(f("#iEBox_canvas").css({border:"1px solid gray"}),f("#iEBox_caption").css({display:"none"}));this._defaultStatus="\x26nbsp;";this._showMessage(this._defaultStatus)},_showMessage:function(h){var p=this;this._msgTimeout&&(clearTimeout(this._msgTimeout),this._msgTimeout=0);f("#iEBox_title").replaceWith('\x3cdiv id\x3d"iEBox_title"\x3e'+h+"\x3c/div\x3e");this._msgTimeout=window.setTimeout(function(){f("#iEBox_title").replaceWith('\x3cdiv id\x3d"iEBox_title"\x3e'+p._defaultStatus+
"\x3c/div\x3e")},15E3)},_geoQueryErrorHandler:function(h){this._showMessage(this.localeStrings().errorFetchGeoLocation)},_getLogMessage:function(h){return this.logMsgs()[h]||h},_handleGeo:function(){navigator.geolocation?(this._geoLocQuery=(new a).init(f.proxy(this._geoQuerySuccessHandler,this),f.proxy(this._geoQueryErrorHandler,this)),this._geoLocQuery.query(),this._showMessage(this.localeStrings().fetchGeoLocation)):this.logger().debug("xfaView",this._getLogMessage("ALC-FRM-901-011"))},calculateGeolocation:function(){this._handleGeo()},
_handleBrushSelect:function(h){this.myScribbleHandle&&!this._is_readonly&&this.myScribbleHandle.setLineWidth(h)},_handleBrush:function(h){e.toggleBrushList(h)},_handleKeyDown:function(h){13==h.keyCode||13==h.charCode||13==h.which?(h.preventDefault(),this._onImageClick(h)):46!=h.keyCode&&46!=h.charCode&&46!=h.which||this._onCrossClick(h)},_dialogCallback:function(h,p){switch(h){case "Ok":this._handleOk();break;case "Cancel":this._handleCancel();break;case "Clear":this._handleClear();break;case "Geo":this.calculateGeolocation();
break;case "BrushSelect":this._handleBrushSelect(p);break;case "Brush":this._handleBrush(p)}},_geoQuerySuccessHandler:function(h){this._renderPosition(h)},_fitGeoLocText:function(h,p,q,t,m,r){var u=12;t.font="bold "+u+"pt Arial";for(var v=Math.max(t.measureText(h).width,t.measureText(p).width,t.measureText(q).width),w=1.5*t.measureText("m").width;(v>m||3*w>r)&&1<u;)u--,t.font="bold "+u+"pt Arial",v=Math.max(t.measureText(h).width,t.measureText(p).width,t.measureText(q).width),w=1.5*t.measureText("m").width;
return{width:v,lineHeight:w,fontSize:u}},_renderPosition:function(h){if(h&&h.coords){this._showMessage("\x26nbsp;");var p=this.localeStrings().latitude+": "+h.coords.latitude;h=this.localeStrings().longitude+": "+h.coords.longitude;var q=new Date,t=q.getTimezoneOffset()/60*-1;q=this.localeStrings().time+": "+(q.getMonth()+1)+"/"+q.getDate()+"/"+q.getFullYear()+" "+q.getHours()+":"+q.getMinutes()+":"+q.getSeconds()+(0<t?" +":" ")+t;t=f("#"+this._geoCanvId)[0];var m=f("#iEBox_canvas")[0],r=document.createElement("canvas");
if(t){var u=t.getContext("2d");u.font="bold 12pt Arial";t.width=this._geoCanvasWidth;t.height=this._geoCanvasHeight;var v=this._fitGeoLocText(p,h,q,u,t.width,t.height);var w=this.aspectRatioToBeUsed();this._enforceGeoLoc||(this._geoLocAtBottom?(r.height=this._sigCanvasHeight-t.height,r.width=r.height/w):(r.width=this._sigCanvasWidth-t.width,r.height=r.width*w),r.getContext("2d").drawImage(m,0,0,r.width,r.height),this._geoLocAtBottom?(m.height=r.height,m.getContext("2d").drawImage(r,(m.width-r.width)/
2,0)):(m.width=r.width,m.getContext("2d").drawImage(r,0,(m.height-r.height)/2)),f("#iEBox_caption").width(m.width),e.enableButtons({Clear:!0}));m=v.lineHeight;u.fillStyle="#555555";u.font="bold "+v.fontSize+"pt Arial";u.fillText(p,0,t.height-2*m-2);u.fillText(h,0,t.height-m-2);u.fillText(q,0,t.height-2);e._resize()}}},_scribbleCallback:function(){e.enableButtons({Clear:!0,Ok:!0})},_onImageClick:function(){if(!e.getIsOpen()){var h=this;e.show("\x26nbsp;",f.proxy(this._dialogCallback,this));this._enforceGeoLoc||
f("#iEBox_Geo").css({display:"inline-block"});var p=new Image;p.onload=function(){h.myScribbleHandle=new g("iEBox_canvas",p,p.width,p.height,f.proxy(h._scribbleCallback,h));h.myScribbleHandle.setEnabled(!h._is_readonly);f("#iEBox_caption").width(p.width);f("#iEBox_container").css({display:"table"});e._resize();e._reposition()};this.options.value&&this.options.value!=this._emptyImageVal?(this.$userControl.removeClass("emptyScribble"),k._isPng(this.options.value)?(this._is_readonly=!!k._isReadOnly(this.options.value),
p.src="data:image/png;base64,"+this.options.value):p.src="data:;base64,"+this.options.value):(this._is_readonly=!1,this.$userControl.addClass("emptyScribble"),p.src=this._createEmptyImageData());this._makeReadOnly(this._is_readonly)}},_extractData:function(h){var p;if(null!=h&&0<h.length&&0==h.indexOf("data:")&&0<(p=h.indexOf(",")))return h.substr(p+1)},_setValue:function(h){this.$userControl.prop(this.options.commitProperty,h);this.$userControl.attr(this.options.commitProperty,h);this._dummyImg&&
this._dummyImg.setAttribute(this.options.commitProperty,h)}});f(function(){f("body").on("touchstart",function(h){})})})($,xfalib);
(function(f,d){var g=function(c,e){this.options=e;this.$elementFileUploadBtn=[];this.$elementFileList=[];this.$element=f(c);this.$element.attr("multiple")&&!xfalib.ut.Utilities._isDataContainerSupported()&&this.$element.removeAttr("multiple");this.$parent=this.$element.parent();this.invalidFeature={SIZE:1,NAME:2,MIMETYPE:3};Object.freeze(this.invalidFeature);this.regexMimeTypeList=this.options.mimeType.map(function(l,k){try{return new RegExp(l.trim())}catch(h){d.console&&console.log(h)}})},a=f.browser.msie&&
("9.0"===f.browser.version||"10.0"===f.browser.version),b=0;g.prototype={_fileIframeName:"guide-fu-iframe",_addFile:"Add File",clear:function(){this.$element.val("");this.$elementFileList.empty()},destroy:function(){this.$fileDomElements=f.map(this.$fileDomElements,function(c){if(_.isObject(c)&&0===c.val().length)return c});this.values=[];a&&(null==_.last(this.$fileDomElements)?this.cloneFileInputAndUpdateIdForIE9():this.updateLabelForAttr(_.last(this.$fileDomElements).attr("id")));this.$element.trigger("change.fileupload")},
_setUrl:function(c,e){this.$elementFileList.find("span.guide-fu-fileName").eq(e).data("key",c)},_getUrl:function(c){return this.$elementFileList.find("span.guide-fu-fileName").eq(c).data("key")},getSetFilePathAndReturnNamePathMap:function(c){var e={},l,k;f.each(this.$elementFileList.children(),function(h,p){l=f(p).find("span.guide-fu-fileName");k=l.data("key");!k&&c&&c[h]&&l.data("key",c[h]);e[l.html()]=k||l.data("key")});return e},value:function(c){if(_.isUndefined(c))return this.values;var e=this,
l=this.comment(),k=!1,h={};this.$elementFileList.children().find("span.guide-fu-fileName").each(function(){var p=f(this).data("key");if(!_.isUndefined(p)){var q=p.substring(p.lastIndexOf("/")+1);h[q]=p}});this.$elementFileList.empty();null!=c?(c=c.split("\n"),this.values=_.map(c,function(p,q){var t=p.lastIndexOf("/"),m=p,r=null;-1!==t?(m=r=p,p=p.substring(t+1),_.isObject(e.$fileDomElements[q])&&0<e.$fileDomElements[q].val().length||_.isString(e.$fileDomElements[q])?(k=!0,e.$fileDomElements[q]=null):
null!==e.$fileDomElements[q]&&(k=!0,e.$fileDomElements.splice(q,0,null))):h[p]&&(r=h[p]);t=p.split("|");p=t[0];e.showFileList(p,t[1],l[q],r);return m}),f(".guide-fu-fileItemList li:last-child").addClass("hidden"),k&&this.$element.trigger("change.fileupload")):_.isArray(this.values)&&0!==this.values.length&&this.destroy()},fileAttachment:function(){return this.values},comment:function(c){var e=null;if(_.isUndefined(c)){e=this.$elementFileList.find("div.guide-fu-comment");var l=[];e.each(function(){l.push(f(this).text())});
return l}null!=c&&(l=c.split("\n"),e=this.$elementFileList.find("div.guide-fu-comment"),e.each(function(k){f(this).text(l[k])}))},multiSelect:function(c){if(void 0!==c)this.options.multiSelect=c;else return this.options.multiSelect},fileSizeLimit:function(c){if(void 0!==c)this.options.fileSizeLimit=c;else return this.options.fileSizeLimit},mimeType:function(c){if(void 0!==c)this.options.mimeType=c;else return this.options.mimeType},access:function(c){"readOnly"==c?(this.$element.attr("disabled","disabled"),
f(this.$parent).addClass("guide-fu-disabled")):"open"==c&&(this.$element.removeAttr("disabled"),f(this.$parent).removeClass("guide-fu-disabled"))},fileList:function(c){var e=this;if(void 0!==c){this.$fileDomElements=[];_.each(c,function(k,h){if(_.isObject(k)&&(a||0<k.val().length)||_.isString(k))_.isString(k)&&(k=null),e.$fileDomElements[h]=k});var l=this.$fileDomElements;a&&null!==c&&(null==_.last(this.$fileDomElements)?this.cloneFileInputAndUpdateIdForIE9():this.updateLabelForAttr(_.last(this.$fileDomElements).attr("id")))}else l=
f.map(this.$fileDomElements,function(k,h){if(!k)return e._getUrl(h);if(k[0].files&&0!==k[0].files.length||e.options.multiSelect||0<k[0].value.length)return k});return l},fileItemPreview:function(){return f("\x3cspan\x3e\x3c/span\x3e").addClass("guide-fu-filePreview glyphicon glyphicon-ok")},buttonText:function(c,e){if(void 0!==c)e||(this.options.buttonText=c),this.$elementFileUploadBtn.find("span.guide-fu-label").html(c);else return this.options.buttonText},btnIcon:function(){return f("\x3cspan\x3e\x3c/span\x3e").addClass("guide-fu-icon glyphicon glyphicon-folder-open")},
btnLabel:function(){return f("\x3cspan\x3e\x3c/span\x3e").addClass("guide-fu-label").html(this.options.buttonText)},fileItemList:function(){return this.$parent.find(this.options.fileItemListClass)},getNewCommentElementSummary:function(c){return f("\x3cdiv title\x3d'Click to edit' tabindex\x3d'0'\x3e\x3c/p\x3e").addClass("guide-fu-comment").text(c||"Enter comments here")},getNewCommentElement:function(c){return f("\x3cdiv contenteditable\x3d'true' tabindex\x3d'0'\x3e\x3c/div\x3e").addClass("guide-fu-comment").text(c||
"")},fileItem:function(c,e,l,k){var h=f("\x3cli\x3e\x3c/li\x3e").addClass("guide-fu-fileItem");c=xfalib.ut.Utilities._getNameWithoutMarker(c);if(25>c.length)var p=c;else{p=c.substr(0,12);var q=c.substr(c.lastIndexOf(".")+1,c.length);p=p.concat(" ...",q)}f("\x3cspan\x3e\x3c/span\x3e").addClass("uploadedFile").attr("aria-label",p).html("\x3csvg class\x3d'icon icon-file'\x3e\x3cuse xlink:href\x3d'/static/images/icons-metlife.svg#icon-file'\x3e\x3c/use\x3e\x3c/svg\x3e").appendTo(h);q=parseFloat((e/1024).toFixed(2));
f("\x3cspan\x3e\x3c/span\x3e").addClass("guid-fu-fileSizeMb").attr("aria-label",e).html(q+"MB").appendTo(h);e=f("\x3cspan\x3e\x3c/span\x3e").addClass("guide-fu-fileName").attr("data-fileSize",e).attr("aria-label",p).attr("title",c).text(p).appendTo(h).keypress(function(t){13!==t.keyCode&&32!==t.charCode||f(t.target).click()}).click(f.proxy(this.handleFilePreview,this));this.options.disablePreview&&e.addClass("non-preview-fileName");null!=k&&e.attr("data-key",k);f("\x3cspan tabindex\x3d'0'\x3e\x3c/span\x3e").addClass("guide-fu-fileClose close").attr("role",
"button").attr("aria-label",xfalib.locale.Strings.FileCloseAccessText+p).html("\x3csvg class\x3d'icon icon-close'\x3e\x3cuse xlink:href\x3d'/static/images/icons-metlife.svg#icon-close'\x3e\x3c/use\x3e\x3c/svg\x3e").appendTo(h).keypress(function(t){13!==t.keyCode&&32!==t.charCode||f(t.target).click()}).click(f.proxy(this.handleClick,this));this.fileItemPreview().appendTo(h);this.options.showComment&&this.getNewCommentElementSummary(l).appendTo(h).focus(f.proxy(this.handleCommentClick,this)).click(f.proxy(this.handleCommentClick,
this));return h},toggleFileUploadBtn:function(){this.options.multiSelect&&(0<this.$elementFileList.children().length?(this.buttonText(this._addFile,!0),this.$elementFileUploadBtn.find("span.guide-fu-icon").removeClass("glyphicon-folder-open").addClass("glyphicon-plus")):(this.buttonText(this.options.buttonText),this.$elementFileUploadBtn.find("span.guide-fu-icon").removeClass("glyphicon-plus").addClass("glyphicon-folder-open")))},showInvalidMessage:function(c,e){var l=this,k=null!==navigator.userAgent.match(/iPad/i),
h=null!==navigator.userAgent.match(/iPhone/i);k||h?setTimeout(function(){l.invalidMessage(l,c,e)},0):this.invalidMessage(this,c,e)},invalidMessage:function(c,e,l){l===c.invalidFeature.SIZE?(alert(xfalib.ut.LocalizationUtil.prototype.getLocalizedMessage("",xfalib.locale.Strings.FileSizeGreater,[e,c.options.fileSizeLimit])),c=d.guideBridge.resolveNode("guide[0].guide1[0].guideRootPanel[0].authorInputPanel[0].fileSizeLimit[0]").value,f(".fileupload .guideFieldError").text(e+" "+c).show(),f(".fileupload").addClass("validation-failure"),
f(".afFileUpload.fileUpload button").addClass("validation-failure")):l===c.invalidFeature.NAME?alert(xfalib.ut.LocalizationUtil.prototype.getLocalizedMessage("",xfalib.locale.Strings.FileNameInvalid,[e])):l===c.invalidFeature.MIMETYPE&&alert(xfalib.ut.LocalizationUtil.prototype.getLocalizedMessage("",xfalib.locale.Strings.FileMimeTypeInvalid,[e]))},_getIndexOfText:function(c,e){var l=-1;_.find(this.values,function(k,h){var p=k=k.split("|")[0];p.match(/\//g)&&1<p.match(/\//g).length&&(p=k.substring(k.lastIndexOf("/")+
1),p=xfalib.ut.Utilities._getNameWithoutMarker(p));if(p===c)return l=h,k});return l},_getFileObjIdx:function(c){if(0<=c)for(var e=0,l=0;l<this.$fileDomElements.length;l++)if(this.$fileDomElements[l]){var k=this.$fileDomElements[l][0].files;if(k){if(c<=e+k.length-1)return[l,c-e];e+=k.length}}else{if(c==e)return[l,0];e++}return null},_getFileListItem:function(c){try{var e=new DataTransfer;_.each(c,function(l){e.items.add(l)});return e.files}catch(l){throw console.error(l),l;}},_deleteFilesFromInputDom:function(c,
e){var l=[];_.each(c[0].files,function(k,h){e.includes(h)||l.push(k)});try{c[0].files=this._getFileListItem(l)}catch(k){console.error("Deleting files is not supported in your browser")}},handleClick:function(c){c=f(c.target);var e=c.closest("span").prev().attr("title"),l=this._getIndexOfText(e,c),k=c.prev().data("key"),h=c.prev().data("objectUrl");-1!=l&&(this.values.splice(l,1),this.$fileDomElements.splice(l,1),a&&this.cloneFileInputAndUpdateIdForIE9(),null!=k&&c.prev().removeData("key"),h&&d.URL.revokeObjectURL(h),
0<f(".guide-fu-fileItemList").length&&(fileUploadFunctions.clearSelectedAttachmentInfo(e),0<c.parents(".fileupload").find(".guideFieldError:visible").not(":hidden").length&&!f(".guide-fu-attach-button").data("multiselect")?(f(".fileupload").find("button").hide(),f(".fileUploadHelpText").hide()):(f(".guide-fu-attach-button").data("multiselect"),f(".fileupload").find("button").show())),1>=f(".guide-fu-fileItem").length&&(f(".guide-fu-attach-button .button").text(this.options.buttonText).show(),f(".fileUploadHelpText").show()));
e=c.closest(".guide-fu-fileItem");c.parent().remove();f(e).remove();this.$element.trigger("change.fileupload");f(".fileupload .guide-fu-fileItem").removeClass("hidden");this.$elementFileUploadBtn.focus()},handleFilePreview:function(c){if(!this.options.disablePreview){c=f(c.target);var e=c.text();e=this._getIndexOfText(e,c);var l=null;(new Date).getTime();-1!=e&&(_.isUndefined(c.data("key"))||(l=c.data("key")),l?(0!==l.lastIndexOf(this.options._getUrl,0)&&(l=this.options._getUrl+l),this.previewFile.apply(this,
[null,{fileUrl:l}])):(e=this.$fileDomElements[e],(e=this._previewFileUsingObjectUrl(e))&&c.data("objectUrl",e)))}},previewFile:function(c,e){c=_.isUndefined(e)?this.$element[this.options.uploaderPluginName]("getFileUrl"):e.fileUrl;e=c.lastIndexOf("/");0<=e&&(c=c.substr(0,e)+"/"+encodeURIComponent(c.substr(e+1)));d.open(c,"","scrollbars\x3dno,menubar\x3dno,height\x3d600,width\x3d800,resizable\x3dyes,toolbar\x3dno,status\x3dno")},resetIfNotMultiSelect:function(){this.options.multiSelect||(this.values=
[])},showFileList:function(c,e,l,k){this.options.multiSelect&&null!=c&&!_.isUndefined(c)||this.$elementFileList.empty();null!=c&&(this.$fileItem=this.$elementFileList.append(this.fileItem(c,e,l,k)))},handleCommentClick:function(c){var e=f(c.target);c="Enter comments here"===e.text()?this.getNewCommentElement():this.getNewCommentElement(f(c.target).text());e.replaceWith(c);a?c.focus().focusout(f.proxy(this.handleCommentBlur,this)):c.focus().blur(f.proxy(this.handleCommentBlur,this))},handleCommentBlur:function(c){var e=
f(c.target);c="Enter comments here"===e.text()?this.getNewCommentElementSummary():this.getNewCommentElementSummary(f(c.target).text());e.replaceWith(c);c.focus(f.proxy(this.handleCommentClick,this)).click(f.proxy(this.handleCommentClick,this));this.$element.trigger("change.fileupload")},isValid:function(c){var e=/^\./,l=/^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i;return/^[^\\/:\*;\$%\?"<>\|]+$/.test(c)&&!e.test(c)&&!l.test(c)},handleChange:function(c){var e="",l="",k="",h="",p=f(c.target),q=p[0].files;
!this.options.multiSelect&&1<this.$fileDomElements.length&&this.$fileDomElements.splice(0,1);var t=!1,m=!1,r=!1;this.resetIfNotMultiSelect();a&&(e=p.val().split("\\").pop(),0<this.$fileDomElements.length&&(this.$fileDomElements[this.$fileDomElements.length-1]=p),this.cloneFileInputAndUpdateIdForIE9(),_.isUndefined(q)&&(this.showFileList(e),this.values.push(e),this.$element.trigger("change.fileupload")));if(!_.isUndefined(q)){var u=[];_.each(q,function(v,w){var x=!1,A=!1,y=!1;e=v.name.split("\\").pop();
var D=Math.round(v.size/1024);fileUploadFunctions.fileSizeLimit(D)?this.isValid(e)?v.type&&!this.regexMimeTypeList.some(function(E){return E.test(v.type)})&&(r=y=!0,h=e+","+h):(m=A=!0,k=e+","+k):(t=x=!0,l=e+","+l);x||A||y?u.push(w):(this.showFileList(e,D),e=e+"|"+D,this.values.push(e),f(".guide-fu-fileItemList li:last-child").addClass("hidden"))},this);0<u.length&&(0<this.$fileDomElements.length&&(p=this.$fileDomElements.length-1,(p=this.$fileDomElements[p])&&0<p.length&&(q=p[0].files.length,q===
u.length?this.$fileDomElements.splice(-1,1):this._deleteFilesFromInputDom(p,u))),a&&this.cloneFileInputAndUpdateIdForIE9());this.$element.trigger("change.fileupload")}t?this.showInvalidMessage(l.substring(0,l.lastIndexOf(",")),this.invalidFeature.SIZE):m?this.showInvalidMessage(k.substring(0,k.lastIndexOf(",")),this.invalidFeature.NAME):r?this.showInvalidMessage(h.substring(0,h.lastIndexOf(",")),this.invalidFeature.MIMETYPE):fileUploadFunctions.handleFileUploadChange(c)},cloneFileInputAndUpdateIdForIE9:function(){var c=
_.last(this.$fileDomElements),e=null!=c,l=e&&0<c.val().length;if(!e||l)c=this.$element.clone(),c.data(this.$element.data()),a&&(e=this.$element.attr("id")+ ++b,c.attr("id",e),c.css({position:"absolute",top:"-2000px",left:"-2000px"}),c.appendTo("body"),this.updateLabelForAttr(e)),c.change(f.proxy(this.handleChange,this)),this.$fileDomElements.push(c);this.options.multiSelect||null!==this.$fileDomElements[0]||this.$fileDomElements.splice(0,1);a||c.click();return!0},updateLabelForAttr:function(c){this.$label.attr("for",
c)},createLabelForFileInput:function(c){a&&(this.$label=f("\x3clabel\x3e\x3c/label\x3e").addClass("guide-fu-attach-button button").text(this.options.buttonText).attr("for",c),this.$elementFileUploadBtn.replaceWith(this.$label),this.$label.parent().attr("tabindex",0).attr("role","button").attr("aria-label",this.options.screenReaderText||""))},constructor:function(){var c=this;this.$elementFileUploadBtn=this.$parent.find(this.options.buttonClass);this.$elementFileUploadBtn.attr("aria-label",this.options.screenReaderText||
"");a&&(this.elementId=this.$element.attr("id"),this.createLabelForFileInput(this.$element.attr("id")));f('\x3cul class\x3d"guide-fu-fileItemList"\x3e\x3c/ul\x3e').insertAfter(".fileUpload button");f(".fileUpload ul:last-child").remove();f(".fileupload").find(".guideFieldError").hide();this.$elementFileList=f(this.fileItemList());this.values=[];this.$fileDomElements=[];var e=!1,l=null;f(document).mousedown(function(k){l=f(k.target)});this.$elementFileUploadBtn.keypress(function(k){13!==k.keyCode&&
32!==k.charCode||c.$elementFileUploadBtn.click()}).focus(function(){c.$element.trigger("focus.fileupload")}).click(f.proxy(this.cloneFileInputAndUpdateIdForIE9,this)).blur(function(k){!e&&null!=l&&0>=l.closest(".guide-fu-fileItemList").length&&c.$element.trigger("focusout.fileupload");e=!1});this.$element[this.options.uploaderPluginName]({iframeContainer:this.options.iframeContainer,_filePath:this.options._filePath,_uuidGenerator:this.options._uuidGenerator,_getUrl:this.options._getUrl});this.$element.change(f.proxy(this.handleChange,
this)).on("adobeFileUploader.fileUploaded",f.proxy(this.previewFile,this));this.$elementFileUploadBtn.attr("data-multiSelect",this.options.multiSelect);this.$elementFileUploadBtn.attr("data-fileSizeLimit",1024*this.options.fileSizeLimit)}};f.fn.adobeFileAttachment=function(c,e){var l="",k=this.each(function(){if("file"===f(this).attr("type")){var h=f(this),p=h.data("adobeFileAttachment"),q=f.extend({},g.prototype.defaults,"object"===typeof c&&c);p||(h.data("adobeFileAttachment",p=new g(this,q)),p.constructor());
"string"===typeof c&&(l=p[c](e))}});return"undefined"!==typeof l?l:k};g.prototype.defaults={buttonText:"Attach",multiSelect:!1,fileSizeLimit:2,uploaderPluginName:"adobeFileUploader",mimeType:["audio/*","video/*","image/*","text/*","application/pdf"]}})($,window);
(function(f){var d=xfalib.ut.XfaUtil.prototype;f.widget("xfaWidget.fileUpload",f.xfaWidget.abstractWidget,{_widgetName:"fileUpload",_superPrototype:f.xfaWidget.abstractWidget.prototype,getOptionsMap:function(){var g=this._superPrototype.getOptionsMap.apply(this,arguments);return f.extend({},g,f.extend({},this.options,{value:function(a){this.$userControl.adobeFileAttachment("value",a)},fileList:function(a){this.$userControl.adobeFileAttachment("fileList",a)},comment:function(a){this.$userControl.adobeFileAttachment("comment",
a)},access:function(a){this.$userControl.adobeFileAttachment("access",a)}}))},_initializeOptions:function(){_.each(this.optionsHandler,function(g,a){"function"===typeof g&&"_uuidGenerator"!==a&&g.apply(this,[this.options[a]])},this)},_getFileList:function(){return this.$userControl.adobeFileAttachment("fileList")},_getComment:function(){return this.$userControl.adobeFileAttachment("comment")},_getFileNamePathMap:function(g){return this.$userControl.adobeFileAttachment("getSetFilePathAndReturnNamePathMap",
g)},getEventMap:function(){var g=this._superPrototype.getEventMap.apply(this,arguments);return f.extend({},g,{change:null,"focusout.fileupload":d.XFA_EXIT_EVENT,"focus.fileupload":d.XFA_ENTER_EVENT,"change.fileupload":d.XFA_CHANGE_EVENT})},render:function(){var g=this._superPrototype.render.apply(this,arguments);g.adobeFileAttachment(this.getOptionsMap());return g},showDisplayValue:function(){},showValue:function(){},getCommitValue:function(){this.options.fileList=this._getFileList();this.options.comment=
this._getComment();return this.$userControl.adobeFileAttachment("value")}})})($);
(function(f){var d=function(g,a){this.options=a;this.$element=f(g)};d.prototype={_fileIframeName:"guide-fu-iframe",_filePath:"/tmp/fd/mf",_iframeContainer:"body#formBody",fileIframe:function(g){return f("\x3ciframe\x3e\x3c/iframe\x3e").attr({style:"display:none",name:g})},uploadFile:function(g){var a=!1,b=null,c=null,e=g.fileUploadPath,l;e||(l=g._uuidGenerator());if(_.isObject(g)&&(e||l)){var k=g.fileDom,h=f(this.options.iframeContainer).find(".filePreview");b=g.fileName;a=g.multiple;e||(e=this.options.fileUploadPath+
"/"+l);if(null!==k){c=g._getUrl+e;a?this.fileUrl=c:0!==e.lastIndexOf(g._getUrl,0)?this.fileUrl=g._getUrl+e+"/"+b:this.fileUrl=e+"/"+b;0===h.length?h=f("\x3cform method\x3d'post' enctype\x3d'multipart/form-data'/\x3e").addClass("filePreview").attr({id:"form"+(new Date).valueOf(),action:c,target:this.options.iframeName}).appendTo(this.options.iframeContainer):(h.children().detach(),h.attr({action:c,target:this.options.iframeName}));h.one("submit",function(t){t.stopPropagation()});var p=new FormData;
a?_.each(k,function(t,m){if(null!==t){f(t[0]).attr("name",b[m]).appendTo(h);m=b[m].split("\n");for(var r=0;r<m.length;r++)p.append(m[r],t[0].files[r])}},this):(k.attr("name",b).appendTo(h),p.append(b,k[0].files[0]));f("\x3cinput type\x3d'hidden' name\x3d'_charset_' value\x3d'UTF-8'/\x3e").appendTo(h);p.append("_charset_","UTF-8");a||(this.fileMap[this.fileUrl]=this.$element);var q=this;f.ajax({url:h.attr("action"),data:p,cache:!1,contentType:!1,processData:!1,method:"POST",type:"POST",success:function(t){a?
q.handleMultipleFileUpload(t):q.handleSingleFileUpload(t)},error:function(){this.$element.trigger("adobeFileUploader.fileUploadFailed")}})}}return this.fileUrl},handleMultipleFileUpload:function(g){this.$element.trigger("adobeFileUploader.multipleFileUploaded")},getFileUrl:function(){return this.fileUrl},getUrlContentsFromUploadData:function(g){g=null!=g?f(g).find("#ChangeLog").text().split("br",2)[1]:f(this.options.iframeContainer+" iframe[name\x3d'"+this.options.iframeName+"']").contents().find("#ChangeLog").text().split("br",
2)[1];g=g.substring(g.indexOf("created")+9,g.indexOf(";\x3c"));g=g.substring(0,g.length-2);var a=g.indexOf("/jcr:content");-1!==a&&(g=g.substring(0,a));return g},handleSingleFileUpload:function(g){g=this.getUrlContentsFromUploadData(g);g=this.options._getUrl+g;g in this.fileMap&&this.fileMap[g].trigger("adobeFileUploader.fileUploaded")},initialize:function(){if(null==this.$iframe||0===this.$iframe.length)this.$iframe=this.fileIframe(this.options.iframeName).appendTo(this.options.iframeContainer),
this.fileMap={}}};f.fn.adobeFileUploader=function(g,a){var b="",c=this.each(function(){if("file"===f(this).attr("type")){var e=f(this),l=e.data("adobeFileUploader"),k=f.extend({},d.prototype.defaults(g,a),"object"===typeof g&&g);l?l.$element.get(0)!==this&&(l.$element=f(this)):(e.data("adobeFileUploader",l=new d(this,k)),l.initialize());"string"===typeof g&&(b=l[g](a))}});return"undefined"!==typeof b?b:c};d.prototype.defaults=function(g,a){var b={};"object"==typeof g&&(b._fileIframeName=g._fileIframeName,
b._filePath=g._filePath,b.actionUrl=g.actionUrl,b._getUrl=g._getUrl);"object"==typeof a&&(b._fileIframeName=a._fileIframeName,b._filePath=a._filePath,b.actionUrl=a.actionUrl,b._getUrl=g._getUrl);return{fileUploadPath:b._filePath||d.prototype._filePath,iframeName:d.prototype._fileIframeName+(new Date).valueOf(),fileUploadServlet:b._filePath||d.prototype._filePath,iframeContainer:b._iframeContainer||d.prototype._iframeContainer,_getUrl:b._getUrl||""}}})($);
+function(f){var d=function(a){f(a).on("click",'[data-dismiss\x3d"alert"]',this.close)};d.prototype.close=function(a){function b(){l.trigger("closed.bs.alert").remove()}var c=f(this),e=c.attr("data-target");e||(e=(e=c.attr("href"))&&e.replace(/.*(?=#[^\s]*$)/,""));var l=f(e);a&&a.preventDefault();l.length||(l=c.hasClass("alert")?c:c.parent());l.trigger(a=f.Event("close.bs.alert"));a.isDefaultPrevented()||(l.removeClass("in"),f.support.transition&&l.hasClass("fade")?l.one(f.support.transition.end,
b).emulateTransitionEnd(150):b())};var g=f.fn.alert;f.fn.alert=function(a){return this.each(function(){var b=f(this),c=b.data("bs.alert");c||b.data("bs.alert",c=new d(this));"string"==typeof a&&c[a].call(b)})};f.fn.alert.Constructor=d;f.fn.alert.noConflict=function(){f.fn.alert=g;return this};f(document).on("click.bs.alert.data-api",'[data-dismiss\x3d"alert"]',d.prototype.close)}(jQuery);
+function(f){var d=function(a,b){this.$element=f(a);this.options=f.extend({},d.DEFAULTS,b);this.isLoading=!1};d.DEFAULTS={loadingText:"loading..."};d.prototype.setState=function(a){var b=this.$element,c=b.is("input")?"val":"html",e=b.data();a+="Text";e.resetText||b.data("resetText",b[c]());b[c](e[a]||this.options[a]);setTimeout(f.proxy(function(){"loadingText"==a?(this.isLoading=!0,b.addClass("disabled").attr("disabled","disabled")):this.isLoading&&(this.isLoading=!1,b.removeClass("disabled").removeAttr("disabled"))},
this),0)};d.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle\x3d"buttons"]');if(b.length){var c=this.$element.find("input");"radio"==c.prop("type")&&(c.prop("checked")&&this.$element.hasClass("active")?a=!1:b.find(".active").removeClass("active"));a&&c.prop("checked",!this.$element.hasClass("active")).trigger("change")}a&&this.$element.toggleClass("active")};var g=f.fn.button;f.fn.button=function(a){return this.each(function(){var b=f(this),c=b.data("bs.button"),e="object"==
typeof a&&a;c||b.data("bs.button",c=new d(this,e));"toggle"==a?c.toggle():a&&c.setState(a)})};f.fn.button.Constructor=d;f.fn.button.noConflict=function(){f.fn.button=g;return this};f(document).on("click.bs.button.data-api","[data-toggle^\x3dbutton]",function(a){var b=f(a.target);b.hasClass("btn")||(b=b.closest(".btn"));b.button("toggle");a.preventDefault()})}(jQuery);
+function(f){var d=function(a,b){this.$element=f(a);this.$indicators=this.$element.find(".carousel-indicators");this.options=b;this.paused=this.sliding=this.interval=this.$active=this.$items=null;"hover"==this.options.pause&&this.$element.on("mouseenter",f.proxy(this.pause,this)).on("mouseleave",f.proxy(this.cycle,this))};d.DEFAULTS={interval:5E3,pause:"hover",wrap:!0};d.prototype.cycle=function(a){a||(this.paused=!1);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&
(this.interval=setInterval(f.proxy(this.next,this),this.options.interval));return this};d.prototype.getActiveIndex=function(){this.$active=this.$element.find(".item.active");this.$items=this.$active.parent().children();return this.$items.index(this.$active)};d.prototype.to=function(a){var b=this,c=this.getActiveIndex();if(!(a>this.$items.length-1||0>a))return this.sliding?this.$element.one("slid.bs.carousel",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?"next":"prev",f(this.$items[a]))};
d.prototype.pause=function(a){a||(this.paused=!0);this.$element.find(".next, .prev").length&&f.support.transition&&(this.$element.trigger(f.support.transition.end),this.cycle(!0));this.interval=clearInterval(this.interval);return this};d.prototype.next=function(){if(!this.sliding)return this.slide("next")};d.prototype.prev=function(){if(!this.sliding)return this.slide("prev")};d.prototype.slide=function(a,b){var c=this.$element.find(".item.active"),e=b||c[a]();b=this.interval;var l="next"==a?"left":
"right",k="next"==a?"first":"last",h=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[k]()}if(e.hasClass("active"))return this.sliding=!1;k=f.Event("slide.bs.carousel",{relatedTarget:e[0],direction:l});this.$element.trigger(k);if(!k.isDefaultPrevented())return this.sliding=!0,b&&this.pause(),this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid.bs.carousel",function(){var p=f(h.$indicators.children()[h.getActiveIndex()]);
p&&p.addClass("active")})),f.support.transition&&this.$element.hasClass("slide")?(e.addClass(a),e[0].offsetWidth,c.addClass(l),e.addClass(l),c.one(f.support.transition.end,function(){e.removeClass([a,l].join(" ")).addClass("active");c.removeClass(["active",l].join(" "));h.sliding=!1;setTimeout(function(){h.$element.trigger("slid.bs.carousel")},0)}).emulateTransitionEnd(1E3*c.css("transition-duration").slice(0,-1))):(c.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid.bs.carousel")),
b&&this.cycle(),this};var g=f.fn.carousel;f.fn.carousel=function(a){return this.each(function(){var b=f(this),c=b.data("bs.carousel"),e=f.extend({},d.DEFAULTS,b.data(),"object"==typeof a&&a),l="string"==typeof a?a:e.slide;c||b.data("bs.carousel",c=new d(this,e));if("number"==typeof a)c.to(a);else if(l)c[l]();else e.interval&&c.pause().cycle()})};f.fn.carousel.Constructor=d;f.fn.carousel.noConflict=function(){f.fn.carousel=g;return this};f(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",
function(a){var b=f(this),c,e=f(b.attr("data-target")||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""));c=f.extend({},e.data(),b.data());var l=b.attr("data-slide-to");l&&(c.interval=!1);e.carousel(c);(l=b.attr("data-slide-to"))&&e.data("bs.carousel").to(l);a.preventDefault()});f(window).on("load",function(){f('[data-ride\x3d"carousel"]').each(function(){var a=f(this);a.carousel(a.data())})})}(jQuery);
+function(f){function d(c){f(".dropdown-backdrop").remove();f("[data-toggle\x3ddropdown]").each(function(){var e=g(f(this)),l={relatedTarget:this};e.hasClass("open")&&(e.trigger(c=f.Event("hide.bs.dropdown",l)),c.isDefaultPrevented()||e.removeClass("open").trigger("hidden.bs.dropdown",l))})}function g(c){var e=c.attr("data-target");e||(e=(e=c.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));return(e=e&&f(e))&&e.length?e:c.parent()}var a=function(c){f(c).on("click.bs.dropdown",this.toggle)};
a.prototype.toggle=function(c){var e=f(this);if(!e.is(".disabled, :disabled")){var l=g(e);c=l.hasClass("open");d();if(!c){if("ontouchstart"in document.documentElement&&!l.closest(".navbar-nav").length)f('\x3cdiv class\x3d"dropdown-backdrop"\x3e\x3c/div\x3e').insertAfter(f(this)).on("click",d);var k={relatedTarget:this};l.trigger(c=f.Event("show.bs.dropdown",k));if(c.isDefaultPrevented())return;l.toggleClass("open").trigger("shown.bs.dropdown",k);e.focus()}return!1}};a.prototype.keydown=function(c){if(/(38|40|27)/.test(c.keyCode)){var e=
f(this);c.preventDefault();c.stopPropagation();if(!e.is(".disabled, :disabled")){var l=g(e),k=l.hasClass("open");if(!k||k&&27==c.keyCode)return 27==c.which&&l.find("[data-toggle\x3ddropdown]").focus(),e.click();e=l.find("[role\x3dmenu] li:not(.divider):visible a, [role\x3dlistbox] li:not(.divider):visible a");e.length&&(l=e.index(e.filter(":focus")),38==c.keyCode&&0<l&&l--,40==c.keyCode&&l<e.length-1&&l++,~l||(l=0),e.eq(l).focus())}}};var b=f.fn.dropdown;f.fn.dropdown=function(c){return this.each(function(){var e=
f(this),l=e.data("bs.dropdown");l||e.data("bs.dropdown",l=new a(this));"string"==typeof c&&l[c].call(e)})};f.fn.dropdown.Constructor=a;f.fn.dropdown.noConflict=function(){f.fn.dropdown=b;return this};f(document).on("click.bs.dropdown.data-api",d).on("click.bs.dropdown.data-api",".dropdown form",function(c){c.stopPropagation()}).on("click.bs.dropdown.data-api","[data-toggle\x3ddropdown]",a.prototype.toggle).on("keydown.bs.dropdown.data-api","[data-toggle\x3ddropdown], [role\x3dmenu], [role\x3dlistbox]",
a.prototype.keydown)}(jQuery);
+function(f){var d=function(a,b){this.options=b;this.$element=f(a);this.$backdrop=this.isShown=null;this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,f.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};d.DEFAULTS={backdrop:!0,keyboard:!0,show:!0};d.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)};d.prototype.show=function(a){var b=this,c=f.Event("show.bs.modal",{relatedTarget:a});this.$element.trigger(c);this.isShown||c.isDefaultPrevented()||
(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss\x3d"modal"]',f.proxy(this.hide,this)),this.backdrop(function(){var e=f.support.transition&&b.$element.hasClass("fade");b.$element.parent().length||b.$element.appendTo(document.body);b.$element.show().scrollTop(0);e&&b.$element[0].offsetWidth;b.$element.addClass("in").attr("aria-hidden",!1);b.enforceFocus();var l=f.Event("shown.bs.modal",{relatedTarget:a});e?b.$element.find(".modal-dialog").one(f.support.transition.end,
function(){b.$element.focus().trigger(l)}).emulateTransitionEnd(300):b.$element.focus().trigger(l)}))};d.prototype.hide=function(a){a&&a.preventDefault();a=f.Event("hide.bs.modal");this.$element.trigger(a);this.isShown&&!a.isDefaultPrevented()&&(this.isShown=!1,this.escape(),f(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),f.support.transition&&this.$element.hasClass("fade")?this.$element.one(f.support.transition.end,f.proxy(this.hideModal,
this)).emulateTransitionEnd(300):this.hideModal())};d.prototype.enforceFocus=function(){f(document).off("focusin.bs.modal").on("focusin.bs.modal",f.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))};d.prototype.escape=function(){if(this.isShown&&this.options.keyboard)this.$element.on("keyup.dismiss.bs.modal",f.proxy(function(a){27==a.which&&this.hide()},this));else this.isShown||this.$element.off("keyup.dismiss.bs.modal")};d.prototype.hideModal=
function(){var a=this;this.$element.hide();this.backdrop(function(){a.removeBackdrop();a.$element.trigger("hidden.bs.modal")})};d.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};d.prototype.backdrop=function(a){var b=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var c=f.support.transition&&b;this.$backdrop=f('\x3cdiv class\x3d"modal-backdrop '+b+'" \x3e\x3c/div\x3e').appendTo(document.body);this.$element.on("click.dismiss.bs.modal",
f.proxy(function(e){e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this));c&&this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");a&&(c?this.$backdrop.one(f.support.transition.end,a).emulateTransitionEnd(150):a())}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),f.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(f.support.transition.end,a).emulateTransitionEnd(150):a()):
a&&a()};var g=f.fn.modal;f.fn.modal=function(a,b){return this.each(function(){var c=f(this),e=c.data("bs.modal"),l=f.extend({},d.DEFAULTS,c.data(),"object"==typeof a&&a);e||c.data("bs.modal",e=new d(this,l));if("string"==typeof a)e[a](b);else l.show&&e.show(b)})};f.fn.modal.Constructor=d;f.fn.modal.noConflict=function(){f.fn.modal=g;return this};f(document).on("click.bs.modal.data-api",'[data-toggle\x3d"modal"]',function(a){var b=f(this),c=b.attr("href"),e=f(b.attr("data-target")||c&&c.replace(/.*(?=#[^\s]+$)/,
""));c=e.data("bs.modal")?"toggle":f.extend({remote:!/#/.test(c)&&c},e.data(),b.data());b.is("a")&&a.preventDefault();e.modal(c,this).one("hide",function(){b.is(":visible")&&b.focus()})});f(document).on("show.bs.modal",".modal",function(){f(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){f(document.body).removeClass("modal-open")})}(jQuery);
+function(f){var d=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null;this.init("tooltip",a,b)};d.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'\x3cdiv class\x3d"tooltip"\x3e\x3cdiv class\x3d"tooltip-arrow"\x3e\x3c/div\x3e\x3cdiv class\x3d"tooltip-inner"\x3e\x3c/div\x3e\x3c/div\x3e',trigger:"hover focus",title:"",delay:0,html:!1,container:!1};d.prototype.init=function(a,b,c){this.enabled=!0;this.type=a;this.$element=f(b);this.options=this.getOptions(c);
a=this.options.trigger.split(" ");for(b=a.length;b--;)if(c=a[b],"click"==c)this.$element.on("click."+this.type,this.options.selector,f.proxy(this.toggle,this));else if("manual"!=c){var e="hover"==c?"mouseleave":"focusout";this.$element.on(("hover"==c?"mouseenter":"focusin")+"."+this.type,this.options.selector,f.proxy(this.enter,this));this.$element.on(e+"."+this.type,this.options.selector,f.proxy(this.leave,this))}this.options.selector?this._options=f.extend({},this.options,{trigger:"manual",selector:""}):
this.fixTitle()};d.prototype.getDefaults=function(){return d.DEFAULTS};d.prototype.getOptions=function(a){a=f.extend({},this.getDefaults(),this.$element.data(),a);a.delay&&"number"==typeof a.delay&&(a.delay={show:a.delay,hide:a.delay});return a};d.prototype.getDelegateOptions=function(){var a={},b=this.getDefaults();this._options&&f.each(this._options,function(c,e){b[c]!=e&&(a[c]=e)});return a};d.prototype.enter=function(a){var b=a instanceof this.constructor?a:f(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+
this.type);clearTimeout(b.timeout);b.hoverState="in";if(!b.options.delay||!b.options.delay.show)return b.show();b.timeout=setTimeout(function(){"in"==b.hoverState&&b.show()},b.options.delay.show)};d.prototype.leave=function(a){var b=a instanceof this.constructor?a:f(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);clearTimeout(b.timeout);b.hoverState="out";if(!b.options.delay||!b.options.delay.hide)return b.hide();b.timeout=setTimeout(function(){"out"==b.hoverState&&b.hide()},
b.options.delay.hide)};d.prototype.show=function(){var a=f.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled&&(this.$element.trigger(a),!a.isDefaultPrevented())){var b=this;a=this.tip();this.setContent();this.options.animation&&a.addClass("fade");var c="function"==typeof this.options.placement?this.options.placement.call(this,a[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,l=e.test(c);l&&(c=c.replace(e,"")||"top");a.detach().css({top:0,left:0,display:"block"}).addClass(c);
this.options.container?a.appendTo(this.options.container):a.insertAfter(this.$element);e=this.getPosition();var k=a[0].offsetWidth,h=a[0].offsetHeight;if(l){var p=this.$element.parent();l=c;var q=document.documentElement.scrollTop||document.body.scrollTop,t="body"==this.options.container?window.innerWidth:p.outerWidth(),m="body"==this.options.container?window.innerHeight:p.outerHeight();p="body"==this.options.container?0:p.offset().left;c="bottom"==c&&e.top+e.height+h-q>m?"top":"top"==c&&0>e.top-
q-h?"bottom":"right"==c&&e.right+k>t?"left":"left"==c&&e.left-k<p?"right":c;a.removeClass(l).addClass(c)}e=this.getCalculatedOffset(c,e,k,h);this.applyPlacement(e,c);this.hoverState=null;c=function(){b.$element.trigger("shown.bs."+b.type)};f.support.transition&&this.$tip.hasClass("fade")?a.one(f.support.transition.end,c).emulateTransitionEnd(150):c()}};d.prototype.applyPlacement=function(a,b){var c=this.tip(),e=c[0].offsetWidth,l=c[0].offsetHeight,k=parseInt(c.css("margin-top"),10),h=parseInt(c.css("margin-left"),
10);isNaN(k)&&(k=0);isNaN(h)&&(h=0);a.top+=k;a.left+=h;f.offset.setOffset(c[0],f.extend({using:function(q){c.css({top:Math.round(q.top),left:Math.round(q.left)})}},a),0);c.addClass("in");k=c[0].offsetWidth;h=c[0].offsetHeight;if("top"==b&&h!=l){var p=!0;a.top=a.top+l-h}/bottom|top/.test(b)?(b=0,0>a.left&&(b=-2*a.left,a.left=0,c.offset(a),k=c[0].offsetWidth,h=c[0].offsetHeight),this.replaceArrow(b-e+k,k,"left")):this.replaceArrow(h-l,h,"top");p&&c.offset(a)};d.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,
a?50*(1-a/b)+"%":"")};d.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b);a.removeClass("fade in top bottom left right")};d.prototype.hide=function(){function a(){"in"!=b.hoverState&&c.detach();b.$element.trigger("hidden.bs."+b.type)}var b=this,c=this.tip(),e=f.Event("hide.bs."+this.type);this.$element.trigger(e);if(!e.isDefaultPrevented())return c.removeClass("in"),f.support.transition&&this.$tip.hasClass("fade")?c.one(f.support.transition.end,
a).emulateTransitionEnd(150):a(),this.hoverState=null,this};d.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")};d.prototype.hasContent=function(){return this.getTitle()};d.prototype.getPosition=function(){var a=this.$element[0];return f.extend({},"function"==typeof a.getBoundingClientRect?a.getBoundingClientRect():{width:a.offsetWidth,height:a.offsetHeight},this.$element.offset())};
d.prototype.getCalculatedOffset=function(a,b,c,e){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-e,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-e/2,left:b.left-c}:{top:b.top+b.height/2-e/2,left:b.left+b.width}};d.prototype.getTitle=function(){var a=this.$element,b=this.options;return a.attr("data-original-title")||("function"==typeof b.title?b.title.call(a[0]):b.title)};d.prototype.tip=function(){return this.$tip=this.$tip||f(this.options.template)};
d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};d.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)};d.prototype.enable=function(){this.enabled=!0};d.prototype.disable=function(){this.enabled=!1};d.prototype.toggleEnabled=function(){this.enabled=!this.enabled};d.prototype.toggle=function(a){a=a?f(a.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;a.tip().hasClass("in")?
a.leave(a):a.enter(a)};d.prototype.destroy=function(){clearTimeout(this.timeout);this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var g=f.fn.tooltip;f.fn.tooltip=function(a){return this.each(function(){var b=f(this),c=b.data("bs.tooltip"),e="object"==typeof a&&a;if(c||"destroy"!=a)if(c||b.data("bs.tooltip",c=new d(this,e)),"string"==typeof a)c[a]()})};f.fn.tooltip.Constructor=d;f.fn.tooltip.noConflict=function(){f.fn.tooltip=g;return this}}(jQuery);
+function(f){var d=function(a,b){this.init("popover",a,b)};if(!f.fn.tooltip)throw Error("Popover requires tooltip.js");d.DEFAULTS=f.extend({},f.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'\x3cdiv class\x3d"popover"\x3e\x3cdiv class\x3d"arrow"\x3e\x3c/div\x3e\x3ch3 class\x3d"popover-title"\x3e\x3c/h3\x3e\x3cdiv class\x3d"popover-content"\x3e\x3c/div\x3e\x3c/div\x3e'});d.prototype=f.extend({},f.fn.tooltip.Constructor.prototype);d.prototype.constructor=d;d.prototype.getDefaults=
function(){return d.DEFAULTS};d.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b);a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c);a.removeClass("fade top bottom left right in");a.find(".popover-title").html()||a.find(".popover-title").hide()};d.prototype.hasContent=function(){return this.getTitle()||this.getContent()};d.prototype.getContent=function(){var a=
this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)};d.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};d.prototype.tip=function(){this.$tip||(this.$tip=f(this.options.template));return this.$tip};var g=f.fn.popover;f.fn.popover=function(a){return this.each(function(){var b=f(this),c=b.data("bs.popover"),e="object"==typeof a&&a;if(c||"destroy"!=a)if(c||b.data("bs.popover",c=new d(this,e)),"string"==
typeof a)c[a]()})};f.fn.popover.Constructor=d;f.fn.popover.noConflict=function(){f.fn.popover=g;return this}}(jQuery);
+function(f){var d=function(a){this.element=f(a)};d.prototype.show=function(){var a=this.element,b=a.closest("ul:not(.dropdown-menu)"),c=a.data("target");c||(c=(c=a.attr("href"))&&c.replace(/.*(?=#[^\s]*$)/,""));if(!a.parent("li").hasClass("active")){var e=b.find(".active:last a")[0],l=f.Event("show.bs.tab",{relatedTarget:e});a.trigger(l);l.isDefaultPrevented()||(c=f(c),this.activate(a.parent("li"),b),this.activate(c,c.parent(),function(){a.trigger({type:"shown.bs.tab",relatedTarget:e})}))}};d.prototype.activate=
function(a,b,c){function e(){l.removeClass("active").find("\x3e .dropdown-menu \x3e .active").removeClass("active");a.addClass("active");k?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade");a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active");c&&c()}var l=b.find("\x3e .active"),k=c&&f.support.transition&&l.hasClass("fade");k?l.one(f.support.transition.end,e).emulateTransitionEnd(150):e();l.removeClass("in")};var g=f.fn.tab;f.fn.tab=function(a){return this.each(function(){var b=
f(this),c=b.data("bs.tab");c||b.data("bs.tab",c=new d(this));if("string"==typeof a)c[a]()})};f.fn.tab.Constructor=d;f.fn.tab.noConflict=function(){f.fn.tab=g;return this};f(document).on("click.bs.tab.data-api",'[data-toggle\x3d"tab"], [data-toggle\x3d"pill"]',function(a){a.preventDefault();f(this).tab("show")})}(jQuery);
+function(f){var d=function(a,b){this.options=f.extend({},d.DEFAULTS,b);this.$window=f(window).on("scroll.bs.affix.data-api",f.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",f.proxy(this.checkPositionWithEventLoop,this));this.$element=f(a);this.affixed=this.unpin=this.pinnedOffset=null;this.checkPosition()};d.RESET="affix affix-top affix-bottom";d.DEFAULTS={offset:0};d.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(d.RESET).addClass("affix");
var a=this.$window.scrollTop();return this.pinnedOffset=this.$element.offset().top-a};d.prototype.checkPositionWithEventLoop=function(){setTimeout(f.proxy(this.checkPosition,this),1)};d.prototype.checkPosition=function(){if(this.$element.is(":visible")){var a=f(document).height(),b=this.$window.scrollTop(),c=this.$element.offset(),e=this.options.offset,l=e.top,k=e.bottom;"top"==this.affixed&&(c.top+=b);"object"!=typeof e&&(k=l=e);"function"==typeof l&&(l=e.top(this.$element));"function"==typeof k&&
(k=e.bottom(this.$element));b=null!=this.unpin&&b+this.unpin<=c.top?!1:null!=k&&c.top+this.$element.height()>=a-k?"bottom":null!=l&&b<=l?"top":!1;this.affixed!==b&&(this.unpin&&this.$element.css("top",""),c="affix"+(b?"-"+b:""),e=f.Event(c+".bs.affix"),this.$element.trigger(e),e.isDefaultPrevented()||(this.affixed=b,this.unpin="bottom"==b?this.getPinnedOffset():null,this.$element.removeClass(d.RESET).addClass(c).trigger(f.Event(c.replace("affix","affixed"))),"bottom"==b&&this.$element.offset({top:a-
k-this.$element.height()})))}};var g=f.fn.affix;f.fn.affix=function(a){return this.each(function(){var b=f(this),c=b.data("bs.affix"),e="object"==typeof a&&a;c||b.data("bs.affix",c=new d(this,e));if("string"==typeof a)c[a]()})};f.fn.affix.Constructor=d;f.fn.affix.noConflict=function(){f.fn.affix=g;return this};f(window).on("load",function(){f('[data-spy\x3d"affix"]').each(function(){var a=f(this),b=a.data();b.offset=b.offset||{};b.offsetBottom&&(b.offset.bottom=b.offsetBottom);b.offsetTop&&(b.offset.top=
b.offsetTop);a.affix(b)})})}(jQuery);
+function(f){var d=function(a,b){this.$element=f(a);this.options=f.extend({},d.DEFAULTS,b);this.transitioning=null;this.options.parent&&(this.$parent=f(this.options.parent));this.options.toggle&&this.toggle()};d.DEFAULTS={toggle:!0};d.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"};d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var a=f.Event("show.bs.collapse");this.$element.trigger(a);if(!a.isDefaultPrevented()){if((a=this.$parent&&
this.$parent.find("\x3e .panel \x3e .in"))&&a.length){var b=a.data("bs.collapse");if(b&&b.transitioning)return;a.collapse("hide");b||a.data("bs.collapse",null)}var c=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[c](0);this.transitioning=1;a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[c]("auto");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!f.support.transition)return a.call(this);b=f.camelCase(["scroll",c].join("-"));
this.$element.one(f.support.transition.end,f.proxy(a,this)).emulateTransitionEnd(350)[c](this.$element[0][b])}}};d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var a=f.Event("hide.bs.collapse");this.$element.trigger(a);if(!a.isDefaultPrevented()){a=this.dimension();this.$element[a](this.$element[a]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse").removeClass("in");this.transitioning=1;var b=function(){this.transitioning=0;this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};
if(!f.support.transition)return b.call(this);this.$element[a](0).one(f.support.transition.end,f.proxy(b,this)).emulateTransitionEnd(350)}}};d.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var g=f.fn.collapse;f.fn.collapse=function(a){return this.each(function(){var b=f(this),c=b.data("bs.collapse"),e=f.extend({},d.DEFAULTS,b.data(),"object"==typeof a&&a);!c&&e.toggle&&"show"==a&&(a=!a);c||b.data("bs.collapse",c=new d(this,e));if("string"==typeof a)c[a]()})};f.fn.collapse.Constructor=
d;f.fn.collapse.noConflict=function(){f.fn.collapse=g;return this};f(document).on("click.bs.collapse.data-api","[data-toggle\x3dcollapse]",function(a){var b=f(this),c;a=b.attr("data-target")||a.preventDefault()||(c=b.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"");c=f(a);var e=(a=c.data("bs.collapse"))?"toggle":b.data(),l=b.attr("data-parent"),k=l&&f(l);a&&a.transitioning||(k&&k.find('[data-toggle\x3dcollapse][data-parent\x3d"'+l+'"]').not(b).addClass("collapsed"),b[c.hasClass("in")?"addClass":"removeClass"]("collapsed"));
c.collapse(e)})}(jQuery);
+function(f){function d(a,b){var c,e=f.proxy(this.process,this);this.$element=f(a).is("body")?f(window):f(a);this.$body=f("body");this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",e);this.options=f.extend({},d.DEFAULTS,b);this.selector=(this.options.target||(c=f(a).attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li \x3e a";this.offsets=f([]);this.targets=f([]);this.activeTarget=null;this.refresh();this.process()}d.DEFAULTS={offset:10};d.prototype.refresh=function(){var a=
this.$element[0]==window?"offset":"position";this.offsets=f([]);this.targets=f([]);var b=this;this.$body.find(this.selector).map(function(){var c=f(this);c=c.data("target")||c.attr("href");var e=/^#./.test(c)&&f(c);return e&&e.length&&e.is(":visible")&&[[e[a]().top+(!f.isWindow(b.$scrollElement.get(0))&&b.$scrollElement.scrollTop()),c]]||null}).sort(function(c,e){return c[0]-e[0]}).each(function(){b.offsets.push(this[0]);b.targets.push(this[1])})};d.prototype.process=function(){var a=this.$scrollElement.scrollTop()+
this.options.offset,b=(this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight)-this.$scrollElement.height(),c=this.offsets,e=this.targets,l=this.activeTarget,k;if(a>=b)return l!=(k=e.last()[0])&&this.activate(k);if(l&&a<=c[0])return l!=(k=e[0])&&this.activate(k);for(k=c.length;k--;)l!=e[k]&&a>=c[k]&&(!c[k+1]||a<=c[k+1])&&this.activate(e[k])};d.prototype.activate=function(a){this.activeTarget=a;f(this.selector).parentsUntil(this.options.target,".active").removeClass("active");a=f(this.selector+
'[data-target\x3d"'+a+'"],'+this.selector+'[href\x3d"'+a+'"]').parents("li").addClass("active");a.parent(".dropdown-menu").length&&(a=a.closest("li.dropdown").addClass("active"));a.trigger("activate.bs.scrollspy")};var g=f.fn.scrollspy;f.fn.scrollspy=function(a){return this.each(function(){var b=f(this),c=b.data("bs.scrollspy"),e="object"==typeof a&&a;c||b.data("bs.scrollspy",c=new d(this,e));if("string"==typeof a)c[a]()})};f.fn.scrollspy.Constructor=d;f.fn.scrollspy.noConflict=function(){f.fn.scrollspy=
g;return this};f(window).on("load",function(){f('[data-spy\x3d"scroll"]').each(function(){var a=f(this);a.scrollspy(a.data())})})}(jQuery);
+function(f){f.fn.emulateTransitionEnd=function(d){var g=!1,a=this;f(this).one(f.support.transition.end,function(){g=!0});setTimeout(function(){g||f(a).trigger(f.support.transition.end)},d);return this};f(function(){var d=f.support;a:{var g=document.createElement("bootstrap");var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},b;for(b in a)if(void 0!==g.style[b]){g={end:a[b]};break a}g=!1}d.transition=
g})}(jQuery);
(function(f,d){function g(z,B,F,C){C={data:C||(B?B.data:{}),_wrap:B?B._wrap:null,tmpl:null,parent:B||null,nodes:[],calls:h,nest:p,wrap:q,html:t,update:m};z&&f.extend(C,z,{nodes:[],parent:B});F&&(C.tmpl=F,C._ctnt=C._ctnt||C.tmpl(f,C),C.key=++y,(E.length?w:v)[y]=C);return C}function a(z,B,F){var C;F=F?f.map(F,function(G){return"string"===typeof G?z.key?G.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,'$1 _tmplitem\x3d"'+z.key+'" $2'):G:a(G,z,G._ctnt)}):z;if(B)return F;F=F.join("");F.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,
function(G,H,I,J){C=f(I).get();k(C);H&&(C=b(H).concat(C));J&&(C=C.concat(b(J)))});return C?C:b(F)}function b(z){var B=document.createElement("div");B.innerHTML=z;return f.makeArray(B.childNodes)}function c(z){return new Function("jQuery","$item","var $\x3djQuery,call,_\x3d[],$data\x3d$item.data;with($data){_.push('"+f.trim(z).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{\x3d $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,
function(B,F,C,G,H,I,J){B=f.tmpl.tag[C];if(!B)throw"Template command not found: "+C;C=B._default||[];I&&!/\w$/.test(H)&&(H+=I,I="");H?(H=l(H),J=J?","+l(J)+")":I?")":"",J=I?-1<H.indexOf(".")?H+I:"("+H+").call($item"+J:H,I=I?J:"(typeof("+H+")\x3d\x3d\x3d'function'?("+H+").call($item):("+H+"))"):I=J=C.$1||"null";G=l(G);return"');"+B[F?"close":"open"].split("$notnull_1").join(H?"typeof("+H+")!\x3d\x3d'undefined' \x26\x26 ("+H+")!\x3dnull":"true").split("$1a").join(I).split("$1").join(J).split("$2").join(G?
G.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(M,K,P,O){return(O=O?","+O+")":P?")":"")?"("+K+").call($item"+O:M}):C.$2||"")+"_.push('"})+"');}return _;")}function e(z,B){z._wrap=a(z,!0,f.isArray(B)?B:[u.test(B)?B:f(B).html()]).join("")}function l(z){return z?z.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function k(z){function B(K){function P(R){R+=F;N=G[R]=G[R]||g(N,v[N.parent.key+F]||N.parent,null,!0)}var O,L=K,N,Q;if(Q=K.getAttribute("_tmplitem")){for(;L.parentNode&&1===(L=L.parentNode).nodeType&&
!(O=L.getAttribute("_tmplitem")););O!==Q&&(L=L.parentNode?11===L.nodeType?0:L.getAttribute("_tmplitem")||0:0,(N=v[Q])||(N=w[Q],N=g(N,v[L]||w[L],null,!0),N.key=++y,v[y]=N),D&&P(Q));K.removeAttribute("_tmplitem")}else D&&(N=f.data(K,"tmplItem"))&&(P(N.key),v[N.key]=N,L=(L=f.data(K.parentNode,"tmplItem"))?L.key:0);if(N){for(O=N;O&&O.key!=L;)O.nodes.push(K),O=O.parent;delete N._ctnt;delete N._wrap;f.data(K,"tmplItem",N)}}var F="_"+D,C,G={},H,I;var J=0;for(H=z.length;J<H;J++)if(1===(C=z[J]).nodeType){var M=
C.getElementsByTagName("*");for(I=M.length-1;0<=I;I--)B(M[I]);B(C)}}function h(z,B,F,C){if(!z)return E.pop();E.push({_:z,tmpl:B,item:this,data:F,options:C})}function p(z,B,F){return f.tmpl(f.template(z),B,F,this)}function q(z,B){var F=z.options||{};F.wrapped=B;return f.tmpl(f.template(z.tmpl),z.data,F,z.item)}function t(z,B){var F=this._wrap;return f.map(f(f.isArray(F)?F.join(""):F).filter(z||"*"),function(C){if(B)C=C.innerText||C.textContent;else{var G;(G=C.outerHTML)||(G=document.createElement("div"),
G.appendChild(C.cloneNode(!0)),G=G.innerHTML);C=G}return C})}function m(){var z=this.nodes;f.tmpl(null,null,null,this).insertBefore(z[0]);f(z).remove()}var r=f.fn.domManip,u=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{! /,v={},w={},x,A={key:0,data:{}},y=0,D=0,E=[];f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(z,B){f.fn[z]=function(F){var C=[];F=f(F);var G;var H=1===this.length&&this[0].parentNode;x=v||{};if(H&&11===H.nodeType&&1===H.childNodes.length&&
1===F.length)F[B](this[0]),C=this;else{var I=0;for(G=F.length;I<G;I++)D=I,H=(0<I?this.clone(!0):this).get(),f.fn[B].apply(f(F[I]),H),C=C.concat(H);D=0;C=this.pushStack(C,z,F.selector)}F=x;x=null;f.tmpl.complete(F);return C}});f.fn.extend({tmpl:function(z,B,F){return f.tmpl(this[0],z,B,F)},tmplItem:function(){return f.tmplItem(this[0])},template:function(z){return f.template(z,this[0])},domManip:function(z,B,F,C){if(z[0]&&z[0].nodeType){for(var G=f.makeArray(arguments),H=z.length,I=0,J;I<H&&!(J=f.data(z[I++],
"tmplItem")););1<H&&(G[0]=[f.makeArray(z)]);J&&D&&(G[2]=function(M){f.tmpl.afterManip(this,M,F)});r.apply(this,G)}else r.apply(this,arguments);D=0;x||f.tmpl.complete(v);return this}});f.extend({tmpl:function(z,B,F,C){var G=!C;if(G)C=A,z=f.template[z]||f.template(null,z),w={};else if(!z)return z=C.tmpl,v[C.key]=C,C.nodes=[],C.wrapped&&e(C,C.wrapped),f(a(C,null,C.tmpl(f,C)));if(!z)return[];"function"===typeof B&&(B=B.call(C||{}));F&&F.wrapped&&e(F,F.wrapped);B=f.isArray(B)?f.map(B,function(H){return H?
g(F,C,z,H):null}):[g(F,C,z,B)];return G?f(a(C,null,B)):B},tmplItem:function(z){var B;for(z instanceof f&&(z=z[0]);z&&1===z.nodeType&&!(B=f.data(z,"tmplItem"))&&(z=z.parentNode););return B||A},template:function(z,B){return B?("string"===typeof B?B=c(B):B instanceof f&&(B=B[0]||{}),B.nodeType&&(B=f.data(B,"tmpl")||f.data(B,"tmpl",c(B.innerHTML))),"string"===typeof z?f.template[z]=B:B):z?"string"!==typeof z?f.template(null,z):f.template[z]||f.template(null,u.test(z)?z:f(z)):null},encode:function(z){return(""+
z).split("\x3c").join("\x26lt;").split("\x3e").join("\x26gt;").split('"').join("\x26#34;").split("'").join("\x26#39;")}});f.extend(f.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_\x3d_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_\x3d[];",close:"call\x3d$item.calls();_\x3dcall._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) \x26\x26 $1a){",
close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) \x26\x26 $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"\x3d":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(z){v={}},afterManip:function(z,B,F){var C=11===B.nodeType?f.makeArray(B.childNodes):1===B.nodeType?[B]:[];F.call(z,B);k(C);D++}})})(jQuery);
(function(f,d,g){var a=f(document),b=xfalib.ut.TouchUtil,c=b.POINTER_DOWN,e=b.POINTER_UP,l=b.POINTER_MOVE;f.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1E3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(k){var h=d.pageXOffset,p=d.pageYOffset,q=k.clientX||k.originalEvent.clientX,t=k.clientY||k.originalEvent.clientY;if(0===k.pageY&&Math.floor(t)>Math.floor(k.pageY)||0===k.pageX&&Math.floor(q)>Math.floor(k.pageX))q-=h,t-=p;else if(t<k.pageY-p||
q<k.pageX-h)q=k.pageX-h,t=k.pageY-p;return{x:q,y:t}},start:function(k){var h=f.event.special.swipe.getLocation(k.originalEvent.touches?k.originalEvent.touches[0]:k);return{time:(new Date).getTime(),coords:[h.x,h.y],origin:f(k.target)}},stop:function(k){k=f.event.special.swipe.getLocation(k.originalEvent.touches?k.originalEvent.touches[0]:k);return{time:(new Date).getTime(),coords:[k.x,k.y]}},handleSwipe:function(k,h,p,q){if(h.time-k.time<f.event.special.swipe.durationThreshold&&Math.abs(k.coords[0]-
h.coords[0])>f.event.special.swipe.horizontalDistanceThreshold&&Math.abs(k.coords[1]-h.coords[1])<f.event.special.swipe.verticalDistanceThreshold){var t=k.coords[0]>h.coords[0]?"swipeleft":"swiperight";k=f.Event(t,{target:q,swipestart:k,swipestop:h});h=k.type;k.type=t;f.event.trigger(k,g,p);k.type=h;return!0}return!1},eventInProgress:!1,setup:function(){var k=this,h=f(k),p={};var q=f.data(this,"mobile-events");q||(q={length:0},f.data(this,"mobile-events",q));q.length++;q.swipe=p;p.start=function(t){if((t.originalEvent.pointerType===
g||2===t.originalEvent.pointerType||"touch"===t.originalEvent.pointerType)&&!f.event.special.swipe.eventInProgress){f.event.special.swipe.eventInProgress=!0;var m,r=f.event.special.swipe.start(t),u=t.target,v=!1;p.move=function(w){r&&(m=f.event.special.swipe.stop(w),!v&&(v=f.event.special.swipe.handleSwipe(r,m,k,u))&&(f.event.special.swipe.eventInProgress=!1),Math.abs(r.coords[0]-m.coords[0])>f.event.special.swipe.scrollSupressionThreshold&&w.preventDefault())};p.stop=function(){v=!0;f.event.special.swipe.eventInProgress=
!1;a.off(l,p.move);p.move=null};a.on(l,p.move).one(e,p.stop)}};h.on(c,p.start)},teardown:function(){var k;if(k=f.data(this,"mobile-events")){var h=k.swipe;delete k.swipe;k.length--;0===k.length&&f.removeData(this,"mobile-events")}h&&(h.start&&f(this).off(c,h.start),h.move&&a.off(l,h.move),h.stop&&a.off(e,h.stop))}};f.each({swipeleft:"swipe",swiperight:"swipe"},function(k,h){"mousedown"!==b.POINTER_DOWN&&(f.event.special[k]={setup:function(){f(this).on(h,f.noop)},teardown:function(){f(this).off(h)}})})})(jQuery,
this);
(function(f,d){var g={getMultipleTemplateJson:function(a){var b=a.path,c=a.listOfTemplateIds;0<c.length&&d.ajax({url:b,type:"GET",data:{listOfTemplateIds:JSON.stringify(c),fetchMultipleJson:!0},async:!1,success:function(e){a.success.call(this,JSON.parse(e.multipleJson))},error:function(e){f.guideBridge._guide().logger().log(e)}})},getHtmlJson:function(a){d.ajax({url:a.path,type:"GET",data:{templateId:a.templateId,fetchJSON:a.fetchJSON,fetchHTML:a.fetchHTML},async:!1,success:a.success,error:a.error,complete:a.complete})}};
f.addEventListener("bridgeInitializeStart",function(a){(a=a.detail.guideBridge)&&a.registerPanelProvider(g)})})(window,$);
(function(f,d){function g(){function m(){return Math.random().toString(16).slice(-4)}return m()+m()+"-"+m()+"-"+m()+"-"+m()+"-"+m()+m()+m()}function a(){return xfalib.ut.XfaUtil.prototype.getOrElse.apply(null,arguments)}Function.prototype.bind=Function.prototype.bind||function(m){var r=this;return function(){r.call(m,arguments)}};var b=0,c=!1,e="",l=function(){var m=[],r=[],u=[];this.errors=!1;this.addMessage=function(v,w,x){this.errors=!0;m.push(w);u.push(x);r.push(v)};this.getNextMessage=function(){return 0==
r.length?null:{code:r.pop(),somExpression:u.pop(),message:m.pop()}}},k=function(){this._guideView=this._guide=this._$target=null;this._version="1.0";this._guideInitHandler={};this._guideModelInitHandler={};f(window).on("guideModelInitialized",this._guideModelInitialized.bind(this));f(window).on("guideInitialized",this._guideInitialized.bind(this));f(window).on("guideInitializationError",this._guideError);this.userConfig={};this.panelProvider=null;this.hostName="client"},h=!1,p=function(m){var r=!0;
if(guideBridge._disablePreview())return!1;f.ajax({url:guideBridge._getGuidePathUrl(".fd.tempstorageprovider.jsp"),type:"POST",headers:{"x-csrf-token":g()},async:!1,data:{uuidPath:"/tmp/fd/af/"+m},error:function(u){guideBridge._guide.logger().log(u);r=!1;f.proxy(guideBridge._handleSubmitError(u),guideBridge)}});return r},q=function(m){if("undefined"!=typeof console)for(var r=m.getNextMessage();r;)this._guide.logger().log(r.message),r=m.getNextMessage()};f.extend(k.prototype,{GUIDE_BRIDGE_INITIALIZE_START:"bridgeInitializeStart",
GUIDE_BRIDGE_INITIALIZE_COMPLETE:"bridgeInitializeComplete",GUIDE_ELEMENT_VISIBLE_CHANGED:"elementVisibleChanged",GUIDE_ELEMENT_ENABLE_CHANGED:"elementEnableChanged",GUIDE_ELEMENT_VALUE_CHANGED:"elementValueChanged",GUIDE_ELEMENT_NAVIGATION_CHANGED:"elementNavigationChanged",GUIDE_ELEMENT_FOCUS_CHANGED:"elementFocusChanged",GUIDE_ELEMENT_HELP_SHOWN:"elementHelpShown",GUIDE_ELEMENT_VALIDATION_STATUS_CHANGED:"elementValidationStatusChanged",GUIDE_ELEMENT_BUTTON_CLICKED:"elementButtonClicked",GUIDE_VALIDATION_COMPLETE:"validationComplete",
GUIDE_AUTO_SAVE_START:"guideAutoSaveStart",GUIDE_SAVE_START:"saveStarted",GUIDE_SAVE_COMPLETED:"saveCompleted",GUIDE_SUBMIT_START:"submitStart",GUIDE_PATH:"guidePath",GUIDE_NAME:"guideName",GUIDE_DESC:"guideDesc",GUIDE_TYPE:"guideType",GUIDE_ELEMENT_LAZY_LOADED:"elementLazyLoaded",isConnected:function(){return this._guide?!0:!1},connect:function(m,r){r=r||guideBridge;if(this.isConnected())try{m.call(r)}catch(u){this._guide&&this._guide.logger().log(u)}else this._guideInitHandler.handler=this._guideInitHandler.handler||
[],this._guideInitHandler.handler.push(m),this._guideInitHandler.context=this._guideInitHandler.context||[],this._guideInitHandler.context.push(r)},_modelConnect:function(m,r){r=r||guideBridge;if(this.isConnected())try{m.call(r)}catch(u){this._guide&&this._guide.logger().log(u)}else this._guideModelInitHandler.handler=this._guideModelInitHandler.handler||[],this._guideModelInitHandler.handler.push(m),this._guideModelInitHandler.context=this._guideModelInitHandler.context||[],this._guideModelInitHandler.context.push(r)},
_guideModelInitialized:function(m){this._guide=m.guide;if(this._guideModelInitHandler.handler)for(m=0;m<this._guideModelInitHandler.handler.length;m++)try{this._guideModelInitHandler.handler[m].call(this._guideModelInitHandler.context[m])}catch(r){this._guide&&this._guide.logger().log(r)}},_guideInitialized:function(m){if(this._guideInitHandler.handler)for(m=0;m<this._guideInitHandler.handler.length;m++)try{this._guideInitHandler.handler[m].call(this._guideInitHandler.context[m])}catch(r){this._guide&&
this._guide.logger().log(r)}window.guideBridge.trigger("bridgeInitializeComplete",guidelib.event.GuideModelEvent.createEvent("bridgeInitializeComplete",guideBridge))},_setGuideView:function(m){this._guideView=m},_guideError:function(m){this._guide.logger().debug("AF",m)},_checkGuide:function(m){return this._guide?!0:(m.addMessage(1,"Guide Dom not Initialized",""),!1)},getBridgeVersion:function(){return this._version},registerConfig:function(m,r){var u=new l;u.data=this.userConfig[m];this.userConfig[m]=
r;u.completed=!0;return u},customContextProperty:function(m,r){var u=a(guidelib,"__runtime__.guideContext.customPropertyMap",{});u=d.extend({},u,a(this._guide,"runtime.guideContext.customPropertyMap",{}));if(d.isUndefined(r))if(d.isObject(m))guideBridge._modelConnect(function(w,x){return function(){var A=d.extend({},guideBridge._guide.runtime.guideContext.customPropertyMap,w);d.extend(A,x);guideBridge._guide.runtime.guideContext.customPropertyMap=A}}(u,m));else return u[m];else{var v=u[m];guideBridge._modelConnect(function(w,
x,A){return function(){var y=d.extend({},guideBridge._guide.runtime.guideContext.customPropertyMap,A);y[w]=x;guideBridge._guide.runtime.guideContext.customPropertyMap=y}}(m,r,u));return v}},getNavigablePanel:function(m){return this._guideView.getSomOnNavigableAncestor(m)},setProperty:function(m,r,u){if(r&&d.isArray(m)&&d.isArray(u)&&m.length===u.length){var v=this;d.each(m,function(w,x){var A=v.resolveNode(w);A?A[r]=u[x]:v._guide.logger().log("som not valid:"+w)});this._guide._currentContext||this._guide.runPendingExpressions()}},
getDataXML:function(m){guideBridge.getData(m)},getData:function(m){m=m||{};m.dorData=m.dorData||m.boundData;var r=new l;m.guideState||this._checkGuide(r)?this._submitInternal({success:function(u){u=u||{};r.completed=!0;r.data=m.dorData?u.dorDataXml:u.data;d.isFunction(m.success)&&m.success.call(m.context,r)},error:function(u,v,w){r.completed=!1;r.addMessage(2,"Error in getData API","");d.isFunction(m.error)&&m.error.call(m.context,r)},guideState:m.guideState,async:m.async,fileUploadPath:m.fileUploadPath,
excludeFormState:m.excludeFormState||!1,dorData:m.dorData||!1}):m.error.call(m.context,r)},getFormDataString:function(m){guideBridge._updateAFSubmissionInfo();guideBridge._guide.internal.liveDataUtils.updateLiveData();guideBridge._guide.internal.liveDataUtils.insertSubmissionInfo(guideBridge._guide.runtime.guideContext.afSubmissionInfo);var r=guideBridge._guide.internal.liveDataUtils.getLiveDataStr(),u=new l;u.data=r;m&&m.success instanceof Function&&m.success(u)},hideSubmitButtons:function(){return this._hideElements("guideButton",
"submit")},_evaluateExpression:function(m){if(this._guide)return this._guide._compileExpression(m,null).apply(this._guide)},getAutoSaveEnabledStatus:function(){var m=!1;this.isConnected()&&(m=this._guide.enableAutoSave);return m},hasAutoSaveStarted:function(){return this._guide&&this._guide.enableAutoSave&&this._guide.autoSaveStart},getAutoSaveInfo:function(){return this._guide.autoSaveInfo},afSubmissionInfo:function(m,r){var u=guideBridge._guide.runtime.guideContext.afSubmissionInfo||{};if(d.isUndefined(r))return u[m];
var v=u[m];u[m]=r;guideBridge._guide.runtime.guideContext.afSubmissionInfo=u;return v},getComputedSubmissionMetadata:function(){var m={},r=null,u=null,v=this.getSubmissionMetadataInfo();if(v)if(d.isObject(v))for(var w in v)try{r=JSON.parse(v[w]),u=this._guide._compileExpression(r.value),m[r.key]=u.apply(this._guide)}catch(x){this._guide&&this._guide.logger().log(x)}else if(d.isString(v))try{r=JSON.parse(v),u=this._guide._compileExpression(r.value),m[r.key]=u.apply(this._guide)}catch(x){this._guide&&
this._guide.logger().log(x)}return m},getGlobalMetaInfo:function(){return this._guide.globalMetaInfo},getSubmissionMetadataInfo:function(){return this._guide.submissionMetaInfo&&"local"===this._guide.submissionMetaInfo.metadataselector?a(this._guide,"submissionMetaInfo.metadata",null):a(this._guide,"globalMetaInfo.metadata",null)},setEnabledAutoSave:function(m){this._guide.enableAutoSave=m},hideFileAttachmentListingButtons:function(){return this._hideElements("guideListFileAttachmentButton")},isOffline:function(){return c},
setIsOffline:function(m){c=m},hideFileAttachments:function(){return this._hideElements("guideFileUpload")},hideGlobalToolbar:function(){var m=new l,r;if(!this._checkGuide(m))return m;guideBridge._guide.toolbar&&(r=this._getGuideDomElement(guideBridge._guide.toolbar.somExpression))&&0<r.length&&r.hide();m.completed=!0;return m},hideSaveButtons:function(){return this._hideElements("guideButton","save")},hideResetButtons:function(){return this._hideElements("guideButton","reset")},getElementProperty:function(m){var r=
m.somExpressions;m=m.propertyName;var u=new l;if(!this._checkGuide(u))return u;u.data=[];for(var v=0;v<r.length;v++){var w=this.resolveNode(r[v]);null==w?(u.addMessage(0,"No element "+r[v]+" exists",r[v]),u.data.push(null)):(u.completed=!0,u.data.push(w[m]))}return u},_getGuideDomElement:function(m,r){return this._guideView?this._guideView._getGuideDomElement(m,r):null},getTempPath:function(){return"/tmp/fd/af/"+this._getUUID()},getFileAttachmentsInfo:function(m){var r=this._getFileAttachmentsList(),
u;m={options:m,fileAttachmentsList:r,fileUploadPath:this.getTempPath(),callback:function(v){u=[];d.each(this.attachments,function(w){u.push({name:w.split("/")[1],path:this.fileUrl+"/"+w})},this);this.options.success&&this.options.success.call(this.options.context,u)}};this._getGuideAttachments(m)},_getGuideAttachments:function(m){var r=[],u=[],v=null,w=!1,x=this._getContextRoot(),A=m.options,y=m.fileAttachmentsList,D=m.fileUploadPath,E=m.callback;m=m.errorCallback;x&&0===D.indexOf(x)&&(D=D.substring(x.length));
u=this._juiceOutNameAndFileDomMap(y);r=u.fileDom;u=u.fileName;if(0<r.length){var z=d.indexOf(r,d.find(r,function(B){return null!==B}));if(-1!==z){v=r[z][guideBridge.userConfig.uploaderPluginName||"adobeFileUploader"]("uploadFile",{fileName:u,fileDom:r,fileUploadPath:D,multiple:!0,_getUrl:guideBridge._getUrl("")});x&&0===v.indexOf(x)&&(v=v.substring(x.length));r[z].one("adobeFileUploader.multipleFileUploaded",f.proxy(E,{attachments:u,fileUrl:v,fileAttachmentsList:y,options:A}));if(m)r[z].one("adobeFileUploader.fileUploadFailed",
f.proxy(m,{attachments:u,fileUrl:v,fileAttachmentsList:y,options:A}));w=!0}}w||E.apply({attachments:u,fileUrl:v,fileAttachmentsList:y,options:A})},visit:function(m,r){this._guide.visit(m,r||window)},_hideElements:function(m,r){var u=new l;if(!this._checkGuide(u))return u;u.completed=!0;this.visit(function(v){"guideButton"===v.className?v.type===r&&(v.visible=!1):v.className===m&&(v.visible=!1)});return u},hideSummaryPanel:function(){var m=new l;if(!this._checkGuide(m))return m;m.completed=!0;this.visit(function(r){"guideNode"===
r.className&&"fd/afaddon/components/summary"===r.jsonModel["sling:resourceType"]&&(r.panel.visible=!1)});return m},_getFileAttachmentsList:function(){var m=[];this.visit(function(r){"guideFileUpload"===r.className&&m.push(r)});return m},_getCaptchaData:function(m){return m?{serviceType:m.captchaService,somExpression:m.somExpression,validationMessage:m.validateExpMessage,mandatoryMessage:m.mandatoryMessage,data:m.value}:{}},_getAdditionalSubmitInfo:function(){var m={},r=f("#actionField"),u=this._getThankYouPageFromConfig();
"string"===typeof u&&(document.getElementById(":redirect").value=u);r.find("input").each(function(){m[f(this).attr("name")]=f(this).val();if("_guideValueMap"==f(this).attr("name")&&"yes"==f(this).val()){var v={};window.guideBridge._guide._collectValues(v);m._guideValuesMap=JSON.stringify(v)}});return m},_getGuideDom:function(m){return m.reducedJSON?guideBridge._guide._getReducedJSON():guideBridge._guide.jsonModel},_createGuideStateAndLiveXml:function(m){var r=new l;m.obj=r;if(this._checkGuide(r)){var u=
function(x){!x.errors&&x.completed&&(v.currentContext={data:x.data})};r.data={};var v=null;if(this._isXfaGuide()&&this._isValidXFAGuide()){var w=null;w=m.reducedJSON?window.formBridge.getFormState(!0,!0):window.formBridge.getFormState();w.errors&&(guideBridge._guide.logger().log("Error in getting Xfa State:"+JSON.stringify(w.getNextMessage())),alert(guidelib.util.GuideUtil.getLocalizedMessage("AF",guidelib.i18n.LogMessages["AEM-AF-901-001"])));v=w.data}m=guideBridge._getGuideDom(m);w=guideBridge._getAdditionalSubmitInfo();
guideBridge.customContextProperty("fileAttachmentMap",JSON.stringify(this.getFileAttachmentMap()));m={guideDom:m,guideContext:guideBridge._guide.runtime.guideContext,additionalSubmitInfo:w};0<guideBridge._guide.allLazyChildren.length&&(guideBridge._guide.internal.liveDataUtils.updateLiveData(),w=guideBridge._guide.internal.GuideDirtyMarkerAndVisitor.flattenDirtyPanelMapToCSV(),0<w.length&&this.afSubmissionInfo("afDraft",w),m.guideLiveData=guideBridge._guide.internal.liveDataUtils.getLiveDataStr(),
this._isXfaGuide()&&this._isValidXFAGuide()&&formBridge.getDataXML({success:u}));r.data.guideState=m;v&&(r.data.guideState.xfaState=v)}},_updateAFSubmissionInfo:function(){guideBridge.isGuideLoaded(!0)&&this.afSubmissionInfo("lastFocusItem",this._guideView.getSomOnNavigableAncestor(this._guideView._previousFocusItemSom));this.afSubmissionInfo("computedMetaInfo",guideBridge.getComputedSubmissionMetadata());this.afSubmissionInfo("excludeFromDoR",guideBridge._guide._getExcludeFromDorMap());var m={};
guideBridge._guide.dorType&&"none"!==guideBridge._guide.dorType&&(m=guideBridge._guide._getStateOverrideMap());this.afSubmissionInfo("stateOverrides",m);this.afSubmissionInfo("signers",guideBridge._guide._getSigners())},getGuideState:function(m){var r=[];guideBridge._disablePreview()||(r=this._getFileAttachmentsList());guideBridge._updateAFSubmissionInfo();!guidelib.runtime.progressive&&guideBridge.isGuideLoaded(!0)&&this.customContextProperty("lastFocusItem",this._guideView.getSomOnNavigableAncestor(this._guideView._previousFocusItemSom));
m.fileUploadPath&&!guideBridge._disablePreview()?this._getGuideAttachments({options:m,fileAttachmentsList:r,fileUploadPath:m.fileUploadPath,callback:window.guideBridge._collectFileUrls,errorCallback:window.guideBridge._fileUploadFailed}):(this._createGuideStateAndLiveXml(m),m.success&&m.success.call(m.context,m.obj))},validate:function(m,r,u,v){var w=null;u=d.isUndefined(u)?!0:u;var x=guidelib.util.ErrorConstants;w=v?v:this._guide;0<w.allLazyChildren.length&&w.guideLazyUtil.putDirtyToTemplateCacheIfMissing(w);
if(r){if(w=this.resolveNode(r),w instanceof guidelib.model.GuidePanel)var A=x.CONTEXT_NAVIGATION}else A=x.CONTEXT_SUBMISSION;this.setValidationContext(A);r=!1;m||(m=[]);r=w.validate(m);try{if(this._guide._triggerOnBridge("validationComplete",this._guide,r,"",m),!r&&u){var y=m[0].som;guideBridge._guide.on(guidelib.event.GuideModelEvent.LAZY_LOADED,function(){var D=guideBridge.resolveNode(y);D&&D.validate()},{});this.setFocus(y);guideBridge._guide.off(guidelib.event.GuideModelEvent.LAZY_LOADED)}}catch(D){this._guide.logger().log(D)}finally{return this.unsetValidationContext(A),
r}},restoreGuideState:function(m){var r;m&&m.dataRef?r={dataRef:m.dataRef}:m&&m.guideStatePathRef&&(r={guideStatePathRef:m.guideStatePathRef});if(r){var u=window.guideBridge.getGuidePath();f.ajax({url:u+".guidejson",type:"GET",async:!1,cache:!1,data:r,success:function(v){v.guideState&&v.guideState.guideContext&&v.guideState.guideContext.customPropertyMap&&v.guideState.guideContext.customPropertyMap.sections&&0<v.guideState.guideContext.customPropertyMap.sections.length&&(window.guideBridge.customContextProperty.sections=
v.guideState.guideContext.customPropertyMap.sections);window.guideBridge.restoreGuideState(d.extend({},m,{guideState:v.guideState,dataRef:void 0,guideStatePathRef:void 0}));guidelib.runtime.progressive&&(guidelib.runtime.progressive._initializeSectionModelAndPlayJson(window.guideBridge.customContextProperty.sections),guidelib.runtime.progressive.renderLastSection())},error:function(v){window.guideBridge._guide.logger().log("Error: "+v)}})}else guidelib.__runtime__.guideContext=guidelib.__runtime__.guideContext||
{},guideBridge._guide.runtime.guideContext=guideBridge._guide.runtime.guideContext||{},r=a(m,"guideState.guideContext",void 0),d.isUndefined(m.guideState.guideContext)||(d.extend(r.customPropertyMap,guidelib.__runtime__.guideContext.customPropertyMap),d.extend(r.customPropertyMap,guideBridge._guide.runtime.guideContext.customPropertyMap)),d.extend(guideBridge._guide.runtime.guideContext,r),this._guide?(this._playGuideJson(m),this._guideView&&this._guide._triggerEvent(guidelib.event.GuideModelEvent.MODEL_REFRESH,
"jsonModel",null,null)):(this.storage={},this.storage.guideState=m.guideState,this.storage.error=m.error,this.storage.success=m.success,this.storage.context=m.context)},setData:function(m){guideBridge.restoreGuideState(m)},_getStorage:function(){var m=null;this.storage&&(m=this.storage,this.storage=null);return m},getGuideContext:function(){var m=new l;m.data=jQuery.extend(!0,{},this._guide?this._guide.runtime.guideContext:null);return m},_getContextRoot:function(){return this.userConfig.contextPath},
_getEnableFocusOnFirstField:function(){var m=this.userConfig.renderConfig||{};m=void 0===m.enableFocusOnFirstField?!0:m.enableFocusOnFirstField;return"true"===m||("false"===m?!1:m)},_updateAjaxUrl:function(m){"server"===this.hostName&&f.ajaxPrefilter(function(r,u,v){u=r.url;0!==u.lastIndexOf("http://",0)&&0!==u.lastIndexOf("https://",0)&&(u=0===u.indexOf("/")?m+u:m+"/"+u,r.url=u)})},_getUrl:function(m){var r=this.userConfig.baseUrl,u=this.userConfig.contextPath;return r?r+m:!u||"/"===u||0===m.indexOf(u)||
0!==m.length&&0!==m.indexOf("/")?m:u+m},_getGuidePathUrl:function(m,r){r=r||this.getGuidePath();return this._getUrl(r+(m||""))},getGuidePath:function(){var m=this.getGuideContext().data;return m&&m.hasOwnProperty("guidePath")?m.guidePath:null},resolveNode:function(m){return this._guide.resolveNode(m)},_resolveId:function(m){return this._guide._modelTemplateCacheStore.getModel(m)},reset:function(){window.xfalib&&window.xfalib.runtime&&window.xfalib.runtime.xfa&&window.xfalib.runtime.xfa.host.resetData();
this._guide.resetData();this._guide.internal.liveDataUtils.isLiveDataInitialized()&&this._guide.internal.liveDataUtils.updateLiveData();this._guide.internal.GuideDirtyMarkerAndVisitor.visitMap=guidelib.model.util.CommonUtils.createMap(this._guide.allLazyChildren,0)},_getPreviousFocus:function(){return this._guideView._previousFocusItemSom},getFocus:function(m){if(d.isUndefined(m))return this._guideView.currentFocusItemSom;if("navigablePanel"===(m=a(m,"focusOption",null)))return this._guideView._lastFocussedPanelForNonActionFields;
this._guide.logger().log("Invalid Focus option.",m)},setFocus:function(m,r,u){m=d.isObject(m)?m:{somExpression:m,focusOption:r,runCompletionScript:u};try{var v=this._guideView.skipFieldFocus;var w=!this._guide.enableFocusOnFirstField;w||(w=!guideBridge._getEnableFocusOnFirstField());this._guideView.skipFieldFocus=m.somExpression?m.skipFieldFocus:w;var x=this._guideView.setFocus(m)}finally{this._guideView.skipFieldFocus=v}this._guide._currentContext||this._guide.runPendingExpressions();return x},loadLazyFragment:function(m){if(!d.isUndefined(m)&&
(m=guidelib.util.GuideUtil.relativeSom(this._guide.rootPanel.somExpression,m))){m=m.split(".");var r=this._guide.rootPanel;d.each(m,function(u){null!=r&&(u=r._findChildren(u,!1),0<u.length?((u=u[0])&&u._lazyReference&&!u._itemsLoaded&&(this._guide.internal.liveDataUtils.updateLiveData(),u._loadLazyFragment()),r=u):r=null)},this)}},getSignedDocDownloadLink:function(){var m="";d.isUndefined(FD)||d.isUndefined(FD.AFaddon)||d.isUndefined(FD.AFaddon.Signing)||d.isUndefined(FD.AFaddon.Signing.signedDocDownloadLink)||
(m=FD.AFaddon.Signing.signedDocDownloadLink);return m},isGuideLoaded:function(m){return m?!d.isEmpty(window.guideBridge._guide&&window.guideBridge._guideView):!d.isEmpty(window.guideBridge._guide)},_doInternalSubmit:function(m){if(m.excludeFormState){var r=m.guideState.data.guideState.guideContext.afSubmissionInfo;r&&r.hasOwnProperty("lastFocusItem")&&(r.lastFocusItem=void 0)}r=JSON.parse(JSON.stringify(m.guideState));d.isEmpty(r.data.guideState.additionalSubmitInfo)||(r.data.guideState.additionalSubmitInfo=
{});var u=this.getMultipartData({guideState:JSON.stringify(r.data),dorData:m.dorData||!1,_charset_:"UTF-8"});f.ajax({url:this._getGuidePathUrl(".af.internalsubmit.jsp",r&&r.data?r.data.guideState.guideContext.guidePath:null),type:"POST",headers:{"x-csrf-token":g()},async:m.async||!1,contentType:"multipart/form-data; charset\x3dUTF-8; boundary\x3d"+u[0],data:u[1],success:m.success,error:m.error})},_submitInternal:function(m){var r=this;m=m||{};m.guideState?this._doInternalSubmit({guideState:m.guideState,
success:m.success,error:m.error,async:m.async,excludeFormState:m.excludeFormState,dorData:m.dorData}):this.getGuideState({diff:"diff",fileUploadPath:m.fileUploadPath,success:function(u){r._doInternalSubmit({guideState:u,success:m.success,error:m.error,async:m.async,excludeFormState:m.excludeFormState,dorData:m.dorData})},error:m.error,reducedJSON:!0})},getMultipartData:function(m){var r=this.randomString(),u="--"+r,v="",w;for(w in m)if(m.hasOwnProperty(w)){var x=d.isObject(m[w])?JSON.stringify(m[w]):
m[w];v+=u+'\r\nContent-Disposition: form-data; name\x3d"'+w+'"\r\n\r\n'+x+"\r\n"}return[r,v+(u+"--\r\n")]},randomString:function(){for(var m="",r=0;8>r;r++){var u=Math.floor(61*Math.random());m+="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".substring(u,u+1)}return m},getFileAttachmentMap:function(){for(var m={},r=window.guideBridge._getFileAttachmentsList(),u=0;u<r.length;u++){var v=r[u];d.isEmpty(v.fileAttachment.value)||(m[v.somExpression]=v.fileAttachment.value)}r=this._guide.internal.liveDataUtils._getLazyAttachmentMap();
d.each(r,function(w,x){m[x]=w.value});return m},putFileAttachmentMap:function(m){d.each(m,function(r,u){guideBridge.resolveNode(u).fileAttachment.value=r})},doAjaxSubmitWithFileAttachment:function(m,r,u,v){var w=u||{};u=[];var x=[],A=this;x=this._juiceOutNameAndFileDomMap(v);u=x.fileDom;x=x.fileName;var y=new FormData;for(v=0;v<x.length;v++)for(var D=x[v].split("\n"),E=0;E<D.length;E++)u[v]&&0<u[v].length?y.append(D[E],u[v][0].files[E]):D[E]&&y.append("_guideFileAttachment."+guideBridge._getRelativeFilePath(D[E]),
D[E]);y.append("_guideAttachments",x.toString());f.each(r,function(z,B){"object"==typeof B&&(B=JSON.stringify(B));y.append(z,B)});f.ajax({url:m,type:"POST",headers:{"x-csrf-token":g()},processData:!1,cache:!1,contentType:!1,dataType:"json",data:y,success:function(z){A.doAjaxSubmitSuccess(z,w)},error:function(z){A.doAjaxSubmitError(z,w)}})},doAjaxSubmit:function(m,r,u){var v=u||{},w=this;u=!1!==v.async;r=this.getMultipartData(r);f.ajax({url:m,type:"POST",headers:{"x-csrf-token":g()},traditional:!0,
async:u,contentType:"multipart/form-data; charset\x3dUTF-8; boundary\x3d"+r[0],data:r[1],success:function(x){w.doAjaxSubmitSuccess(x,v)},error:function(x){w.doAjaxSubmitError(x,v)}})},KEY_AF_SUCCESS_PAYLOAD:"afSuccessPayload",doAjaxSubmitSuccess:function(m,r){var u=new l;u.data=m;u.completed=!0;guidelib.util.GuideUtil&&guidelib.util.GuideUtil.showGuideLoading(!1).removeAllMessages();if(d.isFunction(r.success))r.success.call(r.context,u);else if(m.hasOwnProperty("signingURL"))window.location.href=
m.signingURL;else{r={};if(m.hasOwnProperty(guideBridge.KEY_AF_SUCCESS_PAYLOAD))try{r=JSON.parse(m[guideBridge.KEY_AF_SUCCESS_PAYLOAD]);r.data=this._guide.internal.afdata;var v=this._guide.runtime.guideContext.schemaType;v||(v="xmlschema");r.contentType=v}catch(w){guideBridge._guide.logger().log("Error while parsing AF Success Payload: "+w)}guideBridge._guide.executeExpression("submitSuccess",r)}},doAjaxSubmitError:function(m,r){var u=new l;u.data=m;u.completed=!1;u.addMessage(2,"Error in Async Submit",
"");guidelib.util.GuideUtil&&guidelib.util.GuideUtil.showGuideLoading(!1);if(d.isFunction(r.error))r.error.call(r.context,u);else{r={};try{r=JSON.parse(m.responseText)}catch(v){guideBridge._guide.logger().log("Error while parsing errorPayload."+v)}guideBridge._guide.executeExpression("submitError",r)}},handleUpload:function(){self=this.self;this.submitData._guideAttachments=this.attachments.toString();d.each(this.attachments,function(m){this.submitData["_guideFileAttachment."+m]=this.submitData.fileUrl+
"/"+m},this);delete this.submitData.fileUrl;self.doAjaxSubmit(this.actionUrl,this.submitData,this.options)},_handleSubmitError:function(m){switch(Number(m.status)){case 502:alert(guidelib.util.GuideUtil.getLocalizedMessage("AF",guidelib.i18n.LogMessages["AEM-AF-901-003"]));break;default:alert(guidelib.util.GuideUtil.getLocalizedMessage("AF",guidelib.i18n.LogMessages["AEM-AF-901-004"]))}guidelib.util.GuideUtil&&guidelib.util.GuideUtil.showGuideLoading(!1).removeAllMessages()},updateSubmitData:function(m,
r,u){var v=0,w=[],x;0===u.length&&0<m.length&&!guideBridge._disablePreview()?(d.each(m,function(A,y){var D=window.guideBridge._resolveId(A);if(A=D.fileAttachment.value)A=A.split("\n"),d.each(A,function(E,z){if(x=D.name+"/"+E.substring(E.lastIndexOf("/")+1))w[v++]=x,r["_guideFileAttachment."+x]=E},this)},this),r._guideAttachments=w):0<u.length&&(d.each(u,function(A,y){x=guideBridge._getRelativeFilePath(A);w[v++]=x;r["_guideFileAttachment."+x]=A},this),r._guideAttachments=w)},_collectFileUrls:function(m){var r=
[];d.each(this.attachments,function(u){d.each(u.split("\n"),function(v){d.isString(v)&&1<v.match(/\//g).length?r.push(v):r.push(this.fileUrl+"/"+v)},this)},this);m={fileUrlList:r,fileUploadModelsList:this.fileAttachmentsList,lazyAttachmentMap:guideBridge._guide.internal.liveDataUtils._getLazyAttachmentMap()};guidelib.util.GuideUtil._updateFileModelsAndLazyMap(m);(m=this.options.ajaxSubmitObject)&&m.ajaxSubmitDataHandler?(m.ajaxSubmitDataHandler.call(this.options.context,m.fileAttachmentsList,m.submitData,
r),window.guideBridge.doAjaxSubmit(m.actionUrl,m.submitData,this.options)):this.options.success&&(guideBridge._createGuideStateAndLiveXml(this.options),this.options.success.call(this.options.context,this.options.obj))},_fileUploadFailed:function(m){f.proxy(guideBridge._handleSubmitError({status:"500"}),guideBridge)},_getFormName:function(m){var r="";m&&(r=m.indexOf("/jcr:content/guideContainer"),m=m.substring(0,r),r=m.substring(m.lastIndexOf("/")+1));return r},_getUUIDForAjaxSubmit:function(){var m=
Math.floor(1E4*Math.random()+1),r=(new Date).getTime(),u=window.guideBridge.getGuidePath();this._formInstanceUUID=window.guideBridge._getFormName(u)+r+m;return p(this._formInstanceUUID)?this._formInstanceUUID:null},_getFormForSubmission:function(){var m=(this.userConfig.submitConfig||{}).form||f("\x3cform method\x3d'post' enctype\x3d'multipart/form-data'\x3e\x3c/form\x3e").appendTo(f("body"));return f(m)},_getThankYouPageFromConfig:function(){return(this.userConfig.submitConfig||{}).thankyouPage},
_prepareGuideValueMap:function(){var m={},r={};this.visit(function(u){if(!u.bindRef&&!r[u.somExpression])if(u instanceof guidelib.model.Field&&u.value)r[u.somExpression]=!0,m[u.getAttribute("name")]=u.value;else if(u instanceof guidelib.model.GuideCompositeField){var v=m[u.getAttribute("name")]={};d.each(u.items,function(w,x){r[w.somExpression]=!0;w.value&&(v[w.getAttribute("name")]=w.value)},this)}});return m},_showGuideLoading:function(m,r){var u=guidelib.util.GuideUtil;u&&(u.showGuideLoading(m),
void 0!==r?u.showMessages(r):u.removeAllMessages())},submit:function(m){function r(y){m&&m.error?m.error.call(m.context||this,y):f.proxy(guideBridge._handleSubmitError(y),guideBridge)}function u(y){var D=!1;m&&(D=m.success?!0:!1);m=m||{};m.success=m.success||(v.userConfig.submitConfig||{}).submitSuccessHandler;D=D||(v.userConfig.submitConfig||{useAjax:!1}).useAjax||guideBridge._guide.enableAsyncSubmission;var E={};if(this.isGuideLoaded()){var z=[];this.visit(function(L){"guideCaptcha"===L.className&&
z.push(L)});var B=z[0];B&&(B=window.guideBridge._getCaptchaData(B),E.captchaData=B)}var F=a(m,"guideState.data.guideState.guideContext.guidePath","")||window.guideBridge.getGuidePath(),C=this.userConfig.submitConfig?this.userConfig.submitConfig.aemFormComponentPath:"";B=window.guideBridge._getGuidePathUrl(".af."+(m.submissionSelector||"submit")+".jsp",F);E.guideContainerPath=F;E.aemFormComponentPath=C;E._asyncSubmit=D;E._charset_="UTF-8";F=A.customPropertyMap||{};C=["lastFocusItem"];for(var G in F)F.hasOwnProperty(G)&&
0>C.indexOf(G)&&(E[G]=F[G]);E.afSubmissionInfo=this._guide.runtime.guideContext.afSubmissionInfo||{};var H;G=[];F=0;C=y.hasOwnProperty("guideValue")?y.guideValue:d.isUndefined(m.guideValueMap)?window.guideBridge._prepareGuideValueMap():m.guideValueMap;y.hasOwnProperty("data")&&(H=y.data);y.hasOwnProperty("fileAttachmentsList");for(var I in C)C.hasOwnProperty(I)&&(E[I]=C[I]);H&&(E["jcr:data"]=H,E["jcr:data@TypeHint"]="Binary",v._guide.internal.afdata=H);d.isUndefined(m.fileAttachmentMap)?E.fileAttachmentMap=
JSON.stringify(guideBridge._getFileAttachmentMapForSubmit()):E.fileAttachmentMap=m.fileAttachmentMap;y={};y=m.guideState&&m.guideState.data.guideState.additionalSubmitInfo?m.guideState.data.guideState.additionalSubmitInfo:guideBridge._getAdditionalSubmitInfo();f.extend(!0,E,y);if(D&&!0===D)if(m.fileAttachmentMap){var J=JSON.parse(m.fileAttachmentMap);D=d.keys(J);for(y=0;y<D.length;y++)if(J[D[y]])for(H=J[D[y]].split("\n"),I=0;I<H.length;I++)C=guideBridge._getRelativeFilePath(H[I]),G[F++]=C,E["_guideFileAttachment."+
C]=H[I];E._guideAttachments=G;v.doAjaxSubmit(B,E,m)}else{J=[];var M=0;guideBridge.isGuideLoaded()&&(J=window.guideBridge._getFileAttachmentsList());d.each(J,function(L){L.fileAttachment.value&&M++});0<M?v.doAjaxSubmitWithFileAttachment(B,E,m,J):v.doAjaxSubmit(B,E,m)}else{var K=v._getFormForSubmission();K.attr("action",B);K.attr("data-name","afSubmissionForm");for(J in E)E.hasOwnProperty(J)&&(B=E[J],f("\x3cinput\x3e").attr("type","hidden").attr("name",J).val(d.isObject(B)?JSON.stringify(B):B).appendTo(K));
E=guideBridge._getFileNameFileDomMap();var P=[],O="";E&&E.fileDom&&(P=E.fileName,d.each(E.fileDom,function(L,N){L?(L.attr("name",P[N].split["\n"]).attr("class","hidden").appendTo(K),O+=P[N]+","):P[N]&&(L=guideBridge._getRelativeFilePath(P[N]),f("\x3cinput\x3e").attr("type","hidden").attr("name","_guideFileAttachment."+L).attr("value",P[N]).appendTo(K),O+=L+",")}));f("\x3cinput\x3e").attr("type","hidden").attr("name","_guideAttachments").attr("value",O).appendTo(K);K.submit()}}(h=window.guideBridge.getAutoSaveEnabledStatus())&&
window.guideBridge.setEnabledAutoSave(!1);var v=this,w=a(this._guide,"runtime.guideContext",{});if(a(m,"guideState",""))var x=m.guideState.data.guideState.guideContext;var A=x||w;f(".guideContainerFormSubmitButton").click();window.guideBridge._populateBindRefToSomMap();v._showGuideLoading(!0,guidelib.i18n.strings.validatingForm);setTimeout(function(){guideBridge.isGuideLoaded()&&guideBridge._guide.allLazyChildren&&0<guideBridge._guide.allLazyChildren.length&&v._guide.internal.liveDataUtils.updateLiveData();
var y=!1;try{y=v._performConditionalValidation(m)}catch(z){y=!1}finally{v._showGuideLoading(!0)}if(y){guidelib.util.GuideUtil&&(y=guidelib.i18n.strings.submittingForm,m&&"agreement"===m.submissionSelector&&(y=guidelib.i18n.strings.generatingSignAgreement),guidelib.util.GuideUtil.showMessages(y));guideBridge.isGuideLoaded()&&v._guide._triggerOnBridge&&v._guide._triggerOnBridge("submitStart","","","","");y=!0;m&&m.hasOwnProperty("excludeFormState")&&(y=m.excludeFormState);try{var D=a(m,"twoStepSubmission",
!0);if(v._guide.xdpRef||!guideBridge.isGuideLoaded()||D){var E=a(m,"guideState",null);v._submitInternal({guideState:E,success:function(){try{u.apply(v,arguments)}catch(z){v._handleInternalSubmitError(r,v,arguments)}},error:function(){v._handleInternalSubmitError(r,v,arguments)},async:!0,excludeFormState:y})}else v.getFormDataString({success:function(){try{u.apply(v,arguments)}catch(z){v._handleInternalSubmitError(r,v,arguments)}}})}catch(z){v._showGuideLoading(!1),console&&console.error&&console.error(z)}}else window.guideBridge.setEnabledAutoSave(h),
v._showGuideLoading(!1)},1)},_handleInternalSubmitError:function(m,r,u){try{m.apply(r,u)}catch(v){}finally{guideBridge._showGuideLoading(!1)}},_getFileAttachmentMapForSubmit:function(){for(var m={},r=window.guideBridge._getFileAttachmentsList(),u=0;u<r.length;u++){var v=r[u];if(!d.isUndefined(v.value)&&0<v.value.length){for(var w=v.value.split("\n"),x=0;x<w.length;x++)w[x]=v.name+"/"+w[x];m[v.somExpression]=w.join("\n")}}r=this._guide.internal.liveDataUtils._getLazyAttachmentMap();d.each(r,function(A,
y){A=A.value.split("\n");for(var D=0;D<A.length;D++)A[D]=guidelib.util.GuideUtil.guideSomToComponentName(y)+"/"+A[D];m[y]=A.join("\n")});return m},ERROR_CAUSED_BY:{CAPTCHA_VALIDATION:"CAPTCHA_VALIDATION",SERVER_SIDE_VALIDATION:"SERVER_SIDE_VALIDATION",FORM_SUBMISSION:"FORM_SUBMISSION",AGREEMENT_CREATION:"AGREEMENT_CREATION"},handleServerValidationError:function(m){var r=this;if(m&&(m=m.errors)&&0<m.length){var u;d.each(m,function(v,w){w=v.errorMessages?v.errorMessages.join("\n"):v.errorMessage;v=
v.somExpression?v.somExpression:r._guide._bindRefMap[v.bindRef];var x=r.resolveNode(v);x&&(u||(u=v),x.markAsInvalid(w))});u&&r.setFocus(u)}},_handleServerValidationError:function(m){var r=this;window.guideBridge.setEnabledAutoSave(h);if(m)if(m.errorCausedBy&&m.errorCausedBy===this.ERROR_CAUSED_BY.CAPTCHA_VALIDATION){m=m.errors;var u=m[0].somExpression;d.each(m,function(v,w){w=v.somExpression;v=v.errorMessage;r.setFocus(w);(w=r.resolveNode(w))&&w.showCaptchaError(v)});r.setFocus(u)}else m.errorCausedBy&&
m.errorCausedBy===this.ERROR_CAUSED_BY.FORM_SUBMISSION||m.errorCausedBy===this.ERROR_CAUSED_BY.AGREEMENT_CREATION?m.errors&&0<m.errors.length?window.guideBridge.handleServerValidationError(m):f.proxy(guideBridge._handleSubmitError({status:"500"}),guideBridge):window.guideBridge.handleServerValidationError(m)},_populateBindRefToSomMap:function(m){var r=function(v,w,x){var A;v.bindRef&&(x=v.repeatable?A=x?x+"/"+v.bindRef.split("/").slice(-1)[0]+"/"+v.index:v.bindRef+"/"+v.index:x?A=x+"/"+v.bindRef.split("/").slice(-1)[0]:
v.bindRef,w[x]=v.somExpression);v._children&&v._children.forEach(function(y){r(y,w,A)})},u;m&&m.parent&&m.parent.repeatable&&m.parent.bindRef&&(u=m.parent.bindRef+"/"+m.parent.index);m||(m=window.guideBridge._guide);window.guideBridge.isGuideLoaded()&&(window.guideBridge._guide._bindRefMap||(window.guideBridge._guide._bindRefMap={}),r(m,window.guideBridge._guide._bindRefMap,u))},SELECTOR_FORM_CONTAINER:"#guideContainerForm",THANK_YOU_OPTION:{PAGE:"page",MESSAGE:"message"},_defaultSubmitSuccessHandler:function(m){m&&
(m.thankYouOption===this.THANK_YOU_OPTION.MESSAGE?f(this.SELECTOR_FORM_CONTAINER).replaceWith("\x3cdiv class\x3d'tyMessage'\x3e"+m.thankYouContent+"\x3c/div\x3e"):m.thankYouOption===this.THANK_YOU_OPTION.PAGE&&(window.location.href=m.thankYouContent))},_getRelativeFilePath:function(m){m=m.split("/");return m[m.length-2]+"/"+m[m.length-1]},_performConditionalValidation:function(m){return a(m,"validate",!0)?guideBridge.validate(null,null,!0,!1):!0},loadAdaptiveForm:function(m){if(m&&m.path){var r=m.path.replace("/content/dam/formsanddocuments/",
"/content/forms/af/");f.ajax({url:r+"/jcr:content/guideContainer.html",type:"GET",data:{wcmmode:"disabled",dataRef:m.dataRef},async:!1,success:function(u){m.containerSelector&&f(m.containerSelector).html(u);var v=new l;v.data=u;v.completed=!0;m.success&&d.isFunction(m.success)&&m.success.call(m.context,v)},error:function(u){var v=new l;v.data=u;v.completed=!1;v.addMessage(2,"Error in getting HTML of Adaptive Form: "+m.path,"");m.error&&d.isFunction(m.error)&&m.error.call(m.context,v)}})}else"undefined"!==
typeof console&&console.log("Path of Adaptive Form not specified to loadAdaptiveForm API")},unloadAdaptiveForm:function(m){window.guidelib&&window.guidelib.intervals&&window.clearInterval(window.guidelib.intervals.intId);f(m).children().remove();f("body").find(".datePickerTarget").remove();f(window).off("guideModelInitialized");f(window).off("guideInitialized");f(window).off("guideInitializationError");f(window).off("load scroll resize");f(window).off("keydown.guides");f(".guideContainerWrapperNode").off("swiperight");
f(".guideContainerWrapperNode").off("swipeleft");f(document).off("click.guidetab.data-api");f(document).off("click.guideAddRemove.data-api");f(window).off("touchstart.datetimepicker mousedown.datetimepicker");window.guidelib&&(window.guidelib.runtime={guide:null,af:null,guideContext:null,_private:{},errorManager:null},window.guidelib.internal={liveModel:null,liveDataUtils:null,GuideDirtyMarkerAndVisitor:null});window.guideBridge&&(window.guideBridge._guide=null,window.guideBridge._guideView=null,
window.guideBridge._$target=null,window.guideBridge._guideDoc=null);window.xfalib&&(window.xfalib.ut=null);window.formBridge&&window.formBridge.destroyForm();window.jQuery&&(window.jQuery.fragments={});window.guidelib&&window.guidelib.model&&(window.guidelib.model.GuideNode.guideUtil=null);d.each(window.guidelib,function(r,u){window.guidelib[u]=void 0});f&&(f.xfaWidget=void 0,f.prototype.abstractWidget=void 0,f.prototype.adobeDateTimePicker=void 0,f.prototype.adobeFileAttachment=void 0,f.prototype.adobeFileUploader=
void 0,f.prototype.dateTimeEdit=void 0,f.prototype.dropDownList=void 0,f.prototype.defaultWidget=void 0,f.prototype.fileUpload=void 0,f.prototype.imageField=void 0,f.prototype.listBox=void 0,f.prototype.nwkListBox=void 0,f.prototype.numericInput=void 0,f.prototype.signatureField=void 0,f.prototype.ScribbleImageField=void 0,f.prototype.textField=void 0,f.prototype.xfaButton=void 0,f.prototype.XfaCheckBox=void 0)},_disableForm:function(){var m=guideBridge.resolveNode("guide[0].guide1[0].guideRootPanel[0]"),
r=guideBridge.resolveNode("guide[0].guide1[0].toolbar[0]");m.disableAllFields();r&&r.disableAllFields()},disableForm:function(){guideBridge._disableForm();guideBridge.on("elementLazyLoaded",guideBridge._disableForm)},_playGuideJson:function(m){this._guide.setGuideState(guidelib.model.GuideSchema.prototype.GuideStateConstants.GUIDE_STATE_MERGE_PROGRESS);if(this._isXfaGuide()&&m.guideState.xfaState&&m.guideState.xfaState.xfaDom){var r=this;window.formBridge.restoreFormState({formState:m.guideState.xfaState,
context:this,error:m.error||q,success:function(){r._playNonXfaJson(m)}})}else this._playNonXfaJson(m)},_playNonXfaJson:function(m){var r=a(m,"guideState.guideLiveData",null)||a(m,"guideState.guidePrefillXml",null),u=a(m,"guideState.xfaState.currentContext.data",null)||JSON.parse(a(m,"guideState.xfaState.xfaRenderContext","{}")).data,v=a(m,"guideState.guidePrefillJson",null);r||u?(this._guide.internal.liveDataUtils.initLiveData(r,u,d.isString(this._guide.xdpRef),d.isString(this._guide.xsdRef),this._guide.getAttribute("xsdRootElement")),
this._guide.internal.liveModel.prefillCrossFragFields(this._guide),this._guide.internal.liveDataUtils.dropXfaXml()):v?this._guide.internal.liveDataUtils.initLiveData(v,this._guide.runtime.guideContext):this._guide.internal.liveDataUtils.initLiveData(null,null,d.isString(this._guide.xdpRef),d.isString(this._guide.xsdRef),this._guide.getAttribute("xsdRootElement"));m.guideState.guideDom&&this._guide.playJson(m.guideState.guideDom);m.guideState.unboundDataMap&&m.guideState.unboundDataMap.data&&this.visit(function(w){if((w instanceof
guidelib.model.Field||w instanceof guidelib.model.GuideCompositeField)&&!w.getAttribute("bindRef")&&m.guideState.unboundDataMap.data[w.name]){var x=m.guideState.unboundDataMap.data[w.name];d.isObject(x)&&d.isEmpty(x)?w._setGuideValue(null):w._setGuideValue(x);"guideRadioButton"===w.className&&(w.prevOnItem=w.getSelectedIndex(w.jsonModel._value))}});this._guide.setGuideState(guidelib.model.GuideSchema.prototype.GuideStateConstants.GUIDE_STATE_MERGE_COMPLETE);this._guide.prepare();m.success&&m.success.call(this)},
_postExternalMessage:function(m){this.userConfig.postExternalMessageConfig&&d.isFunction(this.userConfig.postExternalMessageConfig.postExternalHandler)&&(0,this.userConfig.postExternalMessageConfig.postExternalHandler)(m)},_isXfaGuide:function(){return this._guide.xdpRef?!0:!1},_readRuntimeLocale:function(m){return this.customContextProperty("runtimeLocale",m)},_isValidXFAGuide:function(){return!d.isUndefined(this._guide.runtime.guideContext.xdpRef)},_isEditDesignMode:function(){return window.CQ&&
window.CQ.WCM&&(window.CQ.WCM.isEditMode()||window.CQ.WCM.isDesignMode())?!0:!1},_getUUID:function(){if(this._formInstanceUUID)return this._formInstanceUUID;this._formInstanceUUID=guideBridge._produceUUID();p(this._formInstanceUUID)||guideBridge._guide.logger().log("Could not create UUID storage");return this._formInstanceUUID},_produceUUID:function(){var m=f("div.guideContainerWrapperNode").data("tmproot"),r=Math.floor(1E4*Math.random()+1),u=(new Date).getTime();return m+"_"+u+r},on:function(m,r,
u){this._$target.on(m,r,u)},off:function(m,r,u){this._$target.off(m,r,u)},trigger:function(m,r){this._$target.trigger(m,r)},_disablePreview:function(){if(this._guide&&this._guide.runtime&&this._guide.runtime.guideContext)return this._guide.runtime.guideContext.disablePreview},_makeFileNameUnique:function(){if(this._guide&&this._guide.runtime&&this._guide.runtime.guideContext)return this._guide.runtime.guideContext.makeFileNameUnique},_getFileNameFileDomMap:function(){var m=this._getFileAttachmentsList();
return this._juiceOutNameAndFileDomMap(m)},_juiceOutNameAndFileDomMap:function(m){var r=[],u=[],v=0,w=[],x=[];d.each(m,function(D,E){E=D.fileAttachment.value;var z=D.value;if(E=guideBridge._makeFileNameUnique()?z:E){var B=E.split("\n");E=f.extend(!0,[],D.fileList);var F=0;d.each(E,function(C){var G=null;d.isString(C)?(x[v]=C,w[v++]=null,F++):(d.each(C[0].files,function(H){(H=B[F++])&&(G=G?G+("\n"+D.name+"/"+H):D.name+"/"+H)}),null!=G&&0<f(C).val().length&&(f(C).attr("name",G),x[v]=G,w[v++]=f(C)))},
this)}},this);m=this._guide.internal.liveDataUtils._getLazyAttachmentMap();var A=[],y=[];d.each(m,function(D,E){var z=D.fileList,B=D.value.split("\n"),F=0;d.each(z,function(C){if(d.isString(C))A.push(null),y.push(C),F++;else{var G=null;d.each(C[0].files,function(H){if(H=B[F++])H=guidelib.util.GuideUtil.guideSomToComponentName(E)+"/"+H,G=G?G+("\n"+H):H});A.push(C);y.push(G)}})});r=w.concat(A);u=x.concat(y);return{fileName:u,fileDom:r}},setValidationContext:function(m){var r=guidelib.util.ErrorConstants;
"number"===typeof r[m]&&(r=r[m],b<r&&(b=r,e=m))},unsetValidationContext:function(m){m===e&&(b=0,e="")},getValidationContext:function(){return e},enableSwipeGesture:function(m,r){$guideWrapperNode=f(".guideContainerWrapperNode");$guideWrapperNode.off("swipeleft",window.guideBridge._performItemDeepNavigationNext);$guideWrapperNode.off("swiperight",window.guideBridge._performItemDeepNavigationPrevious);if(m)$guideWrapperNode.on("swipeleft",window.guideBridge._performItemDeepNavigationNext);if(r)$guideWrapperNode.on("swiperight",
window.guideBridge._performItemDeepNavigationPrevious)},_performItemDeepNavigationNext:function(){window.guideBridge.setFocus({somExpression:null,focusOption:"nextItemDeep",runCompletionScript:!0,skipFieldFocus:!0})},_performItemDeepNavigationPrevious:function(){window.guideBridge.setFocus({somExpression:null,focusOption:"prevItemDeep",runCompletionScript:!0,skipFieldFocus:!0})},_updateFileListing:function(m){m=guideBridge._guideView.getView(m.somExpression);m._clearFileListing();guideBridge.visit(f.proxy(m._updateFileListing,
m))},registerPanelProvider:function(m){var r=new l;if(null==this.panelProvider)return this.panelProvider=r.data=m,r;r.addMessage(2,"registrationError: PanelProvider already registered","");return r}});window.guideBridge=new k;window.guideBridge._$target=f(window.guideBridge);try{var t=document.createEvent("CustomEvent");t.initCustomEvent("bridgeInitializeStart",!0,!0,{guideBridge:window.guideBridge});window.dispatchEvent(t)}catch(m){}if(!window.guideBridge.userConfig.postExternalMessageConfig&&window!==
window.parent)try{window.parent.document.getElementById(window.name),window.guideBridge.registerConfig("postExternalMessageConfig",{postExternalHandler:function(m){try{var r=document.createEvent("CustomEvent");r.initCustomEvent(m.name,!0,!0,m.data);window.parent.dispatchEvent(r)}catch(u){}}})}catch(m){}window.guideBridge._postExternalMessage({name:"bridgeInitializeStart",data:{guideBridge:window.guideBridge}})})($,_);
(function(f,d,g,a,b,c){var e=a.model.LiveDataUtils=c.ut.Class.extend({constants:{SKELETON_XML:'\x3cafData\x3e\x3cafUnboundData\x3e\x3cdata/\x3e\x3c/afUnboundData\x3e\x3cafBoundData\x3e\x3cdata xmlns:xfa\x3d"http://www.xfa.org/schema/xfa-data/1.0/"/\x3e\x3c/afBoundData\x3e\x3c/afData\x3e',SKELETON_JSON:'{"afData":{"afUnboundData":{"data":{}},"afBoundData":{"data":{}}}}',UNBOUND_SKELETON:"\x3cunBound\x3e\x3c/unBound\x3e",UNBOUND_JSON_SKELETON:'{"afUnboundData":{}}',INDEXED_XPATH_PAT:new RegExp(/\/[^\/]+\[\d+\]/),
INDEXED_XPATH_PAT_JSON:new RegExp(/\/[^\/]+\/\d+/),XFA_DATA_NODE_ATTR_NAME:"xfa:dataNode",XFA_DATA_NODE_ATTR_VALUE:"dataGroup",UNKNOWN_XSD_ROOT_ELEMENT:"?",AF_ROOT_TAG:"afData",BOUND_TAG:"afBoundData",UNBOUND_TAG:"afUnboundData",XFA_TAG:"xfa",DATA_TAG:"data",BOUND_DATA_XPATH:"afBoundData/data",UNBOUND_DATA_XPATH:"afUnboundData/data",AF_DRAFT_TAG:"afSubmissionInfo/afDraft"},initialize:function(){e._super.initialize.call(this);this._xfaDataRoot=this._unboundDataRoot=this._boundDataRoot=null;this._fetchingClientSideData=
!1;this.lazyAttachmentMap={};this.attachments=[]},_updateLazyAttachmentMap:function(l){d.each(l,function(k,h){this.lazyAttachmentMap[h]={};this.lazyAttachmentMap[h].fileList=k.split("\n");this.lazyAttachmentMap[h].value=k},this)},_updateLazyAttachmentMapFromModel:function(l){l.parent._selfOrAncestorIsLazyReference&&l.value&&l.fileList&&!this._fetchingClientSideData?this.lazyAttachmentMap[l.somExpression]={value:l.value,fileList:l.fileList,bindRef:l._getEffectiveBindRef(),fileNames:l._getFileAttachmentNames()}:
this.lazyAttachmentMap[l.somExpression]&&delete this.lazyAttachmentMap[l.somExpression]},_getAttachmentDataForModel:function(l){var k=l._getEffectiveBindRef();if(l.somExpression&&!d.isEmpty(this.lazyAttachmentMap))return k=this.lazyAttachmentMap[l.somExpression],delete this.lazyAttachmentMap[l.somExpression],k;if(k&&!d.isEmpty(this.attachments))return k=l._getCurrentFileAttachmentWrapper(this.attachments)},_getLazyAttachmentMap:function(){return this.lazyAttachmentMap},dropXfaXml:function(){this._xfaDataRoot=
null},destroy:function(){this._xfaDataRoot=this._unboundDataRoot=this._boundDataRoot=this._liveDataDoc=null},initLiveData:function(l,k,h,p,q,t){this.attachments=t},isLiveDataInitialized:function(){},getLiveDataStr:function(){},getLiveDataDoc:function(){return this._liveDataDoc},_isNonNaked:function(){},_getNameAndIndex:function(l){},isIndexedPath:function(l){},_createElements:function(l,k){},_createRepeatedElements:function(l,k){},_createChildElement:function(l,k){},_createAttributeNode:function(l,
k){},getContextNode:function(l,k,h,p){},addIndexToPath:function(l,k){},_getElement:function(l,k,h){},hasChildNodes:function(l){},removeChild:function(l,k,h){},insertNode:function(l,k,h){},_getDataContext:function(l,k,h){var p=l.bindRef;if(l._isXfaNode()){var q=this.constants.XFA_TAG;k=c.ut.XMLUtils.dataSom2xpath(l.dataSom)}else d.isEmpty(p)?(q=this.constants.UNBOUND_TAG,k=h+"/"+l.getAttribute("name").replace(/\s+/g,"")):(q=this.constants.BOUND_TAG,l=this.getMatchingXpathHierarchy(k,p),l.isCrossHierarchy?
k=p:d.isEmpty(l.suffixParts)||(k+="/"+l.suffixParts.join("/")));return{xmlSec:q,indexedXpath:k}},_cmpXpathParts:function(l,k){},getMatchingXpathHierarchy:function(l,k){var h=!1,p=[],q=this._sanitizedXpathParts(k);d.find(this._sanitizedXpathParts(l),function(t){if(this._cmpXpathParts(t,q[0]))p.push(t),q.shift();else return h=!0},this);return{prefixParts:p,suffixParts:q,isCrossHierarchy:h}},_getXpathContext:function(l){var k="",h="",p=[];for(l=l.parent;l instanceof a.model.GuidePanel;)l._preserveLazyValue()&&
p.unshift(l),l=l.parent;d.each(p,function(q){q=q._syncModelAndData(k,h);k=q.bound;h=q.unBound});return{bound:k,unBound:h}},_applyOnLiveData:function(l,k){d.isString(k)&&(k=g.resolveNode(k));if(k instanceof a.model.GuidePanel){var h=k._guide().internal.liveDataUtils._getXpathContext(k);k[l](h.bound,h.unBound)}else g._guide.rootPanel[l]("","")},updateLiveData:function(l,k){this._fetchingClientSideData=!d.isUndefined(k);this._applyOnLiveData("_updateLiveData",l);this._fetchingClientSideData=!1},playLiveData:function(l){this._applyOnLiveData("_playLiveData",
l)},getListOfDirtyPanels:function(l){return[]},addDataNodeInfo:function(l){},setDataValue:function(l,k,h,p){},setRichTextValue:function(l,k,h,p){this.setDataValue(l,k,h,p)},getDataValue:function(l,k){},_convertModelIndexToDataIndex:function(l){},getParentRef:function(l){},getParentDataNode:function(l,k,h){var p=this.getParentRef(l.indexedXpath);return d.isEmpty(p)?this.getContextNode("",l.xmlSec,!1):this.getContextNode(p,l.xmlSec,k,h)},insertSubmissionInfo:function(l){}})})($,_,window.guideBridge,
window.guidelib,window.formBridge,window.xfalib);
(function(f,d,g,a,b,c){var e=c.ut.XfaUtil.prototype.getOrElse,l=a.model.LiveJsonUtils=a.model.LiveDataUtils.extend({initialize:function(){l._super.initialize.call(this);this._liveDataDoc=null},initLiveData:function(k,h){l._super.initLiveData.apply(this,arguments);k=k||e(h,"guidePrefillJson",null);if(d.isString(k)&&0<k.length){var p=JSON.parse(k);this._isNonNaked(p)?(this._liveDataDoc=p,this._boundDataRoot=this._getElement(this._liveDataDoc.afData,this.constants.BOUND_DATA_XPATH),this._unboundDataRoot=
this._getElement(this._liveDataDoc.afData,this.constants.UNBOUND_DATA_XPATH)):(this._boundDataRoot=p,this._unboundDataRoot=JSON.parse(this.constants.UNBOUND_JSON_SKELETON)[this.constants.UNBOUND_TAG],this._liveDataDoc=p)}else this._liveDataDoc=JSON.parse(this.constants.SKELETON_JSON),this._boundDataRoot=this._getElement(this._liveDataDoc.afData,this.constants.BOUND_DATA_XPATH),this._unboundDataRoot=this._getElement(this._liveDataDoc.afData,this.constants.UNBOUND_DATA_XPATH);null==this._boundDataRoot&&
this._isNonNaked(p)&&(this._liveDataDoc.afData.afBoundData=this._liveDataDoc.afData.afBoundData||{},this._liveDataDoc.afData.afBoundData.data=this._liveDataDoc.afData.afBoundData.data||{},this._boundDataRoot=this._liveDataDoc.afData.afBoundData.data)},_getElement:function(k,h,p){if(!(k instanceof Object))return null;if(d.isEmpty(h)||!d.isString(h))return k;p=p||{};p=p.index;h=h.split("/").join(".");d.isUndefined(p)||d.isNull(p)||(h=h+"."+p);return e(k,h,null)},_isNonNaked:function(k){return(k=k||
this.getLiveDataDoc())?k.hasOwnProperty("afData"):!1},isLiveDataInitialized:function(){return this.getLiveDataDoc()instanceof Object},getLiveDataStr:function(){return this.isLiveDataInitialized()?JSON.stringify(this.getLiveDataDoc()):""},_sanitizedXpathParts:function(k){k=(k||"").replace(/^\//,"").replace(/\s+/g,"");k=this._splitForIndex(k);return d.filter(k,function(h){return null!==this._getNameAndIndex(h)},this)},_splitForIndex:function(k){var h=[];k=k.split("/");for(var p=0;p<k.length;p++){var q=
k[p];p+1<k.length&&!isNaN(k[p+1])&&!d.isEmpty(k[p+1])&&(q=q+"/"+k[p+1],p+=1);h.push(q)}return h},_getNameAndIndex:function(k){return k&&(k=k.match(/^([^\s\/]+)(?:\/(\d+))?$/),null!==k)?{name:k[1],index:k[2]?parseInt(k[2]):-1}:null},_cmpXpathParts:function(k,h){return k&&h?(k=this._getNameAndIndex(k),h=this._getNameAndIndex(h),!d.isEmpty(k&&h)&&k.name===h.name&&(-1===h.index||k.index===h.index)):!1},getContextNode:function(k,h,p,q){var t="";k=this._sanitizedXpathParts(k);if(h==this.constants.BOUND_TAG){var m=
this._boundDataRoot;this._isNonNaked(this._liveDataDoc)&&(t="afData/"+this.constants.BOUND_DATA_XPATH+"/")}else h===this.constants.UNBOUND_TAG&&(m=this._unboundDataRoot,this._isNonNaked(this._liveDataDoc)&&(t="afData/"+this.constants.UNBOUND_DATA_XPATH+"/"));if(d.isEmpty(k))h=m;else{h=t+k.join("/");if(""==h&&!this._isNonNaked(this._liveDataDoc))return m;h=this._getElement(this._liveDataDoc,h);!h&&p&&(h=this._createElements(m,k,q))}return h},_createElements:function(k,h,p){return k instanceof Object?
d.isEmpty(h)?k:k=this._createRepeatedElements(k,h,p):null},_createRepeatedElements:function(k,h,p){var q=k,t=this._getNameAndIndex(h[0]),m=t.name;t=t.index||0;var r=1==h.length;var u=k[m];if(-1===t){if(q=null==u?this._createChildElement(k,m,r,p):u,r)return q}else if(null!=u)if(r=u.length,r<t+1)for(u=r;u<t+1;++u)q={},k[m].push(q);else q=u[t];else for(k[m]=[],u=0;u<t+1;++u)q={},k[m].push(q);return this._createElements(q,h.slice(1),p)},_createChildElement:function(k,h,p,q){if(k instanceof Object)return k[h]=
p?q:{},k[h]},isIndexedPath:function(k){return null!==(k||"").match(this.constants.INDEXED_XPATH_PAT_JSON)},setDataValue:function(k,h,p,q){var t=k.lastIndexOf("/"),m=k.substring(0,t);k=k.substring(t+1);h=this.getContextNode(m,h,p,{});h instanceof Object&&(p||h.hasOwnProperty(k))&&(h[k]=q)},getDataValue:function(k,h){var p=k.lastIndexOf("/"),q=k.substring(0,p);k=k.substring(p+1);h=this.getContextNode(q,h,!1);return h instanceof Object?void 0===h[k]?null:h[k]:null},getRichTextValue:function(k,h){return this.getDataValue(k,
h)},addIndexToPath:function(k,h){null===k.match(/\/\d+$/)?k+="/"+h:this.logger().debug("AF","Tried to add index to already indexed JSON path :"+k);return k},hasChildNodes:function(k){return!d.isEmpty(k)},removeChild:function(k,h,p){k[h].splice(p,1)},insertNode:function(k,h,p){null==k[h]&&(k[h]=[]);for(var q=0;q<p;q++)null==k[h][q]&&(k[h][q]={});k[h].splice(p,0,{});return k[h][p]},getDataInstances:function(k,h){return this.getContextNode(k.indexedXpath,k.xmlSec)},_convertModelIndexToDataIndex:function(k){return 0>
k?0:k},getParentRef:function(k){return k.replace(/\/[^\/]+(?:\/\d+)?$/,"")},insertSubmissionInfo:function(k,h){if(this._isNonNaked()){var p=h,q=this,t,m;null==p&&(p=this._liveDataDoc.afData.afSubmissionInfo);null==p&&null==this._liveDataDoc.afData.afSubmissionInfo&&(p={},this._liveDataDoc.afData.afSubmissionInfo=p);d.each(k,function(r,u){r instanceof Array?(t=[],d.each(r,function(v,w){"string"===typeof v&&t.push(v)}),p[u]=t.join(",")):"object"===typeof r&&null!=r?(m=p[u],null==m&&(m={},p[u]=m),q.insertSubmissionInfo(r,
m)):p[u]=r})}}})})($,_,window.guideBridge,window.guidelib,window.formBridge,window.xfalib);
(function(f,d,g,a,b,c){var e,l=a.model.LiveXmlUtils=a.model.LiveDataUtils.extend({initialize:function(){l._super.initialize.call(this);d.isUndefined(document.evaluate)&&wgxpath.install();this._liveDataDoc=null},initLiveData:function(k,h,p,q,t){l._super.initLiveData.apply(this,arguments);p=p||!1;q=q||!1;e=!(p||q);this.xsdRootElement=t;this._liveDataDoc=f.parseXML(this.constants.SKELETON_XML);this._boundDataRoot=this._getElement(this._liveDataDoc.documentElement,this.constants.BOUND_DATA_XPATH);this._unboundDataRoot=
this._getElement(this._liveDataDoc.documentElement,this.constants.UNBOUND_DATA_XPATH);if(d.isString(k)&&0<k.length){var m=f.parseXML(k);if(this._isNonNaked(m)){if(!p){var r=this._getElement(m.documentElement,this.constants.BOUND_DATA_XPATH);null==r&&(r=this._getElement(m.documentElement,this.constants.BOUND_TAG+"/"+g._guide.jsonModel.xsdRootElement));r&&(r=this._liveDataDoc.importNode(r,!0),this._boundDataRoot.parentNode.replaceChild(r,this._boundDataRoot),this._boundDataRoot=r)}if(m=this._getElement(m.documentElement,
this.constants.UNBOUND_DATA_XPATH))r=this._liveDataDoc.importNode(m,!0),this._unboundDataRoot.parentNode.replaceChild(r,this._unboundDataRoot),this._unboundDataRoot=r}else e?(this._unboundDataRoot=m.documentElement,this._boundDataRoot=null):(q&&(this._boundDataRoot=m.documentElement),this._unboundDataRoot=f.parseXML(this.constants.UNBOUND_SKELETON).documentElement),this._liveDataDoc=m}p&&(d.isString(h)&&0<h.length&&(this._xfaDataRoot=c.ut.XMLUtils.getXFARootFormElementFromXML(f.parseXML(h))),this._boundDataRoot.parentNode.parentNode.removeChild(this._boundDataRoot.parentNode),
this._boundDataRoot=null)},isLiveDataInitialized:function(){return this.getLiveDataDoc()instanceof Node},getLiveDataStr:function(){return this.isLiveDataInitialized()?(new XMLSerializer).serializeToString(this.getLiveDataDoc()):""},_ignoreXpathRoot:function(k){return this.xsdRootElement===this.constants.UNKNOWN_XSD_ROOT_ELEMENT||this.xsdRootElement===k},getContextNode:function(k,h,p){var q,t=this._sanitizedXpathParts(k);if(h===this.constants.BOUND_TAG)var m=this._boundDataRoot;else h===this.constants.UNBOUND_TAG?
m=this._unboundDataRoot:h===this.constants.XFA_TAG&&(m=this._xfaDataRoot);if(d.isEmpty(t))d.isEmpty(k)&&(q=m);else{if(h===this.constants.BOUND_TAG&&this._ignoreXpathRoot(t[0])&&(t=t.slice(1),0===t.length))return m;q=this._getElement(m,t.join("/"));!q&&p&&(q=this._createElements(m,t))}return q},addIndexToPath:function(k,h){null===k.match(/\[\d+\]$/)?k+="["+(h+1)+"]":this.logger().debug("AF","Tried to add index to already indexed xpath :"+k);return k},getDataInstances:function(k,h){k=this.getContextNode(k.indexedXpath,
k.xmlSec);return null!=k?d.filter(k.parentNode.childNodes,function(p){return p instanceof Element&&p.nodeName===h},this):null},_findLastDataNode:function(k,h){var p=c.ut.XMLUtils;k=p.evaluateXPath(h,k,null,null,null);p=p.iteratorToArray(k);return 0<p.length?p[p.length-1]:null},hasChildNodes:function(k){return k.hasChildNodes()},removeChild:function(k,h,p){(h=this._getElement(k,h+"["+(p+1)+"]",null))&&k.removeChild(h)},insertNode:function(k,h,p){var q=this._getElement(k,h+"["+(p+1)+"]",null),t=k.ownerDocument.createElement(h);
if(q)k.insertBefore(t,q);else if((q=this._findLastDataNode(k,h))&&q.nextSibling)k.insertBefore(t,q.nextSibling);else if(q&&!q.nextSibling)k.appendChild(t);else for(q=0;q<=p;q++){var m=k.ownerDocument.createElement(h);k.appendChild(m)}return t},_getNameAndIndex:function(k){return k&&(k=k.match(/^([^[\s\/]+)(?:\[(\d+)\])?$/),null!==k)?{name:k[1],index:k[2]?parseInt(k[2]):0}:null},_cmpXpathParts:function(k,h){return k&&h?(k=this._getNameAndIndex(k),h=this._getNameAndIndex(h),!d.isEmpty(k&&h)&&k.name===
h.name&&(0===h.index||k.index===h.index)):!1},_sanitizedXpathParts:function(k){k=(k||"").replace(/^\//,"").replace(/\s+/g,"").split("/");"text()"===d.last(k)&&k.splice(-1,1);return d.filter(k,function(h){return null!==this._getNameAndIndex(h)},this)},isIndexedPath:function(k){return null!==(k||"").match(this.constants.INDEXED_XPATH_PAT)},_createElements:function(k,h){if(!(k instanceof Node))return null;if(d.isEmpty(h))return k;"@"===h[0][0]?(h=h[0].slice(1),k=this._createAttributeNode(k,h)):k=this._createRepeatedElements(k,
h);return k},_createRepeatedElements:function(k,h){var p=k,q=this._getNameAndIndex(h[0]),t=q.name;q=q.index||1;var m=d.filter(k.childNodes,function(r){return r instanceof Element&&r.nodeName===t});if(m.length<q)for(m=m.length;m<q;++m)p=this._createChildElement(k,t);else p=m[q-1];return this._createElements(p,h.slice(1))},_createChildElement:function(k,h){if(k instanceof Element)return h=k.ownerDocument.createElement(h),k.appendChild(h),h},_createAttributeNode:function(k,h){if(k instanceof Element)return h=
k.ownerDocument.createAttribute(h),k.setAttributeNode(h),h},_getElement:function(k,h,p){if(!(k instanceof Node))return null;if(d.isEmpty(h)||!d.isString(h))return k;p=p||{};var q=p.nsResolver,t=p.index,m=h.split("/@");p=!1;if(2<m.length)return c.ut.XfaUtil.prototype.getLogger().error("BindRefs must be Xpaths ending in atmost one attribute"),null;if(2===m.length){h=m[0];var r=m[1];p=!0}d.isUndefined(t)||d.isNull(t)||(h=h+"["+t+"]");k=c.ut.XMLUtils.evaluateXPath(h,k,q,XPathResult.FIRST_ORDERED_NODE_TYPE,
null);if(k.resultType===XPathResult.FIRST_ORDERED_NODE_TYPE&&(k=k.singleNodeValue,k instanceof Node&&(!p||k.hasAttribute(r)&&(k=k.getAttributeNode(r),k instanceof Node))))return k},_isNonNaked:function(k){return(k=k||this.getLiveDataDoc())?k.documentElement.tagName===this.constants.AF_ROOT_TAG:!1},getListOfDirtyPanels:function(k){if(null==k||""===k)return[];k=f.parseXML(k);k=this._getElement(k.documentElement,this.constants.AF_DRAFT_TAG);if(d.isUndefined(k)||0===k.childNodes.length)return[];k=k.firstChild.textContent.replace(/"/g,
"");var h=[];k&&(h=k.split(","));return h},setRichTextValue:function(k,h,p,q){k=this.getContextNode(k,h,p);k instanceof Node&&(q=f.parseXML(q),k.textContent="",k.appendChild(q.documentElement))},setDataValue:function(k,h,p,q){k=this.getContextNode(k,h,p);k instanceof Node&&(k.textContent=q)},getDataValue:function(k,h){k=this.getContextNode(k,h,!1);if(k instanceof Node)return k.textContent||null},getRichTextValue:function(k,h){k=this.getContextNode(k,h,!1);if(k instanceof Node)return k.innerHTML.trim()},
_convertModelIndexToDataIndex:function(k){return 0>k?1:k+1},getParentRef:function(k){return k.substring(0,k.lastIndexOf("/"))},insertSubmissionInfo:function(k,h){if(this._isNonNaked()){var p=c.ut.XMLUtils,q=void 0===h?p.findOrCreateElement("afSubmissionInfo",this._liveDataDoc.documentElement):h,t=this;d.each(k,function(m,r){if(m instanceof Array){var u=[],v=!0;d.each(m,function(x,A){"string"===typeof x?u.push(x):x instanceof Object&&null!=x&&(v=!1,A=q.ownerDocument.createElement(r),q.appendChild(A),
t.insertSubmissionInfo(x,A))});if(v){var w=p.findOrCreateElement(r,q);w.textContent=u.join(",");q.appendChild(w)}}else"object"===typeof m&&null!=m?(w=p.findOrCreateElement(r,q),t.insertSubmissionInfo(m,w)):(w=p.findOrCreateElement(r,q),w.textContent=m),q.appendChild(w)})}}})})($,_,window.guideBridge,window.guidelib,window.formBridge,window.xfalib);
(function(f,d,g,a){var b=a.model.LiveModel=xfalib.ut.Class.extend({initialize:function(){b._super.initialize.call(this);this._crossFragmentFields={};this._dataNodes={}},destroy:function(){this._crossFragmentFields={};this._dataNodes={}},getCrossFragmentFields:function(){return this._crossFragmentFields},add:function(c,e){if(c){var l=this._dataNodes[c]||new a.model.DataNode;l.addField(e);this._dataNodes[c]=l}},isLive:function(c){return d.isString(c)&&d.has(this._dataNodes,c)},remove:function(c,e){this.isLive(c)&&
this._dataNodes[c].removeField(e)},getAllFieldModels:function(c){return d.flatten(d.map(c,function(e){var l;(e=this._dataNodes[e])&&(l=e.getFieldModels());return l},this))},getAllAbstractFieldModels:function(c){return d.flatten(d.map(c,function(e){return this._dataNodes[e].getAbstractFieldModels()},this))},resetData:function(){d.each(this._crossFragmentFields,function(c){d.each(c,function(e){e.resetData()})})},createDataNodes:function(c){d.each(c,function(e){this.add(e)},this)},createCrossFragFields:function(c,
e){d.each(c,function(l){var k=l.bindRef||l.name,h=l._value||null;h=new a.model.AbstractField({name:l.name,className:l.guideNodeClass,bindRef:l.bindRef,dataSom:l.dataSom,afDataSom:l.afDataSom,jsonModel:{_value:h,"{default}":h},_guideContainer:e});d.isEmpty(this._crossFragmentFields[l.name])&&(this._crossFragmentFields[l.name]={});this._crossFragmentFields[l.name][k]=h;this.add(k,h)},this)},prefillCrossFragFields:function(c){var e=c.internal.liveDataUtils;e.isLiveDataInitialized()&&d.each(this._crossFragmentFields,
function(l,k){d.each(l,function(h,p){p=e._getDataContext(h,"","");h.value=e.getDataValue(p.indexedXpath,p.xmlSec)},this)},this)}})})($,_,window.guideBridge,window.guidelib);
(function(f,d,g){var a=g.model.FormData=xfalib.ut.Class.extend({initialize:function(){a._super.initialize.call(this)},toJsObject:function(){return{data:this.data,contentType:this.contentType,attachments:this.attachments}},toHTMLFormData:function(){var b=new FormData;this.contentType&&b.append("contentType",this.contentType);b.append("data",this.data);for(var c=0;c<this.attachments.length;c++){var e=this.attachments[c];if(e.isFile())b.append("fileAttachments",e.data,e.name);else{var l=new Blob([JSON.stringify({data:e.data,
name:e.name,contentType:e.contentType})],{type:"application/json"});b.append("fileAttachments",l)}b.append("fileAttachmentBindRefs",e.bindRef)}return b}});a.defineProps({data:{get:function(){return this.options.data}},attachments:{get:function(){return this.options.attachments}},contentType:{get:function(){return this.options.contentType}}})})($,_,window.guidelib);
(function(f,d,g){var a=g.model.FileAttachmentWrapper=xfalib.ut.Class.extend({initialize:function(){a._super.initialize.call(this)},toJsObject:function(){return{name:this.name,contentType:this.contentType,bindRef:this.bindRef,data:this.data}},isFile:function(){return this.data instanceof File},dataURLtoBlob:function(){var b=this.data.split(","),c=b[0].match(/:(.*?);/)[1];b=atob(b[1]);for(var e=b.length,l=new Uint8Array(e);e--;)l[e]=b.charCodeAt(e);return new Blob([l],{type:c})}});a.defineProps({name:{get:function(){return this.options.name}},
contentType:{get:function(){return this.options.contentType}},bindRef:{get:function(){return this.options.bindRef}},formElementName:{get:function(){return this.options.formElementName||this.options.bindRef}},data:{get:function(){return this.options.data}}})})($,_,window.guidelib);
(function(f,d){var g=d.event.GuideModelEvent=xfalib.ut.Class.extend({msClassName:"guideModelEvent"});g.defineProps({prevText:{get:function(){return this.jsonModel.prevText}},newText:{get:function(){return this.jsonModel.newText}},name:{get:function(){return this.jsonModel.name}},keyDown:{get:function(){return this.jsonModel.keyDown}},modifier:{get:function(){return this.jsonModel.modifier}},target:{get:function(){return this.jsonModel.target}},shift:{get:function(){return this.jsonModel.shift}},change:{get:function(){return this.jsonModel.change},
set:function(a){this.jsonModel.change=a}},_property:{get:function(){return this.jsonModel._property}}});g.createEvent=function(a,b,c,e,l){return new g({jsonModel:{name:a,target:b,_property:c,prevText:e,newText:l}})};g.MODEL_REFRESH="guide.modelRefresh";g.CHILD_CHANGED="guide.childChanged";g.MULTIPLE_CHILD_ADDED="guide.multipleChildAdded";g.MODEL_CHANGED="guide.modelChanged";g.VALUE_CHANGED="guide.valueChanged";g.ERROR_CHANGED="guide.errorChanged";g.ERROR_RESET="guide.errorReset";g.VISIBLE_CHANGED=
"guide.visibleChanged";g.ENABLED_CHANGED="guide.enabledChanged";g.ITEMS_CHANGED="guide.itemsChanged";g.OBJECT_DESTROYED="guide.objectDestroyed";g.NAVIGATE_SECTION="guide.navigateSection";g.LAZY_LOADED="guide.lazyLoaded"})(_,guidelib);
(function(f,d,g){g.view.GuideViewRegistry=xfalib.ut.Class.extend({_findWidget:function(a,b,c){var e=d.find(a,function(l,k){return b===k});void 0===e&&(e=d.find(a,function(l,k){return c===k}));return e},_findWidgetNameFromCSS:function(a){var b=null;d.isString(a)&&d.find(a.split(" "),function(c,e){return(c=c.match(/^widget_([\w\W]+)$/))&&2===c.length?(b=c[1],!0):!1});return b},createView:function(a,b){a=f(a);b={element:a.get(0),widgetName:a.data("guideViewWidget"),parentView:b};a=a.data("guideViewBind");
if(a=window.guideBridge._resolveId(a)){b.model=a;var c=a.className;c=c.charAt(0).toUpperCase()+c.substr(1)+"View";c=g.view[c];var e=window.guideBridge.userConfig.widgetConfig;if(a instanceof g.model.Field||a instanceof g.model.GuideCompositeField)b.widgetName=this._findWidgetNameFromCSS(a.cssClassName)||this._findWidget(e,a.name,a.className);!c&&a instanceof g.model.GuideContainerNode&&(c=g.view.GuideContainerView);!c&&a instanceof g.model.Field&&(c=g.view.GuideFieldView);!c&&a instanceof g.model.GuidePanel&&
(c=g.view.GuidePanelView);!c&&a instanceof g.model.GuideItemsContainer&&(c=g.view.GuideItemsView);c||(c=g.view.GuideBaseView);return new c(b)}}})})($,_,guidelib);
(function(f,d,g){d.model.DataNode=g.ut.Class.extend({initialize:function(){this.linkedFields=[];this.isUpdateInProgress=!1},addField:function(a){f.isEmpty(a)||f.contains(this.linkedFields,a)||(this.linkedFields.push(a),a.on(d.event.GuideModelEvent.VALUE_CHANGED,this))},removeField:function(a){f.isEmpty(a)||(a.off(d.event.GuideModelEvent.VALUE_CHANGED,this),this.linkedFields=f.without(this.linkedFields,a))},getFieldModels:function(){return f.filter(this.linkedFields,function(a){return a instanceof
d.model.Field})},getAbstractFieldModels:function(){return f.filter(this.linkedFields,function(a){return a instanceof d.model.AbstractField})},handleEvent:function(a){switch(a.name){case d.event.GuideModelEvent.VALUE_CHANGED:f.contains(["guideButton","guideTextDraw","guideAdobeSignBlock"],a.target.className)||this.updateLinkedFieldsValue(a);break;default:a.target.logger().warn("AF","Unexpected Event type on Data Node",a)}},updateLinkedFieldsValue:function(a){if(!this.isUpdateInProgress){this.isUpdateInProgress=
!0;var b=a.target._getValue();try{f.each(this.linkedFields,function(c){c!==a.target&&(c.value=b)},this)}catch(c){a.target.logger().error("AF","Unable to set Linked Field value"+c)}finally{this.isUpdateInProgress=!1}}}})})(_,guidelib,xfalib);
(function(f,d){var g=d.view.GuideBaseView=xfalib.ut.Class.extend({guideUtil:d.util.GuideUtil,_triggerOnBridge:function(a,b,c,e,l){b=d.event.GuideModelEvent.createEvent(a,b,c,e,l);window.guideBridge.trigger(a,b)},initialize:function(){g._super.initialize.call(this);this.$element=f(this.options.element);this.id=this.$element.attr("id");this._model=this.options.model;this.parentView=this.options.parentView;this.$element.data("guideView",this);this._$itemNav=this._$item=null;if(this._model&&null!=this._model)this._model.on(d.event.GuideModelEvent.MODEL_CHANGED,
this.handleModelChanged,this);this._syncPending=!0;this._visibleHelpElement="none";this._polyfills()},_polyfills:function(){for(var a=[function(){Object.entries||(Object.entries=function(c){for(var e=Object.keys(c),l=e.length,k=Array(l);l--;)k[l]=[e[l],c[e[l]]];return k})}],b=0;b<a.length;++b)a[b]()},postInitialize:function(){},_unloadView:function(){this._model.off(d.event.GuideModelEvent.MODEL_CHANGED,this.handleModelChanged,this);this.parentView=this._$itemNav=this._$item=this._model=this.$widget=
this.$element=null},handleVisibleChanged:function(a){a.newText?(this.$item.removeClass("hidden"),this.$itemNav.removeClass("hidden")):(this.$item.addClass("hidden"),this.$itemNav.addClass("hidden"),this.parentView.currentActiveItemView==this&&this.parentView.setActive("nextItem"))},handleModelChanged:function(a){switch(a._property){case "viewVisited":a.newText?(this.$item.addClass("stepped"),this.$itemNav.addClass("stepped")):(this.$item.removeClass("stepped"),this.$itemNav.removeClass("stepped"));
break;case "visible":this.handleVisibleChanged(a)}},setActive:function(a,b,c){!b||"guideNode"!==this._model.className&&!this._model.forceElementFocusChange||null===this.$element||"function"!==typeof this.$element.focus||this._guideView.skipFieldFocus||(this.$element.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0},focusable:function(){return this._model.visible},_find:function(a){return this._guideView.$element.find(a)},_syncGuideNodeToHtml:function(a){this._syncPending=
!1;this.handleVisibleChanged(d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.MODEL_CHANGED,this,"visible",this._model.visible,this._model.visible))},_updateIds:function(a,b,c){if(b!=c){var e="#"+b,l=this.guideUtil.modelElSelector(b),k='[id^\x3d"'+b+'"]',h='[data-guide-longDescription^\x3d"'+b+'"]',p='label[for^\x3d"'+b+'"]',q="[data-guide-id^\x3d'"+b+"']";e=a.find(e).addBack(e);var t={id:k,"for":p,"data-guide-longDescription":h,"data-guide-id":q};void 0!==e.attr(d.util.GuideUtil.DATA_GUIDE_ITEM_CONTAINER)&&
e.attr(d.util.GuideUtil.DATA_GUIDE_ITEM_CONTAINER,c+d.util.GuideUtil.GUIDE_ITEM_CONTAINER_SUFFIX);void 0!==e.attr(d.util.GuideUtil.DATA_GUIDE_ITEM)&&e.attr(d.util.GuideUtil.DATA_GUIDE_ITEM,c+d.util.GuideUtil.GUIDE_ITEM_SUFFIX);e.attr("id",c);a.find(l).addBack(l).attr(this.guideUtil.GUIDE_VIEW_BIND_ATTR,c);_.each(_.keys(t),function(m,r){r=t[m];a.find(r).addBack(r).each(function(){var u=f(this),v=u.attr(m);v=c+v.substring(b.length);u.attr(m,v)})},this)}},getSiblingItemView:function(a){return this.parentView instanceof
d.view.GuidePanelView&&(a=this.parentView._model.navigationContext.getItemForNav(a))?this.parentView.getQualifiedNamedView(a._escapeQualifiedName()):null}});g.defineProps({_guideView:{get:function(){return window.guideBridge._guideView}},_guide:{get:function(){return window.guideBridge._guide}},$item:{get:function(){if(!this._$item||0==this._$item.length){var a=this.guideUtil.itemSelector(this._model.id,this._model);if((this._$item=this._find(a))&&0==this._$item.length)return this.$element}return this._$item}},
$itemNav:{get:function(){if(!this._$itemNav){var a=this.guideUtil.itemNavSelector(this._model.id);this._$itemNav=this._find(a)}return this._$itemNav}},visibleHelpElement:{get:function(){return this._visibleHelpElement},set:function(a){this._visibleHelpElement=a}},isItem:{get:function(){return this._model._isItem}},qualifiedName:{get:function(){return this._model._escapeQualifiedName()}}})})($,guidelib);
(function(f,d){var g=xfalib.ut.XfaUtil.prototype,a=d.view.GuideFieldView=d.view.GuideBaseView.extend({_defaultWidgetName:"defaultWidget",autofillFieldKeywordToName:{name:"name","given-name":"fname","additional-name":"mname","family-name":"lname",email:"email","street-address":"address","address-line1":"address","address-line2":"address","address-level1":"state","address-level2":"city","postal-code":"zip",country:"country",tel:"phone","cc-name":"ccname","cc-number":"cardnumber","cc-csc":"cvc","cc-exp-month":"ccmonth",
"cc-exp-year":"ccyear","cc-exp":"exp-date","cc-type":"card-type"},initialize:function(){a._super.initialize.call(this);this._initializeWidget();this._defineModelEvents();this._markMandatory();this._updateEmptyStatus();this.oldValue=null;if(this._guide.jsonModel.textReplacementMap)for(var b=Object.entries(this._guide.jsonModel.textReplacementMap),c=[],e=0;e<b.length;e++){c[b[e][1]]||(c[b[e][1]]=b[e][0]);for(var l=f('span[data-af-footnote-id\x3d"'+b[e][0]+'"]'),k=0;k<f(l).length;k++){var h=document.createElement("sup"),
p=document.createElement("a");p.setAttribute("href","#"+c[b[e][1]]+"_ftn");p.setAttribute("title",c[b[e][1]]);p.innerHTML=b[e][1];h.appendChild(p);f(f(l)[k]).html(h.outerHTML)}}},postInitialize:function(){this._syncGuideNodeToHtml(!0)},createWidgetOptions:function(){return{name:this._model.getAttribute("autocomplete")?this.autofillFieldKeywordToName[this._model.getAttribute("autofillFieldKeyword")]:this._model.id+"_jqName",value:this._model.value,displayValue:this._model.formattedValue,commitEvent:this.getCommitEvent(),
access:this._model.enabled?"open":"readOnly",screenReaderText:this._model._getScreenReaderText(),mandatory:this._model.mandatory}},getCommitEvent:function(){return xfalib.ut.XfaUtil.prototype.XFA_EXIT_EVENT},getWidgetName:function(){var b;if(this.$widget){var c=this.$widget.find("[data-af-widgetname]").addBack("[data-af-widgetname]");c&&0<c.length&&(b=c.attr("data-af-widgetname"))}b||this.logger().warn("AF","widget name is not specified for field "+this._model.somExpression+", falling back to other widget");
return b||this.options.widgetName||this._defaultWidgetName},_unloadView:function(){this._model&&(this._model.off(d.event.GuideModelEvent.VALUE_CHANGED,this.handleValueChanged,this),this._model.off(d.event.GuideModelEvent.ERROR_CHANGED,this.handleErrorChanged,this),this._model.off(d.event.GuideModelEvent.ERROR_RESET,this.handleErrorReset,this));this.jqwidget=null;a._super._unloadView.apply(this,arguments)},_initializeWidget:function(){this.$element.find("div.guideFieldWidget").length?this.$widget=
this.$element.find("div.guideFieldWidget"):this.$widget=null;if(this.$widget)f(this.$widget).on(this.getCommitEvent(),f.proxy(this.handleCommit,this)).on(g.XFA_CLICK_EVENT,f.proxy(this.handleClick,this)).on(g.XFA_EXIT_EVENT,f.proxy(this.handleFocusOut,this)).on(g.XFA_ENTER_EVENT,f.proxy(this.handleEnter,this))},_defineModelEvents:function(){this._model&&(this._model.on(d.event.GuideModelEvent.VALUE_CHANGED,this.handleValueChanged,this),this._model.on(d.event.GuideModelEvent.ERROR_CHANGED,this.handleErrorChanged,
this),this._model.on(d.event.GuideModelEvent.ERROR_RESET,this.handleErrorReset,this))},_syncGuideNodeToHtml:function(b){a._super._syncGuideNodeToHtml.apply(this,arguments);this._model&&(_.each({visible:this._model.visible,"jcr:title":this._model.title},function(e,l,k){this.handleModelChanged(d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.MODEL_CHANGED,this,l,e,e))},this),this.$element.attr("data-disabled",!this._model.enabled+""));if(this.$widget){var c=this.createWidgetOptions();this.jqwidget?
this.setWidgetOptions(c):this.createWidget(this.getWidgetName(),c)}this._model.forceErrorShow&&this._model._errorText&&this.handleErrorChanged({prevText:this._model.validationState,newText:this._model._errorText})},setWidgetOptions:function(b){this.jqwidget.option(b)},_markMandatory:function(b){this._model.mandatory&&this.$element?this.$element.attr("data-mandatory","true"):(this.$element.removeAttr("data-mandatory"),this._model._failedTest===this.guideUtil.MANDATORY_TEST&&this._model._guide().runtime.errorManager.unMarkError(this.$element,
this._model.somExpression));this.jqwidget&&this.setWidgetOptions({mandatory:b})},_updateEmptyStatus:function(b){b=b?b.newText:this._model.value;null==b||"string"===typeof b&&0==b.length?this.$element.removeClass("af-field-filled").addClass("af-field-empty"):this.$element.removeClass("af-field-empty").addClass("af-field-filled")},handleValueChanged:function(b){switch(b._property){case "value":this.jqwidget.option("value",b.prevText),this.jqwidget.option("displayValue",b.newText)}this._updateEmptyStatus(b)},
handleErrorChanged:function(b){var c=b.newText;!0===b.prevText?(this._model._guide().runtime.errorManager.unMarkError(this.$element,this._model.somExpression),this.$element.addClass("validation-success").removeClass("validation-failure"),this.updateWidgetOption("isValid",!0)):(this._model._guide().runtime.errorManager.markError(c,this.$element,this._model.somExpression,guideBridge.getValidationContext()),this.$element.addClass("validation-failure").removeClass("validation-success"),this.updateWidgetOption("isValid",
!1))},handleErrorReset:function(b){this._model._guide().runtime.errorManager.unMarkError(this.$element,this._model.somExpression);this.$element.removeClass("validation-failure").removeClass("validation-success");this.updateWidgetOption("isValid",void 0)},handleCommit:function(){this._model.enabled&&this.commitValue(this.jqwidget.option("value"))},handleClick:function(b){window.guideBridge.clickedOnWindow=!1},handleFocusOut:function(b){b=window.guideBridge;this.getCommitEvent()!==g.XFA_EXIT_EVENT&&
this._model.executeExpression("exit");b&&b.clickedOnWindow&&(this._guideView.currentFocusItemSom=null);b.clickedOnWindow=!1;"guideRadioButton"!==this._model.className&&"guideCheckBox"!==this._model.className&&"guideButton"!==this._model.className&&this._triggerOnBridge("elementFocusOut","","","","");this.oldValue!==this._model.value&&this._model._errorText&&this.handleErrorChanged({prevText:this._model.validationState,newText:this._model._errorText});this.$element.removeClass("guideActiveField")},
handleModelChanged:function(b){switch(b._property){case "enabled":var c=b.newText?"open":"readOnly";this.jqwidget&&this.jqwidget.option("access",c);this.$element.attr("data-disabled",!b.newText+"");break;case "mandatory":this._markMandatory(this._model.mandatory);break;case "validateExpMessage":c=b.jsonModel.newText;this._changeValidationMessage(c);break;case "jcr:title":c=b.jsonModel.newText;this._changeTitle(c);break;default:a._super.handleModelChanged.apply(this,arguments)}},_changeTitle:function(b){var c=
f("#"+this.id).children(".guideFieldLabel").children("label");c&&(b=xfalib.ut.XfaUtil.prototype.encodeScriptableTags(b),c.html(b))},_changeValidationMessage:function(b){f("#"+this.id).children(".guideFieldError").html(b)},commitValue:function(b){this._model.value=b;b=this._model._guide().version;b.isOn(b.Flags.RUN_VALUE_COMMMIT_ON_SCRIPT_CHANGE)||this._model.executeExpression("valueCommitScript");this.getCommitEvent()===g.XFA_CHANGE_EVENT?this._model.executeExpression("change"):this._model.executeExpression("exit")},
tempXfaFixes:function(){this.$element&&this.$element.find("input").css("position","relative");this.handleAccessibility()},handleAccessibility:function(){this._model.mandatory&&this.$widget.find("input,textarea,select,button").attr("aria-required",!0);this._model._getScreenReaderText()===this._model._getToolTip()&&(this.$element.find("input,textarea,select,button").removeAttr("aria-label"),this.$element.find("input,textarea,select,button").attr("aria-labelledby",this._model.id+"_guideFieldShortDescription"))},
_getWidgetInitialOptions:function(b){b=b.find("[data-af-widgetname]").addBack("[data-af-widgetname]");if(0<b.length){this.logger().info("AF","Getting widget options for "+this._model.somExpression);var c=b.data("af-widgetoptions")||{};_.each(b[0].attributes,function(e){var l=e.name.match(/data-af-widgetoption-([^-]+)$/);null!=l&&1<l.length&&(this.logger().info("AF","adding option "+l[1]+" with value  "),c[l[1]]=e.value)},this);return c}return{}},_newWidget:function(b,c,e){var l=null,k=b==this._defaultWidgetName;
try{e[b](c),l=e.data(b)||e.data("xfaWidget-"+b)}catch(h){this.logger().error("AF","widget "+b+" doesn't exists. Falling back to default widget"),k=!0,l=e[this._defaultWidgetName](c).data("xfaWidget-"+b)}k&&this.tempXfaFixes();return l},createWidget:function(b,c){var e=this._getWidgetInitialOptions(this.$widget);c=f.extend({},c,e);this.jqwidget=this._newWidget(b,c,this.$widget)},handleEnter:function(){this._guideView.currentFocusItemSom=this._model.somExpression;var b=window.guideBridge;b&&(b.clickedOnWindow=
!1);"guideRadioButton"!==this._model.className&&"guideCheckBox"!==this._model.className&&"guideButton"!==this._model.className&&this._triggerOnBridge("elementFocus","","","","");this.oldValue=this._model.value;this.$element.addClass("guideActiveField")},handleChange:function(){},setActive:function(b,c,e){a._super.setActive.call(this,b,c,e);c&&!this._guideView.skipFieldFocus&&this.jqwidget&&this.jqwidget.focus&&(this.jqwidget.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0},
updateWidgetOption:function(b,c){this.jqwidget&&this.jqwidget.option(b,c)}})})($,guidelib);
(function(f,d){var g=d.view.GuideCaptchaView=d.view.GuideFieldView.extend({_defaultWidgetName:"afcaptcha",syncGuideNodeToHtml:!0,initialize:function(){this.options.model.captchaEnterprise&&!this.options.model.checkBoxkey||this.options.model.captchaInvisible&&this.options.model.mandatory?(this._model=this.options.model,this.syncGuideNodeToHtml=!1):(this.options.model.captchaInvisible&&(this.options.element.classList.add("af-hideRecaptchaView"),this.options.model.captchaValidate=!1),g._super.initialize.apply(this,
arguments),this._model.captchaWidget&&(this._defaultWidgetName=this._model.captchaWidget))},_initializeWidget:function(){g._super._initializeWidget.apply(this,arguments);if(0<this.$widget.length)this.$widget.on("tokenChange.captcha",f.proxy(this.handleTokenChange,this))},_syncGuideNodeToHtml:function(a){this.syncGuideNodeToHtml&&g._super._syncGuideNodeToHtml.call(this,a)},handleTokenChange:function(a){this._model.value=a.token},createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,
arguments);return f.extend({},a,{captchaConfigData:this.options.model.jsonModel})},handleErrorChanged:function(a){var b=a.newText;!1===a.prevText?(this._model._guide().runtime.errorManager.markError(b,this.$element,this._model.somExpression,guideBridge.getValidationContext()),this.$element.addClass("validation-failure")):this.$element.removeClass("validation-failure")}})})($,guidelib);
(function(f,d){var g=xfalib.ut.XfaUtil.prototype,a=d.view.GuideCompositeFieldView=d.view.GuideFieldView.extend({_defaultWidgetName:"defaultField",getModelNameOptionsMap:function(){return{}},initialize:function(){a._super.initialize.call(this);this._defineChildModelEvents()},_unloadView:function(){var b=this;this.getModelNameOptionsMap()&&_.each(this.getModelNameOptionsMap(),function(c,e){c=b._model[e];c.off(d.event.GuideModelEvent.VALUE_CHANGED,b.handleValueChanged,b);if(c.mandatory||c.validateExp)c.off(d.event.GuideModelEvent.ERROR_CHANGED,
b.handleErrorChanged,b),c.off(d.event.GuideModelEvent.ERROR_RESET,b.handleErrorReset,b)});a._super._unloadView.call(b)},_defineChildModelEvents:function(){var b=this;this.getModelNameOptionsMap()&&_.each(this.getModelNameOptionsMap(),function(c,e){c=b._model[e];c.on(d.event.GuideModelEvent.VALUE_CHANGED,b.handleValueChanged,b);if(c.mandatory||c.validateExp)c.on(d.event.GuideModelEvent.ERROR_CHANGED,b.handleErrorChanged,b),c.on(d.event.GuideModelEvent.ERROR_RESET,b.handleErrorReset,b)})},handleCommit:function(){var b=
this;_.isEmpty(this.getModelNameOptionsMap())?this._model.value=this.jqwidget.option("value"):_.each(this.getModelNameOptionsMap(),function(c,e){e=b._model[e];_.isUndefined(e)||(c=b.jqwidget.option(c),_.isArray(c)&&(c=c.join("\n")),e.value=c)});this._model.executeExpression("valueCommitScript");this.execCommitExpression()},handleValueChanged:function(b){switch(b._property){case "value":var c=this.getModelNameOptionsMap();this.jqwidget.option(c[b.target.name],b.prevText)}},execCommitExpression:function(){this.getCommitEvent()==
g.XFA_CHANGE_EVENT?this._model.executeExpression("change"):this._model.executeExpression("exit")}})})($,guidelib);
(function(f,d){var g=d.view.GuideFileUploadView=d.view.GuideCompositeFieldView.extend({_defaultWidgetName:"fileUpload",getModelNameOptionsMap:function(){var a=g._super.getModelNameOptionsMap.apply(this,arguments);return f.extend({},a,{fileAttachment:"value",comment:"comment"})},createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments),b=this._model._getFileAttachmentNames(),c=[];b&&(c=b.split("\n"));return f.extend({},a,{fileList:this._model.fileList,buttonText:this._model.buttonText,
multiSelect:this._model.multiSelection,fileSizeLimit:this._model.fileSizeLimit,mimeType:this._model.getOrElse(this._model.jsonModel,"mimeType",""),buttonClass:"button.guide-fu-attach-button",fileItemListClass:"ul.guide-fu-fileItemList",iframeContainer:"div.guideContainerWrapperNode",showComment:this._model.showComment,value:this._model.fileAttachment.value,fileNames:c,comment:this._model.comment.value,_uuidGenerator:function(){return guideBridge._getUUID.apply(this)},_filePath:"/tmp/fd/af",_getUrl:guideBridge._getUrl(""),
disablePreview:!1,uploaderPluginName:guideBridge.userConfig.uploaderPluginName||"adobeFileUploader"})},handleCommit:function(){this._model.fileList=this.jqwidget.option("fileList");g._super.handleCommit.apply(this,arguments)},handleModelChanged:function(a){switch(a._property){case "fileList":this.jqwidget.option("fileList",a.prevText);break;default:g._super.handleModelChanged.apply(this,arguments)}},handleAccessibility:function(){!f.browser.msie||"9.0"!==f.browser.version&&"10.0"!==f.browser.version?
g._super.handleAccessibility.apply(this,arguments):(this._model.mandatory&&this.$widget.attr("aria-required",!0),this._model._getScreenReaderText()===this._model._getToolTip()&&(this.$widget.removeAttr("aria-label"),this.$widget.attr("aria-labelledby",this._model.id+"_guideFieldShortDescription")))},setActive:function(a,b,c){d.view.GuideFieldView._super.setActive.call(this,a,b,c);b&&(this._guideView.currentFocusItemSom=this._model.somExpression,this.$element.find("button").focus());return!0},tempXfaFixes:function(){this.handleAccessibility()},
getCommitEvent:function(){return xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT}})})($,guidelib);
(function(f,d){var g=d.view.GuideTermsAndConditionsView=d.view.GuideCompositeFieldView.extend({_defaultWidgetName:"tnc",getModelNameOptionsMap:function(){var a=g._super.getModelNameOptionsMap.apply(this,arguments);return f.extend({},a,{reviewDocument:"value",reviewStatus:"reviewStatus"})},createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{textAreaClass:".guide-tnc-content",checkBoxClass:".guide-tnc-checkbox",linkClass:".guide-tnc-link",checkBoxDisableClass:".guide-tnc-checkbox-disabled",
checkBoxReviewedClass:".guide-tnc-checkbox-reviewed",showLink:this._model.showLink,showAsPopUp:this._model.showAsPopUp,value:this._model.reviewDocument.value,reviewStatus:this._model.reviewStatus.value,clickStatus:this._model.clickStatus})},tempXfaFixes:function(){this.$widget&&this.$widget.css("position","relative")},handleCommit:function(a){this._model.clickStatus=this.jqwidget.option("clickStatus");g._super.handleCommit.apply(this,arguments)},handleModelChanged:function(a){switch(a._property){case "clickStatus":this.jqwidget.option("clickStatus",
a.prevText);break;default:g._super.handleModelChanged.apply(this,arguments)}},getCommitEvent:function(){return xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT}})})($,guidelib);(function(f,d){var g=d.view.GuideTelephoneView=d.view.GuideFieldView.extend({_defaultWidgetName:"telephoneWidget",createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{placeholder:this._model.placeholderText})}})})($,guidelib);
(function(f,d){var g=d.view.GuideTextDrawView=d.view.GuideFieldView.extend({_defaultWidgetName:"abstractWidget",initialize:function(){g._super.initialize.call(this);if(this.$element&&0<this.$element.length)f(this.$element).on("focus.guideTextDraw",f.proxy(this.handleEnter,this)).on("click.guideTextDraw",f.proxy(this.handleClick,this))},_syncGuideNodeToHtml:function(a){g._super._syncGuideNodeToHtml.call(this,a);a=this._model._isFloatingField();(this._model.value!==this._model.jsonModel._value||this.$element.html()===
this._model.value||a)&&this.handleValueChanged({_property:"value",newText:this._model.value?this._model.value:""})},handleValueChanged:function(a){switch(a._property){case "value":this.$element.html(a.newText)}},setActive:function(a,b,c){d.view.GuideFieldView._super.setActive.call(this,a,b,c);b&&!this._guideView.skipFieldFocus&&(this.$element&&this.$element.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0}})})($,guidelib);
(function(f,d){d.view.GuideAdobeSignBlockView=d.view.GuideTextDrawView.extend({})})($,guidelib);
(function(f,d){var g=d.view.GuideButtonView=d.view.GuideFieldView.extend({_defaultWidgetName:"xfaButton",handleClick:function(a){this._triggerOnBridge("elementButtonClicked",this._model,"click","","");this._model.executeExpression("clickExp");g._super.handleClick.call(this)},_changeTitle:function(a){var b=f("#"+this.id+"_widget").children("[data-guide-button-label]");a=xfalib.ut.XfaUtil.prototype.encodeScriptableTags(a);b.html(a)},tempXfaFixes:function(){this.$element&&this.$element.find("button").css("position",
"relative");this.handleAccessibility()}})})($,guidelib);
(function(f,d){var g=0,a=d.view.GuideListFileAttachmentButtonView=d.view.GuideButtonView.extend({_clearFileListing:function(){f("#fileAttachment .modal-list",window.document).children().remove();_.each(this._fileListViews,function(b){b._unloadView()},this);this._fileListViews=[];g=0},_updateFileListing:function(b){if("guideFileUpload"==b.className){var c=this._guideView.$element.find("#"+b.id),e="#"+b.id+"_widget";c=c.clone();c.find(e).attr("id",b.id+"_widget"+ ++g);this._addSuffixToHelpIds(c,g);
b=f("\x3cdiv\x3e\x3c/div\x3e").addClass("row").append('\x3cdiv class\x3d"col-md-12"\x3e\x3c/div\x3e');f("#fileAttachment .modal-list",window.document).append(c.appendTo(b));b=d.view.GuideViewRegistry.prototype.createView(c,this);this._fileListViews.push(b);b.postInitialize()}},_addSuffixToHelpIds:function(b,c){var e=b.find("[data-guide-longDescription]");if(0<e.length){var l=e.attr("data-guide-longDescription");b=f(".guideFieldDescription.long",b);l+=c;b.attr("id",l);e.attr("data-guide-longDescription",
l)}},_markFileListing:function(){this.$element&&this.$element.find("button").attr("data-guide-fileListing",!0)},initialize:function(){a._super.initialize.apply(this,arguments);this._markFileListing();this._fileListViews=[]}})})($,guidelib);
(function(f,d){var g=xfalib.ut.XfaUtil.prototype,a=d.view.GuideDropDownListView=d.view.GuideFieldView.extend({_defaultWidgetName:"dropDownList",initialize:function(){a._super.initialize.apply(this,arguments);this._model.multiSelect&&(this._defaultWidgetName="listBox")},_valueToArray:function(b){var c;null===b||_.isUndefined(b)?c=[null]:_.isString(b)?c=b.split("\n"):_.isNumber(b)&&(c=[b.toString()]);return c},createWidgetOptions:function(){var b=a._super.createWidgetOptions.apply(this,arguments);return f.extend({},
b,{multiSelect:this._model.multiSelect,editable:!1,items:this._model._getOptionsArray("save","display"),value:this._valueToArray(this._model.value),placeholder:this._model.placeholderText})},handleCommit:function(){var b=this.jqwidget.option("value");_.isArray(b)&&(b=b.join("\n"));this.commitValue(b)},commitValue:function(b){var c=this._model.value;this._model.value=b;b=this._model._guide().version;b.isOn(b.Flags.RUN_VALUE_COMMMIT_ON_SCRIPT_CHANGE)||this._model.executeExpression("valueCommitScript");
this.getCommitEvent()===g.XFA_CHANGE_EVENT?this._model.executeExpression("change",{prevText:c,newText:this._model.value}):this._model.executeExpression("exit")},handleValueChanged:function(b){this.jqwidget.option("value",this._valueToArray(b.prevText));this.jqwidget.option("displayValue",this._valueToArray(b.newText));this._updateEmptyStatus(b)},getCommitEvent:function(){return xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT},handleModelChanged:function(b){"addItem"===b._property&&this._handleAddItem(b);
"clearItems"===b._property&&this._handleClearItems(b);"deleteItem"===b._property?this._handleDeleteItem(b):a._super.handleModelChanged.apply(this,arguments)},_handleAddItem:function(b){this.jqwidget.addItem({sDisplayVal:b.newText,sSaveVal:b.prevText})},_handleClearItems:function(b){this.jqwidget.clearItems()},_handleDeleteItem:function(b){this.jqwidget.deleteItem(b.newText)},handleItemsChanged:function(b){b=this._model._getOptionsArray("save","display");this.jqwidget.option("items",b);this.jqwidget.option("value",
this._valueToArray(this._model.jsonModel._value));this.jqwidget.option("displayValue",this._valueToArray(this._model.formattedValue))},_defineModelEvents:function(){a._super._defineModelEvents.apply(this,arguments);if(this._model)this._model.on(d.event.GuideModelEvent.ITEMS_CHANGED,this.handleItemsChanged,this)},tempXfaFixes:function(){this.$element&&(this._model.multiSelect?(this._model.height&&this.$element.find("ol").css("max-height","none"),this.$element.find("ol").css("position","relative").attr("id",
this._model.id+"_widget")):this.$element.find("select").css("position","relative").attr("id",this._model.id+"_widget").attr("aria-describedby",this._model.id+"_widget_desc"));this.handleAccessibility()}})})($,guidelib);
(function(f,d){var g=d.view.GuideNumericBoxView=d.view.GuideFieldView.extend({_defaultWidgetName:"numericInput",createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{dataType:this._model.dataType,leadDigits:this._model.leadDigits,fracDigits:this._model.fracDigits,zero:d.i18n.numberSymbols.zero,decimal:d.i18n.numberSymbols.decimal,commitEvent:this.getCommitEvent(),placeholder:this._model.placeholderText})}})})($,guidelib);
(function(f,d){var g=d.view.GuidePasswordBoxView=d.view.GuideFieldView.extend({_defaultWidgetName:"defaultWidget",createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{placeholder:this._model.placeholderText})}})})($,guidelib);
(function(f,d){var g=d.view.GuideTextBoxView=d.view.GuideFieldView.extend({_defaultWidgetName:"textField",initialize:function(){g._super.initialize.apply(this,arguments);this._model.allowRichText&&(this._defaultWidgetName="richTextField")},createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments),b=this._model.getAttribute("html5Type");return f.extend({},a,{multiLine:this._model.multiLine,minLength:this._model.allowRichText?null:this._model.minLength,length:this._model.allowRichText?
null:this._model.length,maxChars:this._model.allowRichText?null:this._model.maxChars,required:this._model.mandatory,html5Type:b?b:"",totalLengthMessage:this.guideUtil.getLocalizedMessage("",d.i18n.strings.totalLengthMessage,[this._model.length]),minimumLengthMessage:this.guideUtil.getLocalizedMessage("",d.i18n.strings.minimumLengthMessage,[this._model.minLength]),allowRichText:this._model.allowRichText,placeholder:this._model.placeholderText})},tempXfaFixes:function(){this._model.jsonModel.multiLine?
(this.$element.find("textarea").css("position","relative"),this.handleAccessibility()):g._super.tempXfaFixes.apply(this)},handleAccessibility:function(){g._super.handleAccessibility.apply(this);this._model.jsonModel.multiLine&&this.$element.find("textarea").attr("aria-multiLine",!0)}})})($,guidelib);
(function(f,d){var g=d.view.GuideCheckBoxView=d.view.GuideFieldView.extend({_defaultWidgetName:"XfaCheckBox",initialize:function(){g._super.initialize.apply(this,arguments);this._setListenersForLabelClick();this._setListenersForRadioButtonKeyPress()},_setListenersForRadioButtonKeyPress:function(){var a=this;this.$element.find(".guideRadioButtonItem").each(function(b,c){f(c).keypress(function(e){if("13"==e.keyCode||"32"==e.keyCode)e.preventDefault(),a._model.enabled&&a.jqwidget[a.getJQWidgetIdentifier(b)].click()})})},
_setListenersForLabelClick:function(){var a=this;this.$element.find(".guideWidgetLabel").each(function(b,c){f(c).click(function(e){return function(){a._model.enabled&&a.jqwidget[a.getJQWidgetIdentifier(e)].click()}}(b))})},_syncGuideNodeToHtml:function(a){this._model._isStateOverridden("options")&&(this._replaceGroupItemsWithNewOptions(this._model._getOptionsArray(),this._model.getAttribute("alignment")),this.jqwidget=null);g._super._syncGuideNodeToHtml.apply(this,arguments)},getJQWidgetIdentifier:function(a){return a},
createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{states:2})},getCommitEvent:function(){return xfalib.ut.XfaUtil.prototype.XFA_CHANGE_EVENT},getStateFromValue:function(a,b){return null===a?1:-1!==(a+"").split(",").indexOf(b[0]+"")?0:1},getOnOffValueFromModelValue:function(a,b){return b[this.getStateFromValue(a,b)]},handleValueChanged:function(a){_.each(this.jqwidget,function(b){var c=this.getOnOffValueFromModelValue(a.prevText,b.option("values"));
b.option("value",c);b.option("displayValue",c)},this);this.$widget.find("[checked!\x3dchecked]").parents(".guideCheckBoxItem").removeClass("guideItemSelected");this.$widget.find("[checked\x3dchecked]").parents(".guideCheckBoxItem").addClass("guideItemSelected")},handleCommit:function(){var a="";_.each(this.jqwidget,function(b,c){c=b.option("values");0===b.option("state")&&(a=a+c[0]+",")},this);a=a.substring(0,a.length-1);this.commitValue(a)},handleEnabledChanged:function(a){if(!this.$element.hasClass("dontSyncEnabled")){var b=
a.newText?"open":"readOnly";_.each(this.jqwidget,function(c){c.option("access",b)})}this.$element.attr("data-disabled",!this._model.enabled)},handleModelChanged:function(a){switch(a._property){case "enabled":this.handleEnabledChanged(a);break;default:g._super.handleModelChanged.apply(this,arguments)}},handleItemsChanged:function(a){this._replaceGroupItemsWithNewOptions(this._model._getOptionsArray(),this._model.jsonModel.alignment);this.createWidget(this.getWidgetName(),this.createWidgetOptions())},
_getGroupItemIdentifier:function(){return".guideCheckBoxGroupItems"},_getWidgetType:function(){return"checkbox"},_getItemName:function(){return"CheckBoxItem"},_getItemSkeleton:function(){var a="guide"+this._getItemName(),b="af"+this._getItemName();return'\x3cdiv class\x3d"'+a+" "+b+' {NAME_PLACEHOLDER} {CSS_PLACEHOLDER}" data-original-title\x3d"" title\x3d""\x3e\n            \x3cdiv class\x3d"guideFieldWidget left XfaCheckBox" data-id\x3d"{COUNTER_PLACEHOLDER}" data-original-title\x3d"" title\x3d""\x3e\n                \x3cinput type\x3d"'+
this._getWidgetType()+'" id\x3d"{TEMPLATE_ID_PLACEHOLDER}_{COUNTER_PLACEHOLDER}_widget" name\x3d"{TEMPLATE_ID_PLACEHOLDER}_jqName" value\x3d"-100" tabindex\x3d"0" placeholder\x3d"" style\x3d"position: relative;"\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"guideWidgetLabel right"\x3e\n                \x3clabel\x3e{LABEL_PLACEHOLDER}\x3c/label\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e'},_renderGroupItem:function(a){var b=this._getItemSkeleton(),c=d.util.GuideUtil;b=c.replaceAll(b,
"{NAME_PLACEHOLDER}",a.modelName);b=c.replaceAll(b,"{TEMPLATE_ID_PLACEHOLDER}",a.modelTemplateId);b=c.replaceAll(b,"{CSS_PLACEHOLDER}",a.cssValue);b=c.replaceAll(b,"{COUNTER_PLACEHOLDER}",a.itemIndex);return b=c.replaceAll(b,"{LABEL_PLACEHOLDER}",a.displayValue)},_replaceGroupItemsWithNewOptions:function(a,b){var c=this.$element.find(this._getGroupItemIdentifier()),e={};this.getWidgetName();var l=this;c.empty();e.widgetType=this._getWidgetType();e.modelName=this._model.name;e.modelTemplateId=this._model.id;
null===this._model.css||_.isUndefined(this._model.css)||(b+=" "+this._model.css);e.cssValue=b;_.each(a,function(k,h){e.itemIndex=h;e.displayValue=k.displayValue;e.saveValue=k.saveValue;c.append(l._renderGroupItem(e))});this._initializeWidget();this._setListenersForLabelClick()},_replaceAll:function(a,b,c){return a.split(b).join(c)},_defineModelEvents:function(){g._super._defineModelEvents.apply(this,arguments);if(this._model)this._model.on(d.event.GuideModelEvent.ITEMS_CHANGED,this.handleItemsChanged,
this)},setWidgetOptions:function(a){var b=0;_.each(this.jqwidget,function(c,e){this._initOrUpdateWidget(e,this._getOptions(a,b++))},this)},_getOptions:function(a,b){var c=this._model.getOnOffValues(b),e=this.getOnOffValueFromModelValue(this._model.value,c);return _.extend(a,{value:e,displayValue:e,values:c,state:this.getStateFromValue(this._model.value,c),screenReaderText:this._model._getScreenReaderText(b)})},_initOrUpdateWidget:function(a,b,c,e,l){this.jqwidget[a]?this.jqwidget[a].option(b):(b=
f.extend({},b,l),this.jqwidget[a]=this._newWidget(c,b,e));this.$widget.find("[checked!\x3dchecked]").parents(".guideCheckBoxItem").removeClass("guideItemSelected");this.$widget.find("[checked\x3dchecked]").parents(".guideCheckBoxItem").addClass("guideItemSelected")},initializeJqWidget:function(){this.jqwidget=[]},createWidget:function(a,b){var c=this;this.initializeJqWidget();this.$widget&&(this.$widget.each(function(e,l){c._initOrUpdateWidget(c.getJQWidgetIdentifier(e),c._getOptions(b,e),a,f(l),
c._getWidgetInitialOptions(f(l)))}),this.tempXfaFixes())},setActive:function(a,b,c){d.view.GuideFieldView._super.setActive.call(this,a,b,c);b&&!this._guideView.skipFieldFocus&&(this.jqwidget&&this.jqwidget[this.getJQWidgetIdentifier(0)]&&this.jqwidget[this.getJQWidgetIdentifier(0)].focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0},updateWidgetOption:function(a,b){_.each(this.jqwidget,function(c,e){"isValid"==a&&c.option(a,b)},this)},handleAccessibility:function(){g._super.handleAccessibility.apply(this,
arguments);this.$element.attr("role","group");if(this._model.jsonModel.assistPriority&&this._model.jsonModel.custom&&"custom"===this._model.jsonModel.assistPriority)this.$element.attr("aria-label",this._model.jsonModel.custom[0]);else{var a=this.$element.find(".guideFieldLabel label").get(0);a&&a.id&&this.$element.attr("aria-labelledby",a.id)}}})})($,guidelib);
(function(f,d){var g=d.view.GuideRadioButtonView=d.view.GuideCheckBoxView.extend({_defaultWidgetName:"XfaCheckBox",_prevOnWidget:null,_getWidgetType:function(){return"radio"},_getItemName:function(){return"RadioButtonItem"},_getGroupItemIdentifier:function(){return".guideRadioButtonGroupItems"},getJQWidgetIdentifier:function(a){return this._model.getItemIdentifier(a)},handleValueChanged:function(a){var b=a.prevText;this.jqwidget[b]&&(this.jqwidget[b].option("value",a.newText),this.jqwidget[b].option("displayValue",
a.newText),this._prevOnWidget=null===a.newText?null:this.jqwidget[b]);this.$widget.find("[checked!\x3dchecked]").parents(".guideRadioButtonItem").removeClass("guideItemSelected");this.$widget.find("[checked\x3dchecked]").parents(".guideRadioButtonItem").addClass("guideItemSelected");this._updateEmptyStatus()},handleCommit:function(){var a=_.find(this.jqwidget,function(b){return 0===b.option("state")&&b!==this._prevOnWidget},this);this.commitValue(a.option("value"));this._prevOnWidget=a},_initOrUpdateWidget:function(a,
b,c,e){g._super._initOrUpdateWidget.apply(this,arguments);0===b.state&&(this._prevOnWidget=this.jqwidget[a]);this.$widget.find("[checked!\x3dchecked]").parents(".guideRadioButtonItem").removeClass("guideItemSelected");this.$widget.find("[checked\x3dchecked]").parents(".guideRadioButtonItem").addClass("guideItemSelected")},initializeJqWidget:function(){this.jqwidget={};this.$widget.find("[checked]").removeAttr("checked");this.$widget.find("[checked\x3dchecked]").removeAttr("checked")},handleAccessibility:function(){g._super.handleAccessibility.apply(this,
arguments);this.$element.attr("role","radiogroup")}})})($,guidelib);
(function(f,d){var g=d.view.GuideSwitchView=d.view.GuideCheckBoxView.extend({_defaultWidgetName:"guideSwitch",createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments),b=this._model.jsonModel.options;var c=Array.isArray(b)&&0<b.length?b[0]:!_.isUndefined(b)&&0<b.length?b:" ";b=Array.isArray(b)&&1<b.length?b[1]:"    ";return f.extend({},a,{checkedLabel:c.substring(c.indexOf("\x3d")+1),uncheckedLabel:b.substring(b.indexOf("\x3d")+1)})},handleValueChanged:function(a){var b=
this.jqwidget[0],c=b.options;a=this.getOnOffValueFromModelValue(a.prevText,b.option("values"));c.value!==a&&(b.option("value",a),b=b.$userControl,c=c.value===c.values[0],b.prop("checked",c),b.parent().toggleClass("ui-state-active",c),b.change())},handleCommit:function(){var a=this.jqwidget[0],b=a.option("values");a=a.option("state");this.commitValue(b[a])}})})($,guidelib);
(function(f,d){var g=d.view.GuideDatePickerView=d.view.GuideFieldView.extend({_defaultWidgetName:"dateTimeEdit",createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{days:d.i18n.calendarSymbols.abbrdayNames,months:d.i18n.calendarSymbols.monthNames,zero:d.i18n.numberSymbols.zero,clearText:xfalib.locale.Strings.clearText,useNativeWidget:null===this._model.displayPictureClause&&null==this._model.editPictureClause,showCalendarIcon:!0,editPattern:this._model.editPictureClause,
placeholder:this._model.placeholderText,minValidDate:this._model.minimum,maxValidDate:this._model.maximum,exclMaxDate:this._model.exclusiveMaximum,exclMinDate:this._model.exclusiveMinimum,allowNonIsoValue:!0})},tempXfaFixes:function(){g._super.tempXfaFixes.apply(this,arguments);this.$widget&&this.$widget.children("not:input[type\x3ddate]").height("100%")},handleAccessibility:function(){g._super.handleAccessibility.apply(this,arguments);this.$widget.children("div[tabIndex]").removeAttr("tabIndex")}})})($,
guidelib);
(function(f,d){var g=d.view.GuideFootnotePlaceHolderView=d.view.GuideTextDrawView.extend({_defaultWidgetName:"abstractWidget",initialize:function(){g._super.initialize.call(this);var a=this;f(function(){a._renderFootnotes()});guideBridge.on("elementNavigationChanged",function(b,c){a._renderFootnotes()});f(window.document).on("click.guidetab.data-api",'[data-guide-toggle$\x3d"accordion-tab"]',function(b){a._renderFootnotes()})},_renderFootnotes:function(){if(this.$element.is(":visible")){var a=this._model.footnoteMap;
if(0<Object.entries(a).length){var b="\x3cdiv\x3e",c=new Map;for(footnoteID in a){var e='a[title\x3d"'+footnoteID+'"]';f(e).is(":visible")&&(e=f(e)[0].innerHTML,c.has(e)||c.set(e,a[footnoteID]))}var l=[];c.forEach(function(k,h){l.push([h,k])});l.sort(function(k,h){return k[0]-h[0]});l.forEach(function(k){b+=k[1]});b+="\x3c/div\x3e";this._model.value=b}}else this._model.value=""},setActive:function(){this._renderFootnotes()}})})($,guidelib);
(function(f,d){var g=d.view.GuideScribbleView=d.view.GuideFieldView.extend({_defaultWidgetName:"ScribbleImageField",createWidgetOptions:function(){var a=g._super.createWidgetOptions.apply(this,arguments);return f.extend({},a,{commitProperty:"src",geoLocMandatoryOnIpad:"false",aspectRatio:this._valueOfAspectRatioToBeUsed()})},_valueOfAspectRatioToBeUsed:function(){var a;this._model.jsonModel.aspectRatio?a=this._model.jsonModel.aspectRatio:this._presenceOfHeight()||(a="6.8888");return a},_presenceOfHeight:function(){return this._model.jsonModel.hasOwnProperty("height")&&
0<this._model.jsonModel.height.toString().length},postInitialize:function(){g._super.postInitialize.call(this);var a=this;this._presenceOfHeight()||(setTimeout(function(){d.util.GuideUtil._computeHeightAndWidthForScribble(a.$widget)},d.util.GuideUtil.SCRIBBLE_RESIZE_TIME_INTERVAL),f(window).off("resize",d.util.GuideUtil._resizeScribbleField),f(window).on("resize",d.util.GuideUtil._resizeScribbleField))},handleAccessibility:function(){this._model.mandatory&&this.$widget.find("img").attr("aria-required",
!0);this._model._getScreenReaderText()===this._model._getToolTip()?(this.$element.find("img").removeAttr("aria-label"),this.$element.find("img").attr("aria-labelledby",this._model.id+"_guideFieldShortDescription")):"none"===this._model._getAssistPriority()&&this.$element.find("img").attr("aria-label"," ")},tempXfaFixes:function(){this.$widget&&this.$widget.css("position","relative").find("img").css("position","relative");this.handleAccessibility()}})})($,guidelib);
(function(f,d){var g=d.view.GuideImageView=d.view.GuideBaseView.extend({initialize:function(){g._super.initialize.call(this);if(null!=this._model.value){var a="data:image/*;base64,"+this._model.value;this.$element.children("img").attr("src",a)}},postInitialize:function(){this._syncGuideNodeToHtml()},setActive:function(a,b,c){d.view.GuideFieldView._super.setActive.call(this,a,b,c);b&&!this._guideView.skipFieldFocus&&(this.$element&&this.$element.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);
return!0}})})($,guidelib);
(function(f,d){var g=d.view.GuideChartView=d.view.GuideBaseView.extend({initialize:function(){g._super.initialize.call(this);var a=this;f(window).on("resize orientationchange",function(){a.renderChart.apply(a)})},postInitialize:function(){this._syncGuideNodeToHtml(!0)},handleModelChanged:function(a){switch(a._property){case "data":case "chartType":this.renderChart();break;case "visible":this.handleVisibleChanged(a)}},handleVisibleChanged:function(a){a.newText?this.$element.removeClass("hidden"):(this.$element.addClass("hidden"),
this.parentView.currentActiveItemView==this&&this.parentView.setActive("nextItem"))},_generateChart:function(){var a=this.$element,b=this._model,c=a.find(b.jsonModel.isInteractiveCommunicationChartResource?".highcharts-container":".dv-chart-container");if((0<a.parent().width()&&0<a.width()||0==c.length)&&b.repeatableItem)try{if(c.remove(),b.jsonModel.isInteractiveCommunicationChartResource){var e=(new fd.chart.ChartInstanceGenerator).generate(b.jsonModel,b.jsonModel.data);Highcharts.chart(a.attr("id"),
e)}else(e=d.chartUtils.constructChart(b,a))&&e.render()}catch(l){this.logger().error("AF Chart view","Error while rendering chart "+l)}},renderChart:function(){if(this._model.data){var a=this;window.requestAnimationFrame(function(){a._generateChart.apply(a)})}},_syncGuideNodeToHtml:function(a){this.renderChart();d.view.GuideChartView._super._syncGuideNodeToHtml.call(this,a)},setActive:function(a,b,c){d.view.GuideChartView._super.setActive.call(this,a,b,c);b&&!this._guideView.skipFieldFocus&&(this.$element&&
this.$element.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0}})})($,guidelib);
(function(f,d){var g=d.view.GuideAdModuleView=d.view.GuideBaseView.extend({initialize:function(){g._super.initialize.call(this);if(this._model)this._model.on(d.event.GuideModelEvent.VALUE_CHANGED,this.handleValueChanged,this);this.oldValue=null},postInitialize:function(){this._syncGuideNodeToHtml(!0)},handleValueChanged:function(a){switch(a._property){case "value":this.$element.html(a.newText)}},handleVisibleChanged:function(a){a.newText?this.$element.removeClass("hidden"):(this.$element.addClass("hidden"),
this.parentView.currentActiveItemView==this&&this.parentView.setActive("nextItem"))},handleModelChanged:function(a){g._super.handleModelChanged.apply(this,arguments)},_syncGuideNodeToHtml:function(a){this._model.value&&this.$element.html(this._model.value).find("img").attr("src",function(b,c){return Granite.HTTP.externalize(c)});this._model.layoutConfigs&&d.util.AdUtil.applyLayouts({$element:this.$element,layoutConfigs:this._model.layoutConfigs});this._model&&this.handleModelChanged(d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.MODEL_CHANGED,
this,"visible",this._model.visible,this._model.visible))},setActive:function(a,b,c){d.view.GuideFieldView._super.setActive.call(this,a,b,c);b&&(this.$element&&this.$element.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0}})})($,guidelib);
(function(f,d,g){var a=g.view.GuideItemsView=g.view.GuideBaseView.extend({initialize:function(){a._super.initialize.call(this);this.childViews=[]},_unloadView:function(){if(this._model._selfOrAncestorIsLazyReference){var b;f("#"+this.id).children().remove();var c=this._guideView._queueViewForLazyItems;-1!==(b=d.indexOf(c,this))&&(c[b]=void 0);d.each(this.childViews,function(e){e._unloadView()},this);this.childViews=[];this._currentActiveItemView=null;this._guideView._domTemplateCacheStore.removeDomElement("#"+
this._model.templateId);this._guideView._reInitializeGuideContainerDom()}},postInitialize:function(){this.childViews=d.reduce(this._model.children,function(b,c){(c=this._createNonRepeatChildView(c))&&b.push(c);return b},[],this);this._syncGuideNodeToHtml(!1)},_createNonRepeatChildView:function(b){var c=this.guideUtil.modelElSelector(b.id);c=this.$element.find(c);c.length||(c=this.$element.find(this.guideUtil.modelElSelector(b.templateId)),this._updateIds(c,b.templateId,b.id));return c.length?(b=g.view.GuideViewRegistry.prototype.createView(c,
this),b.postInitialize(),b):null},_syncGuideNodeToHtml:function(b){b&&d.each(this.childViews,function(c){c._syncGuideNodeToHtml(!0)},this);a._super._syncGuideNodeToHtml.call(this,b)},_findChildView:function(b){return d.find(this.childViews,function(c){return c._model==b},this)}});a.defineProps({itemsView:{get:function(){return d.filter(this.childViews,function(b){return b.isItem},this)}}})})($,_,guidelib);
(function(f,d,g,a){var b=g.view.GuideProgressiveSectionView=g.view.GuideItemsView.extend({initialize:function(){b._super.initialize.call(this);this._model&&null!=this._model&&(this._model.off(g.event.GuideModelEvent.NAVIGATE_SECTION),this._model.on(g.event.GuideModelEvent.NAVIGATE_SECTION,this.handleNavigateSection,this))},handleNavigateSection:function(c){var e=g.runtime.progressive,l=this._model;"next"===c.newText?l.currentActivePart++:"prev"===c.newText&&l.currentActivePart--;d.each(l._parts,function(k,
h){h==l.currentActivePart?d.each(k,function(p,q){e.isFieldVisible(p)?e.markFieldVisible(window.guideBridge._getGuideDomElement(p.somExpression).parent()):e.markFieldHidden(window.guideBridge._getGuideDomElement(p.somExpression).parent())}):d.each(k,function(p,q){e.markFieldHidden(window.guideBridge._getGuideDomElement(p.somExpression).parent())})});(1!==l.currentActivePart+1||1!==l._parts.length)&&0<l._parts.length&&this._updateSectionTitle()},_updateSectionTitle:function(){this.$element.find(g.runtime.progressive.PROGRESSIVE_CONSTANTS.PDC_SECTION_TITLE_SELECTOR).html(this._model.sectionTitle+
" ("+(this._model.currentActivePart+1)+"/"+this._model._parts.length+")")},postInitialize:function(){var c=this,e,l=null;if(this.$element&&null!=this.$element){var k=this.$element.find(".progressiveSectionField");k.each(function(h,p){e=f(p).children("div")[0];l=f(e).attr("id");h=g.view.GuideViewRegistry.prototype.createView(e,c);h.postInitialize();c.childViews.push(h);c.childViewsToId=c.childViewsToId||{};c.childViewsToId[l]=h});this._calculatePartsOfSection()}},_getPdcSizeConfiguration:function(){return window.guideBridge.userConfig["progressive.pdcSize"]},
_calculatePartsOfSection:function(){var c=window.guideBridge.userConfig,e=g.runtime.progressive,l=this.$element.parents(e.PROGRESSIVE_CONSTANTS.PDC_SELECTOR);this._getPdcSizeConfiguration()&&(this._getPdcSizeConfiguration()&&this._getPdcSizeConfiguration().height&&l.height(this._getPdcSizeConfiguration().height),this._getPdcSizeConfiguration()&&this._getPdcSizeConfiguration().width&&l.width(this._getPdcSizeConfiguration().width));if(c&&c.calculatePartsOfSectionConfig&&d.isFunction(c.calculatePartsOfSectionConfig.calculatePartsOfSectionHandler))c=
(0,c.calculatePartsOfSectionConfig.calculatePartsOfSectionHandler)(this._model),this._updatePartsFromArray(c);else{var k=this.$element.find(e.PROGRESSIVE_CONSTANTS.PDC_SECTION_FIELD_CONTAINER_SELECTOR),h=l.innerHeight();l.find(e.PROGRESSIVE_CONSTANTS.PDC_TITLE_SELECTOR).outerHeight();l.find("["+e.PROGRESSIVE_CONSTANTS.PDC_CONTROLS+"]").outerHeight();this.$element.find(e.PROGRESSIVE_CONSTANTS.PDC_SECTION_TITLE_SELECTOR).outerHeight();c=l.find(e.PROGRESSIVE_CONSTANTS.PDC_SECTION_REPEATABLE_CONTROLS_SELECTOR);
c.outerHeight()&&c.outerHeight();f(e.PROGRESSIVE_CONSTANTS.PDC_SECTION_TITLE_CONTAINER_SELECTOR).outerHeight();c=this.$element.find(".progressiveSectionField");k.find(".progressiveSectionField.pdcCurrentPanelField");var p=this,q=0,t=l.find("["+e.PROGRESSIVE_CONSTANTS.PDC_OFFSET_SELECTOR+"]");l=e=!1;k.css("max-height","");var m=k.height();var r=h;d.each(t,function(u){r-=f(u).outerHeight()});r-=g.runtime.progressive.heightBuffer;k.css("max-height",r+"px");k=r;if(m>r)for(h=0;h<c.length;h++)m=f(c[h]),
t=m.outerHeight()+g.runtime.progressive.fieldHeightBuffer,t<=k&&!l?(k-=t,e=!0,m=m.children("div").first().attr("id"),this._updateParts(q,m)):e?(k=r,q++,h--):(m=m.children("div").first().attr("id"),this._updateParts(q,m),l=e=!0);else f.each(c,function(u){p._updateParts(q,f(this).children("div").first().attr("id"))})}},_updatePartsFromArray:function(c){d.isArray(c)&&d.each(c,function(e,l){d.isArray(e)&&d.each(e,function(k,h){this._updateParts(l,k.id)})})},_updateParts:function(c,e){this._model._parts[c]=
this._model._parts[c]||{};this._model._parts[c][e]=this._model._getChildModelFromId(e)},focusable:function(){return!1},setActive:function(c,e,l){return!0},handleChildChanged:function(c){},handleModelChanged:function(c){},handleVisibleChanged:function(c){},handleAccessibility:function(){},getSiblingItemView:function(c){return null},getQualifiedNamedView:function(c){return d.find(this.childViews,function(e){return e._model._escapeQualifiedName()==c},this)}});b.defineProps({$item:{get:function(){return null}},
$itemNav:{get:function(){return null}},isItem:{get:function(){return!1}},qualifiedName:{get:function(){return null}}})})($,_,guidelib,window.guideBridge);
(function(f,d,g){var a=g.view.GuideProgressiveRepeatableSectionView=g.view.GuideProgressiveSectionView.extend({initialize:function(){a._super.initialize.call(this);this._$summary=null;this._model&&null!=this._model&&(this._model&&this._model.instance&&(this._model.instance.off(g.event.GuideModelEvent.MODEL_CHANGED,this.handleModelChanged,this),this._model.instance.on(g.event.GuideModelEvent.MODEL_CHANGED,this.handleModelChanged,this)),this._summarySelector=this.guideUtil.summarySelector(this._model.instance.id))},
postInitialize:function(){a._super.postInitialize.call(this);this.handleSummaryChanged()},_updateSectionTitle:function(){},handleRepeatableProgressivePanel:function(){this._updateIds(this.$element,this._model.repeatablePanelId,this._model.instance.id);this.childViews=[];d.each(this._model.children,function(b){var c=b.templateId;b=b.id;this.$element.find("#"+c).length&&this._updateIds(this.$element,c,b)},this)},handleNavigateSection:function(b){a._super.handleNavigateSection.apply(this,arguments)},
_calculatePartsOfSection:function(){var b=window.guideBridge.userConfig;if(b&&b.calculatePartsOfSectionConfig&&d.isFunction(b.calculatePartsOfSectionConfig.calculatePartsOfSectionHandler))b=(0,b.calculatePartsOfSectionConfig.calculatePartsOfSectionHandler)(this._model),this._updatePartsFromArray(b);else{var c=g.runtime.progressive;b=f(c.PROGRESSIVE_CONSTANTS.PDC_SELECTOR);var e=b.find(c.PROGRESSIVE_CONSTANTS.PDC_SECTION_REPEATABLE_CONTROLS_SELECTOR);e.find(".hidden").removeClass("hidden");var l=this.$element.find(c.PROGRESSIVE_CONSTANTS.PDC_SECTION_FIELD_CONTAINER_SELECTOR),
k=b.outerHeight(),h=b.find(c.PROGRESSIVE_CONSTANTS.PDC_TITLE_SELECTOR).outerHeight();e.outerHeight(!0)&&e.outerHeight(!0);var p=this.$element.find(c.PROGRESSIVE_CONSTANTS.PDC_SECTION_TITLE_CONTAINER_SELECTOR).outerHeight(!0)||0;b=this.$element.find(".progressiveSectionField");e.find("[data-guide-repeatable\x3d'back']").addClass("hidden");e.outerHeight(!0)?e.outerHeight(!0)+c.heightBuffer:0;l.css("max-height",k-h-p-1.5*g.runtime.progressive.heightBuffer+"px");l.css("overflow","auto");for(e=0;e<b.length;e++)c=
f(b[e]).children("div").first().attr("id"),this._updateParts(0,c)}},handleSummaryChanged:function(){if(0<this.$summary.length){var b=this._model.instance;null==b&&(b=window.guideBridge._resolveId("im_"+this._model.repeatablePanelId).instances[0]);if(b.summary)this.$summary.text(b.summary);else{var c=b.title||b.name;this._model.instanceIndex&&b.repeatable&&(c+=" "+this._model.instanceIndex);this.$summary.text(c)}}},handleModelChanged:function(b){switch(b._property){case "summary":this.handleSummaryChanged();
break;default:a._super.handleModelChanged.apply(this,arguments)}}});a.defineProps({$summary:{get:function(){this._$summary||(this._$summary=this._find(this._summarySelector));return this._$summary}}})})($,_,guidelib);
(function(f,d){var g=d.view.GuideAdModuleGroupView=d.view.GuideItemsView.extend({initialize:function(){g._super.initialize.call(this);if(this._model)this._model.on(d.event.GuideModelEvent.VALUE_CHANGED,this.handleValueChanged,this)},postInitialize:function(){this._model.value||""===this._model.value?this._syncGuideNodeToHtml(!0):g._super.postInitialize.call(this)},handleValueChanged:function(a){switch(a._property){case "value":this.$element.html(a.newText)}},_syncGuideNodeToHtml:function(a){this._model.value||
""===this._model.value?this.$element.html(this._model.value).find("img").attr("src",function(b,c){return Granite.HTTP.externalize(c)}):g._super._syncGuideNodeToHtml.call(this,a)},setActive:function(a,b,c){d.view.GuideAdModuleGroupView._super.setActive.call(this,a,b,c);b&&(this.$element&&this.$element.focus(),this._guideView.currentFocusItemSom=this._model.somExpression);return!0}})})($,guidelib);
(function(f,d,g){var a=g.view.GuidePanelView=g.view.GuideItemsView.extend({initialize:function(){a._super.initialize.call(this);this._$title=this._$summary=this._$itemsNavContainer=this._$itemsContainer=this._currentActiveItemView=null;this._childInitializeWaiting=!0;this._model.on(g.event.GuideModelEvent.CHILD_CHANGED,this.handleChildChanged,this);this._model.on(g.event.GuideModelEvent.MULTIPLE_CHILD_ADDED,this.multipleChildAdded,this);this._summarySelector=this.guideUtil.summarySelector(this._model.id);
this._titleSelector=this.guideUtil.propSelector("title",this._model.id)},addRemoveTemplateMarker:function(){d.each(this._model.children,function(b){if(b instanceof g.model.GuideInstanceManager){var c=(b._instances[0]||{}).id||b.instanceTemplateId,e='\x3cdiv id\x3d"'+b.id+'" style\x3d"display: none" data-guide-template-marker\x3d"true"\x3e\x3c/div\x3e',l=this.guideUtil.itemSelector(c,b);c=this.guideUtil.itemNavSelector(c);this.$itemsContainer.find(l).before(e);this.$itemsNavContainer.find(c).before(e);
b._instances&&0===b._instances.length&&(f(c,this.$element).remove(),f(l,this.$element).remove())}},this)},postInitialize:function(){this.handleSummaryChanged();this.handleTitleChanged();this._model.repeatable&&this._toggleAddRemoveButtons();this.parentView._model.enableLayoutOptimization?this.handleVisibleChanged(g.event.GuideModelEvent.createEvent(g.event.GuideModelEvent.MODEL_CHANGED,this,"visible",this._model.visible,this._model.visible)):this._postInitializeChildren();this.addRemoveTemplateMarker()},
_postInitializeChildren:function(){this._childInitializeWaiting=!1;this._syncGuideNodeToHtml(!0);this.handleAccessibility();this.parentView.$itemsNavContainer&&0===this.parentView.$itemsNavContainer.filter(":not(.tab-navigators-mobile)").length&&this.setActive("firstItem",!1,!0)},_syncGuideNodeToHtml:function(b,c){if(!this._childInitializeWaiting){var e=this,l=this._guideView._domTemplateCacheStore,k={},h={},p={};d.each(this.childViews,function(q){q.isItem?k[q.id]=q:h[q.id]=q},this);d.each(this._model.items,
function(q){var t=q.templateId,m=q.id;var r=this._find(this.guideUtil.itemSelector(m,q));var u=this._find(this.guideUtil.itemNavSelector(m));r.length||p[t]||0===c||(r=this.$itemsContainer.find(this.guideUtil.itemSelector(t,q)),u=this.$itemsNavContainer.find(this.guideUtil.itemNavSelector(t)));if(!r.length&&(r=l.cloneDomElement(this.guideUtil.itemSelector(t,q)),u=l.cloneDomElement(this.guideUtil.itemNavSelector(t)),!r.length)){this.logger().error("AF","Html template could not be found. cTemplateId:"+
t+", som:"+q.somExpression);return}this._updateIds(r,t,m);this._updateIds(u,t,m);r.attr("data-guide-parent-id",this._model.id);u.attr("data-guide-parent-id",this._model.id);q=null;k.hasOwnProperty(m)?(q=k[m],q instanceof g.view.GuidePanelView&&q._model.instanceManager.repeatable&&!d.isUndefined(e._model.bindNode)&&this._fixChildDom(q),b&&q._syncGuideNodeToHtml(b)):(t=this._find("#"+m),t.length?q=this._createChild(t):(t=r.find("#"+m).addBack("#"+m),t.length?q=this._createChild(t,r,u):this.logger().debug("AF",
"Skip creating view. could not find el for id:"+m)),this._model.repeatable&&g.util.GuideUtil._initializeShortDescription(t));q&&(p[m]=q)},this);this.$itemsContainer.find('[data-guide-parent-id\x3d"'+e._model.id+'"]').each(function(){var q=f(this),t=q.attr("id");-1===t.indexOf(e.guideUtil.GUIDE_ITEM_SUFFIX)&&(t=q.attr(e.guideUtil.DATA_GUIDE_ITEM));var m=t.substring(0,t.length-e.guideUtil.GUIDE_ITEM_SUFFIX.length);p.hasOwnProperty(m)||window.guideBridge._resolveId(m)||(e.logger().log("guideView",5,
"removing element as no corresponding form dom node found. id:"+t+", parent id:"+e.id),q.remove(),e._find(e.guideUtil.itemNavSelector(m)).remove())});this.childViews=[];d.each(this._model.children,function(q){var t=q._isItem,m=q.id;t&&p.hasOwnProperty(m)?this.childViews.push(p[m]):!t&&(q=h.hasOwnProperty(m)?h[m]:this._createNonRepeatChildView(q))&&(b&&q._syncGuideNodeToHtml(b),this.childViews.push(q))},this);g.view.GuideBaseView.prototype._syncGuideNodeToHtml.apply(this,arguments)}},_createChild:function(b,
c,e){b=g.view.GuideViewRegistry.prototype.createView(b,this);this._fixChildDom(b,c,e);b.postInitialize();return b},_fixChildDom:function(b,c,e){var l=b._model;if(l instanceof g.model.GuidePanel&&l.repeatable){var k=c||b.$item,h=e||b.$itemNav;b=this._model.children;var p=(b=0<l.instanceIndex?b[b.indexOf(l)-1].id:null)?this.guideUtil.itemSelector(b,l):"#"+l.instanceManager.id,q=b?this.guideUtil.itemNavSelector(b):"#"+l.instanceManager.id;this.$itemsContainer.each(function(t){t=k.get(t)||k.get(0);var m=
f(this).find(p);0==m.length&&(p="[data-guide-template-marker\x3d"+l.instanceManager.id+"]",m=f(this).find(p),0===l.instanceIndex&&0<m.length&&(m.removeAttr("data-guide-template-marker"),f(t).attr("data-guide-template-marker",l.instanceManager.id)));m.get(0)!==t&&m.after(f(t))});this.$itemsNavContainer.each(function(t){t=h.get(t)||h.get(0);f(this).find(q).after(f(t))})}},multipleChildAdded:function(b){b.jsonModel.newText&&0<b.jsonModel.newText.length&&(this._syncGuideNodeToHtml(!0),this.childViews.forEach(function(c){c._model.repeatable&&
c._toggleAddRemoveButtons()}))},handleChildChanged:function(b){var c=null,e=-1;if("childRemoved"==b._property)var l=this.$element.find("#"+b.prevText.id),k=l.index();"childAdded"==b._property&&(c=b.newText,e=c.instanceIndex);this._syncGuideNodeToHtml(!0,e);this.childViews.forEach(function(h){h._model.repeatable&&h._toggleAddRemoveButtons()});"childRemoved"==b._property&&(this.$element.trigger("panelRemoved.af",[l,k]),this.currentActiveItemView&&b.prevText==this.currentActiveItemView._model&&(this._currentActiveItemView=
null,this.setActive("nextItem")));null!=c&&this.$element.trigger("panelAdded.af",[this.$element.find("#"+c.id)])},handleSummaryChanged:function(){if(0<this.$summary.length)if(this._model.summary)this.$summary.text(this._model.summary);else{var b=this._model.title;this._model.instanceIndex&&this._model.repeatable&&(b+=" "+this._model.instanceIndex);this.$summary.text(b)}},handleTitleChanged:function(){0<this.$title.length&&this.$title.text(this._model.title);f("#"+this.id+"_guide-item").hasClass("active")&&
f("[data-target-guide-content]").text(this._model.title)},handleModelChanged:function(b){switch(b._property){case "summary":this.handleSummaryChanged();break;case "title":this.handleTitleChanged();break;default:a._super.handleModelChanged.apply(this,arguments)}},_createReferredView:function(){this._postInitializeChildren()},_loadLazyFragment:function(){var b=this;this._model._guide().internal.liveDataUtils.updateLiveData();this._guideView._clearInactiveLazyViews(this);this._viewCreationInProgress=
!0;this._model._loadLazyFragment({preFetch:function(){f("#loadingPage").addClass("guideLoading")},postFetch:function(){f("#loadingPage").removeClass("guideLoading")},success:function(){b._createReferredView();b._viewCreationInProgress=void 0;b._itemsLoaded=!0}})},setActive:function(b,c,e){this._model._lazyReference&&d.isUndefined(this._viewCreationInProgress)&&d.isUndefined(this._itemsLoaded)&&this._guideView._currentActiveItemView!==this&&this._loadLazyFragment();var l=this.getOrElse(this.currentActiveItemView,
"qualifiedName",null);b=b||l||"firstItem";if(b!=l){var k=this._model.navigationContext.getItemForNav(b);if(!k)return this.logger().log("AF","activeItemToken not found:"+b+",currentActiveItem:"+l+":"+this._model.somExpression),!1;b=this.getQualifiedNamedView(k._escapeQualifiedName());if(!e&&this._model.completionExpReq&&this.currentActiveItemView&&this.currentActiveItemView.focusable()&&this.childViews.indexOf(b)>this.childViews.indexOf(this.currentActiveItemView)){l=!0;this._model.getAttribute("validateOnStepCompletion")&&
(l=window.guideBridge.validate([],this._model.panel.navigationContext.currentItem.somExpression));l=l&&this._model.executeExpression("completionExp");if(!l)return!1;this.currentActiveItemView&&(this.currentActiveItemView.$item.addClass("completed"),this.currentActiveItemView.$itemNav.addClass("completed"))}this.currentActiveItemView=b}this.currentActiveItemView&&this.currentActiveItemView.setActive(null,c,e);return!0},_clearInactiveLazyViews:function(b){d.each(this.childViews,function(c){c&&"guidePanel"===
c._model.className&&c._ancestorHasNavigableLayout&&(c._model._itemsLoaded&&!b._isSelfOrAncestor(c)&&!c._hasEffectiveActiveClass()&&c._model._lazyReference?(c._model._unloadLazyReferenceModel(),c._unloadView(),c._itemsLoaded=void 0,c._model._itemsLoaded=void 0):c._clearInactiveLazyViews(b))},this)},_isSelfOrAncestor:function(b){for(var c=this;!d.isUndefined(c)&&"rootPanelNode"!==c._model.className;){if(b===c)return!0;c=c.parentView}return!1},_hasEffectiveActiveClass:function(){for(var b=this;!d.isUndefined(b)&&
"rootPanelNode"!==this._model.className;)if(b.$item.hasClass("active"))b=b.parentView;else return!1;return!0},handleAccessibility:function(){var b=this._model._getScreenReaderText();this._model._getRole();b&&this.$itemNav.attr("aria-label",b);this.$itemNav.find("a").attr("tabindex",function(c,e){return-1==e?e:0})},getQualifiedNamedView:function(b){return d.find(this.childViews,function(c){return c._model._escapeQualifiedName()==b},this)},_toggleAddRemoveButtons:function(){var b=this._model,c=b.instanceManager;
f('[data-guide-id\x3d"'+b.id+'"][data-guide-addremove\x3d"remove"]').toggleClass("hidden",c.instanceCount==c.minOccur);f('[data-guide-id\x3d"'+b.id+'"][data-guide-addremove\x3d"add"]').toggleClass("hidden",c.instanceCount==c.maxOccur)}});a.defineProps({hasNavigableLayout:{get:function(){return 0<this.$itemsNavContainer.length}},$itemsContainer:{get:function(){if(this._model._selfOrAncestorIsLazyReference||!this._$itemsContainer||0===this._$itemsContainer.length)this._$itemsContainer=this._find(this.guideUtil.itemContainerSelector(this._model.id)),
0===this._$itemsContainer.length&&(this._$itemsContainer=this._find(this.guideUtil.alternateItemContainerSelector(this._model.id)));return this._$itemsContainer}},$itemsNavContainer:{get:function(){if(this._model._selfOrAncestorIsLazyReference||!this._$itemsNavContainer||0===this._$itemsNavContainer.length)this._$itemsNavContainer=this._find(this.guideUtil.itemNavContainerSelector(this._model.id));return this._$itemsNavContainer}},$summary:{get:function(){this._$summary||(this._$summary=this._find(this._summarySelector));
return this._$summary}},$title:{get:function(){this._$title||(this._$title=this._find(this._titleSelector));return this._$title}},currentActiveItemView:{get:function(){return this._currentActiveItemView},set:function(b){if(b!=this._currentActiveItemView){this._currentActiveItemView&&(this._currentActiveItemView._model.viewVisited=!0);if(!b){var c=this._model.navigationContext.firstItem;c&&(b=this.getQualifiedNamedView(c._escapeQualifiedName()))}this._currentActiveItemView=b;this._model.navigationContext.currentItem=
(this._currentActiveItemView||{})._model;d.each(this.childViews,function(e){e==this._currentActiveItemView?(e.$item.addClass("active"),e.$itemNav.addClass("active"),e.$itemNav.attr("aria-selected",!0),e.$itemNav.attr("aria-disabled",!1),e.$itemNav.removeClass("wizard-tab-disabled")):(e.$item.removeClass("active"),e.$itemNav.removeClass("active"),e.$itemNav.attr("aria-selected",!1))},this);this._currentActiveItemView instanceof g.view.GuidePanelView&&this._currentActiveItemView._childInitializeWaiting&&
this._currentActiveItemView._postInitializeChildren();if(d.isUndefined(this._model._ajaxCallDone)){for(b=this._model;b&&!(b instanceof g.model.RootPanelNode);)b.toolbar&&b.toolbar.execNavigationChangeExpression(),b=b.parent;b&&b.toolbar&&b instanceof g.model.RootPanelNode&&b.toolbar.execNavigationChangeExpression()}}}},_ancestorHasNavigableLayout:{get:function(){for(var b=this.parentView;b;){if(b.$itemsNavContainer&&0<b.$itemsNavContainer.length)return!0;b=b.parentView}return!1}}})})($,_,guidelib);
(function(f,d,g){var a=0,b=g.view.GuideTableView=g.view.GuidePanelView.extend({TABLE_WIDTH_BUFFER:23,_getPluginOptions:function(){var c={bAutoWidth:this.bAutoWidth},e=null,l=0,k=null,h=this.$tableElement.find("th").length;!1===this.bAutoWidth&&(e=this._model.columnWidth.split(","),e.length===h&&(d.each(e,function(p){l+=parseInt(p,10)}),k=d.map(e,function(p){return{pWidth:Math.floor(100*p/l)}})),c=d.extend({},c,{aWidthPercentage:k,aWidth:e}));return c},setAutoWidth:function(){this.bAutoWidth=this._model.columnWidth&&
0<this._model.columnWidth.length?!1:!0},createView:function(c){var e=this._guideView._domTemplateCacheStore.cloneDomElement("#"+c),l="#"+c+"_widget",k=++a;0==e.length&&(e=this.$element.find("#"+c).clone());e.find(l).attr("id",c+"_widget"+k);g.view.GuideViewRegistry.prototype.createView(e,this).postInitialize();return e},initializeTableColumnWidth:function(c){if(0==this.bAutoWidth&&"headersLeft"===this._model.mobileLayout){this.$tableElement.css("table-layout","fixed");var e=c.aWidthPercentage;c=this.$tableElement.find("th").length;
e&&e.length==c&&this.$tableElement.find("th").each(function(l){f(this).width(e[l].pWidth+"%")})}},_checkIfTableSortingEnabled:function(){return"true"===this._model.jsonModel.sortingEnabled},handleParentVisibleChanged:function(c){switch(c._property){case "visible":this.handleTableShown()}},_checkParentModelChanged:function(){for(var c=this.parentView;null!=c;)c._model.on(g.event.GuideModelEvent.MODEL_CHANGED,this.handleParentVisibleChanged,this),c=c.parentView},initialize:function(){b._super.initialize.apply(this,
arguments);this._checkParentModelChanged();this.$tableElement=this.$element.find("\x3e table");this.setAutoWidth();var c=this._getPluginOptions(),e=this;this.initializeTableColumnWidth(c);this._fixTableControls(!0);if("collapsibleColumns"===this._model.mobileLayout)c=d.extend({},c,{bControlRowHiddenCells:!1,bDisableControlRowCells:!0,viewCallback:f.proxy(this.createView,this),tableRuntimeEditControlClass:"guideTableRuntimeEditControl",fixTableControls:f.proxy(this._fixTableControls,this)}),this.jqwidget=
this.$tableElement.responsiveTablePlugin(c).data("responsiveTablePlugin");else f(window).on("resize orientationchange",function(l){e._fixTableControls(l)});this._checkIfTableSortingEnabled()&&(this.$tableElement.tableSorting=this.guideTableSorter.initialize,this.$tableElement.tableSorting({model:this._model,tableContext:this}))},handleVisibleChanged:function(c){b._super.handleVisibleChanged.apply(this,arguments);this.handleTableShown()},handleTableShown:function(){"collapsibleColumns"===this._model.mobileLayout&&
(this.jqwidget._initializeColumnVisibility(),this.jqwidget.isColumnHidden()&&(this.$tableElement.find(".guideFieldNode").addClass("dontSyncEnabled"),this.$tableElement.find("input, select, textarea, button").attr("disabled","disabled")))},_resetTableCellWidth:function(){var c=this,e=this.TABLE_WIDTH_BUFFER;this.$tableElement.find(".guideTableRuntimeControls").each(function(){var l=this;setTimeout(function(){c._resetTableCell(f(l),e)},1)})},_resetTableCell:function(c,e){if(c.hasClass("guideTableRuntimeRightControls")){var l=
c.prev(),k=c.parent();c.is(":visible")?(l.css("display","inline-block"),l.css("float","left"),e=k.width()-c.outerWidth()-e,k=e/k.width()*100,l.width(k+"%")):(l.css("display","block"),l.css("float","none"),l.width(k.width()))}else c.hasClass("guideTableRuntimeLeftControls")&&(c.is(":visible")?(c.next().css("display","inline-block"),e=c.parent().width()-c.outerWidth()-e,k=e/c.parent().width()*100,c.next().width(k+"%")):c.next().css("display","block"))},_fixTableControls:function(c){"collapsibleColumns"===
this._model.mobileLayout&&this.jqwidget&&(this.jqwidget.isColumnHidden()?(this.$tableElement.find("tr:not(.child)").find(".guideFieldNode").addClass("dontSyncEnabled"),this.$tableElement.find("tr:not(.child)").find("input, select, textarea, button").attr("disabled","disabled")):(this.$tableElement.find(".guideFieldNode").removeClass("dontSyncEnabled"),this.$tableElement.find("input, select, textarea, button").removeAttr("disabled")));c&&this._resetTableCellWidth()},_fixChildDom:function(c,e,l){b._super._fixChildDom.apply(this,
arguments);"collapsibleColumns"===this._model.mobileLayout&&this.jqwidget._fixControlRows();this._fixTableControls();this._resetTableCellWidth()},_postInitializeChildren:function(){b._super._postInitializeChildren.call(this);"collapsibleColumns"===this._model.mobileLayout?this.handleTableShown():"headersLeft"===this._model.mobileLayout&&this._fixTableCellForHeaderLeftLayout();this._resetTableCellWidth()},_fixTableCellForHeaderLeftLayout:function(){var c=this,e=g.util.GuideUtil;this.$tableElement.find("tr td").each(function(){e._setGuideDataHeader(f(this),
c.$tableElement)})},handleChildChanged:function(c){b._super.handleChildChanged.apply(this,arguments);"headersLeft"===this._model.mobileLayout&&this._fixTableCellForHeaderLeftLayout();"childAdded"==c._property&&this._resetTableCellWidth()},addRemoveTemplateMarker:function(){d.each(this._model.children,function(c){if(c instanceof g.model.GuideInstanceManager){var e=c.id,l=(c._instances[0]||{}).id||c.instanceTemplateId;c=this.guideUtil.itemSelector(l,c._instances[0]);this.guideUtil.itemNavSelector(l);
l=this.$itemsContainer.find(c);l.is("tr")&&l.attr("data-guide-template-marker",e)}},this)},tableSortComparator:{DATE:function(c,e,l){return c.sort(function(k,h){var p=e[0][0],q=e[0][1],t=l.guideTableSorter;k=t.formatDateValue(t.getValueFromJsonModel(k,p));h=t.formatDateValue(t.getValueFromJsonModel(h,p));return t.ComparedOrder(k,h,q)})},NUMBER:function(c,e,l){return c.sort(function(k,h){var p=e[0][0],q=e[0][1],t=l.guideTableSorter;k=t.formatRegexFloatData(t.getValueFromJsonModel(k,p));h=t.formatRegexFloatData(t.getValueFromJsonModel(h,
p));return t.ComparedOrder(k,h,q)})},STRING:function(c,e,l){return c.sort(function(k,h){var p=e[0][0],q=e[0][1],t=l.guideTableSorter;k=t.formatRichTextString(t.getValueFromJsonModel(k,p,!0));h=t.formatRichTextString(t.getValueFromJsonModel(h,p,!0));return t.ComparedOrder(k,h,q)})}},guideTableSorter:new function(){function c(q,t){t=f(q.selectorsHeaders,t).each(function(v){this.column=v;this.order=1});for(var m=0;m<q.tableHeader.children.length;m++){var r=q.tableHeader.children[m];t[m].sortingAllowed=
!0;var u=r.jsonModel.sortingDataType;u=u?u:"STRING";r.jsonModel.sortingDataType=u;q.tableHeader.visible&&"noSort"!==u||(t[m].sortingAllowed=!1,f(t[m]).removeClass("sortEnabled"),f(t[m]).find(".sortingButton").remove())}return t}function e(q,t,m,r){0<(t[0].tBodies[0]&&t[0].tBodies[0].rows.length||0)&&(q.order=++q.order%2,m.sortList=[],m.sortList.push([q.column,q.order]),setTimeout(function(){l(r,m.sortList,m);var u=m.sortList,v=m.model,w,x=0,A=v.children,y=[],D=[],E=m.tableContext;for(w=0;w<A.length;w++)"guideInstanceManager"!==
A[w].className&&k(A[w])&&y.push(A[w]);y=E.tableSortComparator[m.tableHeader.children[[u[0][0]]].jsonModel.sortingDataType].call(m,y,u,E);for(w=0;w<v.children.length;w++)k(v.children[w])?(D.push(y[x]),x++):D.push(v.children[w]);v.children=D;v._triggerEvent(g.event.GuideModelEvent.MODEL_CHANGED,"tableModelSorted",v,v);p(m.tableContext,v)},1))}function l(q,t,m){var r,u=[m.headerCss.asc,m.headerCss.desc,m.headerCss.random];q.each(function(v){var w=f(this).find(".sortingButton");w.removeClass(u[0]).removeClass(u[1]).removeClass(u[2]);
q[v].sortingAllowed&&(v===t[0][0]?(r=t[0][1],w.addClass(u[r])):w.addClass(m.headerCss.random))})}function k(q){var t=q.options.jsonModel["sling:resourceType"];return!("guideInstanceManager"===q.className||"fd/af/components/tableHeader"===t||"fd/ccm/web-channel/components/tableHeader/v1/tableHeader"===t)}function h(q){q=q.options.jsonModel["sling:resourceType"];return"fd/af/components/tableHeader"===q||"fd/ccm/web-channel/components/tableHeader/v1/tableHeader"===q}function p(q,t){var m={},r;for(r=
0;r<q.childViews.length;r++){var u=q.childViews[r];u.isItem&&(m[u.id]=u)}for(r=1;r<q._model.items.length;r++){u=m[q._model.items[r].id];var v=u._model,w=u.$item;if(1===r){if(2<t.items.length)var x=t.items[r+1].id}else var A=t.items[r-1].id;var y=A?q.guideUtil.itemSelector(A,v):"#"+v.instanceManager.id,D=x?q.guideUtil.itemSelector(x,v):"#"+v.instanceManager.id;q.$itemsContainer.each(function(E){E=w.get(E)||w.get(0);var z=f(this).find(y);z.get(0)!==E?z.after(f(E)):(z=f(this).find(D),z.before(f(E)))})}}
this.initialize=function(q){return this.each(function(){this.tableConfig={};if(this.tHead&&this.tBodies){var t=f(this),m={};m=f.extend(this.tableConfig,{sortList:[],selectorsHeaders:"thead th",headerCss:{asc:"asc",desc:"desc",random:"random"}},q);var r,u=m.model;for(r=0;r<u.children.length;r++)if(h(u.children[r])){r=u.children[r];m.tableHeader=r;break}var v=c(m,this);v.click(function(){this.sortingAllowed&&e(this,t,m,v)});v.each(function(w){if(this.sortingAllowed)return"undefined"!==typeof u._guide&&
u._guide()&&((w=(w=g.util.GuideUtil._fetchJSONNodeValue(u._guide().runtime.guideContext.guidePrefillJson,"afSubmissionInfo"))||g.util.GuideUtil.fetchXMLNodeValue(u._guide().runtime.guideContext.guidePrefillXml,"afSubmissionInfo"))||f(this).trigger("click")),!1})}})};this.formatRegexFloatData=function(q){return isNaN(parseFloat(q))?0:parseFloat(q)};this.formatDateValue=function(q){return isNaN((new Date(q)).getTime())?0:(new Date(q)).getTime()};this.formatRichTextString=function(q){return f("\x3cdiv\x3e"+
q+"\x3c/div\x3e").text().trim()};this.ComparedOrder=function(q,t,m){return q>t?0===m?1:-1:q<t?0===m?-1:1:-1};this.getValueFromJsonModel=function(q,t,m){for(var r=q.children,u=t,v=0;0<t;)"guideInstanceManager"===q.children[v].jsonModel.guideNodeClass?u++:t--,v++;q=r[u].jsonModel;r=null;!m&&q.defaultValue&&1===q.defaultValue.length&&(r=q.defaultValue[0]);r||(r=q._value);return null===r?"":this.formatRichTextString(r)}}})})($,_,guidelib);
(function(f,d){d.view.GuideTableRowView=d.view.GuidePanelView.extend({handleChildChanged:function(g){}})})($,guidelib);
(function(f,d,g){var a=d.view.GuideContainerView=d.view.GuideItemsView.extend({initialize:function(){this._queueViewForLazyItems=[];window.guideBridge._guideView=this;var b=f(this.options.element).clone();this._domTemplateCacheStore=new d.view.util.DomTemplateCacheStore({$htmlTemplateDom:b});this._lastFocussedPanelForNonActionFields=null;a._super.initialize.call(this);this._currentFocusItemSom=null;this._previousFocusItemSom="FIRST_TIME";f(window).on("keydown.guides",f.proxy(this.hotKeys,this));this.postInitialize();
this._model.on(d.event.GuideModelEvent.MODEL_REFRESH,function(c){switch(c._property){case "jsonModel":this._syncGuideNodeToHtml(!0);break;default:this._model.logger().error("unexpected event property "+c._property)}},this)},_reInitializeGuideContainerDom:function(){this.$element=f("div.guideContainerWrapperNode")},setFocus:function(b,c,e){if(g.isObject(b)){var l=b.somExpression;c=b.focusOption;b=b.runCompletionScript}else l=b,b=e;var k=!b;if("nextItemDeep"==c||"prevItemDeep"==c){if(l)return this.logger().warn("AF",
"somExpression is currently not supported for deepNavigation:"+l+":"+c),!1;b=this.getSomOnNavigableAncestor(this._lastFocussedPanelForNonActionFields);b=this.getView(b);for(e="nextItemDeep"==c?"nextItem":"prevItem";b&&b.parentView!=this&&!b.getSiblingItemView(e);)b=this.getSomOnNavigableAncestor(b.parentView._model.somExpression),b=this.getView(b);if(b&&b.parentView!=this&&b.getSiblingItemView(e)){if(!b.parentView.setActive(e,!1,k))return this.logger().log("AF","could not setActive for the deepNav:"+
b._model.somExpression),!1;c="nextItem"==e?"firstItem":"lastItem";for(b=b.parentView.currentActiveItemView;b;)b.setActive(c,!b.currentActiveItemView,!0),b=b.currentActiveItemView;return!0}this.logger().warn("AF","could not locate view for given somExpression:"+l+":"+c);return!1}l||(l=this.guideModel.rootPanel.somExpression);var h=this.rootPanelView;if(h){if(b=this.guideUtil.relativeSom(this.guideModel.rootPanel.somExpression,l))if(b=b.split("."),g.find(b,function(p){h.setActive(p,!1,k);if(h instanceof
d.view.GuidePanelView&&(null==h.currentActiveItemView||h.currentActiveItemView.qualifiedName!=p))return this.logger().log("AF","could not find token:"+p+", som:"+l),!0;null!=h.currentActiveItemView&&(h=h.currentActiveItemView)},this))return!1}else(b=this._getGuideDomElement(l))&&0<b.length&&(h=b.data("guideView"));return h?h.setActive(c,!0,k):!1},_getGuideDomElement:function(b,c){if(b&&"string"===typeof b&&(b=this.guideModel.resolveNode(b))){var e="#"+b.id;"nav"===c&&(e=this.guideUtil.itemNavSelector(b.id));
return c=this.$element.find(e)}},getView:function(b){if(!b)return null;var c=this._getGuideDomElement(b),e=null,l=null;return c&&0<c.length?(c.data("guideView")||(e=this.guideModel.rootPanel.somExpression,b=d.util.GuideUtil.relativeSom(e,b)||"",g.reduce(b.split("."),function(k,h){k=k?k+"."+h:h;l=this.getView(k);l instanceof d.view.GuidePanelView&&l._childInitializeWaiting&&l._postInitializeChildren();return k},e,this)),e=c.data("guideView"),e instanceof d.view.GuidePanelView&&e._childInitializeWaiting&&
e._postInitializeChildren(),e):null},hotKeys:function(b){var c=!1;switch(b.keyCode){case 37:b.altKey&&(window.guideBridge.setFocus(null,"prevItemDeep",!0),c=!0);break;case 39:b.altKey&&(window.guideBridge.setFocus(null,"nextItemDeep",!0),c=!0);break;case 82:b.altKey&&(window.guideBridge.reset(),c=!0);break;case 83:b.altKey&&(window.guideBridge.submit(),c=!0)}c&&b.preventDefault()},getSomOnNavigableAncestor:function(b){if(!b||""===b)return null;var c=b.lastIndexOf(".");if(-1!==c){var e=b.substring(0,
c);if(c=this.getView(e))var l=c.hasNavigableLayout;return l?b:this.getSomOnNavigableAncestor(e)}return this.guideModel.rootPanel.somExpression},__printSyncPending:function(){g.each(this.childViews,function(b){b._syncPending?this.logger().error("AF",b._model.somExpression):a.prototype.__printSyncPending.call(b)},this)},_clearInactiveLazyViews:function(b){g.each(this.childViews,function(c){"rootPanelNode"===c._model.className&&c._clearInactiveLazyViews(b)})}});a.defineProps({guideModel:{get:function(){return this._model}},
rootPanelView:{get:function(){return this._findChildView(this.guideModel.rootPanel)}},currentFocusItemSom:{get:function(){return this._currentFocusItemSom},set:function(b){if(this._currentFocusItemSom!==b){var c=this._currentFocusItemSom;c&&(this._previousFocusItemSom=c);this._currentFocusItemSom=b;this._model._guide().runtime.progressive||null==b||"guideToolbar"===this._model.resolveNode(b).parent.className||(this._lastFocussedPanelForNonActionFields=this.getSomOnNavigableAncestor(this._currentFocusItemSom),
this._model._currentNavigablePanelSom=this._lastFocussedPanelForNonActionFields);b&&(this._triggerOnBridge("elementFocusChanged",this._model.resolveNode(b),"focus",this._previousFocusItemSom,b),this._previousFocusItemSom&&!this._model._guide().runtime.progressive&&(c=this.getSomOnNavigableAncestor(this._previousFocusItemSom),b=this.getSomOnNavigableAncestor(b),b!==c&&this._triggerOnBridge("elementNavigationChanged",this._model.resolveNode(b),"navigate",c,b)))}}},skipFieldFocus:{get:function(){return this._skipFieldFocus},
set:function(b){this._skipFieldFocus=b}}})})($,guidelib,_);(function(f,d){(d.view.util.DomTemplateCacheStore=xfalib.ut.Class.extend({cloneDomElement:function(g){return this.$htmlTemplateDom.find(g).clone()},putDomElement:function(g,a){this.$htmlTemplateDom.find(g).eq(0).append(a)},removeDomElement:function(g){this.$htmlTemplateDom.find(g).children().remove()}})).defineProps({$htmlTemplateDom:{get:function(){return this.options.$htmlTemplateDom}}})})($,guidelib);
(function(f,d){d.model.mixin.AddMinMaxValidation={normalProperties:{_runMaximumValueTest:function(){return this.exclusiveMaximum?this.value<this.maximum:this.value<=this.maximum},_runMinimumValueTest:function(){return this.exclusiveMinimum?this.value>this.minimum:this.value>=this.minimum},_minMaxValidation:function(g,a){null!=g&&a.validFlag&&(this.maximum&&(a.validFlag=this._runMaximumValueTest(),a.validFlag||(g=this._getFormattedValue(this.maximum),this._errorText=this.exclusiveMaximum?this.guideUtil.getLocalizedMessage("",
d.i18n.strings.exclusiveMaxValErrorMessage,[g]):this.guideUtil.getLocalizedMessage("",d.i18n.strings.maxValErrorMessage,[g]),this._failedTest=this.guideUtil.MAXIMUM_VALUE_TEST)),a.validFlag&&null!==this.minimum&&(a.validFlag=this._runMinimumValueTest(),a.validFlag||(a=this._getFormattedValue(this.minimum),this._errorText=this.exclusiveMinimum?this.guideUtil.getLocalizedMessage("",d.i18n.strings.exclusiveMinValErrorMessage,[a]):this.guideUtil.getLocalizedMessage("",d.i18n.strings.minValErrorMessage,
[a]),this._failedTest=this.guideUtil.MINIMUM_VALUE_TEST)))}},propertyDescriptors:{maximum:{get:function(){return this.getAttribute("maximum")}},minimum:{get:function(){return this.getAttribute("minimum")}},exclusiveMaximum:{get:function(){return this.getAttribute("exclusiveMaximum")}},exclusiveMinimum:{get:function(){return this.getAttribute("exclusiveMinimum")}}}}})(_,guidelib);
(function(f,d){d.model.mixin.ChoiceGroupOptionHandler={normalProperties:{_getOptionsArray:function(g,a){var b=[],c=this.items;g=g||"saveValue";a=a||"displayValue";f.isArray(c)&&f.each(c,function(e){e=e.split("\x3d");var l={};l[g]=e[0];l[a]=e[1]||e[0];b.push(l)});return b},_getPossibleValueArray:function(){var g=[],a=this.items;f.isArray(a)&&f.each(a,function(b){b=b.split("\x3d");g.push(b[0])});return g},_triggerItemsChange:function(g,a){this.trigger(d.event.GuideModelEvent.ITEMS_CHANGED,d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.ITEMS_CHANGED,
this,"items",g,a))},_resetModelValueForOptionChange:function(){if(!f.isUndefined(this.jsonModel._value)&&null!=this.jsonModel._value){var g=this.jsonModel._value.split(","),a=this._getPossibleValueArray(),b="";f.each(g,function(c){-1!==$.inArray(c,a,0)&&(b+=c+",")},this);0<b.length&&(b=b.substring(0,b.length-1));this.jsonModel._value=b}}}}})(_,guidelib);
(function(f){f.widget("xfaWidget.imageCheckButtonWidget",f.xfaWidget.XfaCheckBox,{_widgetName:"imageCheckButtonWidget",getOptionsMap:function(){var d=f.xfaWidget.XfaCheckBox.prototype.getOptionsMap.apply(this,arguments);return f.extend({},d,{displayValue:function(g){d.displayValue.apply(this,arguments);var a=this.$userControl.parents(".guideRadioButtonItem, .guideCheckBoxItem");a&&a.toggleClass("imageCheckButtonChecked",this.checkedState);"disabled"===this.$userControl.attr("disabled")&&a.addClass("imageCheckButtonDisabled")}})}})})($);
(function(f,d){d.model.GuideModelRegistry=xfalib.ut.Class.extend({_nodeClassToFactoryMap:{},createModel:function(g,a){var b=null,c="GuideNode";g.guideNodeClass&&0<g.guideNodeClass.length&&(c=g.guideNodeClass.charAt(0).toUpperCase()+g.guideNodeClass.substr(1));var e="create"+c;g.guideNodeClass&&this._nodeClassToFactoryMap[g.guideNodeClass]&&(e=this._nodeClassToFactoryMap[g.guideNodeClass]);this[e]&&(b=this[e].call(this,g,a));!b&&d.model[c]&&(b=new d.model[c](this._getOptions(g,a)));b||(b=g.items?new d.model.GuideItemsContainer(this._getOptions(g,
a)):new d.model.GuideNode(this._getOptions(g,a)));return b},_getOptions:function(g,a){return f.extend({},a,{jsonModel:g})},createInstanceManager:function(g){var a=g.getAttribute("name");a={guideNodeClass:"guideInstanceManager",minOccur:g.minOccur,maxOccur:g.maxOccur,initialOccur:g.initialOccur,instanceTemplateId:g.templateId,name:"_"+a,instanceName:a,templateId:"im_"+g.templateId,id:"im_"+g.id};var b={};g.options._guideContainer&&(b=f.extend({},b,{_guideContainer:g.options._guideContainer}));return d.model.GuideModelRegistry.prototype.createModel(a,
b)}})})(_,guidelib);
(function(f,d){var g=xfalib.ut.XfaUtil.prototype.detectIE(),a={showLink:!1,scrollMode:"vertical",textAreaClass:".guide-tnc-content",checkBoxClass:".guide-tnc-checkbox",checkBoxDisableClass:".guide-tnc-checkbox-disabled",checkBoxReviewedClass:".guide-tnc-checkbox-reviewed",linkClass:".guide-tnc-link",documentVisitedClass:".guide-tnc-document-visited",documentUnVisitedClass:".guide-tnc-document-unvisited"},b=function(c,e){this.options=e;this.$element=d(c);this.enters=this.leaves=0;this.inside=!1;this.reviewdoc=
this.status="unreviewed";this.$elementCheckBox=this.$element.find(this.options.checkBoxClass||a.checkBoxClass);this.$elementTextArea=d(this.textArea());this.$elementLink=d(this.link());this.isTextContentVisible=!1;this.options.showLink?this.$elementLink.find("a").click(d.proxy(this.handleReviewStatusChange,this)):(c=function(){this.hasScrollBar(this.$elementTextArea.parent().get(0))?this.$elementTextArea.parent().scroll(d.proxy(this.handleReviewStatusChange,this)):"none"!==this.$elementTextArea.css("display")&&
(this.status="reviewed",this.isTextContentVisible=!0,this.options.showAsPopUp||this.enableCheckBox(),this.reviewDoc=this.$elementTextArea.text())},"complete"===document.readyState?c.call(this):d(d.proxy(c,this)));if(this.options.showAsPopUp){var l=this.options.documentUnVisitedClass||a.documentUnVisitedClass,k=this.options.documentVisitedClass||a.documentVisitedClass,h=this;c=this.$elementCheckBox.find("a").keydown(function(p){if(13===p.keyCode||13==p.which||32===p.charCode)return d(this).click(),
!1}).click(function(p){d(this).hasClass(l.substring(1))&&d(this).toggleClass(k.substring(1)+" "+l.substring(1));(g||h.isTextContentVisible)&&h.enableCheckBox()}).attr("href");d(c).on("hidden.bs.modal",function(p){h.$elementCheckBox.find("input").focus()})}else this._updateScreenReaderText();this.$elementCheckBox.find("input").change(d.proxy(this.handleCheckBoxChange,this))};b.prototype={clear:function(){this.$element.val("")},destroy:function(){this.$element.val("");this.$element.empty()},_updateScreenReaderText:function(){if(!this.options.showAsPopUp){var c=
this;this.$element.find(".guide-tnc-sr-only").each(function(e,l){d(this).html(c.options.screenReaderText)})}},_restoreClickState:function(c){if(this.options.showLink){c=c.split("\n");var e=[];f.each(c,function(h,p){e.push(f.last(h.split("\x3d")))});var l=this.options.documentUnVisitedClass||a.documentUnVisitedClass,k=this.options.documentVisitedClass||a.documentVisitedClass;this.$elementLink.find("a").each(function(h){d(this).data("clicked",e[h]);"1"===e[h]?d(this).addClass(k.substring(1)):d(this).addClass(l.substring(1))})}},
value:function(c){if(c)this.options.showLink&&this._restoreClickState(c),this.reviewDoc=c;else return this.reviewDoc},reviewStatus:function(c){this.getClickState();if(f.isUndefined(c)){if("reviewed"==this.status||"unreviewed"==this.status)return null;if("agree"==this.status)return!0}else{if("true"==c)this.enableCheckBox(),this.$elementCheckBox.find("input").attr("checked","checked"),this.$elementCheckBox.find("input").prop("checked",!0);else if(null==c||"false"==c)this.$elementCheckBox.find("input").removeAttr("checked"),
this.$elementCheckBox.find("input").removeProp("checked");this.approvalStatus=c}},clickStatus:function(c){if(c){if("reviewed"===c){var e=this.getClickState();f.isArray(e)&&0<e.length&&(e=e.join("\n"),this._restoreClickState(e));this.enableCheckBox()}this.status=c}else return this.status},showLink:function(c){if(void 0!==c)this.options.showLink=c;else return this.options.showLink},access:function(c){this.accessOption=c;"readOnly"==c?(this.disableCheckBox(),this.options.showLink&&this.$elementLink.find("a").each(function(e,
l){d(l).css("pointer-events","none");d(l).attr("disabled","disabled")})):"open"==c&&("reviewed"!=this.status&&"agree"!=this.status||this.options.showAsPopUp||this.enableCheckBox(),this.options.showLink&&this.$element.find("a").each(function(e,l){d(l).css("pointer-events","");d(l).removeAttr("disabled")}))},link:function(){return this.$element.find(this.options.linkClass||a.linkClass)},textArea:function(){return this.$element.find(this.options.textAreaClass||a.textAreaClass)},getClickState:function(){if(this.options.showLink){var c=
[];this.$elementLink.find("a").each(function(e){c.push({displayText:d(this).text(),linkText:d(this).attr("href"),clicked:d(this).data("clicked")})});return c}},enableCheckBox:function(){"readOnly"!==this.accessOption&&(this.$elementCheckBox.find("input").removeAttr("disabled"),this.$elementCheckBox.removeClass(this.options.checkBoxDisableClass.substring(1)))},disableCheckBox:function(){this.$elementCheckBox.find("input").attr("disabled","disabled");this.$elementCheckBox.addClass(this.options.checkBoxDisableClass.substring(1))},
handleReviewStatusChange:function(c){var e=[],l=this.options.documentVisitedClass||a.documentVisitedClass;if(this.options.showLink)this.status="reviewed",d(c.target).data("clicked",1),d(c.target).addClass(l.substring(1)),this.linkStateMap=this.getClickState(),f.each(this.linkStateMap,function(p,q){p.clicked||(this.status="unreviewed");e.push(p.displayText+"\x3d"+p.linkText+"\x3d"+(f.isUndefined(p.clicked)?"0":"1"))},this),0<e.length&&(this.reviewDoc=e.join("\n")),"reviewed"==this.status&&this.enableCheckBox(),
this.$element.trigger("reviewComplete.tnc");else{l=this.getScroll(this.$elementTextArea.get(0));var k=l["vertical"==this.options.scrollMode?"y":"x"],h=this.getScrollSize(this.$elementTextArea.get(0)).y-this.getSize(this.$elementTextArea.get(0)).y;this.reviewDoc=this.$elementTextArea.text();k>=h?this.inside||(this.inside=!0,this.enters++,this.status="reviewed",this.enableCheckBox(),this.$element.trigger("reviewComplete.tnc",[l,this.enters,c])):this.inside&&(this.inside=!1,this.leaves++)}},handleCheckBoxChange:function(c){d(c.target).is(":checked")?
(this.status="agree",this.$elementCheckBox.addClass(this.options.checkBoxReviewedClass.substring(1))):(this.status="unreviewed",this.$elementCheckBox.removeClass(this.options.checkBoxReviewedClass.substring(1)));this.$element.trigger("checkboxStateChange.tnc")},getScrollSize:function(c){return{x:c.scrollWidth,y:c.scrollHeight}},getScroll:function(c){return{x:c.scrollLeft,y:c.scrollTop}},getSize:function(c){return{x:c.offsetWidth,y:c.offsetHeight}},hasScrollBar:function(c){return g?c.scrollHeight-
2>c.clientHeight||c.scrollWidth-2>c.clientWidth:c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth}};d.fn.afTnc=function(c,e){var l="";this.each(function(){var k=d(this),h=k.data("AfTnc"),p=d.extend({},a,"object"===typeof c&&c);h||k.data("AfTnc",h=new b(this,p));"string"===typeof c&&(l=h[c](e))});return l}})(_,$);
(function(f){var d=xfalib.ut.XfaUtil.prototype;f.widget("xfaWidget.tnc",f.xfaWidget.abstractWidget,{_widgetName:"tnc",_superPrototype:f.xfaWidget.abstractWidget.prototype,getOptionsMap:function(){var g=this._superPrototype.getOptionsMap.apply(this,arguments);return f.extend({},g,f.extend({},this.options,{value:function(a){this.$userControl.afTnc("value",a)},reviewStatus:function(a){this.$userControl.afTnc("reviewStatus",a)},clickStatus:function(a){this.$userControl.afTnc("clickStatus",a)},access:function(a){this.$userControl.afTnc("access",
a)}}))},_getReviewStatus:function(){return f(this.element).afTnc("reviewStatus")},_getClickStatus:function(){return f(this.element).afTnc("clickStatus")},getEventMap:function(){var g=this._superPrototype.getEventMap.apply(this,arguments);return f.extend({},g,{change:null,"reviewComplete.tnc":d.XFA_CHANGE_EVENT,"checkboxStateChange.tnc":d.XFA_CHANGE_EVENT})},render:function(){this._superPrototype.render.apply(this,arguments);f(this.element).afTnc(this.getOptionsMap());return f(this.element)},showDisplayValue:function(){},
showValue:function(){},getCommitValue:function(){this.options.reviewStatus=this._getReviewStatus();this.options.clickStatus=this._getClickStatus();return f(this.element).afTnc("value")}})})($);
(function(f,d){var g={Guide:"XFA",XFA:"Guide"},a=["enabled","visible"];(d.model.GuideNode=xfalib.ut.EventClass.extend({msClassName:"guideNode",guideUtil:d.util.GuideUtil,initialize:function(){this.className=this.jsonModel.guideNodeClass||this.msClassName;this.parent=null;this._isItem=!1;this._index=0},_postInitialize:function(){},_triggerOnBridge:function(b,c,e,l,k){window.guideBridge&&window.guideBridge.trigger(b,d.event.GuideModelEvent.createEvent(b,c,e,l,k))},_getEffectiveBindRef:function(){return this.bindRef||
this.getAttribute("name")},validate:function(b){},_getXFAOptionStringFromGuideItems:function(b){var c="",e=0;f.isEmpty(b)||f.isArray(b)||(b=[b]);f.each(b,function(l,k,h){e=l.indexOf("\x3d");c=-1<e?c+(l.substring(e+1)+","+l.substring(0,e)):c+(l+","+l);k<b.length-1&&(c+=",")});return c},_compareXFAItemsWithGuideItems:function(b,c){var e=!0;b.length!==c.length&&(e=!1);if(e){var l=this.bindNode;f.each(c,function(k,h,p){-1<k.indexOf("\x3d")?l.getSaveItem(h)+"\x3d"+l.getDisplayItem(h)==k&&(e=!1):l.getSaveItem(h)+
"\x3d"+l.getDisplayItem(h)==k+"\x3d"+k&&(e=!1)})}return e},syncXFAProps:function(){this.bindNode&&f.each(this._guide()._guideSchema.getAttributes(this.className),function(b,c){var e=b.xfaProp,l=(e||"").split("."),k=0<l.length?l[l.length-1]:void 0;if(k&&(-1==a.indexOf(c)||!f.isUndefined(this.jsonModel[c]))){l=l.splice(0,l.length-1);l=f.reduce(l,function(t,m){if(f.isObject(t))return t[m]},this.bindNode);b=this.getGuideProp(c,b);var h=this._guide()._guideSchema.getConvertor(c);b=h?h.guideToXfa.apply(this,
[b]):b;try{if(l){var p=l[k];if(void 0!==b)if("items"===k){if(!this._compareXFAItemsWithGuideItems(l,b)){var q=this._getXFAOptionStringFromGuideItems(b);""!==q?l.setItems(q,2):l.clearItems()}}else b!==p&&(l[k]=b)}}catch(t){this.logger().error("AF","setting {0}(guide {1}) for {2} is not supported in xfa",[e,c,this.bindNode.somExpression]),t.stack&&this.logger().error("AF",t.stack)}}},this)},prepare:function(){},nakedChildReferences:function(b,c){},getNaked:function(b,c,e){var l=this.getAttribute("name"),
k=c._private["_"+l+"_"],h=c._isOverriden&&!c._isOverriden["_"+l+"_"],p=this.isGlobal&&(c===d.__runtime__||c===this._guide().runtime)&&c[l]instanceof d.model.AbstractField;if(e&&1===e._nameArray[l]||b===this.index)if(null===k||void 0===k||h||p)d.util.GuideUtil._createGetterSetter(c,l,this),!0===h&&(c._isOverriden["_"+l+"_"]=!0)},_getReducedJSON:function(){var b={};d.model.util.CommonUtils.returnMinimalJSON(["name","templateId","_value","guideNodeClass"],b,this);return b},_getNakedThis:function(){return this},
_xfa:function(){return window.xfalib?window.xfalib.runtime.xfa:null},_guide:function(){return this.options._guideContainer},playJson:function(b){},visit:function(b,c){b.apply(c,[this])},_collectValues:function(b){},_setParentAccess:function(b){},_unloadModel:function(){this.trigger(d.event.GuideModelEvent.OBJECT_DESTROYED,d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.OBJECT_DESTROYED,this,"destroy",null,this));this._guide()._modelTemplateCacheStore.removeModel(this.id);this.off();!f.isObject(d.__runtime__[this.name])||
d.__runtime__[this.name]!==this&&d.__runtime__[this.name].somExpression!==this.somExpression||(d.__runtime__[this.name]=void 0,f.isObject(d.__runtime__._private["_"+this.name+"_"])&&(d.__runtime__._private["_"+this.name+"_"]=void 0));!f.isObject(this._guide().runtime[this.name])||this._guide().runtime[this.name]!==this&&this._guide().runtime[this.name].somExpression!==this.somExpression||(this._guide().runtime[this.name]=void 0,f.isObject(this._guide().runtime._private["_"+this.name+"_"])&&(this._guide().runtime._private["_"+
this.name+"_"]=void 0))},_triggerEvent:function(b,c,e,l){this.trigger(b,d.event.GuideModelEvent.createEvent(b,this,c,e,l))},dispatchEvent:function(b,c){this._triggerEvent(b,c);null!==this.parent&&this.parent.dispatchEvent(b,c)},setAttribute:function(b,c){if(this.jsonModel[c]!==b){var e=this.jsonModel[c];this.jsonModel[c]=b;this._triggerEvent(d.event.GuideModelEvent.MODEL_CHANGED,c,e,b)}},_getSomExpression:function(){return null==this.parent?"guide[0]."+this._escapeQualifiedName():this.parent.somExpression+
"."+this._escapeQualifiedName()},_escapeQualifiedName:function(){return(this.getAttribute("name")+"["+this._index+"]").replace(/\./,"\\.")},getGuideProp:function(b,c){b=this.getOrElse(this.jsonModel,b,c["default"]);if(void 0!==b)return d.model.GuideSchema.prototype.getTypedValue(c.type,b)},getXFAProp:function(b,c){c=c.xfaProp;b=d.model.GuideSchema.prototype.getConvertor(b);if(this.bindNode&&void 0!==c&&(c=this.bindNode.getOrElse(this.bindNode,c,void 0),b&&(c=b.xfaToGuide.apply(this,[c])),void 0!==
c))return c},getAttribute:function(b){var c=d.model.GuideSchema.prototype.getAttributeProps(this.className,b),e=c.priority||(void 0!==c.xfaProp?"XFA":"Guide"),l=this["get"+e+"Prop"].apply(this,[b,c]);void 0===l&&(l=this["get"+g[e]+"Prop"].apply(this,[b,c]));return l},resetData:function(){}})).defineProps({name:{get:function(){return(this.getAttribute("name")||"").replace(/\s+/g,"")}},templateId:{get:function(){return this.getAttribute("templateId")}},id:{get:function(){return this.getAttribute("id")||
this.templateId}},somExpression:{get:function(){return this._getSomExpression()}},title:{get:function(){return this.getAttribute("jcr:title")}},nonLocalizedTitle:{get:function(){return this.getAttribute("nonLocalizedTitle")}},panel:{get:function(){return this.parent.panel}},viewVisited:{get:function(){return this.getAttribute("viewVisited")},set:function(b){this.setAttribute(b,"viewVisited")}},index:{get:function(){return this._index}},visible:{get:function(){return!0},set:function(b){}},enabled:{get:function(){return!0},
set:function(b){}},cssClassName:{get:function(){return this.getAttribute("css")}},enableLayoutOptimization:{get:function(){return!1}},jcrPath:{get:function(){return this.jsonModel["jcr:path"]}},targetVersion:{get:function(){return this.getAttribute("fd:targetVersion")}}})})(_,guidelib);
(function(f,d){var g=d.model.Esign=d.model.GuideNode.extend({msClassName:"esign",initialize:function(){g._super.initialize.call(this);this.validationStatus=!0},validate:function(a){var b=!0;void 0!==FD.AFaddon.Signing&&null!==FD.AFaddon.Signing&&((b=FD.AFaddon.Signing.isDocumentSigned(this.jsonModel.signingService))||a.push({som:this.somExpression,errorText:"Signing not complete."}));return this.validationStatus=b}});g.defineProps({forceElementFocusChange:{get:function(){return!0}}})})(_,guidelib);
(function(f,d,g){var a=d.model.Verify=d.model.GuideNode.extend({msClassName:"verify",initialize:function(){a._super.initialize.call(this);this.validationStatus=!0},validate:function(b){var c=null,e=!0;void 0!==this.jsonModel.interactive&&"true"===this.jsonModel.interactive&&("client"===guideBridge.hostName&&(c=g("#verifiable_form").get(0).contentWindow.formBridge),void 0!==c&&null!==c&&((e=c.validateForm())||b.push({som:this.somExpression,errorText:"XFA validation errors."}),this.validationStatus=
e));return e}});a.defineProps({forceElementFocusChange:{get:function(){return!0}}})})(_,guidelib,$);
(function(f,d,g){var a=g.model.Scriptable=g.model.GuideNode.extend({msClassName:"scriptable",initialize:function(){a._super.initialize.call(this);this.className=this.jsonModel.guideNodeClass||this.msClassName;this._compiledExpressions={};this._compiledScripts={};this.mActiveEvents=[];this.dependants=[];this.initScript&&(this._isInitScriptExecuted=!1);this._collectExpressions()},_postInitialize:function(){if(this._isXfaNode()&&(this.bindNode=this.options.bindNode||this._getBindNode()))this.bindNode.on(d.script.XfaModelEvent.FORM_MODEL_CHANGED,
this);this._parentAccess=this.getOrElse(this,"parent.enabled",!0)},_unloadModel:function(){this._isXfaNode&&this._isXfaNode()&&this.bindNode&&this.bindNode.off(d.script.XfaModelEvent.FORM_MODEL_CHANGED,this);a._super._unloadModel.call(this)},_collectExpressions:function(){this.visibleExp&&(this._compiledExpressions.visibleExp=this._compileExpression(this.visibleExp,"visible"));this.enabledExp&&(this._compiledExpressions.enabledExp=this._compileExpression(this.enabledExp,"enabled"));this.initScript&&
(this._compiledScripts.initScript=this._compileExpression(this.initScript,null))},_compileExpression:function(b,c){if(b)try{var e=c?'with(this) {\n\t with(guidelib.__runtime__) {\n\t with(this._guide().runtime) {\n\t\t var _guide_result \x3d this[${affectedProp}] \x3d eval("${expression}");\n\t\t return _guide_result ;\n\t }\n}};'.replace(/\${affectedProp}/g,'"'+c+'"').replace(/\${expression}/g,b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/(?:\r\n|\r|\n)/g," ")):'with(this) {\n\t with(guidelib.__runtime__) {\n\t with(this._guide().runtime) {\n\t var result \x3d eval("${expression}");\n\t\t return result; \n\t }\n}}'.replace(/\${expression}/g,
b.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/(?:\r\n|\r|\n)/g," "));return new Function(e)}catch(l){this.logger().error("AF","Error in compiling expression:"+b)}return null},_isXfaNode:function(){return this._xfa()&&0===this.getOrElse(this,"jsonModel.bindRef","").indexOf("xfa[0].form[0].")},_xfa:function(){return this.getOrElse(window,"xfalib.runtime.xfa",null)},prepare:function(){a._super.prepare.apply(this);this.initScript&&!this._isInitScriptExecuted&&(this.executeExpression("initScript"),
this._isInitScriptExecuted=!0);var b=f.keys(this._compiledExpressions);this._guide().queueExpressions(this,b)},handleEvent:function(b){if(b instanceof d.script.XfaModelEvent)switch(b.name){case d.script.XfaModelEvent.FORM_MODEL_CHANGED:this._handleXfaModelChanged(b)}else b instanceof g.event.GuideModelEvent&&this.handleGuideEvent(b)},handleGuideEvent:function(b){},executeExpression:function(b,c){var e=this._guide();this._isXfaNode()&&this.bindNode instanceof d.script.EventContainerNode&&null!==g.util.GuideUtil.xfaExprMap[b]&&
this.bindNode.execEvent(g.util.GuideUtil.xfaExprMap[b]||b,c);if(f.isUndefined(this._compiledExpressions[b])&&f.isUndefined(this._compiledScripts[b]))return e._currentContext?this.logger().log("AF","executeExpression called withing from another executeExpression. Should NEVER happen "):e.runPendingExpressions(),!0;if(!this.mActiveEvents[b]){this.mActiveEvents[b]=!0;var l=e._currentContext;e._currentContext={contextNode:this,expression:b,managedExp:this._compiledExpressions[b]?!0:!1};this._setExpressionContext(this,
this.index);e.runtime.$event={name:b,target:this,data:c};c=this._expressionHandler(b);this.mActiveEvents[b]=!1;(e._currentContext=l)&&l.contextNode&&l.contextNode._setExpressionContext(l.contextNode,l.contextNode.index);e.runtime.$event=null;e.runPendingExpressions();return c}},_setExpressionContext:function(b,c){function e(k){return g.util.GuideUtil.commonPrefixLen(l,k.somExpression)}var l=this.somExpression;this._guide().internal.liveModel&&f.each(this._guide().internal.liveModel.getCrossFragmentFields(),
function(k,h){var p;var q=this._guide().internal.liveModel.getAllFieldModels(f.keys(k));f.isEmpty(q)||(p=f.max(q,e));g.util.GuideUtil._createGetterSetter(g.__runtime__,h,p||k[f.keys(k)[0]]);g.util.GuideUtil._createGetterSetter(this._guide().runtime,h,p||k[f.keys(k)[0]])},this);this._guide().runtime._isOverriden={};for(g.__runtime__._isOverriden={};b;)b.nakedChildReferences(c,g.__runtime__),b.nakedChildReferences(c,this._guide().runtime),c=b.index,b=b.parent},_expressionHandler:function(b){if(this._compiledExpressions[b]){var c=
this._compiledExpressions[b];try{var e=c.apply(this)}catch(l){this.logger().error("AF","Error in compiling expression:"+this.name+":"+b+":"+l.stack)}}else if(this._compiledScripts[b]){c=this._compiledScripts[b];try{return c.apply(this)}catch(l){this.logger().error("AF","Error in compiling expression:"+this.name+":"+b+":"+l.stack)}}return e},_handleXfaModelChanged:function(b){"presence"==b._property?this._triggerEvent(g.event.GuideModelEvent.MODEL_CHANGED,"visible",b.prevText,"visible"==b.newText):
"access"==b._property&&this.trigger(g.event.GuideModelEvent.MODEL_CHANGED,g.event.GuideModelEvent.createEvent(g.event.GuideModelEvent.MODEL_CHANGED,this,"enabled","open"==b.prevText,"open"==b.newText))},_getScreenReaderText:function(b){var c,e=this._getAssistPriority();"custom"==e?c=this._getCustomAssist(b)||this._getToolTip(b)||this._getCaption(b)||this._getName(b):"shortDescription"==e?c=this._getToolTip(b)||this._getCaption(b)||this._getName(b):"label"==e?c=this._getCaption(b)||this._getName(b):
"name"==e&&(c=this._getName(b));return c},_getAssistPriority:function(){return this.getAttribute("assistPriority")||"custom"},_getCustomAssist:function(){if(this.bindNode&&this.bindNode.assist&&this.bindNode.assist.speak&&this.bindNode.assist.speak.value)var b=this.bindNode.assist.speak.value;else this.jsonModel.custom&&(b=this.jsonModel.custom);return b},_getToolTip:function(){return this.shortDescription},_getCaption:function(){return this.getAttribute("jcr:title")},_getName:function(b){return this.getAttribute("name")},
_getBindNode:function(){var b=this.getAttribute("bindRef");if(!b)return null;var c=null,e=this.parent?this.parent._bindParent():null;if(e){var l=e.getAttribute("bindRef");b.substring(0,l.length)==l&&(c=b.substring(l.length+1),c=e.bindNode.resolveNode(c))}!c&&this._isXfaNode()&&(c=this._xfa().resolveNode(b));return c},_bindParent:function(){return this.bindNode?this:this.parent?this.parent._bindParent():null},_getEnabled:function(){return this.bindNode?"open"==this.bindNode.access:this.getAttribute("enabled")&&
this._parentAccess},_setEnabled:function(b){if(this.bindNode){var c=this._guide()._guideSchema.getConvertor("enabled");c&&(this.bindNode.access=c.guideToXfa.apply(this,[b]))}else this.getAttribute("enabled")!==b&&(c=this.getAttribute("enabled"),this.setAttribute(b,"enabled"),this.trigger(g.event.GuideModelEvent.MODEL_CHANGED,g.event.GuideModelEvent.createEvent(g.event.GuideModelEvent.MODEL_CHANGED,this,"enabled",c,this.jsonModel.enabled)),this._triggerOnBridge("elementEnableChanged",this,"enablement",
c,this.jsonModel.enabled))},_setParentAccess:function(b){var c=this._parentAccess;this._parentAccess=b;this.trigger(g.event.GuideModelEvent.MODEL_CHANGED,g.event.GuideModelEvent.createEvent(g.event.GuideModelEvent.MODEL_CHANGED,this,"enabled",c,this.enabled))},_addStateOverride:function(b,c){if(null!==b&&f.isString(b)&&null!==c){var e=this.somExpression;e=e.substring(this._guide().somExpression.length+1);this.jsonModel.stateOverrides=this.jsonModel.stateOverrides||{somExpr:e};this.jsonModel.stateOverrides[b]=
c;this._guide()._addToStateOverrideMap(this.id+this.name,this.jsonModel.stateOverrides)}}});a.defineProps({shortDescription:{get:function(){return this.getAttribute("shortDescription")}},longDescription:{get:function(){return this.getAttribute("longDescription")}},visibleExp:{get:function(){return this.getAttribute("visibleExp")}},initScript:{get:function(){return this.jsonModel.initScript}},enabledExp:{get:function(){return this.getAttribute("enabledExp")}},visible:{get:function(){return this.getAttribute("visible")},
set:function(b){if(this.bindNode)this.bindNode.presence=1==b?"visible":"hidden";else if(this.getAttribute("visible")!==b){var c=this.getAttribute("visible");this.setAttribute(b,"visible");null!==this.getAttribute("dorExclusion")&&("true"===this._guide().getAttribute("excludeFromDoRIfHidden")||this._guide().print&&"true"===this._guide().print.excludeFromDoRIfHidden)&&(this.dorExclusion=!b);this.trigger(g.event.GuideModelEvent.MODEL_CHANGED,g.event.GuideModelEvent.createEvent(g.event.GuideModelEvent.MODEL_CHANGED,
this,"visible",c,this.jsonModel.visible));this._triggerOnBridge("elementVisibleChanged",this,"visible",c,this.jsonModel.visible)}}},dorExclusion:{get:function(){return null!=this.jsonModel.dorExclusion?f.isString(this.jsonModel.dorExclusion)?"true"===this.jsonModel.dorExclusion:this.jsonModel.dorExclusion:"true"===this._guide().getAttribute("excludeFromDoRIfHidden")||this._guide().print&&"true"===this._guide().print.excludeFromDoRIfHidden?!this.visible:!1},set:function(b){var c=this.somExpression;
c=c.substring(this._guide().somExpression.length+1);this._guide()._addToExcludeFromDorMap(c,b);this.jsonModel.dorExclusion=b}},stateOverrides:{get:function(){return this.jsonModel.stateOverrides}},enabled:{get:function(){return this._getEnabled()},set:function(b){this._setEnabled(!!b)}},bindRef:{get:function(){return(this.getAttribute("bindRef")||"").replace(/\s+/g,"")}},isXsd:{get:function(){return f.isString(guideBridge._guide.xsdRef)&&!f.isEmpty(this.bindRef)&&"/"===this.bindRef[0]}}})})(_,window.xfalib,
guidelib);(function(f,d){(d.model.GuideImage=d.model.Scriptable.extend({msClassName:"guideImage"})).defineProps({value:{get:function(){return this.bindNode?this.bindNode.rawValue:null}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideAdModule=d.model.Scriptable.extend({msClassName:"guideAdModule",initialize:function(){g._super.initialize.call(this);this.jsonModel["{default}"]=this.getOrElse(this.jsonModel,"{default}",this.jsonModel._value);this.layoutConfigs=[];"string"===typeof this.jsonModel.layoutConfig?this.layoutConfigs.push(JSON.parse(this.jsonModel.layoutConfig)):f.each(this.jsonModel.layoutConfig,function(a){this.layoutConfigs.push(JSON.parse(a))},this)},_getTypedValue:function(a){return f.isUndefined(a)||
null===a||""===a?null:a+""},playJson:function(a){var b=this.jsonModel._value;this.jsonModel._value=a._value;this._triggerOnBridge("elementValueChanged",this,"value",b,this.jsonModel._value)}});g.defineProps({value:{get:function(){return this._getTypedValue(this.jsonModel._value)},set:function(a){var b=this._getTypedValue(this.jsonModel._value),c=this._getTypedValue(a);void 0!==c&&c!==b&&(this.jsonModel._value!==a&&(this.jsonModel._value=c||""),this._triggerOnBridge("elementValueChanged",this,"value",
b,c))}}})})(_,guidelib);
(function(f,d){var g=[],a={};g=null!==navigator.userAgent.match(/iPad/i);var b=null!==navigator.userAgent.match(/iPhone/i)||null!==navigator.userAgent.match(/iPod/i),c=g||b;g=[{name:"desktop",width:Infinity},{name:"tablet-landscape",width:1024},{name:"tablet-potrait",width:768},{name:"mobile-landscape",width:480},{name:"mobile-potrait",width:320}];a={breakpoints:g,controlRowDetails:{renderer:function(h,p){var q=null;h.options.bControlRowHiddenCells?q=p.$tableRowElement.find("td:hidden"):(q=p.$tableRowElement.find("td"),
h.options.bDisableControlRowCells&&p.$tableRowElement.find("input, select, textarea, button").attr("disabled","disabled"));q=q.map(function(t,m){m=d(m);t=h.header(m);m={row:p.$tableRowElement.index(),column:m.index()};var r=h._getCellData(m);return d("\x3cli\x3e\x3c/li\x3e").attr("data-rtp-index",m.column).addClass("clearfix").append(d("\x3cdiv\x3e\x3c/div\x3e").addClass("rtp-title").text(d.trim(t.text()))).append(d("\x3cdiv\x3e\x3c/div\x3e").addClass("rtp-data").append(r))});return d('\x3cul data-rtp-index\x3d"'+
p.index+'"\x3e\x3c/ul\x3e').append(q.get())},target:0,type:"inline"}};var e=function(h,p){this.options=p;this.$element=d(h);this.columns=[]},l=function(h,p,q){var t=h.find("th").eq(p);this.minWidth=q?parseInt(t.css("min-width"),10):t.outerWidth();this.header=t;this.colIndex=p;this.$tableElement=h};l.prototype={cells:function(){var h=this.header.attr("id");return this.$tableElement.find("tr td").filter(function(){var p=d(this).attr("headers");if(p&&-1<p.indexOf(h))return d(this)})},visible:function(h){var p=
this.cells();this.isVisible=h;if(!0===h)p.show(),this.header.show();else{this.header.hide();var q=this.header.prevAll().filter(":visible").length;d.each(p,function(){d(this).data("shown")||d(this).hide();if(1<(d(this).data("colspan")||d(this).attr("colspan"))){var t=0;d(this).prevAll().each(function(){t+=+(d(this).data("colspan")||d(this).attr("colspan"))});0==t?(d(this).show(),d(this).data("shown",!0),null==d(this).data("colspan")&&d(this).data("colspan",d(this).attr("colspan")),d(this).attr("colspan",
q)):t<q&&(d(this).show(),d(this).data("shown",!0),null==d(this).data("colspan")&&d(this).data("colspan",d(this).attr("colspan")),d(this).attr("colspan",q-t))}})}}};var k=function(h){this.$tableRowElement=h;this.index=h.index();this.child={$element:null,isShown:!1};h.data("tableRow",this)};k.prototype={updateChild:function(h,p){this.child.$element&&0<this.child.$element.length?(this.child.$element.empty(),this.child.$element.append(d("\x3ctd\x3e\x3c/td\x3e").addClass(e.prototype.defaults.CONTROL_ROW_CLASS).attr("colspan",
p).append(d(h)))):0<this.$tableRowElement.next(e.prototype.defaults.CONTROL_ROW_SELECTOR).length?(this.child.$element=this.$tableRowElement.next(),this.child.$element.append(d("\x3ctd\x3e\x3c/td\x3e").addClass(e.prototype.defaults.CONTROL_ROW_CLASS).attr("colspan",p).append(d(h)))):(this.child.$element=d("\x3ctr\x3e\x3c/tr\x3e").addClass(e.prototype.defaults.CONTROL_ROW_CLASS).append(d("\x3ctd\x3e\x3c/td\x3e").addClass(e.prototype.defaults.CONTROL_ROW_CLASS).attr("colspan",p).append(d(h))),this.$tableRowElement.after(this.child.$element))},
showChild:function(){this.child.$element.get(0).style.display="";this.child.isShown=!0},hideChild:function(){this.child.$element.hide();this.child.isShown=!1}};e.prototype={_getCellData:function(h){h=this.$element.find("tbody tr").eq(h.row).find("td").eq(h.column);return this.options.viewCallback?(h=h.find(e.prototype.defaults.GUIDE_ID_SELECTOR).attr("id"),this.options.viewCallback(h)):h.html()},header:function(h){h=h.attr("headers").split(" ")[0];return this.$element.find("#"+h)},initializeColumns:function(h){var p=
[];this.colLength=this.$element.find("th").length;for(var q=0;q<this.colLength;q++)p.push(new l(this.$element,q,h));return p},_initializeColumnWidth:function(){var h=this._getColumnsVisibility(),p=f.filter(h,function(v){return 1==v}).length,q=this.$element.find("th"),t=null,m=null,r=0;if(this.options.bAutoWidth)r=p;else for(var u=0;u<p;u++)r+=parseInt(this.options.aWidth[u],10);if(h.length==this.colLength)for(u=0;u<p;u++)m=this.options.aWidth?Math.floor(100*this.options.aWidth[u]/r)+"%":Math.floor(100/
r)+"%",t=q.eq(u),t[0].style.width=m},_constructor:function(){var h=this;this.controlRow=d.extend(!0,{},a);this.columns=this.initializeColumns();d(window).on("resize orientationchange",function(p){h._initializeColumnVisibility(p)});this.controlRow.breakpoints.sort(function(p,q){return p.width<q.width?1:p.width>q.width?-1:0});this._initializeColumnVisibility();this._controlRowInitialization()},_initializeColumnVisibility:function(h){var p=this;h&&(this.$element.find("td").each(function(){d(this).removeData("shown");
null!=d(this).data("colspan")&&d(this).attr("colspan",d(this).data("colspan"))}),this.columns=this.initializeColumns(h));this._initializeColumnWidth();this.display=this._resize();this.$element.find("tbody tr:not(.child)").each(function(){0==d(this).next(e.prototype.defaults.CONTROL_ROW_SELECTOR).length&&d(this).after(d("\x3ctr\x3e\x3c/tr\x3e").addClass(e.prototype.defaults.CONTROL_ROW_CLASS).hide())});var q=this.controlRow.controlRowDetails;q.type&&(this._controlRowVisibility(h),this.$element.on(e.prototype.defaults.EVENT_COLUMN_VISIBILITY,
function(){p._controlRowVisibility()}),this.$element.addClass("rtp-"+q.type));this.options.fixTableControls&&(f.isUndefined(h)||"orientationchange"===h.type||"resize"===h.type&&!c)&&this.options.fixTableControls(h)},_fixControlRows:function(){this.$element.find(e.prototype.defaults.CONTROL_ROW_SELECTOR).remove()},isColumnHidden:function(){return this.bColumnHidden||!1},_rearrangeTableRuntimeControls:function(h,p){p=this.$element.find(".guideTableRuntimeControls .guideTableRuntimeAddControl");var q=
0;p.each(function(){if(d(this).is(":visible"))return q=d(this).closest("td").index(),!1});q<=h&&p.each(function(){var t=d(this).closest(".guideTableRuntimeControls"),m=d(this).closest("tr");t.hasClass("guideTableRuntimeRightControls")&&(t.appendTo(m.find("td").eq(h)),q!==h&&(t=t.prev(),t.css("display","block"),t.css("float","none")))})},_controlRowVisibility:function(h){var p=f.filter(this.columns,function(q){return!0!==q.isVisible});this._rearrangeTableRuntimeControls(this.columns.length-p.length-
1,h);p&&0<p.length?(this.$element.addClass("collapsed"),this.bColumnHidden=!0):(this.$element.removeClass("collapsed"),this.bColumnHidden=!1)},_controlRowInitialization:function(){var h=this,p=this.controlRow.controlRowDetails;"inline"===p.type&&(p.target="."+(this.options.tableRuntimeEditControlClass||"tableRuntimeEditControl"));p=p.target;this.$element.on("click keypress","string"===typeof p?p:"td",function(q){if(("keypress"==q.type&&13==q.keyCode||"click"==q.type)&&h.$element.hasClass("collapsed")){var t=
d(this).closest("tr");q=t.data("tableRow");if(null==q||0===q.child.$element.parent().length)q=new k(t),t.data("tableRow",q);q.child.isShown?(q.hideChild(),q.$tableRowElement.removeClass("parent")):(t=h.controlRow.controlRowDetails.renderer(h,q),q.updateChild(t,h.colLength),q.showChild(),q.$tableRowElement.addClass("parent"),q.child.$element.find("input, select, textarea, button").eq(0).focus())}})},_resize:function(){for(var h=d(window).width(),p=this.controlRow.breakpoints,q=p[0].name,t=p.length-
1;0<=t;t--)if(h<=p[t].width){q=p[t].name;break}var m=this._getColumnsVisibility(q);f.each(this.columns,function(r,u){r.visible(m[u])});return m},_getColumnsVisibility:function(h){h=this.columns;this.$element.find("th");var p=[],q=this.$element.parent().outerWidth();p=f.map(h,function(t){q-=t.minWidth;return 0>q?!1:!0});p[0]=!0;return p}};d.fn.responsiveTablePlugin=function(h,p){var q="",t=this.each(function(){if(!0===d(this).is("table")){var m=d(this),r=m.data("responsiveTablePlugin"),u=d.extend({},
e.prototype.defaults,"object"===typeof h&&h);r||(m.data("responsiveTablePlugin",r=new e(this,u)),r._constructor());"string"===typeof h&&(q=r[h](p))}});return""!=q?q:t};e.prototype.defaults={EVENT_COLUMN_VISIBILITY:"responsiveTablePlugin.columnVisibility",GUIDE_ID_SELECTOR:"div[data-guide-view-bind]",CONTROL_ROW_CLASS:"child",CONTROL_ROW_SELECTOR:"tr.child"}})(_,$);
(function(f,d,g){var a=function(c,e){if(d.isUndefined(c)||null===c)return[];d.isArray(c)||(c=[c]);return d.filter(c,function(l){return l instanceof g.model.GuidePanel&&l[e]instanceof g.model.GuideNumericBox})},b=function(c,e){return d.reduce(c,function(l,k){k=parseFloat(k.getOrElse(k,e+".value",0));isNaN(k)&&(k=0);return l+k},0)};g.__runtime__.af.sum=function(c,e){return b(a(c,e),e)};g.__runtime__.af.avg=function(c,e){c=a(c,e);e=b(c,e);return 0===c.length?0:e/c.length};g.__runtime__.af.max=function(c,
e){c=d.max(a(c,e),function(l){return l.getOrElse(l,e+".value",Number.NEGATIVE_INFINITY)});return c instanceof g.model.GuidePanel?c[e]:null};g.__runtime__.af.min=function(c,e){c=d.min(a(c,e),function(l){return l.getOrElse(l,e+".value",Number.POSITIVE_INFINITY)});return c instanceof g.model.GuidePanel?c[e]:null}})($,_,guidelib);
(function(f,d){(d.model.GuideProgressiveSection=xfalib.ut.EventClass.extend({msClassName:"guideProgressiveSection",initialize:function(){this.jsonModel=this.options.jsonModel;this.instanceIndex=this.options.instanceIndex;this.instance=this.options.instance;this.parent=this.options.parent;this._currActivePart=0;this.className=this.jsonModel.guideNodeClass||this.msClassName;this._parts=[];this.initializeChildren()},_getChildModelFromId:function(g){return this.childIdToModel[g]},initializeChildren:function(){var g=
this,a=this.jsonModel.fields;this.children=this.children||[];this.childIdToModel=this.childIdToModel||{};f.each(a,function(b){var c=guideBridge._resolveId(b.id);g.children.push(c);g.childIdToModel[b.id]=c})},setFocus:function(){this._triggerEvent(d.event.GuideModelEvent.NAVIGATE_SECTION,"navigateWithinSection",null,null)},_triggerEvent:function(g,a,b,c){d.model.GuideNode.prototype._triggerEvent.apply(this,arguments)},playJson:function(g){this.jsonModel=f.extend({},g)}})).defineProps({sectionId:{get:function(){return this.jsonModel.id}},
activePart:{get:function(){return this._parts[this._currActivePart]}},isLastPart:{get:function(){return this._currActivePart===this._parts.length-1}},isFirstPart:{get:function(){return 0===this._currActivePart}},currentActivePart:{set:function(g){this._currActivePart=g},get:function(){return this._currActivePart}},sectionTitle:{get:function(){return this.jsonModel.title}},sectionName:{get:function(){return this.jsonModel.name}},sectionFields:{get:function(){return this.jsonModel.fields}},fetchedFromService:{get:function(){return"true"===
this.jsonModel.fetchedFromService}},repeatablePanelPath:{get:function(){return this.jsonModel.repeatablePanelPath}},repeatablePanelId:{get:function(){return this.jsonModel.repeatablePanelId}}})})(_,guidelib);
(function(f,d){(d.model.GuideProgressiveCompletionSection=d.model.GuideProgressiveSection.extend({msClassName:"guideProgressiveCompletionSection"})).defineProps({sectionId:{get:function(){return this.jsonModel.id}},sectionTitle:{get:function(){return this.jsonModel.completionTitle}},completionScript:{get:function(){return this.jsonModel.completionScript}},completionBeforeMessage:{get:function(){return this.jsonModel.completionBeforeMessage}},completionAfterMessage:{get:function(){return this.jsonModel.completionAfterMessage}},
completionSuccessScript:{get:function(){return this.jsonModel.completionSuccessScript}},completionFailureScript:{get:function(){return this.jsonModel.completionFailureScript}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideProgressiveRepeatableSectionManager=d.model.GuideProgressiveSection.extend({msClassName:"guideProgressiveRepeatableSectionManager",initialize:function(){g._super.initialize.apply(this,arguments);this.isRepeatable=!0;this._instances=this._instances||[];this._initializeRepeatability()},_getSectionFromPanelId:function(a){return f.find(this._instances,function(b){return b.instance.id===a.id})},insertInstance:function(a){var b=this.instanceManager.insertInstance(a);null!=
b&&(b=this._getSection(b),null!=b&&(this._instances.splice(a,0,b),d.runtime.progressive.addRepeatable(b)))},removeInstance:function(a){var b=a.id;a=a.instanceIndex;-1<a&&this.instanceManager.instanceCount>this.instanceManager.minOccur&&a<this.instanceManager.instanceCount&&(this.instanceManager.removeInstance(a),this._instances.splice(a,1),d.runtime.progressive.deleteRepeatable(b))},_getSection:function(a){var b=null,c={},e=a.id,l=a.templateId,k=null;e!==l?(k=e.substring(0,e.indexOf(l)-2),this.copyObject(this.jsonModel,
c,{transformMaps:{id:function(h,p,q){return q.guideNodeClass&&-1!==q.guideNodeClass.indexOf("Progressive")?h:k+"__"+h}}})):c=f.extend({},this.jsonModel);null!=a&&(b=new d.model.GuideProgressiveSection({jsonModel:c,instanceIndex:a.instanceIndex,parent:this,instance:this.instanceManager.instances[a.instanceIndex]}));return b},_initializeRepeatability:function(){var a=guideBridge._resolveId(this.repeatablePanelId),b=this;this.activeInstanceIndex=0;this.instanceManager=null==a?guideBridge._resolveId("im_"+
this.repeatablePanelId):a.instanceManager;null!=this.instanceManager&&this.instanceManager.instances&&0<this.instanceManager.instances.length&&f.each(this.instanceManager.instances,function(c){b._instances.push(b._getSection(c))})},_getChildModelFromId:function(a){return this.childIdToModel[a]},initializeChildren:function(){var a=this;this.children=this.children||[];this.childIdToModel=this.childIdToModel||{};f.each(this.jsonModel.fields,function(b){var c=guideBridge._resolveId(b.id);a.children.push(c);
a.childIdToModel[b.id]=c})},setFocus:function(){this._triggerEvent(d.event.GuideModelEvent.NAVIGATE_SECTION,"navigateWithinSection",null,null)},playJson:function(a){this.jsonModel=f.extend({},a)}});g.defineProps({activeInstance:{set:function(a){this.activeInstanceIndex=guideBridge._resolveId(a).instanceIndex},get:function(){return this._instances[this.activeInstanceIndex]}}})})(_,guidelib);
(function(f,d,g){g.__runtime__.af.reduce=function(a,b,c,e,l){d.isArray(a)||(a=[a]);return d.reduce(a,function(k,h){return h instanceof g.model.GuidePanel&&!d.isUndefined(h[b])&&d.isFunction(c)?c.apply(l,[k,h,h[b]]):k},e)};g.__runtime__.af.filter=function(a,b,c,e){d.isArray(a)||(a=[a]);return d.map(d.filter(a,function(l){if(l instanceof g.model.GuidePanel&&!d.isUndefined(l[b]))return d.isFunction(c)?c.apply(e,[l,l[b]]):!1}),function(l){return l[b]})};g.__runtime__.af.formatDateToISOString=function(a){if(!d.isUndefined(a)&&
d.isObject(a)){var b=a.getDate().toString();var c=(a.getMonth()+1).toString();a=a.getFullYear().toString();1===c.length&&(c="0"+c.toString());return a+"-"+c+"-"+b}}})($,_,guidelib);
(function(f,d){var g=d.model.util.GuideNavigationContext=xfalib.ut.Class.extend({msClassName:"guideNavigationContext",initialize:function(){g._super.initialize.call(this);this._currentItem=this.options.currentItem;this._parentPanel=this.options.parentPanel;this.guideUtil=d.util.GuideUtil},getQualifiedNamedItem:function(a){var b=this._getNavigableItems();return f.find(b,function(c){return c._escapeQualifiedName()==a},this)},getItemForNav:function(a){return"prevItem"==a||"nextItem"==a||"firstItem"==
a||"lastItem"==a?this[a]:this.getQualifiedNamedItem(a)},_isNavigableItem:function(a){return a.visible},_isNavigablePanel:function(a){if(a&&a instanceof d.model.GuidePanel)return a.visible&&a.isNavigable},_getNavigableItems:function(){return f.filter(this._parentPanel.items,function(a){return this._isNavigableItem(a)},this)},_getNavigableDescendant:function(a){if(a&&a!=this._parentPanel){a=a.parent._navigationContext.currentItem;for(var b=null;a instanceof d.model.GuidePanel;)b=a,a=a._navigationContext.currentItem;
return b}return null},_getSomOnNavigableAncestor:function(a){if(f.isEmpty(a))return null;var b=a.lastIndexOf("."),c;var e=this._parentPanel._guide();return-1!==b?(b=a.substring(0,b),(e=e.resolveNode(b))&&(c=this._isNavigablePanel(e)),c?a:this._getSomOnNavigableAncestor(b)):e.rootPanel.somExpression},_getNavigableAncestor:function(a){var b=this._parentPanel._guide(),c=this._getSomOnNavigableAncestor(b._currentNavigablePanelSom);for(c=b.resolveNode(c);c&&c!=this._parentPanel&&!c.parent._navigationContext[a]&&
this.guideUtil.isChildPartOfContainer(this._parentPanel,c);)c=this._getSomOnNavigableAncestor(c.parent.somExpression),c=b.resolveNode(c);return c},_getNakedThis:function(){return this}});g.defineProps({currentItem:{get:function(){return this._currentItem?this._currentItem:this.firstItem},set:function(a){this._currentItem=a}},prevItem:{get:function(){var a=this._getNavigableItems(),b=this.currentItem;return 0<a.indexOf(b)?a[a.indexOf(b)-1]:null}},nextItem:{get:function(){var a=this._getNavigableItems(),
b=this.currentItem;return a.indexOf(b)<a.length-1?a[a.indexOf(b)+1]:null}},nextNavigablePanel:{get:function(){var a=this._getNavigableAncestor("nextItem");return this._getNavigableDescendant(a)}},prevNavigablePanel:{get:function(){var a=this._getNavigableAncestor("prevItem");return this._getNavigableDescendant(a)}},firstItem:{get:function(){return this._getNavigableItems()[0]||null}},lastItem:{get:function(){var a=this._getNavigableItems();return a.length?a[a.length-1]:null}},hasNextItem:{get:function(){return null!=
this.nextItem}},hasPrevItem:{get:function(){return null!=this.prevItem}},hasNextNavigablePanel:{get:function(){return null!=this.nextNavigablePanel}},hasPrevNavigablePanel:{get:function(){return null!=this.prevNavigablePanel}},isFirstItem:{get:function(){return this.currentItem==this.firstItem}},isLastItem:{get:function(){return this.currentItem==this.lastItem}}})})(_,guidelib);
(function(f,d){var g={},a=function(c){c=c.match(/AEM(\d+)(?:\.(\d+))?/);return null==c?null:{major:c[1],minor:void 0===c[2]?"0":c[2]}},b=function(c,e){if("string"!==typeof c||"string"!==typeof e)throw"Comparing Invalid Versions";c=a(c);e=a(e);if(null==c||null==e)throw"Comparing Invalid Versions";var l=+c.major-+e.major;return 0!==l?l:+c.minor-+e.minor};f=f.util.Version=xfalib.ut.Class.extend({initialize:function(c){g={};c=c.scriptingBehaviourVersion;"None"===c&&(c=this.current());this.scriptingBehaviourVersion=
c||"AEM6.5";c=a(this.scriptingBehaviourVersion);if(null==c)throw"Invalid Version number";this.major=c.major;this.minor=c.minor},current:function(){return"AEM6.5"},compatibleVersion:function(){return this.scriptingBehaviourVersion},isPrevious:function(c){return 0>b(this.scriptingBehaviourVersion,c)},isPreviousOrSame:function(c){c=b(this.scriptingBehaviourVersion,c);return 0>c||0==c},isAfter:function(c){return 0<b(this.scriptingBehaviourVersion,c)},isAfterOrSame:function(c){c=b(this.scriptingBehaviourVersion,
c);return 0<c||0==c},isSame:function(c){return 0==b(this.scriptingBehaviourVersion,c)},isOn:function(c){switch(c){case this.Flags.RUN_VALUE_COMMMIT_ON_SCRIPT_CHANGE:return void 0==g[c]&&(g[c]=this.isAfter(this.AEM_61)),g[c];case this.Flags.RUN_VALUE_COMMMIT_ON_PREFILL:return void 0==g[c]&&(g[c]=this.isAfter(this.AEM_63)),g[c]}throw"Invalid Flag";}});f.prototype.Flags={};Object.defineProperties(f.prototype.Flags,{RUN_VALUE_COMMMIT_ON_SCRIPT_CHANGE:{value:"manageValueCommit",writable:!1},RUN_VALUE_COMMMIT_ON_PREFILL:{value:"manageValueCommitOnPrefill",
writable:!1}});f.defineProps({AEM_61:{value:"AEM6.1",writable:!1},AEM_62:{value:"AEM6.2",writable:!1},AEM_63:{value:"AEM6.3",writable:!1},AEM_65:{value:"AEM6.5",writable:!1}})})(guidelib,$);
(function(f,d){d.model.mixin.ValidationsDisabled={normalProperties:{setParentValidationsDisabled:function(g){var a=this.validationsDisabled;this._bParentValidationsDisabled=g;this.handleChildValidationsDisabled(this.validationsDisabled,a)},handleChildValidationsDisabled:function(g,a){g!==a&&(this instanceof d.model.Field&&!0===g&&!1===this.validationState&&(this._errorText="",this.validationState=!0,this._triggerEvent(d.event.GuideModelEvent.ERROR_CHANGED,"validationStatus",this.validationState,this._errorText)),
f.each(this._children,function(b){(b instanceof d.model.Field||b instanceof d.model.GuideItemsContainer)&&b.setParentValidationsDisabled(g)}))}},propertyDescriptors:{validationsDisabled:{get:function(){return this._bParentValidationsDisabled||this._validationsDisabled},set:function(g){var a=this.validationsDisabled;this._validationsDisabled=g;this.handleChildValidationsDisabled(this.validationsDisabled,a)}}}}})(_,guidelib);
(function(f,d){var g=d.model.GuideItemsContainer=d.model.Scriptable.extend({msClassName:"guideItemsContainer",initialize:function(){g._super.initialize.call(this);this._children=[];this._nameArray={};this._private={};this._initChildren();this._normalizeChildren();this._validationsDisabled=this._bParentValidationsDisabled=!1},_postInitialize:function(){g._super._postInitialize.call(this);f.each(this._children,function(a){a._postInitialize()},this)},validate:function(a){var b=!0;if(!this.visible)return!0;
f.isUndefined(a)&&(a=[]);var c=[],e;f.each(this.children,function(k){l=k.validate(c);!1===l&&(b=!1)},this);var l=g._super.validate.call(this,c);!1===l&&(b=!1);for(e=c.length;0<e;)a[a.length]=c[c.length-e],e--;return b},prepare:function(){f.each(this._children,function(a){a.prepare()},this);g._super.prepare.call(this)},syncXFAProps:function(){g._super.syncXFAProps.apply(this,arguments);f.each(this._children,function(a){a.syncXFAProps()})},_initChildren:function(a){var b=[],c={},e=a=0;f.each(this.jsonModel.items,
function(l){l.templateId&&-1===l.templateId.indexOf("GUID")&&(c[l.templateId]=l)});a=f.keys(c).length;e=f.keys(this.jsonModel.items||{}).length;0<a&&a!==e&&(this.jsonModel.items=c);f.each(this.jsonModel.items,function(l){if(f.isObject(l)){var k={};this.options._guideContainer&&(k=f.extend({},k,{_guideContainer:this.options._guideContainer}));l=d.model.GuideModelRegistry.prototype.createModel(l,k);l._isItem=!0;this._initializeChild(l);b.push(l)}},this);this._children=b},_initializeChild:function(a){a.parent=
this},_normalizeChildren:function(){this._nameArray={};this._private={};f.each(this.children,function(a){a._index=this._addProperty(a);a.getNaked(a._index,d.__runtime__,null);a.getNaked(a._index,this._guide().runtime,null)},this)},nakedChildReferences:function(a,b){var c;for(c=0;c<this._children.length;c++){var e=this._children[c];e.getNaked(a,b,this)}},_getReducedJSON:function(a){var b=this,c=0;var e=g._super._getReducedJSON.call(this);e.items={};f.each(this.jsonModel.items,function(l,k){e.items[k]=
b.items[c]._getReducedJSON(a);c+=1});return e},_addProperty:function(a){var b=a.getAttribute("name");this._nameArray[b]=this._nameArray[b]||0;var c=this._nameArray[b]++;0===c&&d.util.GuideUtil._createGetterSetter(this,b,a);return c},_getTitle:function(){return this.jsonModel["jcr:title"]},visit:function(a,b){g._super.visit.apply(this,arguments);f.each(this._children,function(c,e){c.visit(a,b)})},playJson:function(a){if(a){var b=f.filter(a.items,function(c){return f.isObject(c)?!0:!1},this);f.each(this.items,
function(c,e){c.playJson(b[e])},this);g._super.playJson.call(this,a)}},_collectValues:function(a){f.each(this._children,function(b){b._collectValues(a)},this)},getElement:function(a){return f.find(this._children,function(b){return b.className===a},this)},_unloadModel:function(){f.each(this.children,function(a){a._unloadModel()},this);g._super._unloadModel.call(this)},_findChildren:function(a,b){var c=[],e=!1;f.find(this._children,function(l){a===l._escapeQualifiedName()&&(c.push(l._getNakedThis()),
e=!0);if(e&&!b||e&&0>a.indexOf("[*]"))return!0},this);return c},resetData:function(){f.each(this._children,function(a){a.resetData()},this)},_changeDescendantsAccess:function(a){f.each(this.items,function(b){b._setParentAccess(a);b instanceof d.model.GuideItemsContainer&&b._changeDescendantsAccess(a)},this)},_changeContainerAccess:function(a){this._changeDescendantsAccess(a)},_changeDescendantsProperty:function(a,b,c){f.each(this.items,function(e){e instanceof d.model.GuideItemsContainer?(c||(e[b]=
a),e._changeDescendantsProperty(a,b)):e[b]=a},this)},disableAllFields:function(){this.enabled=!1;this._changeDescendantsProperty(!1,"enabled",!0)}});g.defineProps({children:{get:function(){return(this._children||[]).slice(0)},set:function(a){this._children=a}},items:{get:function(){return f.filter(this._children,function(a){return a._isItem?!0:!1},this)}},_selfOrAncestorIsLazyReference:{get:function(){return this._lazyReference?!0:d.util.GuideUtil._checkIfAncestorIsALazyReference(this)}},_lazyReference:{get:function(){return!f.isUndefined(this.jsonModel.fragRef)&&
!f.isUndefined(this.jsonModel.optimizeRenderPerformance)}}});g.addMixins([d.model.mixin.ValidationsDisabled])})(_,guidelib);
(function(f,d){var g=d.model.GuideCompositeField=d.model.GuideItemsContainer.extend({msClassName:"guideCompositeField",initialize:function(){this._uuid=guideBridge._produceUUID();g._super.initialize.call(this)},_setGuideValue:function(a){f.isEmpty(a)||f.each(this.items,function(b){a.hasOwnProperty(b.name)&&f.isFunction(b._setGuideValue)&&b._setGuideValue(a[b.name])},this)},_collectExpressions:function(){g._super._collectExpressions.apply(this);this.valueCommitScript&&(this._compiledScripts.valueCommitScript=
this._compileExpression(this.valueCommitScript,null))}});g.defineProps({valueCommitScript:{get:function(){return this.getAttribute("valueCommitScript")}},uuid:{get:function(){return this._uuid},set:function(a){this._uuid!=a&&(this._uuid=a)}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideFileUpload=d.model.GuideCompositeField.extend({msClassName:"guideFileUpload",_getReducedJSON:function(){this._syncModelToAttachments();var a=g._super._getReducedJSON.call(this);d.model.util.CommonUtils.returnMinimalJSON(["id","files"],a,this);a.files=this._getFileAttachmentNames(a.files);return a},_getContentType:function(a){var b=null;if(this._fileAttachmentWrapper){var c=this._fileAttachmentWrapper.find(function(e){return e.data===a});c&&(b=c.contentType)}return b},
_getFileAttachmentNames:function(a){if(a=a||this.value){var b=this;return f.map(a.split("\n"),function(c){if(b._fileAttachmentWrapper){var e=b._fileAttachmentWrapper.find(function(l){return l.data===c});if(e)return e.name}e=c;e.lastIndexOf("/")===e.length-1&&(e=e.substring(0,e.length-1));return e.substring(e.lastIndexOf("/")+1)}).join("\n")}},_triggerFileListChange:function(){var a=this._fileList;this.trigger(d.event.GuideModelEvent.MODEL_CHANGED,d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.MODEL_CHANGED,
this,"fileList",a,a))},_getCurrentFileAttachmentWrapper:function(a){var b=null,c=this._getEffectiveBindRef();f.isArray(a)&&0<a.length&&(b=a.filter(function(e){return e.bindRef===c}));return b},_playAttachmentWrappers:function(a){var b=this.fileAttachment.value,c=this._guide();f.isArray(a)&&0<a.length&&(this._fileAttachmentWrapper=a,this.valueCommitScript&&c.version.isOn(c.version.Flags.RUN_VALUE_COMMMIT_ON_PREFILL)&&b&&c.queueExpressions(this,["valueCommitScript"]),a=a.map(function(e){return e.data}).join("\n"),
this.fileAttachment._setGuideValue(a),f.isEmpty(a)||(this._fileList=a.split("\n")))},playJson:function(a,b){a=this._getCurrentFileAttachmentWrapper(b);this._playAttachmentWrappers(a)},_syncModelToAttachments:function(){var a=this.fileAttachment.value||"",b=guideBridge._makeFileNameUnique();this.jsonModel.files=f.map(a.split("\n"),function(c,e){f.isEmpty(c)||b&&"/"!==c[0]&&(c=this.uuid+"-"+(e+1)+"__afAttachment__"+c);return c},this).join("\n")},_updateLiveData:function(a,b){this._syncModelAndData(a,
b,"_updateLiveData")},_playLiveData:function(a,b){this._syncModelAndData(a,b,"_playLiveData")},_handleFileAttachmentItem:function(a,b,c,e){var l=this._guide().internal.liveDataUtils;b=l._getDataContext(a,b,c);if("_updateLiveData"==e)l._updateLazyAttachmentMapFromModel(this),l.setDataValue(b.indexedXpath,b.xmlSec,!a.isEmpty(),a.isEmpty()?"":this._getFileAttachmentValue());else{e=l._getAttachmentDataForModel(this);if(!f.isArray(e)&&!f.isEmpty(e)){this.fileList=e.fileList;var k=[];l=e.value.split("\n");
f.each(l,function(h,p){"/"!=h[0]?(h=h.substr(h.lastIndexOf("_")+1),k.push(h)):k.push(h)});a.value=k.join("\n")}f.isArray(e)&&0<e.length&&this._playAttachmentWrappers(e);this._syncModelToAttachments()}},_syncModelAndData:function(a,b,c){if(f.isString(c)){var e=this._guide().internal.liveDataUtils,l=e._getDataContext(this,a,b);l.xmlSec===e.constants.BOUND_TAG?a=l.indexedXpath:b=l.indexedXpath;f.each(this.items,function(k){if(f.isFunction(k[c]))if("fileAttachment"==k.name)this._handleFileAttachmentItem(k,
a,b,c);else k[c](a,b)},this)}},_getIndexedXpath:function(a,b,c){a=a.getAttribute("name").replace(/\s+/g,"");return c?c+"/"+a:b+"/"+a},_getFileAttachmentValue:function(){this._syncModelToAttachments();return this._getFileAttachmentNames(this.jsonModel.files)}});g.defineProps({multiSelection:{get:function(){return this.getAttribute("multiSelection")}},buttonText:{get:function(){return this.getAttribute("buttonText")}},showComment:{get:function(){return this.getAttribute("showComment")}},fileSizeLimit:{get:function(){return this.getAttribute("fileSizeLimit")}},
fileList:{get:function(){return this._fileList},set:function(a){a!=this._fileList&&(this._fileList=a);var b=d.util.GuideUtil._isIOS();a=this._fileList;var c=this;if(b&&a)for(this._fileAttachmentWrapperIOS=[],b=0;b<a.length;b++)if(!f.isString(a[b])){var e=a[b].get(0).files,l=function(k){c._fileAttachmentWrapperIOS.push(new Promise(function(h,p){var q=new FileReader;q.onload=function(){var t=new d.model.FileAttachmentWrapper({name:k.name,data:this.result,formElementName:c.name,contentType:k.type,bindRef:c._getEffectiveBindRef()});
h(t)};q.onerror=p;q.readAsDataURL(k)}))};e&&[].forEach.call(e,l)}this._triggerFileListChange()}},value:{get:function(){this._syncModelToAttachments();return this.jsonModel.files}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideTermsAndConditions=d.model.GuideCompositeField.extend({msClassName:"guideTermsAndConditions",playJson:function(a){this.jsonModel.clickStatus=a.clickStatus;g._super.playJson.apply(this,arguments)},_updateLiveData:function(a,b){this._syncModelAndData(a,b,"_updateLiveData")},_playLiveData:function(a,b){this._syncModelAndData(a,b,"_playLiveData");this.clickStatus="true"===this.reviewStatus.value?"agree":"unreviewed"},_syncModelAndData:function(a,b,c){if(f.isString(c)){var e=
this._guide().internal.liveDataUtils._getDataContext(this,a,b);e.xmlSec===this._guide().internal.liveDataUtils.constants.BOUND_TAG?a=e.indexedXpath:b=e.indexedXpath;f.each(this.items,function(l){if(f.isFunction(l[c]))l[c](a,b)})}}});g.defineProps({showLink:{get:function(){return this.getAttribute("showLink")}},clickStatus:{get:function(){return this.getAttribute("clickStatus")},set:function(a){this.setAttribute(a,"clickStatus")}},showAsPopUp:{get:function(){return this.getAttribute("showAsPopUp")}}})})(_,
guidelib);(function(f,d){var g=d.model.GuideToolbar=d.model.GuideItemsContainer.extend({msClassName:"guideToolbar",initialize:function(){g._super.initialize.call(this)},execNavigationChangeExpression:function(){f.each(this.items,function(a){a.navigationChangeExp&&this._guide().queueExpressions(a,"navigationChangeExp")},this)}})})(_,guidelib);
(function(f,d){var g=d.model.GuideAdModuleGroup=d.model.GuideItemsContainer.extend({msClassName:"guideAdModuleGroup",_getTypedValue:function(a){return f.isUndefined(a)||null===a?null:a+""},playJson:function(a){var b=this._getTypedValue(a._value);b||""===b?(b=this.jsonModel._value,this.jsonModel._value=a._value,this._triggerOnBridge("elementValueChanged",this,"value",b,this.jsonModel._value)):g._super.playJson.call(this,a)}});g.defineProps({value:{get:function(){return this._getTypedValue(this.jsonModel._value)},
set:function(a){var b=this._getTypedValue(this.jsonModel._value),c=this._getTypedValue(a);void 0!==c&&c!==b&&(this.jsonModel._value!==a&&(this.jsonModel._value=c||""),this._triggerOnBridge("elementValueChanged",this,"value",b,c))}}})})(_,guidelib);
(function(f,d){d.model.mixin.AddDependencyMgmt={normalProperties:{_addDependant:function(g,a){var b=this._findDependant(g);b||(b={dependant:g,events:[]},this.dependants.push(b));0>b.events.indexOf(a)&&(b.events.push(a),g.on(d.event.GuideModelEvent.OBJECT_DESTROYED,this._handleDependentDestroyed,this))},_notifyDependants:function(){f.each(this.dependants,function(g){this._guide().queueExpressions(g.dependant,g.events)},this)},_removeDependant:function(g){g.off(d.event.GuideModelEvent.OBJECT_DESTROYED,
this._handleDependentDestroyed,this);g=this._findDependant(g);this.dependants=f.without(this.dependants,g)},_findDependant:function(g){return f.find(this.dependants,function(a){return a.dependant===g})},_handleDependentDestroyed:function(g){this._removeDependant(g.target)}}}})(_,guidelib);
(function(f,d){var g=d.model.GuideChart=d.model.Scriptable.extend({msClassName:"guideChart",_collectExpressions:function(){g._super._collectExpressions.apply(this);this._compiledExpressions.aggregateExp=this._compileExpression("guidelib.chartUtils.gatherAxisData(this);","data")}});g.defineProps({data:{get:function(){var a=this._guide()._currentContext;a&&a.contextNode&&a.expression&&(a.contextNode!==this||"aggregateExp"!==a.expression)&&this._addDependant(a.contextNode,a.expression);return this.jsonModel.data},
set:function(a){var b=this.jsonModel.data;this.jsonModel.data=a;f.isEqual(b,a)||(this._notifyDependants(),this._triggerEvent(d.event.GuideModelEvent.MODEL_CHANGED,"data",b,a))}},dataSourceType:{get:function(){return this.getAttribute("dataSourceType")},set:function(a){var b=this.jsonModel.dataSourceType;this.jsonModel.dataSourceType=a;this._triggerEvent(d.event.GuideModelEvent.MODEL_CHANGED,"dataSourceType",b,a)}},width:{get:function(){return this.getAttribute("width")},set:function(a){this.jsonModel.width=
a}},height:{get:function(){return this.getAttribute("height")},set:function(a){this.jsonModel.height=a}},xAxisTitle:{get:function(){return this.getAttribute("xAxisTitle")},set:function(a){this.jsonModel.chartType=a}},yAxisTitle:{get:function(){return this.getAttribute("yAxisTitle")},set:function(a){this.jsonModel.chartType=a}},chartType:{get:function(){return this.getAttribute("chartType")},set:function(a){var b=this.jsonModel.chartType;this.jsonModel.chartType=a;this._triggerEvent(d.event.GuideModelEvent.MODEL_CHANGED,
"chartType",b,a)}},repeatableItem:{get:function(){return this.getAttribute("repeatableItem")},set:function(a){this.jsonModel.repeatableItem=a}},xExp:{get:function(){return this.getAttribute("xExp")},set:function(a){this.jsonModel.xExp=a}},reducerXFunction:{get:function(){return this.getAttribute("reducerXFunction")},set:function(a){this.jsonModel.reducerXFunction=a;"none"!==a&&(this.jsonModel.reducerYFunction="none")}},yExp:{get:function(){return this.getAttribute("yExp")},set:function(a){this.jsonModel.yExp=
a}},reducerYFunction:{get:function(){return this.getAttribute("reducerYFunction")},set:function(a){this.jsonModel.reducerYFunction=a;"none"!==a&&(this.jsonModel.reducerXFunction="none")}},innerRadius:{get:function(){return this.getAttribute("innerRadius")},set:function(a){this.jsonModel.innerRadius=a}},lineColor:{get:function(){return this.getAttribute("lineColor")},set:function(a){this.jsonModel.lineColor=a}},pointColor:{get:function(){return this.getAttribute("pointColor")},set:function(a){this.jsonModel.pointColor=
a}},areaColor:{get:function(){return this.getAttribute("areaColor")},set:function(a){this.jsonModel.areaColor=a}},tooltipHtml:{get:function(){return this.getAttribute("tooltipHtml")},set:function(a){this.jsonModel.tooltipHtml=a}},showLegends:{get:function(){return this.getAttribute("showLegends")},set:function(a){this.jsonModel.showLegends=a}},legendPosition:{get:function(){return this.getAttribute("legendPosition")},set:function(a){this.jsonModel.legendPosition=a}}});g.addMixins([d.model.mixin.AddDependencyMgmt])})(_,
guidelib);
(function(f,d){var g=d.model.Field=d.model.Scriptable.extend({msClassName:"field",_runValidation:!0,initialize:function(){g._super.initialize.call(this);this.jsonModel["{default}"]=this.getOrElse(this.jsonModel,"{default}",this.jsonModel._value);this.isValid=!0;this._validationsDisabled=this._bParentValidationsDisabled=this.forceErrorShow=!1;this._failedTest=null;this._errorText="";var a=this._getEffectiveBindRef();(this.isGlobal||this._guide()&&this._guide().internal.liveModel.isLive(a))&&this._guide().internal.liveModel.add(a,
this)},_postInitialize:function(){g._super._postInitialize.call(this);null!==this.getAttribute("dorExclusion")&&!1===this.jsonModel.visible&&("true"===this._guide().getAttribute("excludeFromDoRIfHidden")||this._guide().print&&"true"===this._guide().print.excludeFromDoRIfHidden)&&(this.dorExclusion=!0)},_unloadModel:function(){var a=this.bindRef||this.getAttribute("name");(this.isGlobal||this._guide().internal.liveModel.isLive(a))&&this._guide().internal.liveModel.remove(a,this);g._super._unloadModel.call(this)},
_collectExpressions:function(){g._super._collectExpressions.apply(this);this.calcExp&&(this._compiledExpressions.calcExp=this._compileExpression(this.calcExp,"value"));this.validateExp&&(this._compiledScripts.validateExp=this._compileExpression(this.validateExp,null));this.valueCommitScript&&(this._compiledScripts.valueCommitScript=this._compileExpression(this.valueCommitScript,null));this._compiledScripts.validateAllExp=this._compileExpression("this._runTests()",null)},_handleXfaModelChanged:function(a){"rawValue"===
a._property?this._triggerEvent(d.event.GuideModelEvent.VALUE_CHANGED,"value",a.prevText,a.newText):"ClearError"==a._property||"ValidationState"==a._property?this._guide().queueExpressions(this,["validateAllExp"]):g._super._handleXfaModelChanged.call(this,a)},validate:function(a){if(!this.visible)return!0;f.isUndefined(a)&&(a=[]);var b=!0;this._runTests(!0);this._errorText&&(a.push({som:this.somExpression,errorText:this._errorText}),b=!1);return b},_getTypedValue:function(a){return this.checkIfNull(a)?
null:a+""},_getFormattedValue:function(a){if(f.isUndefined(a)||null===a||""===a)return null;var b=this.jsonModel.displayPictureClause;if(b)try{var c=xfalib.ut.PictureFmt.format(a+"",b,null,!0);return null!=c&&""!==c?c:a}catch(e){}return a},_getValue:function(){return this.bindNode?this.bindNode.rawValue:this._getTypedValue(this.jsonModel._value)},_triggerDisplayFormatChange:function(){var a=this._getValue();this._triggerEvent(d.event.GuideModelEvent.VALUE_CHANGED,"value",a,this._getFormattedValue(a))},
checkIfNull:function(a){return null==a||""===a},isEmpty:function(){return this.checkIfNull(this.value)},_setXFAValue:function(a){this.bindNode.rawValue=a},_setXFAMandatory:function(a){var b=this._guide()._guideSchema.getConvertor("mandatory");b&&(this.bindNode.validate.nullTest=b.guideToXfa.apply(this,[!!a]))},_setGuideValue:function(a){this.jsonModel._value=void 0===a||null===a?null:a},_runMandatoryTest:function(){var a=this._getValue();return!this.checkIfNull(a)},_runValidatePictureTest:function(){var a=
this._getValue(),b=!0;if(!this.checkIfNull(a)&&this.validatePictureClause)try{a=xfalib.ut.PictureFmt.format(a+"",this.validatePictureClause,null,!1)}catch(e){this.logger().log("AF",e),a=-1!==e.indexOf("Invalid picture clause")?void 0:null}if(f.isUndefined(a))try{var c=new RegExp(this.validatePictureClause);b=c.test(this._getValue())}catch(e){this.logger().error("AF","Invalid Regular Expression"+e),b=!1}else null===a&&(b=!1);return b},_runTests:function(a){var b=this._errorText,c=this.validationState,
e={validFlag:!0,forceRun:a};if(!0===this.validationsDisabled)return!0;this._runValidations(e);e.validFlag?(this._errorText="",this.validationState=!0,this._failedTest=null):this.validationState=!1;if(b!==this._errorText||c!==this.validationState||a)a&&(this.forceErrorShow=!0),this._triggerEvent(d.event.GuideModelEvent.ERROR_CHANGED,"validationStatus",this.validationState,this._errorText);return this.validationState},playJson:function(a){var b=a._value,c=this._guide();this.valueCommitScript&&c.version.isOn(c.version.Flags.RUN_VALUE_COMMMIT_ON_PREFILL)&&
b&&c.queueExpressions(this,["valueCommitScript"]);this._setGuideValue(a._value)},_runValidations:function(a){var b=!1,c="date.default{} date.short{} date.medium{} date.long{} date.full{} num.percent{} num.decimal{} num.currency{}".split(" ");if(this.bindNode){if(this.validatePictureClause&&(this.value||0===this.value))try{xfalib.ut.PictureFmt.format(this.value+"",this.validatePictureClause,null,!1)}catch(e){0<=c.indexOf(this.validatePictureClause)?b=!1:-1!==e.indexOf("Invalid picture clause")&&(b=
!0)}if(b){try{a.validFlag=(new RegExp(this.validatePictureClause)).test(this._getValue())}catch(e){this.logger().error("AF","Error in running regular expression"+e),a.validFlag=!1}a.validFlag||(this.bindNode._setErrorData("formatTest",this.getOrElse(this.bindNode.validate.formatTest,this.bindNode._defaults.validate.formatTest),this.bindNode.formatMessage),this._errorText=this.bindNode._errorText,xfalib.ut.XfaUtil.prototype._triggerOnBridge("elementValidationStatusChanged",this.bindNode,"validationStatus",
!1,!0),this.bindNode.execEvent("validationState"))}else if(a.forceRun&&this.bindNode.execValidate(),this._errorText=this.bindNode._errorText)a.validFlag=!1;this._failedTest=this.bindNode._mFailedValTest}else this.mandatory&&(a.validFlag=this._runMandatoryTest(),a.validFlag||(this._errorText=this.mandatoryMessage,this._failedTest=this.guideUtil.MANDATORY_TEST)),a.validFlag&&this.validatePictureClause&&!this.checkIfNull(this.value)&&(a.validFlag=this._runValidatePictureTest(),a.validFlag||(this._errorText=
this.validatePictureClauseMessage,this._failedTest=this.guideUtil.FORMAT_TEST));a.validFlag&&this.validateExp&&(a.validFlag=this.executeExpression("validateExp"),a.validFlag||(this._errorText=this.validateExpMessage,this._failedTest=this.guideUtil.SCRIPT_TEST))},_collectValues:function(a){a[this.name]=this.value},resetData:function(){this._runValidation=!1;this.value=this.jsonModel["{default}"];this._runValidation=!0;this._errorText="";this.validationState=!0;this._failedTest=null;this._triggerEvent(d.event.GuideModelEvent.ERROR_RESET,
"validationStatus",this.validationState,this._errorText)},_preserveLazyValue:function(){return!(f.contains(["guideButton","guideTextDraw","guideAdobeSignBlock"],this.className)||this._isXfaNode())},_updateLiveData:function(a,b){if(this._preserveLazyValue()){var c=this._guide().internal.liveDataUtils;a=c._getDataContext(this,a,b);(this instanceof d.model.GuideTextBox&&this.allowRichText?c.setRichTextValue:c.setDataValue).apply(c,[a.indexedXpath,a.xmlSec,!this.isEmpty(),this.isEmpty()?"":this.value])}},
_playLiveData:function(a,b){if(this._preserveLazyValue()){var c=this._guide().internal.liveDataUtils;a=c._getDataContext(this,a,b);c=(this instanceof d.model.GuideTextBox&&this.allowRichText?c.getRichTextValue:c.getDataValue).apply(c,[a.indexedXpath,a.xmlSec]);void 0!=c&&(this.value=c)}},_allowEmptyValueString:function(){return!1},markAsInvalid:function(a){this.validationState=!1;a||(a=this.validateExpMessage);this._triggerEvent(d.event.GuideModelEvent.ERROR_CHANGED,"validationStatus",this.validationState,
a)},_isStateOverridden:function(a){return null!=this.getOrElse(this.jsonModel.stateOverrides,a,null)}});g.defineProps({calcExp:{get:function(){return this.getAttribute("calcExp")}},isGlobal:{get:function(){return"true"===this.getAttribute("isGlobal")}},title:{get:function(){return this.getAttribute("jcr:title")},set:function(a){this.setAttribute(a,"jcr:title")}},valueCommitScript:{get:function(){return this.getAttribute("valueCommitScript")}},validateExp:{get:function(){return this.getAttribute("validateExp")}},
placeholderText:{get:function(){return this.getAttribute("placeholderText")}},value:{get:function(){var a=this.getOrElse(this._guide(),"_currentContext",null);a&&a.managedExp&&(a.contextNode!==this||"calcExp"!==a.expression)&&this._addDependant(a.contextNode,a.expression);return this._getValue()},set:function(a){var b=this._getValue(),c=this._getTypedValue(a),e=this._guide();this._allowEmptyValueString()&&""===a&&(c="");if(!(void 0===c||this.checkIfNull(c)&&this.checkIfNull(b))&&c!==b){this.bindNode?
this._setXFAValue(c):this.jsonModel._value!==a&&this._setGuideValue(c);if(e&&e.version.isOn(e.version.Flags.RUN_VALUE_COMMMIT_ON_SCRIPT_CHANGE)){a=e._currentContext;var l=this.getOrElse(a,"contextNode",null),k=this.getOrElse(a,"expression",null);a&&l==this&&"valueCommitScript"==k||e.queueExpressions(this,["valueCommitScript"])}this._notifyDependants();this._runValidation&&e&&e.queueExpressions(this,["validateAllExp"]);this._triggerOnBridge("elementValueChanged",this,"value",b,c);(!this.bindNode||
this.bindNode&&void 0!==this.getAttribute("html5Type"))&&this._triggerDisplayFormatChange()}}},formattedValue:{get:function(){return this.bindNode?this.bindNode.formattedValue:this._getFormattedValue(this._getValue())}},displayPictureClause:{get:function(){return this.getAttribute("displayPictureClause")}},validatePictureClause:{get:function(){return this.jsonModel.displayIsSameAsValidate?this.displayPictureClause:this.getAttribute("validatePictureClause")}},editPictureClause:{get:function(){return this.jsonModel.isEditSameAsDisplayPattern?
this.displayPictureClause:this.getAttribute("editPictureClause")}},isEditPictureClausePresent:{get:function(){return"undefined"!==typeof this.editPictureClause}},mandatory:{get:function(){return this.getAttribute("mandatory")},set:function(a){var b=this.getAttribute("mandatory");void 0!==a&&b!==a&&(this.bindNode?this._setXFAMandatory(a):this.jsonModel.mandatory=!!a,this._triggerEvent(d.event.GuideModelEvent.MODEL_CHANGED,"mandatory",b,a))}},mandatoryMessage:{get:function(){return this.getAttribute("mandatoryMessage")}},
validateExpMessage:{set:function(a){this.isValid?this.jsonModel.validateExpMessage=a:this.setAttribute(a,"validateExpMessage")},get:function(){return this.getAttribute("validateExpMessage")}},validatePictureClauseMessage:{get:function(){return this.getAttribute("validatePictureClauseMessage")}},validationState:{get:function(){return this.isValid},set:function(a){var b=this.isValid;b!=a&&(this.isValid=a,this._triggerOnBridge("elementValidationStatusChanged",this,"validationStatus",b,a))}},width:{get:function(){return this.getAttribute("width")},
set:function(a){this.jsonModel.width=a}},height:{get:function(){return this.getAttribute("height")},set:function(a){this.jsonModel.height=a}}});g.addMixins([d.model.mixin.AddDependencyMgmt,d.model.mixin.ValidationsDisabled])})(_,guidelib);
(function(f,d){var g=d.model.GuideButton=d.model.Field.extend({msClassName:"guideButton",defaultClickExpressions:{moveNext:"window.guideBridge.setFocus(this.panel.somExpression, 'nextItem', true)",movePrev:"window.guideBridge.setFocus(this.panel.somExpression, 'prevItem', true)"},defaultNavigationExpressions:{moveNext:"this.visible\x3dthis.panel.navigationContext.hasNextItem",movePrev:"this.visible\x3dthis.panel.navigationContext.hasPrevItem"},_collectExpressions:function(){g._super._collectExpressions.apply(this);
this.clickExp?this._compiledScripts.clickExp=this._compileExpression(this.clickExp,null):1.1<=this.targetVersion&&this.defaultClickExpressions[this.type]&&(this.jsonModel.clickExp=this.defaultClickExpressions[this.type],this._compiledScripts.clickExp=this._compileExpression(this.clickExp,null));this.navigationChangeExp?this._compiledScripts.navigationChangeExp=this._compileExpression(this.navigationChangeExp,null):1.1<=this.targetVersion&&this.defaultNavigationExpressions[this.type]&&(this.jsonModel.navigationChangeExp=
this.defaultNavigationExpressions[this.type],this._compiledScripts.navigationChangeExp=this._compileExpression(this.navigationChangeExp,null))}});g.defineProps({clickExp:{get:function(){return this.jsonModel.clickExp}},navigationChangeExp:{get:function(){return this.jsonModel.navigationChangeExp}},type:{get:function(){return this.getAttribute("type")}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideListFileAttachmentButton=d.model.GuideButton.extend({msClassName:"guideListFileAttachmentButton",initialize:function(){f.isUndefined(this.jsonModel.clickExp)&&(this.jsonModel.clickExp="guideBridge._updateFileListing.call(this,this)");g._super.initialize.apply(this,arguments)}})})(_,guidelib);
(function(f,d){var g=d.model.GuideCheckBox=d.model.Field.extend({msClassName:"guideCheckBox",_collectExpressions:function(){g._super._collectExpressions.apply(this);this.optionsExp&&(this._compiledExpressions.optionsExp=this._compileExpression(this.optionsExp,"items"))},getOnOffValues:function(a){var b=this.jsonModel.options||[];this.bindNode?(a=this.bindNode.getSaveItem(0),b=this.bindNode.getSaveItem(1)):(a=0==b.length?"0":b[a].split("\x3d")[0].trim(),b="-100");return[a,b]},_setXFAValue:function(a){this.bindNode.rawValue=
""===a||null===a?this.bindNode.getSaveItem(1)||null:a},_getCustomAssist:function(a){if(null==a)return this.bindNode&&this.bindNode.assist&&this.bindNode.assist.speak&&this.bindNode.assist.speak.value?this.bindNode.assist.speak.value:null;if(this.bindNode&&this.bindNode.members&&this.bindNode.members.item){if((a=this.bindNode.members.item(a))&&a.assist&&a.assist.speak&&a.assist.speak.value)var b=a.assist.speak.value}else if(this.jsonModel.custom){var c=this.jsonModel.custom||[];f.isString(c)&&0>=a&&
(b=c)}return b},_getToolTip:function(a){if(this.bindNode&&this.bindNode.members&&this.bindNode.members.item){if((a=this.bindNode.members.item(a))&&a.assist&&a.assist.speak&&a.assist.speak.value)var b=a.assist.toolTip.value}else this.jsonModel.shortDescription&&(b=this.jsonModel.shortDescription);return b},_getCaption:function(a){if(null==a)return this.bindNode&&this.bindNode.caption&&this.bindNode.caption.value&&this.bindNode.caption.value.oneOfChild&&this.bindNode.caption.value.oneOfChild.value?
this.bindNode.caption.value.oneOfChild.value:null;if(this.bindNode&&this.bindNode.members&&this.bindNode.members.item){if(a=this.bindNode.members.item(a),a.caption&&a.caption.value&&a.caption.value.oneOfChild&&a.caption.value.oneOfChild.value)var b=a.caption.value.oneOfChild.value}else if(this.jsonModel.options){var c=this.jsonModel.options||[];0>a&&(a=0);0==!c.length&&(b=c[a],b=d.util.GuideUtil.getOptionsKeyValue(b).pop())}return b},_getName:function(a){return this.bindNode&&this.bindNode.members&&
this.bindNode.members.item&&this.bindNode.members.item(a)?this.bindNode.members.item(a).name:null},_getScreenReaderText:function(a){var b,c=this._getAssistPriority()||"caption";this.bindNode?b=g._super._getScreenReaderText.apply(this,[a]):"custom"==c?b=this._getCustomAssist(a)||this._getCaption(a):"caption"==c&&(b=this._getCaption(a));return b}});g.defineProps({optionsExp:{get:function(){return this.getAttribute("optionsExp")}},items:{get:function(){var a=this.jsonModel.options;a&&!f.isArray(a)?a=
a.split(","):a&&(a=a.slice(0));return a},set:function(a){if(!this.bindNode){var b=this.jsonModel.options;JSON.stringify(a)!==JSON.stringify(b)&&(this.jsonModel.options=a,this._resetModelValueForOptionChange(),this._addStateOverride("options",{option:this._getOptionsArray()}),this._triggerItemsChange(b,a))}}}});g.addMixins([d.model.mixin.ChoiceGroupOptionHandler])})(_,guidelib);
(function(f,d){var g=d.model.GuideSwitch=d.model.GuideCheckBox.extend({msClassName:"guideSwitch",initialize:function(){var a=this.getOnOffValues()[1];this.jsonModel._value=this.getOrElse(this.jsonModel,"_value",a);g._super.initialize.call(this)},getOnOffValues:function(a){if(this.bindNode){a=this.bindNode.getSaveItem(0);var b=this.bindNode.getSaveItem(1)}else b=this.jsonModel.options,a=Array.isArray(b)&&0<b.length?b[0].split("\x3d")[0].trim():!f.isUndefined(b)&&0<b.length?b.split("\x3d")[0].trim():
"1",b=Array.isArray(b)&&1<b.length?b[1].split("\x3d")[0].trim():"0";return[a,b]},resetData:function(){this.value=this.jsonModel["{default}"]}})})(_,guidelib);
(function(f,d){var g=d.model.GuideTextDraw=d.model.Field.extend({msClassName:"guideTextDraw",_valueEscapeRegex:/\$/g,_getValue:function(){return this.bindNode?this.bindNode._getValue(null,!0):this._getTypedValue(this.jsonModel._value)},playJson:function(a){this._setGuideValue(this._floatingFieldResolutionFunction(a))},_allowEmptyValueString:function(){return!0},_isFloatingField:function(){return this.documentFragmentVariables&&0<this.documentFragmentVariables.length},_floatingFieldResolutionFunction:function(a){var b=
this.value,c=this._variableRegexMap,e=this._valueEscapeRegex,l=this.somExpression,k=[],h=this.documentFragmentVariables;if(a.documentFragmentVariables)for(var p=0;p<a.documentFragmentVariables.length;p++)k[p]=a.documentFragmentVariables[p]._value;this.jsonModel.defaultValue=k;f.each(c,function(q,t){var m=h.filter(function(x){return x.variableId===t})[0];var r=m.bindRef;r||(r=m.name);if(r=(r=a&&a.documentFragmentVariables&&0<a.documentFragmentVariables.length?a.documentFragmentVariables.filter(function(x){return x.variableId===
t})[0]._value:d.util.GuideUtil.getValueForBindRefField(r,l,this._guide()))?r.replace(e,"$$$$"):""){var u=m.dataType,v=m.displayPictureClause;if("number"===u||"integer"===u)v=v?v:"num{zzz,zzz,zzz,zzz,zzz,zzz,zzz.zzzzzzzzzzzzzzz}";else if("date-time"===u||"date"===u)v=v?v:"date{"+d.i18n.datePatterns.med+"}";if(v)if(-1!==r.indexOf(",")){var w="";r.split(",").forEach(function(x){w=w+d.util.GuideUtil.formatValue(x,v,u)+", "});r=w.substr(0,w.length-2)}else r=d.util.GuideUtil.formatValue(r,v,u)}b=b.replace(q,
r)});return b},initialize:function(){if(this._isFloatingField()){var a=this._variableRegexMap={};f.each(this.documentFragmentVariables,function(b){b=b.variableId;a[b]||(a[b]=new RegExp('(?:\x3cdf-variable[^\x3e]*variableid\x3d"'+b+'"[^\x3e]*\x3e)[^\x3c]*(?:\x3c/df-variable\x3e)',"ig"))})}g._super.initialize.apply(this,[arguments])}});g.defineProps({calcExp:{get:function(){return this._calcExp}},documentFragmentVariables:{get:function(){return this.jsonModel.documentFragmentVariables}}})})(_,guidelib);
(function(f,d){d.model.GuideAdobeSignBlock=d.model.GuideTextDraw.extend({msClassName:"guideAdobeSignBlock"})})(_,guidelib);
(function(f,d){var g=d.model.GuideTextBox=d.model.Field.extend({msClassName:"guideTextBox",_runMinimumLengthTest:function(){return this.value&&this.value.length>=this.minLength},_runTotalLengthTest:function(){return this.value&&this.value.length===this.length},_runValidations:function(a){g._super._runValidations.call(this,a);a.validFlag&&(null!=this.length?(a.validFlag=this._runTotalLengthTest(),a.validFlag||(this._errorText=this.guideUtil.getLocalizedMessage("",d.i18n.strings.totalLengthMessage,
[this.length]),this._failedTest=this.guideUtil.LENGTH_TEST)):null!=this.minLength&&(a.validFlag=this._runMinimumLengthTest(),a.validFlag||(this._errorText=this.guideUtil.getLocalizedMessage("",d.i18n.strings.minimumLengthMessage,[this.minLength]),this._failedTest=this.guideUtil.MINIMUM_LENGTH_TEST)))},_runMandatoryTest:function(){if(this.allowRichText){var a=this._getValue(),b=a;null!=a&&(b=/(<([^>]+)>)/ig,b=a.replace(b,""));return!this.checkIfNull(b)}return g._super._runMandatoryTest.apply(this,
arguments)},_allowEmptyValueString:function(){return!0}});g.defineProps({multiLine:{get:function(){return this.getAttribute("multiLine")}},maxChars:{get:function(){return this.getAttribute("maxChars")}},minLength:{get:function(){return this.getAttribute("minLength")}},length:{get:function(){return this.getAttribute("length")}},allowRichText:{get:function(){return this.getAttribute("allowRichText")}}})})(_,guidelib);
(function(f,d){var g={441481:"Guernsey",441624:"Isle of Man",441534:"Jersey",1868:"Trinidad and Tobago",1473:"Grenada",1670:"Northern Mariana Islands",1869:"Saint Kitts and Nevis",1758:"Saint Lucia",1671:"Guam",1684:"American Samoa",1268:"Antigua and Barbuda",1264:"Anguilla",1242:"Bahamas",1246:"Barbados",1441:"Bermuda",1284:"British Virgin Islands",1345:"Cayman Islands",1787:"Puerto Rico",1876:"Jamaica",1939:"Puerto Rico",1767:"Dominica",1809:"Dominican Republic",1829:"Dominican Republic",1664:"Montserrat",
1849:"Dominican Republic",1340:"U.S. Virgin Islands",1784:"Saint Vincent and the Grenadines",1649:"Turks and Caicos Islands",1721:"Sint Maarten",355:"Albania",213:"Algeria",376:"Andorra",244:"Angola",672:"Antarctica",374:"Armenia",297:"Aruba",994:"Azerbaijan",973:"Bahrain",880:"Bangladesh",375:"Belarus",501:"Belize",229:"Benin",975:"Bhutan",591:"Bolivia",387:"Bosnia and Herzegovina",267:"Botswana",246:"British Indian Ocean Territory",673:"Brunei",359:"Bulgaria",226:"Burkina Faso",257:"Burundi",855:"Cambodia",
237:"Cameroon",238:"Cape Verde",236:"Central African Republic",235:"Chad",269:"Comoros",682:"Cook Islands",506:"Costa Rica",385:"Croatia",357:"Cyprus",420:"Czech Republic",243:"Democratic Republic of the Congo",253:"Djibouti",670:"East Timor",593:"Ecuador",503:"El Salvador",240:"Equatorial Guinea",291:"Eritrea",372:"Estonia",251:"Ethiopia",500:"Falkland Islands",298:"Faroe Islands",679:"Fiji",358:"Finland",689:"French Polynesia",241:"Gabon",220:"Gambia",995:"Georgia",233:"Ghana",350:"Gibraltar",299:"Greenland",
502:"Guatemala",224:"Guinea",245:"Guinea-Bissau",592:"Guyana",509:"Haiti",504:"Honduras",852:"Hong Kong",354:"Iceland",964:"Iraq",353:"Ireland",972:"Israel",225:"Ivory Coast",962:"Jordan",254:"Kenya",686:"Kiribati",383:"Kosovo",965:"Kuwait",996:"Kyrgyzstan",856:"Laos",371:"Latvia",961:"Lebanon",266:"Lesotho",231:"Liberia",218:"Libya",423:"Liechtenstein",370:"Lithuania",352:"Luxembourg",853:"Macau",389:"Macedonia",261:"Madagascar",265:"Malawi",960:"Maldives",223:"Mali",356:"Malta",692:"Marshall Islands",
222:"Mauritania",230:"Mauritius",691:"Micronesia",373:"Moldova",377:"Monaco",976:"Mongolia",382:"Montenegro",258:"Mozambique",264:"Namibia",674:"Nauru",977:"Nepal",599:"Netherlands Antilles",687:"New Caledonia",505:"Nicaragua",227:"Niger",234:"Nigeria",683:"Niue",850:"North Korea",968:"Oman",680:"Palau",970:"Palestine",507:"Panama",675:"Papua New Guinea",595:"Paraguay",351:"Portugal",974:"Qatar",242:"Republic of the Congo",262:"Reunion",250:"Rwanda",290:"Saint Helena",590:"Saint Martin",508:"Saint Pierre and Miquelon",
685:"Samoa",378:"San Marino",239:"Sao Tome and Principe",966:"Saudi Arabia",221:"Senegal",381:"Serbia",248:"Seychelles",232:"Sierra Leone",421:"Slovakia",386:"Slovenia",677:"Solomon Islands",252:"Somalia",211:"South Sudan",249:"Sudan",597:"Suriname",268:"Swaziland",963:"Syria",886:"Taiwan",992:"Tajikistan",255:"Tanzania",228:"Togo",690:"Tokelau",676:"Tonga",216:"Tunisia",993:"Turkmenistan",688:"Tuvalu",256:"Uganda",380:"Ukraine",971:"United Arab Emirates",598:"Uruguay",998:"Uzbekistan",678:"Vanuatu",
379:"Vatican",681:"Wallis and Futuna",212:"Western Sahara",967:"Yemen",260:"Zambia",263:"Zimbabwe",60:"Malaysia",58:"Venezuela",30:"Greece",84:"Vietnam",44:"United Kingdom",45:"Denmark",53:"Cuba",46:"Sweden",52:"Mexico",41:"Switzerland",40:"Romania",36:"Hungary",43:"Austria",34:"Spain",91:"India",62:"Indonesia",98:"Iran",94:"Sri Lanka",27:"South Africa",95:"Myanmar",65:"Singapore",39:"Italy",82:"South Korea",32:"Belgium",81:"Japan",31:"Netherlands",20:"Egypt",54:"Argentina",93:"Afghanistan",56:"Chile",
86:"China",51:"Peru",63:"Philippines",64:"Pitcairn",48:"Poland",47:"Norway",33:"France",61:"Cocos Islands",55:"Brazil",92:"Pakistan",49:"Germany",57:"Colombia",66:"Thailand",90:"Turkey",1:"Canada",7:"Russia"};(d.model.GuideTelephone=d.model.GuideTextBox.extend({msClassName:"guideTelephone",_extractNumericDigits:function(a){var b="";a&&(a=a.match(/\d+/g))&&(b=a.join(""));return b},_extractCountryCode:function(a){var b=this._extractNumericDigits(a);if(!b||a&&b&&0!==a.lastIndexOf("+",0))return"";for(var c in g)if(b&&
0===b.lastIndexOf(c,0))return c;return""},_extractPhoneNumber:function(a){var b=this._extractCountryCode(a);a=this._extractNumericDigits(a);var c="";a&&(c=a.substr(b.length));return c}})).defineProps({countryCode:{get:function(){var a=this._getValue();return this._extractCountryCode(a)}},phoneNumber:{get:function(){var a=this._getValue();return this._extractPhoneNumber(a)}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideRadioButton=d.model.Field.extend({msClassName:"guideRadioButton",prevOnItem:null,initialize:function(){g._super.initialize.call(this)},_postInitialize:function(){g._super._postInitialize.call(this);this.prevOnItem=this.getSelectedIndex(this.value);if(this.bindNode&&this.bindNode.members)for(var a=0;a<this.bindNode.members.length;a++)this.bindNode.members.item(a).on(xfalib.script.XfaModelEvent.FORM_MODEL_CHANGED,this)},_unloadModel:function(){if(this.bindNode&&this.bindNode.members)for(var a=
0;a<this.bindNode.members.length;a++)this.bindNode.members.item(a).off(xfalib.script.XfaModelEvent.FORM_MODEL_CHANGED,this);g._super._unloadModel.call(this)},_collectExpressions:function(){g._super._collectExpressions.apply(this);this.optionsExp&&(this._compiledExpressions.optionsExp=this._compileExpression(this.optionsExp,"items"))},getItemIdentifier:function(a){return this.bindNode?this.bindNode.members.item(a).somExpression:a},playJson:function(a){g._super.playJson.call(this,a);this.prevOnItem=
this.getSelectedIndex(this.jsonModel._value)},getOnOffValues:function(a){var b=this.jsonModel.options||[];this.bindNode?(b=this.bindNode.members.item(a),a=b.getSaveItem(0),b=b.getSaveItem(1)?b.getSaveItem(1):null):(a=0==b.length?"0":b[a].split("\x3d")[0].trim(),b=null);return[a,b]},_handleXfaModelChanged:function(a){"rawValue"==a._property?this.trigger(d.event.GuideModelEvent.VALUE_CHANGED,d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.VALUE_CHANGED,this,"value",a.target.somExpression,
a.newText)):g._super._handleXfaModelChanged.call(this,a)},getSelectedIndex:function(a){var b=null;f.isEmpty(this.jsonModel.options)||f.isArray(this.jsonModel.options)||(this.jsonModel.options=[this.jsonModel.options]);return f.find(this.jsonModel.options,function(c,e){c=this.getOnOffValues(e);b=e;return c[0]==a},this)?b:null},_triggerDisplayFormatChange:function(){if(!this.bindNode){var a=this._getValue(),b=this.getSelectedIndex(a);null!==this.prevOnItem&&this._triggerEvent(d.event.GuideModelEvent.VALUE_CHANGED,
"value",this.prevOnItem,null);null!==b&&this._triggerEvent(d.event.GuideModelEvent.VALUE_CHANGED,"value",b,this._getFormattedValue(a));this.prevOnItem=b}},_getCustomAssist:function(a){if(null==a)return this.bindNode&&this.bindNode.assist&&this.bindNode.assist.speak&&this.bindNode.assist.speak.value?this.bindNode.assist.speak.value:null;if(this.bindNode&&this.bindNode.members&&this.bindNode.members.item){if((a=this.bindNode.members.item(a))&&a.assist&&a.assist.speak&&a.assist.speak.value)var b=a.assist.speak.value}else if(this.jsonModel.custom){var c=
this.jsonModel.custom||[];f.isString(c)&&0>=a?b=c:0==!c.length&&(b=c[a])}return b},_getToolTip:function(a){if(this.bindNode&&this.bindNode.members&&this.bindNode.members.item){if((a=this.bindNode.members.item(a))&&a.assist&&a.assist.speak&&a.assist.speak.value)var b=a.assist.toolTip.value}else this.jsonModel.shortDescription&&(b=this.jsonModel.shortDescription);return b},_getCaption:function(a){if(null==a)return this.bindNode&&this.bindNode.caption&&this.bindNode.caption.value&&this.bindNode.caption.value.oneOfChild&&
this.bindNode.caption.value.oneOfChild.value?this.bindNode.caption.value.oneOfChild.value:null;if(this.bindNode&&this.bindNode.members&&this.bindNode.members.item){if(a=this.bindNode.members.item(a),a.caption&&a.caption.value&&a.caption.value.oneOfChild&&a.caption.value.oneOfChild.value)var b=a.caption.value.oneOfChild.value}else if(this.jsonModel.options){var c=this.jsonModel.options||[];0>a&&(a=0);0==!c.length&&(b=c[a],b=d.util.GuideUtil.getOptionsKeyValue(b).pop())}return b},_getName:function(a){return this.bindNode&&
this.bindNode.members&&this.bindNode.members.item&&this.bindNode.members.item(a)?this.bindNode.members.item(a).name:null},_getScreenReaderText:function(a){var b,c=this._getAssistPriority()||"caption";this.bindNode?b=g._super._getScreenReaderText.apply(this,[a]):"custom"==c?b=this._getCustomAssist(a)||this._getCaption(a):"caption"==c&&(b=this._getCaption(a));return b}});g.defineProps({optionsExp:{get:function(){return this.getAttribute("optionsExp")}},items:{get:function(){var a=this.jsonModel.options;
a&&!f.isArray(a)?a=a.split(","):a&&(a=a.slice(0));return a},set:function(a){if(!this.bindNode&&a&&1<a.length){var b=this.jsonModel.options;JSON.stringify(a)!==JSON.stringify(b)&&(this.jsonModel.options=a,this._resetModelValueForOptionChange(),this._addStateOverride("options",{option:this._getOptionsArray()}),this._triggerItemsChange(b,a))}}}});g.addMixins([d.model.mixin.ChoiceGroupOptionHandler])})(_,guidelib);
(function(f,d){var g=d.model.GuidePasswordBox=d.model.Field.extend({msClassName:"guidePasswordBox",_getReducedJSON:function(){if(this.submitPassword)return g._super._getReducedJSON.call(this);var a={};d.model.util.CommonUtils.returnMinimalJSON(["name","templateId","guideNodeClass"],a,this);return a},_preserveLazyValue:function(){return!!this.submitPassword&&g._super._preserveLazyValue.call(this)},_allowEmptyValueString:function(){return!0}});g.defineProps({submitPassword:{get:function(){return this.getAttribute("submitPassword")}}})})(_,
guidelib);(function(f,d){d.model.GuideScribble=d.model.Field.extend({msClassName:"guideScribble"})})(_,guidelib);(function(f,d){(d.model.GuideCompositeFieldItem=d.model.Field.extend({msClassName:"GuideCompositeFieldItem"})).defineProps({bindRef:{get:function(){return!this.parent||this.parent._isXfaNode()||f.isEmpty(this.parent.bindRef)?(this.getAttribute("bindRef")||"").replace(/\s+/g,""):this.parent.bindRef+"/"+this.getAttribute("name").replace(/\s+/g,"")}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideNumericBox=d.model.Field.extend({msClassName:"guideNumericBox",_getTypedValue:function(a){var b=this.dataType;if(this.checkIfNull(a))return null;switch(b){case "integer":var c=parseInt(a);break;case "float":c=parseFloat(a);break;case "decimal":if(c=parseFloat(a),!isNaN(c)&&(b=c.toString(),a=b.indexOf("."),a=-1===a?b.length:a,b=b.length-a-1,b>this.fracDigits&&-1!==this.fracDigits&&(c=parseFloat(c.toFixed(this.fracDigits))),a>this.leadDigits&&-1!==this.leadDigits))return}if(!isNaN(c))return c},
_getFormattedValue:function(a){if(f.isUndefined(a)||null===a||""===a)return null;var b=this.jsonModel.displayPictureClause;try{return b&&"number"!==this.jsonModel.html5Type?xfalib.ut.PictureFmt.format(a+"",b,guideBridge._readRuntimeLocale(),!0):xfalib.ut.PictureFmt.format(a+"","num{"+("number"===this.jsonModel.html5Type?"zzzzzzzzzzzzzzzzzzzzz.zzzzzzzzzzzzzzz":d.i18n.numberPatterns.numeric)+"}",guideBridge._readRuntimeLocale(),!0,!0)}catch(c){return this.logger().error("Cannot format value "+a+" "+
c),a}},_totalDigitValidation:function(a,b){a&&b.validFlag&&-1<this.leadDigits&&(b.validFlag=!0,"integer"===this.dataType&&(b.validFlag=this.value.toString().length<=this.leadDigits),b.validFlag||(this._errorText=d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.totalDigitMessage,[this.leadDigits]),this._failedTest=this.guideUtil.TOTAL_DIGITS_TEST))},_datatypeValidation:function(a){if(a.validFlag){var b=this.getAttribute("_value");a.validFlag=!isNaN(b);a.validFlag||(this._errorText=d.util.GuideUtil.getLocalizedMessage("",
d.i18n.strings.datatypeMessage,["numeric"]),this._failedTest=this.guideUtil.FORMAT_TEST)}},_runValidations:function(a){var b=this.value;g._super._runValidations.call(this,a);this._datatypeValidation(a);this._minMaxValidation(b,a);this._totalDigitValidation(b,a)}});g.defineProps({dataType:{get:function(){return this.getAttribute("dataType")}},leadDigits:{get:function(){return this.getAttribute("leadDigits")}},fracDigits:{get:function(){return this.getAttribute("fracDigits")}}});g.addMixins([d.model.mixin.AddMinMaxValidation])})(_,
guidelib);
(function(f,d){var g=d.model.GuideFootnotePlaceHolder=d.model.GuideTextDraw.extend({msClassName:"guideFootnotePlaceHolder",initialize:function(){g._super.initialize.apply(this)}});g.defineProps({footnoteMap:{get:function(){if(this.options._guideContainer.jsonModel.textReplacementMap){var a={},b=Object.entries(this.options._guideContainer.jsonModel.textReplacementMap);document.createElement("p").setAttribute("class","footnoteClass");for(var c=0;c<b.length;c++){var e=$('p[id\x3d"'+b[c][0]+'"]')[0];
if(null!=e&&"P"==e.tagName){var l=document.createElement("p");l.setAttribute("role","footnote");l.setAttribute("aria-live","polite");l.setAttribute("aria-atomic","true");var k=document.createElement("sup"),h=document.createElement("a");e=e.cloneNode(!0);e.removeAttribute("id");h.setAttribute("id",b[c][0]+"_ftn");h.innerHTML=b[c][1];k.appendChild(h);e.insertBefore(k,e.children[0]);e.style.display="block";l.appendChild(e);a[b[c][0]]=l.outerHTML}}return a}return null}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideDatePicker=d.model.Field.extend({msClassName:"guideDatePicker",errorList:[],that:this,initialize:function(){g._super.initialize.call(this);f.isEmpty(this.jsonModel._value)&&"true"===this.jsonModel.defaultToCurrentDate&&this._setGuideValue((new Date).toISOString().slice(0,10))},_setGuideValue:function(a){a=d.util.GuideUtil._reformatDate(a,this.isEditPictureClausePresent);g._super._setGuideValue.call(this,a)},_getTypedValue:function(a){return a?a:null},_datatypeValidation:function(a){if(a.validFlag){var b=
this.getAttribute("_value");a.validFlag=!0;null!=b&&null==xfalib.ut.DateInfo.Parse(b,void 0,this.isEditPictureClausePresent)&&(a.validFlag=!1);a.validFlag||(this._errorText=d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.datatypeMessage,["date"]),this._failedTest=this.guideUtil.FORMAT_TEST)}},_validateDatePart:function(a,b,c){"D"===a&&(31<b&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.genericInvalidDatePart,[d.i18n.calendarSymbols.month,d.i18n.calendarSymbols.more,31,d.i18n.calendarSymbols.days])),
1>b&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.genericInvalidDatePart,[d.i18n.calendarSymbols.month,d.i18n.calendarSymbols.less,1,d.i18n.calendarSymbols.days])));"M"===a&&(12<b&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.genericInvalidDatePart,[d.i18n.calendarSymbols.year,d.i18n.calendarSymbols.more,12,d.i18n.calendarSymbols.months])),1>b&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.genericInvalidDatePart,[d.i18n.calendarSymbols.year,d.i18n.calendarSymbols.less,
1,d.i18n.calendarSymbols.months])));"Y"===a&&4>b.length&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.genericInvalidYearPart))},_getOrderedDateParts:function(a){var b=this.jsonModel.dateDisplayFormat||"date{M/D/YYYY}",c=b.match(/^date\{.*([^mdy]).*\}$/i)[1],e=["M","D","Y"].map(function(l){return{value:l,index:b.indexOf(l)}}).sort(function(l,k){return l.index-k.index}).map(function(l){return l.value});return[a.split(c),e]},_checkIsolatedDateValidity:function(a,b,c){b=this._getOrderedDateParts(b);
a=b[0];b=b[1];for(var e=0;e<b.length;e++){var l=b[e],k=a[e];f.isEmpty(k)||this._validateDatePart(l,k,c)}},_validateDaysOfMonth:function(a,b,c){b=this._getOrderedDateParts(b);a=b[0];b=b[1];month=a[b.indexOf("M")];day=a[b.indexOf("D")];year=a[b.indexOf("Y")];""!==month&&""!==day&&(month=Number(month)||0,day=Number(day)||0,a=d.i18n.calendarSymbols.monthNames[month-1],31===day&&[4,6,9,11].includes(month)&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.nonFebruaryMessage,[a,day-1])))},_validateFieldCompleteness:function(a,
b,c){a=this._getOrderedDateParts(b);var e=a[0],l={M:d.i18n.calendarSymbols.month,D:d.i18n.calendarSymbols.day,Y:d.i18n.calendarSymbols.year};a=a[1].map(function(k){return l[k]}).filter(function(k,h){return""===e[h]});3!==a.length&&0<a.length&&c.push("These fields still need to be filled: ["+a.join(", ")+"]")},_validateFullDate:function(a,b,c){b=this._getOrderedDateParts(b);a=b[0];b=b[1];month=a[b.indexOf("M")];day=a[b.indexOf("D")];year=a[b.indexOf("Y")];""!==month&&""!==day&&""!==year&&(month=Number(month)||
0,day=Number(day)||0,year=Number(year)||0,a=0===year%400||0===year%4&&0!==year%100,2===month&&(b=a?29:28,29!==day||a||c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.februaryMessage,[b,year])),30<=day&&c.push(d.util.GuideUtil.getLocalizedMessage("",d.i18n.strings.februaryMessage,[b,year]))))},_computeErrors:function(a,b){a.validFlag=0===b.length;a.validFlag||(this._errorText=b.join(" "),this._failedTest=this.guideUtil.FORMAT_TEST)},_runValidations:function(a){var b=this.value;if(this.jsonModel.titleDay||
this.jsonModel.titleMonth||this.jsonModel.titleYear){null===b&&(b="//");var c=[];this._checkIsolatedDateValidity(a,b,c);0===c.length&&this._validateDaysOfMonth(a,b,c);0===c.length&&this._validateFieldCompleteness(a,b,c);0===c.length&&this._validateFullDate(a,b,c);this._computeErrors(a,c);if(0===c.length){this.value=b="//"===this.value?"":this.value;g._super._runValidations.call(this,a);try{this.value=b=null!==this.value&&""!==this.value?xfalib.ut.PictureFmt.parseDate(this.value,this.jsonModel.dateDisplayFormat||
"date{M/D/YYYY}"):this.value}catch(e){}this._minMaxValidation(b,a)}}else g._super._runValidations.call(this,a),this._datatypeValidation(a),this._minMaxValidation(b,a)}});g.addMixins([d.model.mixin.AddMinMaxValidation])})(_,guidelib);
(function(f,d){var g=d.model.GuideCaptcha=d.model.Field.extend({msClassName:"guideCaptcha",initialize:function(){g._super.initialize.call(this);if(this.captchaEnterprise&&!this.checkBoxkey||this.captchaInvisible&&this.mandatory)this.captchaValidate=!1,this._triggerOnBridge("af.invisibleMandatoryRecaptchaInitialization",this,null,null,null)},showCaptchaError:function(a){if(this.captchaEnterprise)if(this.checkBoxkey)a=this.errorMessage;else{window.alert(this.errorMessage);return}this.captchaInvisible||
(f.isEmpty(a)&&(a=d.util.GuideUtil.getLocalizedMessage("",d.i18n.LogMessages["AEM-AF-901-006"])),this._triggerEvent(d.event.GuideModelEvent.ERROR_CHANGED,"validationStatus",!1,a))},validate:function(a){f.isUndefined(a)&&(a=[]);if(this.captchaValidate&&"server"!==window.guideBridge.hostName){if(this.visible&&!this.value||this.mandatory&&!this.visible)return a.push({som:this.somExpression,errorText:this.mandatoryMessage}),this._triggerEvent(d.event.GuideModelEvent.ERROR_CHANGED,"validationStatus",!1,
this.mandatoryMessage),!1;this._triggerEvent(d.event.GuideModelEvent.ERROR_CHANGED,"validationStatus",!0,null)}}});g.defineProps({value:{get:function(){return this.jsonModel._value},set:function(a){var b=this.jsonModel._value;this.jsonModel._value=void 0===a?b:a;a=this.jsonModel._value;this.validate();this._triggerOnBridge("elementValueChanged",this,"value",b,a)}},captchaService:{get:function(){return this.getAttribute("captchaService")}},captchaWidget:{get:function(){return this.getAttribute("captchaService")}},
captchaValidate:{get:function(){return void 0==this._captchaValidate?!0:this._captchaValidate},set:function(a){this._captchaValidate=a}},captchaInvisible:{get:function(){return"invisible"==this.getAttribute("rcSize")?!0:!1}},captchaEnterprise:{get:function(){return"enterprise"===this.getAttribute("rcVersion")?!0:!1}},checkBoxkey:{get:function(){return"checkbox"===this.getAttribute("rcKeyType")?!0:!1}},errorMessage:{get:function(){return this.getAttribute("errorMessage")}}})})(_,guidelib);
(function(f,d){var g=d.model.GuideDropDownList=d.model.Field.extend({msClassName:"guideDropDownList",_collectExpressions:function(){g._super._collectExpressions.apply(this);this.optionsExp&&(this._compiledExpressions.optionsExp=this._compileExpression(this.optionsExp,"items"))},_handleXfaModelChanged:function(a){"addItem"===a._property||"clearItems"===a._property||"deleteItem"===a._property?this._triggerEvent(d.event.GuideModelEvent.MODEL_CHANGED,a._property,a.prevText,a.newText):g._super._handleXfaModelChanged.call(this,
a)},_getDisplayValue:function(a){var b=this._getOptionsArray(),c=null;f.each(b,function(e){a===e.saveValue&&(c=e.displayValue)},this);return c},_getItems:function(){return this.jsonModel.options},_setXFAItems:function(a){(a=this._getXFAOptionStringFromGuideItems(a))?this.bindNode.setItems(a,2):this.bindNode.clearItems()},_allowEmptyValueString:function(){return!0}});g.defineProps({multiSelect:{get:function(){return this.getAttribute("multiSelect")},set:function(){this.setAttribute("multiSelect")}},
optionsExp:{get:function(){return this.getAttribute("optionsExp")}},displayValue:{get:function(){return this._getDisplayValue(this.value)}},items:{get:function(){var a=[];if(this.bindNode)for(var b=this.bindNode,c=0;c<b.length;c++){var e=b.getSaveItem(c)+"\x3d"+b.getDisplayItem(c);a.push(e)}else(a=this._getItems())&&!f.isArray(a)?a=a.split(","):a&&(a=a.slice(0));return a},set:function(a){var b=this._getItems();JSON.stringify(a)!==JSON.stringify(b)&&(this.bindNode?this._setXFAItems(a):this.jsonModel.options=
a,this.multiSelect&&this._resetModelValueForOptionChange(),this._addStateOverride("options",{option:this._getOptionsArray()}),this._triggerItemsChange(b,this.items))}}});g.addMixins([d.model.mixin.ChoiceGroupOptionHandler])})(_,guidelib);
(function(f,d){var g=d.model.GuideInstanceManager=d.model.GuideNode.extend({msClassName:"guideInstanceManager",initialize:function(){g._super.initialize.call(this);this._instances=[];this.dependants=[];this.deafen=!1;this._bindPending=!0},_postInitializeBinding:function(){if(this._bindPending){this._bindPending=!1;var a=this._instances[this.instanceCount-1];a||this.logger().log("There was no instance found for InstanceManager at postInitialize:"+this.somExpression);a.bindNode&&a.bindNode.instanceManager&&
(this.bindNode=a.bindNode.instanceManager,this.bindNode.parent.on(xfalib.script.XfaModelEvent.CHILD_ADDED,this),this.bindNode.parent.on(xfalib.script.XfaModelEvent.CHILD_REMOVED,this))}},_unloadModel:function(){var a=this._instances[this.instanceCount-1];a.bindNode&&a.bindNode.instanceManager&&(this.bindNode.parent.off(xfalib.script.XfaModelEvent.CHILD_ADDED,this),this.bindNode.parent.off(xfalib.script.XfaModelEvent.CHILD_REMOVED,this));g._super._unloadModel.call(this)},handleEvent:function(a){if(!this.deafen&&
a instanceof xfalib.script.XfaModelEvent)switch(a.name){case xfalib.script.XfaModelEvent.CHILD_ADDED:a=a.newText;a.instanceManager==this.bindNode&&this._insertInstance(a.instanceIndex,a);break;case xfalib.script.XfaModelEvent.CHILD_REMOVED:a=a.prevText;a.instanceManager==this.bindNode&&this._removeInstance(a.instanceIndex,!1);break;case xfalib.script.XfaModelEvent.CHILD_MOVED:this.logger().log("CHILD_REMOVED should never be dispatched. It's achieved via ad and remove child.")}},_instanceTemplate:function(){return this._guide()._modelTemplateCacheStore.cloneJsonTemplate(this.jsonModel.instanceTemplateId)},
addInstance:function(a){return this._insertInstance(void 0,a)},addInstances:function(a,b){a=a.instanceCount;if(-1!=this.maxOccur){var c=this.maxOccur-this.instanceCount;a=a>c?c:a}c=[];for(var e=0;e<a;e++)c.push(this._insertInstance(void 0,b,!0));this.parent._triggerEvent(d.event.GuideModelEvent.MULTIPLE_CHILD_ADDED,"multipleChildAdded",null,c)},_manageChild:function(a,b){a._instanceManager=this;void 0===b?this._instances.push(a):this._instances.splice(b,0,a)},_insertInstance:function(a,b,c){if(0<=
+this.maxOccur&&+this.maxOccur==this.instanceCount||void 0!==a&&a>+this.maxOccur&&-1<+this.maxOccur)return null;var e=b;b&&null==this.bindNode&&this.logger().error("AF","Invalid argument addedXfaInstance.");if(!b&&this.bindNode){this.deafen=!0;try{e=this.bindNode.insertInstance(a)}finally{this.deafen=!1}}var l=this._instanceTemplate();b={};var k=this.guideUtil.generateUID(),h=this;this.copyObject(l,b,{transformMaps:{id:function(t,m,r){return k+"__"+r.templateId},bindRef:function(t,m,r){if(null!=e&&
null!=h.bindNode){if(l.bindRef===t)return e.somExpression;if(t.substring(0,l.bindRef.length)===l.bindRef)return t.replace(l.bindRef,e.somExpression)}return t}}});var p=e&&this.bindNode?{bindNode:e}:null;this.options._guideContainer&&(p=f.extend({},p,{_guideContainer:this.options._guideContainer}));b=d.model.GuideModelRegistry.prototype.createModel(b,p);if(null!=b){this._manageChild(b,a);p=this.parent;if(null!=p){if(0<this._instances.length)if(a=void 0!==a?a:this._instances.length-1,0===a)p._addChildAt(b,
p._children.indexOf(this)+1,c);else{var q=p._children.indexOf(this._instances[a-1]);p._addChildAt(b,q+1,c)}else p._addChildAt(b,p._children.indexOf(this)+1,c);c=this._guide().internal.liveDataUtils;this._isDataNodeUpdateRequired(b)&&(p=c.getParentDataNode(this._getDataContext(b),!0,{}),q=c._convertModelIndexToDataIndex(b.instanceIndex),q=c._getElement(p,b._getDataNodeName(),{index:q}),!q||q&&b.instanceIndex!=this._instances.length-1)&&(c.insertNode(p,b._getDataNodeName(),b.instanceIndex)||this.logger().warn("AF",
"Unable to store the data of the element"))}this._execExpressions(a);return b}this.logger().log("guide","insertInstance could not create child"+this.jsonModel.instanceTemplateId);return null},insertInstance:function(a){return this._insertInstance(a)},removeInstance:function(a){this._removeInstance(a,!0)},_removeInstance:function(a,b){if(!(0==this.instanceCount||this.minOccur>=this.instanceCount||a>=+this.instanceCount)){if(b&&this.bindNode){this.deafen=!0;try{this.bindNode.removeInstance(a)}finally{this.deafen=
!1}}b=this._instances[a];var c=this._guide().internal.liveDataUtils;if(this._isDataNodeUpdateRequired(b)){var e=c.getParentDataNode(this._getDataContext(b));c.removeChild(e,b._getDataNodeName(),b.instanceIndex)}this._instances.splice(a,1);b.parent._removeChild(b);this._execExpressions(a)}},_isDataNodeUpdateRequired:function(a){var b=d.model.GuideSchema.prototype.GuideStateConstants,c=guideBridge._guide;return c&&c.getGuideState()===b.GUIDE_STATE_MODEL_COMPLETE&&a._hasLazyDescendant},_getDataContext:function(a){var b=
this._guide().internal.liveDataUtils,c=b._getXpathContext(a);c=b._getDataContext(a,c.bound,c.unBound);var e=c.indexedXpath;e=b.addIndexToPath(e,a.instanceIndex);return{indexedXpath:e,xmlSec:c.xmlSec}},_getInstanceName:function(){return this.jsonModel.instanceName},_instanceIsTableRow:function(){return"guideTableRow"===this._instanceTemplate().guideNodeClass},_execExpressions:function(a){try{for(this._notifyDependants();a<this.instances.length;a++)this.instances[a]._notifyDependants();this._guide().runPendingExpressions()}catch(b){this.logger().error("guide",
b.message)}}});g.defineProps({minOccur:{get:function(){return this._instanceIsTableRow()?+this.jsonModel.minOccur||1:this.getOrElse(this.jsonModel.minOccur,1)}},maxOccur:{get:function(){return this.getOrElse(this.jsonModel.maxOccur,1)}},initialOccur:{get:function(){return this.getOrElse(this.jsonModel.initialOccur,1)}},instanceTemplateId:{get:function(){return this.jsonModel.instanceTemplateId}},instanceCount:{get:function(){var a=this._guide()._currentContext;a&&a.managedExp&&this._addDependant(a.contextNode,
a.expression);return this._instances.length}},repeatable:{get:function(){return 1!=this.minOccur||1!=this.maxOccur}},instances:{get:function(){var a=this._guide()._currentContext;a&&a.managedExp&&this._addDependant(a.contextNode,a.expression);return(this._instances||[]).slice(0)}}});g.addMixins([d.model.mixin.AddDependencyMgmt])})(_,guidelib);
(function(f,d){f=d.model.AbstractField=d.model.GuideNode.extend({msClassName:"abstractField",initialize:function(){this._name=this.options.name||"";this._className=this.options.className||"";this._bindRef=this.options.bindRef||"";this._afDataSom=this.options.afDataSom||"";this._dataSom=this._isXfaNode()?this.options.dataSom:"";this.dependants=[];this._depdendantIds=[]},_getValue:function(){return this.jsonModel._value},_setValue:function(g){this.jsonModel._value=g},resetData:function(){return d.model.Field.prototype.resetData.call(this)},
_isXfaNode:function(){return 0===this.bindRef.indexOf("xfa[0].form[0].")},getAttribute:function(g){switch(g){case "name":g=this.name;break;case "bindRef":g=this.bindRef;break;default:g=null}return g}});f.defineProps({somExpression:{get:function(){return""}},name:{get:function(){return(this._name||"").replace(/\s+/g,"")}},className:{get:function(){return this._className||""}},bindRef:{get:function(){return(this._bindRef||"").replace(/\s+/g,"")}},dataSom:{get:function(){return this._dataSom}},afDataSom:{get:function(){return this._afDataSom.replace(/\s+/g,
"")}},value:{get:function(){var g=this._guide()._currentContext;g&&g.managedExp&&g.contextNode&&g.expression&&(this._addDependant(g.contextNode,g.expression),this._depdendantIds.push(g.contextNode.id));return this.jsonModel._value},set:function(g){this.jsonModel._value!==g&&(this.jsonModel._value=g,g=this._guide().internal.GuideDirtyMarkerAndVisitor,g._findAndMarkDirty(g.visitMap,this._depdendantIds),this._notifyDependants())}}});f.addMixins([d.model.mixin.AddDependencyMgmt])})(_,guidelib);
(function(f,d){var g=d.model.util.ModelTemplateCacheStore=xfalib.ut.Class.extend({initialize:function(){g._super.initialize.apply(this);this._modelIdCache={};this._templateIdCache={};this._lazyTemplateIdCache={};var a=JSON.parse(JSON.stringify(this.options.modelTemplateJson));this._putTemplate(a)},putModel:function(a){a.id?(this._modelIdCache[a.id]=a,a.children&&_.each(a.children,function(b){this.putModel(b)},this)):this.logger().log("no Id found for model"+a.getAttribute("name"))},removeModel:function(a){this._modelIdCache.hasOwnProperty(a)&&
delete this._modelIdCache[a]},getModel:function(a){if(this._modelIdCache.hasOwnProperty(a))return this._modelIdCache[a]},_putTemplate:function(a){a.templateId&&a.guideNodeClass&&(this._templateIdCache[a.templateId]=a);_.each(a,function(b,c){_.isObject(b)&&this._putTemplate(b)},this)},_putLazyTemplate:function(a){a.templateId&&a.guideNodeClass&&(this._lazyTemplateIdCache[a.templateId]=a)},cloneJsonTemplate:function(a){if(this._templateIdCache[a])return JSON.parse(JSON.stringify(this._templateIdCache[a]))},
_getTemplate:function(a,b){var c=this._templateIdCache[a];b&&d.util.GuideUtil.isLazyJson(c)&&(c=this._lazyTemplateIdCache[a]);if(!_.isUndefined(c))return JSON.parse(JSON.stringify(c))}});g.defineProps({})})($,guidelib);
(function(f,d){var g=f.util.ErrorConstants={DATA_ATTRIBUTE_ERROR_ITEM:"data-af-global-error-item",DATA_ATTRIBUTE_DISPLAY_ON:"data-af-global-errors-display-on",DATA_ATTRIBUTE_ERROR_TEXT_CONTAINER:"data-af-global-error-text",DATA_ATTRIBUTE_ERROR_CONTAINER:"data-af-global-errors",DATA_ATTRIBUTE_SOM:"data-af-som",CONTEXT_SUBMISSION:"form",CONTEXT_NAVIGATION:"panel",CONTEXT_FIELD:"field"};g[g.CONTEXT_SUBMISSION]=4;g[g.CONTEXT_NAVIGATION]=2;g[g.CONTEXT_FIELD]=1;var a=function(b,c){this.$container=b;c=b.find("["+
g.DATA_ATTRIBUTE_ERROR_ITEM+"]").first();b=b.attr(g.DATA_ATTRIBUTE_DISPLAY_ON)||"";this.errorCount=this.displayOn=0;this.$container.addClass("no-validation-errors");_.each(b.split(","),function(e){this.displayOn+=g[e]||0},this);this.$item=c.eq(0).clone();c.remove()};_.extend(a.prototype,{showError:function(b,c,e){var l=this.$container.find("["+g.DATA_ATTRIBUTE_SOM+'\x3d"'+e+'"]');0<l.length?l.find("["+g.DATA_ATTRIBUTE_ERROR_TEXT_CONTAINER+"]").addBack("["+g.DATA_ATTRIBUTE_ERROR_TEXT_CONTAINER+"]").text(b):
"number"===typeof g[c]&&(c=g[c],(c&this.displayOn)===c&&(0===this.errorCount&&this.$container.removeClass("no-validation-errors"),this.errorCount++,this.$item.clone().find("["+g.DATA_ATTRIBUTE_ERROR_TEXT_CONTAINER+"]").addBack("["+g.DATA_ATTRIBUTE_ERROR_TEXT_CONTAINER+"]").text(b).click(function(k){guideBridge.setFocus(e)}).end().end().attr(g.DATA_ATTRIBUTE_SOM,e).appendTo(this.$container)))},hideError:function(b){b=this.$container.find("["+g.DATA_ATTRIBUTE_SOM+'\x3d"'+b+'"]');0<b.length&&(b.remove(),
this.errorCount--);0===this.errorCount&&this.$container.addClass("no-validation-errors")}});d.fn.globalErrorContainer=function(b){var c=arguments;return this.each(function(){var e=d(this),l=e.data("global-error-container");void 0===l&&(l=new a(e,d.extend({},"object"===typeof b&&b)),e.data("global-error-container",l));"string"===typeof b&&"function"===typeof l[b]&&l[b].apply(l,[].splice.apply(c,[1]))})}})(guidelib,$);
(function(f,d){var g=f.util.ErrorConstants,a,b=f.util.GuideErrorManager=xfalib.ut.Class.extend({_defaultErrorMessage:"There is an error in this field !",initialize:function(){b._super.initialize.apply(arguments);a=d("["+g.DATA_ATTRIBUTE_ERROR_CONTAINER+"]").globalErrorContainer()},markError:function(c,e,l,k,h){_.isUndefined(c)&&(c=this._defaultErrorMessage);c=c.trim();a.globalErrorContainer("showError",c,k,l);e&&1<=e.length&&(l=e.find(".guideFieldError"),1>l.length?d("\x3cdiv class\x3d'guideFieldError'\x3e\x3c/div\x3e").appendTo(e).text(c):
(l.text(c),c=l.attr("role"),void 0==c&&!1===c||l.attr("role","alert"),l.show()))},unMarkError:function(c,e){c.find(".guideFieldError").hide();c.find(".guideFieldError").text("");a.globalErrorContainer("hideError",e)}})})(guidelib,$);
(function(f,d){f.util.GuideLazyUtil=xfalib.ut.Class.extend({putDirtyToTemplateCacheIfMissing:function(g){g=(g.internal.GuideDirtyMarkerAndVisitor||this._guide().internal.GuideDirtyMarkerAndVisitor)._flattenDirtyPanelToList();this._getAllDirtyJsonTemplateInCache(g)},_getAllDirtyJsonTemplateInCache:function(g){function a(c){_.each(c,function(e){e=JSON.parse(e);b._putLazyTemplate(e)})}var b=window.guideBridge._guide._modelTemplateCacheStore;g=this._generateListOfCacheMissFromTemplateJson(g);0<g.length&&
window.guideBridge.panelProvider&&(g={path:window.guideBridge._getGuidePathUrl(".jsonhtmlemitter"),listOfTemplateIds:g,success:a},window.guideBridge.panelProvider.getMultipleTemplateJson(g))},_generateListOfCacheMissFromTemplateJson:function(g){var a=window.guideBridge._guide._modelTemplateCacheStore,b=[];_.each(g,function(c){var e=a._getTemplate(c,!0);f.util.GuideUtil.isLazyJson(e)&&b.push(c)});return b},_guide:function(){return this.options._guideContainer}})})(guidelib,$);
(function(f,d){var g={},a={visible:{xfaToGuide:function(b){return"visible"===b},guideToXfa:function(b){return!0===b?"visible":"hidden"}},enabled:{xfaToGuide:function(b){return"open"===b},guideToXfa:function(b){return!0===b?"open":"readOnly"}},assistPriority:{xfaToGuide:function(b){return{custom:"custom",toolTip:"shortDescription",caption:"label",name:"name"}[b]},guideToXfa:function(b){return{custom:"custom",shortDescription:"toolTip",title:"caption",name:"name"}[b]}},mandatory:{xfaToGuide:function(b){return"error"===
b},guideToXfa:function(b){return!0===b?"error":"disabled"}},multiLine:{xfaToGuide:function(b){return 1==b},guideToXfa:function(b){return!0===b?1:0}},options:{xfaToGuide:function(b){var c=[];if(b){var e=this.bindNode;f.each(b,function(l,k,h){c.push(e.getSaveItem(k)+"\x3d"+e.getDisplayItem(k))})}return c},guideToXfa:function(b){return b}},multiSelect:{xfaToGuide:function(b){return"multiSelect"===b},guideToXfa:function(b){return!0===b?"multiSelect":"userControl"}},calcExp:{xfaToGuide:function(b){return null!==
b&&""!==b?null:void 0},guideToXfa:function(b){return null!==b&&""!==b?null:void 0}},dataType:{xfaToGuide:function(b){return b},guideToXfa:function(b){}}};a.validateExp=a.visibleExp=a.enabledExp=a.clickExp=a.calcExp;d.model.GuideSchema=xfalib.ut.Class.extend({GuideStateConstants:{GUIDE_STATE_MODEL_CREATION:0,GUIDE_STATE_MODEL_CREATED:1,GUIDE_STATE_MERGE_PROGRESS:2,GUIDE_STATE_MERGE_COMPLETE:3,GUIDE_STATE_MODEL_COMPLETE:4},initialize:function(){this.addSchema("guideNode",[["name","string",null],["id",
"string",null],["jcr:title","string",null],["jcr:description","string",null],["css","string",""],["fd:targetVersion","float",1]]);this.addSchema("scriptable",[["visibleExp","string",null],["enabledExp","string",null],["visible","boolean",!0,"presence"],["enabled","boolean",!0,"access"],["assistPriority","string",null,"assist.speak.priority"],["custom","string",null,"assist.speak.value"],["shortDescription","string",null,"assist.toolTip.value"],["longDescription","string",null]],"guideNode");this.addSchema("guideInstanceManager",
[],"guideNode");this.addSchema("esign",[],"guideNode");this.addSchema("verify",[],"guideNode");this.addSchema("guideItemsContainer",[],"scriptable");this.addSchema("guideImage",[],"scriptable");this.addSchema("guideContainerNode",[["disableSwipeGesture","boolean",!1]],"guideItemsContainer");this.addSchema("guidePanel",[["validateOnStepCompletion","boolean",!1]],"guideItemsContainer");this.addSchema("rootPanelNode",[],"guidePanel");this.addSchema("guideTable",[],"guidePanel");this.addSchema("guideTableRow",
[],"guidePanel");this.addSchema("guideToolbar",[],"guideItemsContainer");this.addSchema("guideCompositeField",[],"guideItemsContainer");this.addSchema("guideFileUpload",[["multiSelection","boolean",!1],["buttonText","string",null],["fileSizeLimit","integer",2],["showComment","boolean",!1]],"guideCompositeField");this.addSchema("guideField",[["jcr:title","string",null,"caption.value.oneOfChild.value","Guide"],["calcExp","string",null,"calculate.script.value","Guide"],["validateExp","string",null,"validate.script.value",
"Guide"],["_value","string",null,"rawValue"],["displayPictureClause","string",null,"format.picture.value"],["validatePictureClause","string",null,"validate.picture.value"],["mandatory","boolean",!1,"validate.nullTest"],["mandatoryMessage","string",d.util.GuideUtil.getLocalizedMessage("",d.i18n.LogMessages["AEM-AF-901-005"]),"mandatoryMessage"],["validateExpMessage","string",d.util.GuideUtil.getLocalizedMessage("",d.i18n.LogMessages["AEM-AF-901-006"]),"validationMessage","Guide"],["validatePictureClauseMessage",
"string",d.util.GuideUtil.getLocalizedMessage("",d.i18n.LogMessages["AEM-AF-901-007"]),"formatMessage"],["validationState","boolean",!1],["width","string",null],["height","string",null]],"scriptable");this.addSchema("guideTextBox",[["multiLine","boolean",!1,"ui.textEdit.multiLine"],["maxChars","integer",0,"value.text.maxChars"],["minLength","integer",null],["length","integer",null]],"guideField");this.addSchema("guideCaptcha",[],"guideField");this.addSchema("guideTelephone",[],"guideField");this.addSchema("guideNumericBox",
[["dataType","string","decimal","value.oneOfChild.className"],["leadDigits","integer",-1,"value.decimal.leadDigits"],["fracDigits","integer",2,"value.decimal.fracDigits"],["maximum","integer",null],["minimum","integer",null],["exclusiveMaximum","boolean",null],["exclusiveMinimum","boolean",null]],"guideField");this.addSchema("guidePasswordBox",[],"guideField");this.addSchema("guideRadioButton",[["optionsExp","string",null],["options","object",null,"items"]],"guideField");this.addSchema("guideCheckBox",
[["optionsExp","string",null],["options","object",null,"items"]],"guideField");this.addSchema("guideSwitch",[],"guideCheckBox");this.addSchema("guideScribble",[],"guideField");this.addSchema("guideDatePicker",[["maximum","string",null],["minimum","string",null],["exclusiveMaximum","boolean",null],["exclusiveMinimum","boolean",null]],"guideField");this.addSchema("guideButton",[],"guideField");this.addSchema("guideListFileAttachmentButton",[],"guideButton");this.addSchema("guideTextDraw",[["documentFragmentVariables",
"string",null]],"guideField");this.addSchema("guideFootnotePlaceHolder",[],"guideTextDraw");this.addSchema("guideAdobeSignBlock",[["documentFragmentVariables","string",null]],"guideField");this.addSchema("guideCompositeFieldItem",[],"guideField");this.addSchema("guideDropDownList",[["title","string","DropDown"],["multiSelect","boolean",!1,"ui.oneOfChild.open"],["optionsExp","string",null],["options","object",null,"items"]],"guideField");this.addSchema("guideTermsAndConditions",[["showLink","boolean",
!1],["showAsPopUp","boolean",!1],["clickStatus","string",null]],"guideCompositeField");this.addSchema("guideChart",[["height","integer",300],["width","integer",100],["data","object",null],["xAxisTitle","string",null],["yAxisTitle","string",null],["chartType","string","linepoint"],["repeatableItem","string",null],["xExp","string",null],["reducerXFunction","string","none"],["yExp","string",null],["reducerYFunction","string","none"],["innerRadius","integer",0],["lineColor","string","#000000"],["pointColor",
"string","#000000"],["areaColor","string","#000000"],["tooltipHtml","string","\x3cp\x3e${x}(${y})\x3c/p\x3e"],["showLegends","boolean",!1],["legendPosition","string","right"]],"scriptable");this.addSchema("guideAdModule",[["_value","string",null]],"scriptable");this.addSchema("guideAdModuleGroup",[["_value","string",null]],"scriptable")},addSchema:function(b,c,e){var l={};"object"===typeof e?f.extend(l,e):"string"===typeof e&&g[e]&&f.extend(l,g[e]);this.addAttributes(l,c);g[b]=l},addAttributes:function(b,
c){f.each(c,function(e){b[e[0]]={type:e[1],"default":e[2],xfaProp:e[3],priority:e[4]}})},getAttributeProps:function(b,c){try{return g[b][c]||{}}catch(e){this.logger().error("AF","schema has no element "+b)}},getAttributes:function(b){return g[b]},getTypedValue:function(b,c){if(null===c||void 0===c||b instanceof Array)return c;switch(b){case "string":return c+"";case "integer":return parseInt(c);case "boolean":return!0===c||"true"===c?!0:!1;case "float":return parseFloat(c);default:return c}},getConvertor:function(b){return a[b]}})})(_,
guidelib);
(function(f,d){var g=d.model.GuideContainerNode=d.model.GuideItemsContainer.extend({msClassName:"guideContainerNode",setGuideState:function(a){!0===f.some(d.model.GuideSchema.prototype.GuideStateConstants,function(b){return b===a})&&(this._guideState=a)},getGuideState:function(){return this._guideState},initialize:function(){d.__runtime__.guide=this;this._guideState=d.model.GuideSchema.prototype.GuideStateConstants.GUIDE_STATE_MODEL_CREATION;this.internal=this.internal||{};this.internal.liveDataUtils=this.options.liveDataUtils||
new d.model.LiveXmlUtils;this.internal.liveModel=this.options.liveModel||new d.model.LiveModel;this.internal.GuideDirtyMarkerAndVisitor=new d.model.GuideDirtyMarkerAndVisitor;this.runtime={guideContext:{},_private:{},errorManager:{}};this.runtime.errorManager=new d.util.GuideErrorManager;this._modelTemplateCacheStore=new d.model.util.ModelTemplateCacheStore({modelTemplateJson:this.jsonModel});this._guideSchema=new d.model.GuideSchema;this.guideLazyUtil=new d.util.GuideLazyUtil({_guideContainer:this});
this._pendingQueues={calcExp:[],valueCommitScript:[],enabledExp:[],visibleExp:[],validateAllExp:[],optionsExp:[],navigationChangeExp:[],summaryExp:[],autoSaveStartExp:[],aggregateExp:[],submitSuccess:[],submitError:[]};this._resetExpressionCounters();this._currentContext=null;g._super.initialize.call(this);this.autoSaveStart=!1;this._modelTemplateCacheStore.putModel(this);this._postInitialize();var a=this.getOrElse(xfalib,"runtime.xfa.host",null);if(null!==a)a.on(xfalib.script.XfaModelEvent.FORM_MODEL_REFRESH,
function(b){switch(b.name){case xfalib.script.XfaModelEvent.FORM_MODEL_REFRESH:this._triggerEvent(d.event.GuideModelEvent.MODEL_REFRESH,"jsonModel",null,null)}},this)},_resetExpressionCounters:function(){this._runningExpressionCount={calcExp:{},valueCommitScript:{},enabledExp:{},visibleExp:{},validateAllExp:{},optionsExp:{},navigationChangeExp:{},summaryExp:{},autoSaveStartExp:{},aggregateExp:{},submitSuccess:{},submitError:{}}},_getReducedJSON:function(){var a=d.model.GuideNode.prototype._getReducedJSON.call(this);
d.model.util.CommonUtils.returnMinimalJSON("xdpRef xsdRef id dorTemplateRef dorType excludeFromDoRIfHidden schemaRef schemaType".split(" "),a,this);a.rootPanel=this.rootPanel._getReducedJSON();this.jsonModel.toolbar&&(a.toolbar=this.toolbar._getReducedJSON());return a},_initChildren:function(){var a={_guideContainer:this};this.rootPanel=d.model.GuideModelRegistry.prototype.createModel(this.jsonModel.rootPanel,a);this._initializeChild(this.rootPanel);this._children.push(this.rootPanel);a=d.model.GuideModelRegistry.prototype.createInstanceManager(this.rootPanel);
this._initializeChild(a);this._children.splice(this._children.indexOf(this.rootPanel),0,a);a._manageChild(this.rootPanel);this.jsonModel.toolbar&&(a={},this._guide()&&(a=f.extend({},a,{_guideContainer:this._guide()})),this.toolbar=d.model.GuideModelRegistry.prototype.createModel(this.jsonModel.toolbar,a),this._initializeChild(this.toolbar),this._children.push(this.toolbar))},_addToExcludeFromDorMap:function(a,b){this._excludeFromDorMap=this._excludeFromDorMap||{};this._excludeFromDorMap[a]=b},_getExcludeFromDorMap:function(){var a=
this;if(!f.isUndefined(a._excludeFromDorMap))return f.keys(a._excludeFromDorMap).map(function(b){return b+"\x3d"+a._excludeFromDorMap[b]})},_addToStateOverrideMap:function(a,b){this._stateOverrideMap=this._stateOverrideMap||{};this._stateOverrideMap[a]=b},_getStateOverrideMap:function(){var a=this,b={};f.isUndefined(a._stateOverrideMap)||(b={element:f.keys(a._stateOverrideMap).map(function(c){return a._stateOverrideMap[c]})});return b},_resolveAfDataSom:function(a){var b=null;f.each(this.internal.liveModel.getCrossFragmentFields(),
function(c){c=this.internal.liveModel.getAllAbstractFieldModels(f.keys(c));f.each(c,function(e){if(e.afDataSom===a)return b=e,!1});if(b)return!1});return b},_getSigners:function(){var a={};if(this.enableAdobeSign&&(f.isString(this.xdpRef)||f.isString(this.xsdRef)||!f.isString(this.jsonModel.schemaRef))){var b,c=this,e,l,k,h=function(p,q,t){var m=null,r;try{(r=guideBridge._guide.resolveNode(p))||(r=guideBridge._guide._resolveAfDataSom(q)),m=r.value,"guideTelephone"===r.className&&("countryCode"===
t?m=d.model.GuideTelephone.prototype._extractCountryCode(m):"phone"===t&&(m=d.model.GuideTelephone.prototype._extractPhoneNumber(m)))}catch(u){}return m?m.toString():m};this.signerInfo&&f.each(f.keys(this.signerInfo),function(p){(b=c.signerInfo[p])&&"object"===typeof b&&(k=l=e=null,"form"===b.emailSource&&b.email&&(e=h(b.email,b.emailAfDataSom,"email")),a[p]={},a[p].email=e?e:"","PHONE"===b.securityOption&&("form"===b.phoneSource&&b.phone&&(l=h(b.phone,b.phoneAfDataSom,"phone")),"form"===b.countryCodeSource&&
b.countryCode&&(k=h(b.countryCode,b.countryCodeAfDataSom,"countryCode")),a[p].phone={},a[p].phone.countryCode=k?k:"",a[p].phone.number=l?l:""))})}return a},defaultSubmitSuccess:"window.guideBridge._defaultSubmitSuccessHandler($event.data)",defaultSubmitError:"window.guideBridge._handleServerValidationError($event.data)",_collectExpressions:function(){this.autoSaveStartExpression&&(this._compiledExpressions.autoSaveStartExp=this._compileExpression(this.autoSaveStartExpression,"autoSaveStart"));this.submitSuccess||
(this.jsonModel.submitSuccess=this.defaultSubmitSuccess);this._compiledScripts.submitSuccess=this._compileExpression(this.submitSuccess,null);this.submitError||(this.jsonModel.submitError=this.defaultSubmitError);this._compiledScripts.submitError=this._compileExpression(this.submitError,null)},prepare:function(){this.getGuideState()!==d.model.GuideSchema.prototype.GuideStateConstants.GUIDE_STATE_MERGE_PROGRESS&&this.getGuideState()!==d.model.GuideSchema.prototype.GuideStateConstants.GUIDE_STATE_MODEL_CREATION&&
(f.each(this._children,function(a){a.prepare()},this),this.queueExpressions(this,["autoSaveStartExp"]),this.runPendingExpressions())},runPendingExpressions:function(){this._runExpressionQueue("calcExp");this._runExpressionQueue("enabledExp");this._runExpressionQueue("visibleExp");this._runExpressionQueue("valueCommitScript");this._runExpressionQueue("validateAllExp");this._runExpressionQueue("optionsExp");this._runExpressionQueue("navigationChangeExp");this._runExpressionQueue("summaryExp");this._runExpressionQueue("aggregateExp");
this._runExpressionQueue("submitSuccess");this._runExpressionQueue("submitError");"server"!==window.guideBridge.hostName&&this._runExpressionQueue("autoSaveStartExp");this._resetExpressionCounters()},_runExpressionQueue:function(a){var b=this._pendingQueues[a],c;if(b)for(;0<b.length;)(c=this._pendingQueues[a].shift())&&c.executeExpression(a)},queueExpressions:function(a,b){a&&b&&(f.isString(b)&&(b=[b]),f.each(b,function(c){var e=this._pendingQueues[c],l=a.somExpression;c=this._runningExpressionCount[c];
c[l]=c[l]||0;e&&0>e.indexOf(a)&&10>c[l]&&(e.push(a),c[l]+=1)},this))},playJson:function(a,b){this.rootPanel.playJson(a.rootPanel,b);this.toolbar&&this.toolbar.playJson(a.toolbar,b)},_guide:function(){return this},_collectValues:function(a){f.each(this._children,function(b){b._collectValues(a)},this)},resolveNode:function(a){if(a&&""!==a){var b=a.split("."),c=null;"guide[0]"===b[0]&&(b.shift(),c=this);b[0]===this._escapeQualifiedName()?(c=this,b.shift()):this.hasOwnProperty(b[0])?(c=this[b[0]],b.shift()):
c||(c=this.rootPanel);f.each(b,function(e){c=c&&c._findChildren?c._findChildren(e,!1)[0]:null},this);null==c&&(c=this.getOrElse(this._guide().runtime,a,null));return c}}});g.defineProps({submitSuccess:{get:function(){return this.jsonModel.submitSuccess}},submitError:{get:function(){return this.jsonModel.submitError}},autoSaveStart:{get:function(){return this.jsonModel.autoSaveStart},set:function(a){this.jsonModel.autoSaveStart=a;!0===a&&(delete this._compiledExpressions.autoSaveStartExp,this._triggerOnBridge(window.guideBridge.GUIDE_AUTO_SAVE_START,
this))}},enableAutoSave:{set:function(a){this.jsonModel.enableAutoSave=a},get:function(){return this.jsonModel.enableAutoSave||!1}},autoSaveStartExpression:{get:function(){return this.jsonModel.autoSaveStartExpression}},autoSaveInfo:{get:function(){return this.jsonModel.autoSaveInfo}},globalMetaInfo:{get:function(){return this.jsonModel.globalMetaInfo}},submissionMetaInfo:{get:function(){return this.jsonModel.submissionMetaInfo}},signerInfo:{get:function(){return this.jsonModel.signerInfo}},xdpRef:{get:function(){return this.jsonModel.xdpRef}},
dorTemplateRef:{get:function(){return this.jsonModel.dorTemplateRef}},dorType:{get:function(){return this.jsonModel.dorType}},actionType:{get:function(){return this.jsonModel.actionType}},xsdRef:{get:function(){return this.jsonModel.xsdRef}},panel:{get:function(){return this.rootPanel}},print:{get:function(){return"generate"===this.dorType&&this.jsonModel.view?this.jsonModel.view.print:null}},allLazyChildren:{get:function(){return this.jsonModel.allLazyChildren}},enableAsyncSubmission:{set:function(a){this.jsonModel.enableAsyncSubmission=
a},get:function(){return!this.jsonModel.enableAsyncSubmission||"true"!==this.jsonModel.enableAsyncSubmission&&!0!==this.jsonModel.enableAsyncSubmission?!1:!0}},enableAdobeSign:{get:function(){return this.jsonModel._useSignedPdf}},enableFocusOnFirstField:{set:function(a){this.jsonModel.enableFocusOnFirstField=a},get:function(){return void 0===this.jsonModel.enableFocusOnFirstField?!0:this.jsonModel.enableFocusOnFirstField}}})})(_,guidelib);
(function(f,d){d.model.mixin.AddNavigationContext={propertyDescriptors:{navigationContext:{get:function(){this._navigationContext||(this._navigationContext=new d.model.util.GuideNavigationContext({currentItem:null,parentPanel:this.panel}));return this._navigationContext}}}}})(_,guidelib);
(function(f,d){var g=d.model.GuidePanel=d.model.GuideItemsContainer.extend({msClassName:"guidePanel",defaultExpressions:{summary:"this.title + (this.instanceIndex \x3e 0 ? ' ' + this.instanceIndex : '')"},initialize:function(){g._super.initialize.call(this);this._navigationContext=this._currentItem=null},_collectExpressions:function(){g._super._collectExpressions.call(this);this.completionExp&&(this._compiledScripts.completionExp=this._compileExpression(this.completionExp,null));this._compiledExpressions.summaryExp=
this.jsonModel.summaryExp?this._compileExpression(this.jsonModel.summaryExp,"summary"):this._compileExpression(this.defaultExpressions.summary,"summary")},_initializeInstanceManager:function(a,b,c){var e=d.model.GuideModelRegistry.prototype.createInstanceManager(a);this._initializeChild(e);this._children.splice(b+c++,0,e);e._manageChild(a);b=a._getBindNode();var l=this.getOrElse(b,"instanceManager.count",0);a=Math.max(a.minOccur,l)-1;for(var k=1,h;0<a;)h=null,1<l&&(h=b.instanceManager.instances[k++]),
e.addInstance(h),--a,c+=1;return c},_initChildren:function(a){g._super._initChildren.call(this);a||(this._instanceManager=null);this._childInitializeGoingOn=!0;var b=0;f.each(this.children,function(c,e){c instanceof d.model.GuidePanel&&(b=this._initializeInstanceManager(c,e,b))},this);this.jsonModel.toolbar&&(a={},this.options._guideContainer&&(a=f.extend({},a,{_guideContainer:this.options._guideContainer})),a=d.model.GuideModelRegistry.prototype.createModel(this.jsonModel.toolbar,a),this._initializeChild(a),
this._children.push(a));this._summary=null;this._childInitializeGoingOn=!1},_postInitialize:function(){g._super._postInitialize.call(this);this.instanceManager._postInitializeBinding()},_addChildAt:function(a,b,c){if(a){this._initializeChild(a);this._guide()._modelTemplateCacheStore.putModel(a);var e=this._getItemsInsertIndex(b-1),l={},k=a.id,h=-1;f.each(this.jsonModel.items,function(p,q){h==e-1&&(l[k]=a.jsonModel);l[q]=p;h++},this);h==e-1&&(l[k]=a.jsonModel);this.jsonModel.items=l;a._isItem=!0;this._children.splice(b,
0,a);this._normalizeChildren();a._postInitialize();this._guide().getGuideState()>=d.model.GuideSchema.prototype.GuideStateConstants.GUIDE_STATE_MERGE_COMPLETE&&a.prepare();this._lazyReference&&this._childInitializeGoingOn||c||this._triggerEvent(d.event.GuideModelEvent.CHILD_CHANGED,"childAdded",null,a)}},validate:function(a){var b=!1;if(!this.visible)return!0;var c=!1;if(this._lazyReference&&this.guideUtil.isLazyJson(this.jsonModel)){var e=this._guide().internal.GuideDirtyMarkerAndVisitor.visitMap,
l=this._guide()._modelTemplateCacheStore,k=d.util.GuideUtil,h=this.templateId,p;0===e[h]&&(this._ancestorRepeatable&&(p=k.generateUID()),e=l._getTemplate(h,!0),f.isEmpty(e)?b=!0:(this._embedJson(e.items,p),this._guide().internal.liveDataUtils.playLiveData(this),this.prepare(),this._guide().runPendingExpressions(),this._guide().internal.liveDataUtils.updateLiveData(),c=!0))}a=g._super.validate.call(this,a);c&&this._unloadLazyReferenceModel(!0);!0===b&&(a=!1);return a},_loadLazyFragment:function(a){a=
a||{};if(f.isUndefined(this._itemsLoaded)){var b=guideBridge._getGuidePathUrl(".jsonhtmlemitter");this._fetchFromAjaxCall(b,a)}else f.isFunction(a.success)&&a.success.call(this)},_fetchFromAjaxCall:function(a,b){b&&f.isFunction(b.preFetch)&&b.preFetch.call(this);var c=this;window.guideBridge.panelProvider.getHtmlJson({path:a,templateId:c.templateId,fetchJSON:!0,fetchHTML:!0,success:function(e){if(c.repeatable||c._ancestorRepeatable)var l=c.guideUtil.generateUID();d.util.GuideUtil._embedHtml(c,e.html,
l)&&(c._ajaxCallDone=!0,e=JSON.parse(e.json).items,c._embedJson(e,l),l=c._guide().internal.GuideDirtyMarkerAndVisitor,c.repeatable||l._updateCountOrInsert(l.visitMap,c.templateId),c._guide().internal.liveDataUtils.playLiveData(c),c.prepare(),c._itemsLoaded=!0,c._guide().trigger(d.event.GuideModelEvent.LAZY_LOADED),c._triggerOnBridge("elementLazyLoaded",c),b&&f.isFunction(b.success)&&b.success.call(this))},error:function(){c.logger().error("AF","Failed to fetch HTML and JSON for :"+a)},complete:function(){b&&
f.isFunction(b.postFetch)&&b.postFetch.call(this)}})},_unloadLazyReferenceModel:function(a){try{if(this._lazyReference){window.guideBridge._populateBindRefToSomMap(this);if(!a){var b=this.validate(),c=this._guide().internal.GuideDirtyMarkerAndVisitor.visitMap;!1===b&&0<c[this.id]&&(c[this.id]=0)}f.each(this.children,function(e){e._unloadModel(a);var l=this._children.indexOf(e);this._children.splice(l,1);var k=null;f.each(this.jsonModel.items,function(h,p){h===e.jsonModel&&(k=p)},this);k&&delete this.jsonModel.items[k];
this._normalizeChildren()},this);this._currentItem=this._navigationContext=null}}catch(e){this.logger().error(e)}},_unloadModel:function(a){var b=this._guide().internal.GuideDirtyMarkerAndVisitor.visitMap;f.each(this.children,function(c){this._lazyReference&&!a&&!1===c.validate()&&(f.isUndefined(b[this.templateId])||(b[this.templateId]=0));c._unloadModel(a)},this);d.model.Scriptable.prototype._unloadModel.call(this)},_removeChild:function(a){a._unloadModel();var b=this._children.indexOf(a);this._children.splice(b,
1);var c=null;f.each(this.jsonModel.items,function(e,l){e===a.jsonModel&&(c=l)},this);c&&delete this.jsonModel.items[c];this._normalizeChildren();this._triggerEvent(d.event.GuideModelEvent.CHILD_CHANGED,"childRemoved",a,null)},_embedJson:function(a,b){var c=!1,e=JSON.parse(JSON.stringify(a)),l=this.id;l=l.slice(0,-2);a&&((this.repeatable||this._ancestorRepeatable)&&this.copyObject(a,e,{transformMaps:{id:function(k,h,p){return b+"__"+p.templateId}}}),f.each(e,function(k,h){f.isObject(k)&&(c=!0,this.jsonModel.items=
this.jsonModel.items||{},this.jsonModel.items[h]=k,this._guide()._modelTemplateCacheStore._putTemplate(JSON.parse(JSON.stringify(k))))},this),this._embedModel());return c},_embedModel:function(){this._initChildren(!0);this._guide()._modelTemplateCacheStore.putModel(this);this._postInitialize();this._normalizeChildren()},_getItemsInsertIndex:function(a){var b=0;f.find(this._children,function(c,e){c._isItem&&b++;if(e>=a)return!0},this);return b},playJson:function(a,b){var c={},e={};f.each(a.items,function(k){f.isObject(k)&&
("guidePanel"===k.guideNodeClass||"guideTable"===k.guideNodeClass||"guideTableRow"===k.guideNodeClass?e[k.name]?e[k.name].push(k):e[k.name]=[k]:c[k.name]?c[k.name].push(k):c[k.name]=[k])},this);var l=f.filter(this._children,function(k){return k instanceof d.model.GuideInstanceManager},this);f.each(l,function(k){var h=k._getInstanceName(),p=e[h]||[];h=k._instances.slice(0);f.each(h,function(q,t){0<p.length?(t=p.shift(),q.playJson(t,b)):k.removeInstance(t)},this);0<p.length&&f.each(p,function(q){var t=
k.addInstance();t&&t.playJson(q,b)},this)},this);f.each(this.items,function(k){if(!(k instanceof d.model.GuidePanel)){var h=c[k.name];h&&0<h.length&&k.playJson(h.shift(),b)}},this);this.toolbar&&this.toolbar.playJson(a.toolbar,b)},_getReducedJSON:function(a){a=g._super._getReducedJSON.call(this,a||this.canBeRepeatable);this.jsonModel.toolbar&&(a.toolbar=this.toolbar._getReducedJSON());return a},_getRole:function(){var a,b;var c={Table:"grid","Header Row":"rowHeader","Body Row":"rowGroup","Footer Row":"rowGroup",
List:"list"};this.bindNode&&(b=this.getOrElse(this.bindNode.assist&&this.bindNode.assist.role,null))&&(a=c[b]);return a},_getAssistPriority:function(){return this.getAttribute("assistPriority")||"description"},_getScreenReaderText:function(){var a;"description"!==this._getAssistPriority()&&(a=g._super._getScreenReaderText.apply(this));return a},execCompletion:function(){var a=!0;f.find(this.children,function(b){if(b instanceof d.model.GuidePanel&&!b.execCompletion())return a=!1,!0},this);a&&this.completionExp&&
(a=this.executeExpression("completionExp"));return a},_preserveLazyValue:function(){return!this._isXfaNode()&&!(this instanceof d.model.RootPanelNode)&&(this.canBeRepeatable||this._guide().internal.liveDataUtils.isIndexedPath(this.bindRef))},_syncModelAndData:function(a,b,c,e){var l=this._guide().internal.liveDataUtils;if(this._preserveLazyValue()){var k=l._getDataContext(this,a,b),h=k.indexedXpath;this.canBeRepeatable&&(f.isFunction(c)&&0===this.instanceIndex&&c(l.getDataInstances(k,this._getDataNodeName()),
l.getParentDataNode(k)),h=l.addIndexToPath(h,this.instanceIndex));k.xmlSec===l.constants.UNBOUND_TAG?b=h:k.xmlSec===l.constants.BOUND_TAG&&(a=h)}f.isString(e)&&f.each(this.items,function(p){if(f.isFunction(p[e]))p[e](a,b)});return{bound:a,unBound:b}},_getDataNodeName:function(){var a=this.bindRef;return a?a.substring(a.lastIndexOf("/")+1):this.getAttribute("name")},_updateLiveData:function(a,b){var c=this._guide().internal.liveDataUtils,e=this;this._syncModelAndData(a,b,function(l,k){var h=e.instanceManager.instanceCount;
if(l&&l.length>h)for(l=l.length-1;l>=h;--l)c.removeChild(k,e._getDataNodeName(),l)},"_updateLiveData")},_playLiveData:function(a,b){var c=arguments,e=this;this._syncModelAndData(a,b,function(l,k){null==l&&(l=[]);if(l&&l.length<e.instanceManager.instanceCount)for(l=Math.max(l.length,Math.abs(e.minOccur));l<e.instanceManager.instanceCount;++l)e.instanceManager.removeInstance(l);else if(l&&l.length>e.instanceManager.instanceCount)for(k=0>e.maxOccur?l.length:Math.min(l.length,e.maxOccur),l=e.instanceManager.instanceCount;l<
k;++l){var h=e.instanceManager.addInstance();h&&e._playLiveData.apply(h,c)}},"_playLiveData")}});g.defineProps({completionExp:{get:function(){return this.getAttribute("completionExp")}},completionExpReq:{get:function(){return this.getAttribute("completionExpReq")}},minOccur:{get:function(){return this.getOrElse(this.jsonModel.minOccur,1)}},maxOccur:{get:function(){return this.getOrElse(this.jsonModel.maxOccur,1)}},initialOccur:{get:function(){return this.getOrElse(this.jsonModel.initialOccur,1)}},
repeatable:{get:function(){return 1!=this.minOccur||1!=this.maxOccur}},canBeRepeatable:{get:function(){return 0>this.maxOccur||1<this.maxOccur}},panel:{get:function(){return this}},toolbar:{get:function(){this.getElement("guideToolbar")}},instanceManager:{get:function(){return this._instanceManager}},instanceIndex:{get:function(){var a=this._guide()._currentContext;a&&a.managedExp&&this._addDependant(a.contextNode,a.expression);return this.instanceManager._instances.indexOf(this)}},title:{get:function(){return this.jsonModel["jcr:title"]},
set:function(a){var b=this.title;b!==a&&(this.jsonModel["jcr:title"]=a,this.trigger(d.event.GuideModelEvent.MODEL_CHANGED,d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.MODEL_CHANGED,this,"title",b,a)))}},summary:{get:function(){return this._summary},set:function(a){var b=this._summary;b!==a&&(this._summary=a,this.trigger(d.event.GuideModelEvent.MODEL_CHANGED,d.event.GuideModelEvent.createEvent(d.event.GuideModelEvent.MODEL_CHANGED,this,"summary",b,this._summary)))}},enableLayoutOptimization:{get:function(){return this.getOrElse(this.jsonModel,
"layout.enableLayoutOptimization",!1)}},isNavigable:{get:function(){var a=this.getOrElse(this.jsonModel,"layout.nonNavigable",!1);return"string"===typeof a?"true"!==a:!a}},_hopsToRootPanel:{get:function(){return d.util.GuideUtil._countHopsToRootPanel(this)}},_ancestorRepeatable:{get:function(){for(var a=this.parent;a;){if(a&&a.repeatable)return!0;a=a.parent}return!1}},enabled:{get:function(){return d.model.Scriptable.prototype._getEnabled.call(this)},set:function(a){var b=this.enabled;d.model.Scriptable.prototype._setEnabled.call(this,
a);this._parentAccess&&a!=b&&this._changeContainerAccess(a)}},_hasLazyDescendant:{get:function(){return f.isEmpty(guideBridge._guide.allLazyChildren)?!1:!0}}});g.addMixins([d.model.mixin.AddNavigationContext,d.model.mixin.AddDependencyMgmt])})(_,guidelib);(function(f,d){d.model.GuideTableRow=d.model.GuidePanel.extend({msClassName:"guideTableRow"})})(_,guidelib);
(function(f,d){(d.model.GuideTable=d.model.GuidePanel.extend({msClassName:"guideTable"})).defineProps({mobileLayout:{get:function(){return this.jsonModel.layout.mobileLayout}},columnWidth:{get:function(){return this.jsonModel.columnWidth}}})})(_,guidelib);
(function(f,d){(d.model.RootPanelNode=d.model.GuidePanel.extend({msClassName:"rootPanelNode",_clearInactiveLazyViews:function(g){f.each(this.childViews,function(a){a._clearInactiveLazyViews(g)})}})).defineProps({toolbar:{get:function(){return this.getElement("guideToolbar")||this.parent.toolbar}}})})(_,guidelib);
(function(f,d,g){function a(c){return function(){return!c.apply(this,arguments)}}function b(c){return c instanceof Array?Array.prototype.includes.bind(c):c}d.model.util.CommonUtils={returnMinimalJSON:function(c,e,l){g.isObject(e)||(e={});g.each(c,function(k){g.isUndefined(l.jsonModel[k])?g.isUndefined(l[k])||(e[k]=l[k]):e[k]=l.jsonModel[k]})},createMap:function(c,e){return g.mapObject(g.object(c,[]),function(){return e})},updatedMapIfNot:function(c,e,l){return _updateMap(c,a(b(e)),l)},updatedMap:function(c,
e,l){return _updateMap(c,b(e),l)},_updatedMap:function(c,e,l){var k={},h;for(h in c)c.hasOwnProperty(h)&&(k[h]=e(h)?l:c[h]);return k},_getScope:function(c){return Object.assign(d.runtime,c._guide().runtime)}}})($,guidelib,_);
(function(f,d,g){var a=xfalib.ut.XfaUtil.prototype.getOrElse,b=g.model.util.CommonUtils,c=g.model.GuideSchema.prototype.GuideStateConstants,e=function(){var h=void 0===window.AF_log_config?"0-a9":"1-"+window.AF_log_config;xfalib.ut.XfaUtil.prototype.registerLocaleProperties(g.i18n);window.formBridge?(window.formBridge.registerConfig("contextPath",window.guideBridge.userConfig.contextPath),window.formBridge.registerConfig("LoggerConfig",{logConfigString:h,categoryAcronyms:{d:"AF"}})):xfalib.ut.XfaUtil.prototype.logger=
new xfalib.ut.Logger({jsonModel:{logConfigString:h,categoryAcronyms:{d:"AF"}}})},l={triggerEventOnWindow:function(h){d(window).trigger(h)},postExternalMessage:function(h){window.guideBridge._postExternalMessage({name:h})}},k={createView:function(h,p){l.postExternalMessage("_layoutstart");h=new g.view.GuideContainerView({element:p,model:h});window.guideBridge._setGuideView(h);g.util.GuideUtil.initializeHelp();g.util.AdUtil.applyDescriptionPlugin();l.postExternalMessage("_layoutend");d(window).on("mousedown.guidebridge",
function(){window.guideBridge.clickedOnWindow=!0})},getLastFocusItem:function(h){var p;h.runtime.guideContext&&(p=g.util.GuideUtil.fetchXMLNodeValue(h.runtime.guideContext.guidePrefillXml,"lastFocusItem"));f.isUndefined(p)&&(p=g.util.GuideUtil._fetchJSONNodeValue(h.runtime.guideContext.guidePrefillJson,"afSubmissionInfo.lastFocusItem"));f.isUndefined(p)&&(p=window.guideBridge.customContextProperty("lastFocusItem"));return p},setFocus:function(h){h?window.guideBridge.setFocus(h):window.guideBridge.setFocus()},
preventCheckBoxMovementOnClick:function(){xfalib.ut.XfaUtil.prototype.isSafari()&&!xfalib.ut.TouchUtil.TOUCH_ENABLED&&d("#guideContainerForm").addClass("macSafariForm")},disableDefaultSubmit:function(){d("#guideContainerForm").submit(function(h){h.preventDefault()})},preventFormSubmitOnEnter:function(){d("#guideContainerForm input").keypress(function(h){13!=h.keyCode&&13!=h.charCode&&13!=h.which||h.preventDefault()})},renderView:function(h,p){k.createView(h,p);p=k.getLastFocusItem(h);k.setFocus(p);
l.triggerEventOnWindow({type:"guideInitialized",guide:h});k.preventCheckBoxMovementOnClick();k.disableDefaultSubmit();k.preventFormSubmitOnEnter()}};g.model._createXfaAndGuideModel=function(h,p,q){p&&(xfalib.script.XfaModelRegistry.prototype.createModel(p),new xfalib.acrobat.Acrobat);h=g.model.GuideModelRegistry.prototype.createModel(h,q);h._bindRefMap={};return h};g.model._getGuideJsonWithSyncXfaProps=function(h,p){g.model._createXfaAndGuideModel(h,p).syncXFAProps();return{guidejson:JSON.stringify(h),
xfajson:JSON.stringify(p)}};g.model._prepareGuide=function(h,p){var q=p.internal.liveDataUtils,t=p.internal.liveModel,m=function(u){var v=[];try{v=JSON.parse(u).map(function(w){return new g.model.FileAttachmentWrapper(JSON.parse(w))})}catch(w){w.stack&&p.logger().error(w.stack)}return v};h.isMergedJson&&h.data?(h.data.guideState&&h.data.guideState.attachments&&(h.data.attachments=m(h.data.guideState.attachments)),window.guideBridge.restoreGuideState(h.data)):h.data?(p.setGuideState(c.GUIDE_STATE_MERGE_PROGRESS),
q.initLiveData(h.data,null,f.isString(p.xdpRef),f.isString(p.xsdRef),p.getAttribute("xsdRootElement"),m(h.attachments)),q.playLiveData(p.rootPanel),t.prefillCrossFragFields(p),p.setGuideState(c.GUIDE_STATE_MERGE_COMPLETE),p.prepare()):(p.prepare(),q.initLiveData(null,null,f.isString(p.xdpRef),f.isString(p.xsdRef),p.getAttribute("xsdRootElement")));h=guideBridge.customContextProperty("fileAttachmentMap");if(!f.isUndefined(h)&&"string"===typeof h)try{h=JSON.parse(h)}catch(u){u.stack&&p.logger().error(u.stack),
h=void 0}var r=window.guideBridge._getFileAttachmentsList();if(!f.isUndefined(h))for(q=0;q<r.length;q++)t=r[q],m=h[t.somExpression],t.fileAttachment.value=m,f.isEmpty(m)||(t._fileList=m.split("\n"));p.setGuideState(c.GUIDE_STATE_MODEL_COMPLETE)};g.model.markDirtyPanels=function(h,p,q,t){h=b.createMap(h,0);if(f.isEmpty(p))t.internal.GuideDirtyMarkerAndVisitor.visitMap=h;else{if(null===q||0===q.length)q=t.internal.liveDataUtils.getListOfDirtyPanels(p);q&&0<q.length&&(h=b.updatedMapIfNot(h,q,1),t.internal.GuideDirtyMarkerAndVisitor.visitMap=
h)}};g.model.initializeLiveDataUtils=function(h){return"formdatamodel"===h||"jsonschema"===h?new g.model.LiveJsonUtils:new g.model.LiveXmlUtils};g.model.prepareInput=function(h){return{guideJson:JSON.parse(h.guidejson||"null"),guideContext:JSON.parse(h.guidecontext||"null"),guidemergedjson:JSON.parse(h.guidemergedjson||"null"),xfaJson:JSON.parse(h.xfajson||"null"),xfaRenderContext:JSON.parse(h.xfarendercontext||"null")}};g.model.mergeData=function(h,p,q){var t=h.data,m=[],r={};p.runtime.guideContext=
p.runtime.guideContext||{};if(h.isMergedJson){if("string"===typeof h.data)try{h.data=JSON.parse(h.data)}catch(w){h.data=""}t=a(h.data,"guideState.guideLiveData",a(t,"guideState.guidePrefillXml",a(h.data,"guideState.guidePrefillJson",void 0)));(r=a(h.data,"guideState.guideContext.afSubmissionInfo.afDraft","").replace(/"/g,""))&&(m=r.split(","));r=a(h.data,"guideState.guideContext.customPropertyMap",{});var u=a(h.data,"guideState.customContext",null);var v=a(g,"__runtime__.guideContext.customPropertyMap",
{});v=f.extend({},v,a(p,"runtime.guideContext.customPropertyMap",{}));!f.isEmpty(u)&&f.isEmpty(v)&&guideBridge.customContextProperty(v);u=a(h.data,"guideState.fileAttachmentMap",null);v=guideBridge.customContextProperty("fileAttachmentMap");!f.isEmpty(u)&&f.isEmpty(v)&&guideBridge.customContextProperty("fileAttachmentMap",u)}else guideBridge.customContextProperty("fileAttachmentMap",h.fileAttachmentMap),guideBridge.customContextProperty("fileAttachmentWrappers",h.fileAttachmentWrappers);p.xdpRef&&
(u=a(h.data,"guideState.xfaState.xfaRenderContext",null),null!=u&&(xfalib.runtime.renderContext=JSON.parse(u)),xfalib.runtime.xfa.form._initialize(!0),d(window).trigger("XfaInitialized"));""!==t&&("formdatamodel"===q.schemaType||"jsonschema"===q.schemaType?q.guidePrefillJson=t:q.guidePrefillXml=t);q.customPropertyMap=d.extend({},q.customPropertyMap,r);d.extend(!0,p.runtime.guideContext,q);g.model.markDirtyPanels(p.allLazyChildren,t,m,p);g.model._prepareGuide(h,p);0<p.allLazyChildren.length&&guideBridge.customContextProperty("fileAttachmentMap")&&
(h=guideBridge.customContextProperty("fileAttachmentMap"),"string"===typeof h&&(h=JSON.parse(h)),p.internal.liveDataUtils._updateLazyAttachmentMap(h))};g.model.fireOnContainerDomElementReady=function(h,p,q,t){e();var m=this.prepareInput(h);h=m.guideJson;var r=m.guideContext,u=m.guidemergedjson,v=m.xfaJson;m=m.xfaRenderContext;var w;if(null===h||null==r)console.error("Unable to load Form. Adaptive Form Json is invalid.");else{void 0!==window.guideBridge&&(w=window.guideBridge._getStorage());try{t=
f.isObject(t)?JSON.stringify(t):t,t=JSON.parse(t)}catch(E){t={}}!p||null!==u&&""!==u&&null===a(w,"guideState",null)?(p=u,null!==a(w,"guideState",null)&&(p=w),p={data:p,isMergedJson:!0}):p instanceof Function?(w=p(),p=w.then instanceof Function?w:f.extend({},{isMergedJson:!1},p())):(p=a(window.guideBridge,"userConfig.submitConfig.aemFormComponentPath",r.guidePath),p=window.guideBridge._getGuidePathUrl(".af.prefilldata.json",p),p=this.fetchData(p+window.location.search));w=this.initializeLiveDataUtils(r.schemaType);
u=new g.model.LiveModel;"server"==window.guideBridge.hostName&&(u._disableFunctions(),w._disableFunctions(),f.each(f.functions(k),function(E){k[E]=function(){}}),window.formBridge&&(window.formBridge.ajaxCallMode="server"));u.createDataNodes(h.repeatBindRef);var x=a(h,"allLazyChildren",[]),A={};A=f.extend({},A,{liveModel:u,liveDataUtils:w});l.postExternalMessage("_formdomstart");try{var y=g.model._createXfaAndGuideModel(h,v,A);y.runtime.guideContext.customPropertyMap=f.extend({},y.runtime.guideContext.customPropertyMap,
t);0<x.length&&u.createCrossFragFields(h.guideGlobalLazyField,y);y.version=new g.util.Version({scriptingBehaviourVersion:r.scriptingBehaviourVersion});y.setGuideState(c.GUIDE_STATE_MODEL_CREATED);v&&m&&(xfalib.runtime.renderContext=m);l.triggerEventOnWindow({type:"guideModelInitialized",guide:y})}catch(E){E.stack&&console.error(E.stack)}var D=q||d("div.guideContainerWrapperNode");if(p.then instanceof Function)return p.then(function(E){g.model.mergeData(E,y,r);k.renderView(y,D)});g.model.mergeData(p,
y,r);k.renderView(y,D);return y}};g.model.fetchData=function(h){var p=d.Deferred();"server"===window.guideBridge.hostName?p.resolve({data:"",isMergedJson:!1}):d.ajax({url:h,type:"POST",dataType:"json"}).done(function(q){q=f.extend({},q,{isMergedJson:!1});p.resolve(q)}).fail(function(q,t,m){console.error(t+" "+m);p.resolve({data:"",isMergedJson:!1})});return p.promise()}})(_,$,window.guidelib);
(function(f,d){d.intervals=d.intervals||{};d.intervals.intId=setInterval(function(){var g=f("div.fileattachmentlisting button[data-guide-fileListing]");if(0<g.length){clearInterval(d.intervals.intId);var a;g.click(function(){a=f(this);f("#fileAttachment").addClass("fileAttachmentDialog");f("#fileAttachment").appendTo("body");f("#fileAttachment").modal("show")});f(".fileAttachmentDialog").on("hidden.bs.modal",function(b){f(this).removeClass("fileAttachmentDialog");a.focus()})}},1E3)})($,guidelib);
(function(f){var d=function(a){this.element=f(a)};d.prototype.add=function(){$this=this.element;var a=$this.attr("data-guide-id");a&&(window.guideBridge?(a=window.guideBridge._resolveId(a))&&(a=a.instanceManager.insertInstance(a.instanceIndex+1))&&window.guideBridge.setFocus(a.somExpression,"firstItem"):console.log("could not add new instance"+a))};d.prototype.remove=function(){$this=this.element;var a=$this.attr("data-guide-id");a&&(window.guideBridge?(a=window.guideBridge._resolveId(a))&&a.instanceManager.removeInstance(a.instanceIndex):
console.log("could not remove instance"))};var g=f.fn.guideAddRemove;f.fn.guideAddRemove=function(a){return this.each(function(){var b=f(this),c=b.data("guideAddRemove");c||b.data("guideAddRemove",c=new d(this));if("string"==typeof a)c[a]()})};f.fn.guideAddRemove.Constructor=d();f.fn.guideAddRemove.noConflict=function(){f.fn.guideAddRemove=g;return this};f(document).on("click.guideAddRemove.data-api keypress.guideAddRemove.data-api",'[data-guide-addremove\x3d"add"]',function(a){if("keypress"!=a.type||
guidelib.util.GuideUtil.isEnterKeyPressed(a))a.preventDefault(),a.stopImmediatePropagation(),f(this).guideAddRemove("add")}).on("click.guideAddRemove.data-api keypress.guideAddRemove.data-api",'[data-guide-addremove\x3d"remove"]',function(a){if("keypress"!=a.type||guidelib.util.GuideUtil.isEnterKeyPressed(a))a.preventDefault(),f(this).guideAddRemove("remove")})})($);
(function(f){f(document).on("panelRemoved.af",".guideTableNode",function(d,g,a){d.stopPropagation();d=f(d.target).find("tr.guideTableRowNode:not(.guideTableHeader)");1<a?(a=d.eq(a-1),guidelib.util.GuideUtil.setFocusOnFirstItemOfTableRow(a)):1==a&&(a=d.eq(1),0<a.length&&guidelib.util.GuideUtil.setFocusOnFirstItemOfTableRow(a))})})($);
$(function(f){var d=function(a){a=window.guideBridge._resolveId(a);return void 0===a||null===a?"":a.somExpression},g=xfalib.ut.TouchUtil.POINTER_UP;"touchend"===g&&(g="mouseup");f("body").on(g+" keydown","[data-guide-wizard-nav]",function(a){var b=!1;"keydown"!==a.type||32!==a.keyCode&&13!==a.keyCode||(a.preventDefault(),b=!0);if("pointerup"===a.type||b)a=f(this).data("guide-wizard-nav"),_.isObject(a)?a.somExpression=d(a.panelId):(a=d(a),b=f(this).data("guide-wizard-nav-type"),a={somExpression:a,
focusOption:b,runCompletionScript:!0}),window.guideBridge.setFocus(a)});window.guideBridge.on("elementNavigationChanged",function(a,b){a=window.guideBridge._guideView.getView(b.newText);if(a instanceof guidelib.view.GuidePanelView&&(b=a.parentView.$element.find('[id*\x3d"'+guidelib.util.GuideUtil.GUIDE_ITEM_NAV_CONTAINER_SUFFIX+'"]'),!_.isUndefined(b)&&!_.isNull(b)&&0<b.length)){var c=b.eq(0);_.isUndefined(c.data("guideNavScrollPos"))&&c.data("guideNavScrollPos",0);b=c.data("guideNavScrollPos");var e=
a.parentView.childViews,l,k=0;for(l=0;l<e.length&&a!==e[l];l++)e[l]._model.visible&&(k+=1);a=Math.abs(k-b);guidelib.util.GuideUtil.navScroll(c,k>b?"right":"left",a,'[id*\x3d"'+guidelib.util.GuideUtil.GUIDE_ITEM_NAV_SUFFIX+'"]:not(.hidden)')}})});
$(function(f){window.guideBridge.connect(function(){var g=!window.guideBridge._guide.getAttribute("disableSwipeGesture");window.guideBridge.enableSwipeGesture(g,g)},this);var d=function(){f(window).scrollTop()==f(document).height()-f(window).height()?f("[data-guide-scroll-indicator]").removeClass("mobileScrollIndicator"):f(window).scrollTop()<f(document).height()-f(window).height()&&f("[data-guide-scroll-indicator]").addClass("mobileScrollIndicator")};f(window).on("load scroll resize",d);window.guideBridge.on("elementNavigationChanged",
d)});(function(f){window.guideBridge.on("elementNavigationChanged",function(d,g){if(d=window.guideBridge.resolveNode(g.newText))g=f("[data-target-guide-content]").text(),null!=g&&0<g.length&&!(d instanceof guidelib.model.RootPanelNode)&&f("[data-target-guide-content]").text(d.title?d.title:"")})})($);$(function(f){window.guideBridge.connect(function(){var d=window.guideBridge.progressive;if(d)f(document).on("click","button[data-guide-progressive-nav]",f.proxy(d.navigateSection,d))})});
(function(f,d,g){var a=d.util.GuideUtil,b=a.chartType,c=d.chartUtils={reducerOptions:window.chartReducer.reducerOptions,getDisplayFormat:function(e){var l="";if("date"===e||"date-time"===e)l="date{"+d.i18n.datePatterns.med+"}";return l},gatherAxisData:function(e){var l,k=0,h,p;new Map;var q={},t="fd/ccm/web-channel/components/chart/v1/chart"===e.jsonModel["sling:resourceType"],m={};q.isFDMDataSource="fdm"===e.dataSourceType?!0:!1;q.chartModel=e;m.valueDisplayFormat="";m.labelDisplayFormat="";m.categoryDataType=
"";m.valueDataType="";var r=e.getOrElse(e._guide().runtime,e.repeatableItem,void 0);e.reducerXFunction&&"none"!==e.reducerXFunction&&!t?(q.categoryExp=e.yExp,q.valueExp=e.xExp,q.reducerFunction=e.reducerXFunction,m=c._setProp(m,"categoryDataType",e.jsonModel.yDataType),m=c._setProp(m,"valueDataType",e.jsonModel.xDataType)):(q.categoryExp=e.xExp,q.valueExp=e.yExp,m=c._setProp(m,"categoryDataType",e.jsonModel.yDataType),m=c._setProp(m,"valueDataType",e.jsonModel.xDataType),e.reducerYFunction&&"none"!==
e.reducerYFunction&&(q.reducerFunction=e.reducerYFunction));if(q.isFDMDataSource){m.valueDisplayFormat=c.getDisplayFormat(m.valueDataType);m.labelDisplayFormat=c.getDisplayFormat(m.categoryDataType);r=e.repeatableItem;q.categoryExp=q.categoryExp.substring(r.length+1,q.categoryExp.length).split("/");q.valueExp=q.valueExp.substring(r.length+1,q.valueExp.length).split("/");if(t&&(m.series=l=[],"quadrant"===e.jsonModel.chartType&&(q.isXYReferencePointSet=!1,"staticReferencePoint"===e.jsonModel.referencePointType))){if("date"===
e.jsonModel.xDataType||"date-time"===e.jsonModel.xDataType)e.jsonModel.xAxisReferencePoint=(new Date(e.jsonModel.xAxisReferencePoint)).getTime();q.isXYReferencePointSet=!0}if("true"==e.jsonModel.multiSeries){var u=e.jsonModel.seriesRepeatableItem;var v=e.jsonModel.seriesName.substring(u.length+1,e.jsonModel.seriesName.length);k=(h=this._getRepeatableInstances(u,null,e))?h.length:k;var w=r.substring(u.length,r.length);"quadrant"===e.jsonModel.chartType&&"fdmReferencePoint"===e.jsonModel.referencePointType&&
(p=e.jsonModel.seriesReferenceExp.substring(u.length+1,e.jsonModel.seriesReferenceExp.length));for(var x=0;x<k;x++)q.repeatableInstances=this._getRepeatableInstances(w,h[x],e),q.repeatableItemForReferencePoint,p&&!q.isXYReferencePointSet&&(q.repeatableItemForReferencePoint=void 0,this.matchUserInputWithFDM(e.jsonModel.seriesReferenceDataType,h[x][p],e.jsonModel.seriesReferenceValue)&&(q.repeatableItemForReferencePoint=r)),u=this.buildChartData(q),u.name=h[x][v],l.push(u)}else q.repeatableInstances=
this._getRepeatableInstances(r,null,e),q.repeatableItemForReferencePoint=r,u=this.buildChartData(q),l.push(u);t&&"quadrant"===e.jsonModel.chartType&&"fdmReferencePoint"===e.jsonModel.referencePointType&&!q.isXYReferencePointSet&&(e.jsonModel.xAxisReferencePoint=void 0,e.jsonModel.yAxisReferencePoint=void 0);q.repeatableInstances=null}else r&&(q.repeatableInstances=r.instanceManager.instances);q.repeatableInstances&&(e=this.buildChartData(q),m.label=e.label,m.value=e.value);return m},buildChartData:function(e){var l=
{},k=new Map,h;l.value=[];l.label=[];"quadrant"===e.chartModel.jsonModel.chartType&&"fdmReferencePoint"===e.chartModel.jsonModel.referencePointType&&e.repeatableItemForReferencePoint&&(h=e.chartModel.jsonModel.xyReferencePointExp.substring(e.repeatableItemForReferencePoint.length+1,e.chartModel.jsonModel.xyReferencePointExp.length).split("/"));var p=this;g.each(e.repeatableInstances,function(t,m){if(e.isFDMDataSource){if(g.isArray(e.categoryExp)&&g.isArray(e.valueExp)){var r=t;g.each(e.categoryExp,
function(w){r=r[w]});var u=r;r=t;g.each(e.valueExp,function(w){r=r[w]});var v=r;"quadrant"===e.chartModel.jsonModel.chartType&&!e.isXYReferencePointSet&&e.repeatableItemForReferencePoint&&"fdmReferencePoint"===e.chartModel.jsonModel.referencePointType&&(r=t,g.each(h,function(w){r=r[w]}),p.matchUserInputWithFDM(e.chartModel.jsonModel.xyReferencePointDataType,r,e.chartModel.jsonModel.xyReferencePointValue)&&(e.chartModel.jsonModel.xAxisReferencePoint="date"===e.chartModel.jsonModel.xDataType||"date-time"===
e.chartModel.jsonModel.xDataType?(new Date(u)).getTime():u,e.chartModel.jsonModel.yAxisReferencePoint=v,e.isXYReferencePointSet=!0))}}else u=t[e.categoryExp].value,v=t[e.valueExp].value;u=g.isUndefined(u)?"":u;v=g.isUndefined(v)?"":v;e.reducerFunction?(k.has(u)||k.set(u,[]),k.get(u).push(v)):(l.label.push(u),l.value.push(v))});if(e.reducerFunction){var q=c.reducerOptions[e.reducerFunction]||window[e.reducerFunction];k.forEach(function(t,m){l.label.push(m);l.value.push(q(k.get(m)))})}return l},matchUserInputWithFDM:function(e,
l,k){return("date-time"==e||"date"==e)&&(new Date(k)).getTime()==(new Date(l)).getTime()||"boolean"==e&&JSON.parse(k)==l||k==l},constructChart:function(e,l){var k=e.chartType,h=e.showLegends,p=e.legendPosition,q=e.tooltipHtml,t=e.innerRadius,m=e.lineColor,r=e.pointColor,u=e.areaColor,v=e.data,w=[],x={},A={},y;if(e.reducerXFunction&&"none"!==e.reducerXFunction){var D="y";var E="x"}else D="x",E="y";v.labelDisplayFormat&&(v.label=v.label.map(function(K){return d.util.GuideUtil.formatValue(K,v.labelDisplayFormat,
v.categoryDataType)}));v.valueDisplayFormat&&(v.value=v.value.map(function(K){return d.util.GuideUtil.formatValue(K,v.valueDisplayFormat,v.valueDataType)}));x[D]="label";x[E]="value";A[E]=dv.scale.linear().lowerLimit(0);try{if(a.isChartTooltipApplicable(k)&&q&&""!==q){var z=x.x,B=x.y;w=[dv.behavior.rollover().content(function(K){var P=q.replace(/\${x}/g,K.data[z]);return P=P.replace(/\${y}/g,K.data[B])})]}A[D]=dv.scale.ordinal();var F=dv.chart();F.map("fill","label").map("x",x.x,A.x).map("y",x.y,
A.y);var C=dv.geom.point().set("fill",r).behaviors(w),G=dv.geom.line().set("fill",m),H=dv.geom.area().set("alpha",.1).set("fill",u),I=dv.coord.cartesian().flip(!0);r=function(){F.set("stroke",m);y=[dv.geom.line()]};var J=function(){y=[dv.geom.bar().behaviors(w)];F.map("x","label",A[D]).map("y","value")},M=function(){J();"y"===D&&F.coord(I)};u=function(K){M();v[D]=Array.apply(null,Array(v.label.length)).map(function(){return 1});x[D]=D;0<K&&(A[D]=A[D].padding(.3));F.map("x",x[D],A[D]);F.coord(dv.coord.polar().flip(!0).innerRadius(K)).guide(["x",
"y"],"none").position("fill")};switch(k){case b.LINE:r();y.push(G);break;case b.POINT:r();y.push(C);break;case b.AREA:r();y.push(G);y.push(H);break;case b.LINE_POINT:r();y.push(C);y.push(G);break;case b.BAR:J();"x"===D&&F.coord(I);break;case b.COLUMN:M();break;case b.PIE:u(0);break;case b.DONUT:u(t)}F.layers(y);F.data(v).width(e.width+"%").height(e.height).parent("#"+l.attr("id")).padding({left:10,top:10,right:10,bottom:10});a.isChartAxisTitleApplicable(k)&&F.guide("x",dv.guide.axis().title(e.xAxisTitle)).guide("y",
dv.guide.axis().title(e.yAxisTitle));a.isChartLegendApplicable(k)&&h&&F.guide("fill",dv.guide.legend().orientation(p))}catch(K){window.guideBridge._guide.logger().log("Error while constructing chart "+K)}return F},_setProp:function(e,l,k){e.constructor!={}.constructor||g.isEmpty(k)||(e[l]=k);return e},_getRepeatableInstances:function(e,l,k){k=k._guide().internal.liveDataUtils;l=l?l:k._liveDataDoc;var h="";if(!g.isEmpty(l)&&!g.isEmpty(e))return g.isEmpty(l.afData)?e=e.substring(1,e.length):(l=l.afData,
h=k.constants.BOUND_DATA_XPATH),repeatableInstances=k._getElement(l,h+e)}}})($,guidelib,_);(function(){var f=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(d,g){var a=(new Date).getTime(),b=Math.max(0,16-(a-f));g=window.setTimeout(function(){d(a+b)},b);f=a+b;return g});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(d){clearTimeout(d)})})();
(function(f,d,g,a){function b(r,u){if(null===r||"undefined"===typeof r)return[];"string"==typeof u&&(u=u.split("."));if(0==u.length)return[r];var v=[];if(r instanceof Array){for(var w=0;w<r.length;w++)v=v.concat(b(r[w],u));return v}if(!r.hasOwnProperty(u[0]))return[];w=u[0];u=u.slice(1);r=r[w];r instanceof Array||(r=[r]);for(w=0;w<r.length;w++)v=v.concat(b(r[w],u));return v}function c(r){var u=this.callbackData,v=[];if(!a.isEmpty(r)){var w=JSON.parse(r);r=b(w,u.savedValue);w=b(w,u.displayedValue);
for(var x=0;x<r.length;x++)v.push(r[x]+"\x3d"+w[x])}u.field.items=v}function e(r){var u=this.callbackData;r=JSON.parse(r);u.field.value=b(r,u.value)}function l(){f("#loadingPage").addClass("guideServiceLoading")}function k(){f("#loadingPage").removeClass("guideServiceLoading")}var h=function(r){if(r.responseText){var u=this.inputMapping;try{var v=JSON.parse(r.responseText)}catch(w){}v&&v.errors&&f.each(v.errors,function(w,x){x&&x.bindRef&&x.errorMessages&&(w=x.bindRef.slice(1).split("/").join("."),
(w=u[w])&&w.markAsInvalid(x.errorMessages.join("\n")))})}this.customErrorHandler&&this.customErrorHandler.call(this,r,v)},p=function(r,u){var v=0,w=r.split(".");Array.isArray(u)&&(v++,u=u[0]);f.each(w,function(x){u&&(u=u[w[x]],Array.isArray(u)&&(v++,u=u[0]))});return v},q=function(r,u,v,w){if(0===v.length)u.value=g.ut.XfaUtil.prototype.getOrElse(w,r,"");else{var x=v.pop();if(u.repeatable){for(;"object"===typeof w&&!Array.isArray(w);){var A=r.indexOf(".");w=w[r.substring(0,A)]||"";r=r.substring(A+
1)}A=w.length;u.instanceManager.instanceCount<A&&u.instanceManager.addInstances({instanceCount:A});Array.isArray(w)&&f.each(w,function(y){if(y>=u.instanceManager.instanceCount)return!1;u=u.instanceManager.instances[y];q(r,u[x],v,w[y])})}else q(r,u[x],v,w);v.push(x)}},t=function(r,u,v){if(null!=r&&0!=r.length){u=this.callbackData;try{var w=JSON.parse(r)}catch(x){w={response:r}}f.each(u,function(x,A){var y=p(x,w),D=[];a:for(;0<y;){if(a.isNull(A.parent))break a;D.push(A.name);A=A.parent;A.repeatable&&
y--}q(x,A,D,w)});window.guideBridge._guide.runPendingExpressions()}},m=d.dataIntegrationUtils={setOptionsFromService:function(r,u,v){this.executeOperation(r,u,v,c);return v.field.items},setValueFromService:function(r,u,v){this.executeOperation(r,u,v,e);return v.field.items},executeOperation:function(r,u,v,w,x,A){w=w||t;var y={};f.each(u,function(K,P){K=K.split(".");var O=y,L;for(L=0;L<K.length-1;L++)O[K[L]]=O[K[L]]||{},O=O[K[L]];O[K[L]]="object"===typeof P?P.value:P});var D=r.wsdlEndPoint;var E=r.operationName;
var z=JSON.stringify(y);var B=r.port;var F=r.soapActionURI;var C=r.namespace;var G=r.inputRoot;var H=JSON.stringify(r.inputAttr);var I=r.serviceEndPoint;A||console.log("No model parameter passed to this API, this may fail during server side re-validation. Please correct your scripts.");A=A&&A._guide&&A._guide();var J=(A?A.jcrPath:d.__runtime__.guide.jcrPath)+".af.dermis";J=null!=guideBridge?guideBridge._getUrl(J):Granite.HTTP.externalize(J);var M={};r.wsdlEndPoint?(M.functionToExecute="invokeWsdlOperation",
M.wsdlEndPoint=D,M.operationName=E,M.input=z,B&&(M.port=B),F&&(M.soapActionURI=F),C&&(M.namespace=C),G&&(M.inputRoot=G),H&&(M.inputAttr=H),I&&(M.serviceEndPoint=I)):r.formDataModelId&&(M.functionToExecute="invokeFDMOperation",M.formDataModelId=r.formDataModelId,M.input=JSON.stringify(y),M.operationName=r.operationName,M.runValidation=r.runValidation);M.guideNodePath=A?A._currentContext.contextNode.jcrPath:d.__runtime__.guide._currentContext.contextNode.jcrPath;f.ajax({type:"POST",url:J,data:M,beforeSend:l,
complete:k,dataType:"text",success:w,error:h,context:{callbackData:v,inputMapping:u,customErrorHandler:x}})}};d.wsdlUtils={setOptionsFromWSDL:function(r,u,v){m.executeOperation(r,u,v,c);return v.field.items},setValueFromWSDL:function(r,u,v){m.executeOperation(r,u,v,e);return v.field.items},executeWSDLFunction:function(r,u,v){m.executeOperation(r,u,v)}}})($,guidelib,xfalib,_);
(function(f,d,g){g.model.GuideDirtyMarkerAndVisitor=xfalib.ut.EventClass.extend({initialize:function(){this.visitMap={}},_flattenDirtyPanelToList:function(){var a=this.flattenDirtyPanelMapToCSV();if(0<a.length)return a.split(",")},flattenDirtyPanelMapToCSV:function(){var a="";d.each(d.keys(this.visitMap),function(b,c){0===this.visitMap[b]&&(a+=b+",")},this);0<a.length&&(a=a.substring(0,a.length-1));return a},_findAndMarkDirty:function(a,b){var c=d.keys(a);d.each(b,function(e,l){l=0;var k=null,h;for(h=
0;h<c.length;++h){var p=g.util.GuideUtil.commonPrefixLen(e,c[h]);l<p&&(l=p,k=c[h])}0<l&&(a[k]=0)})},_iterateMapAndReturnKeyOnValueFound:function(a,b){var c;d.each(d.keys(a),function(e,l){a[e]===b&&(c=e)});return c},_updateCountOrInsert:function(a,b){d.isUndefined(a[b])?a[b]=0:a[b]++;return a}})})($,_,window.guidelib);(function(f){f(function(){f(window).trigger("resize")})})($);
(function(f,d){window.FD=window.FD||{};FD.FP=FD.FP||{};FD.FP.AF={_handleDraftSave:function(g){var a=g.isAutoSaveTriggered,b=g.metadataToSave,c=g.enableAnonymous,e=window.guideBridge.getGuideContext().data[window.guideBridge.GUIDE_PATH],l=window.guideBridge.customContextProperty("draftID"),k=xfalib.ut.Class.prototype.getOrElse(window.guidelib.runtime.guideContext.customPropertyMap,{}),h,p,q={};f("#draftID").attr("value",l);var t=f("#saveButtonPath").data("savebuttonpath")||e,m=window.guideBridge._getUrl(t);
null==k&&(k={});window.guideBridge.getData({success:function(r){window.guideBridge.trigger("saveStarted",window.guidelib.event.GuideModelEvent.createEvent("saveStarted"));p=r.data;r=guideBridge.resolveNode("guide[0].guide1[0]").getAttribute("schemaType");var u="XML";d.isUndefined(r)||(u="jsonschema"==r||"formdatamodel"==r?"JSON":"XML");q=window.guideBridge.getFileAttachmentMap();r=m+".fp.draft.json?func\x3dsaveDraft";u={formPath:e,formData:p,draftID:l,formType:"af",_charset_:"UTF-8",enableAnonymousSave:c,
dataType:u,fileAttachmentMap:JSON.stringify(q),customContextProperty:JSON.stringify(k)};if(b)for(var v in b)b.hasOwnProperty(v)&&(u[v]=b[v]);var w=[];for(v in u)"formData"!==v&&w.push(v);u.fpAllowedMetadata=w.toString();f.ajax({type:"POST",url:r,async:!0,cache:!1,mimeType:"multipart/form-data",data:u,success:function(x){a||alert(guidelib.util.GuideUtil.getLocalizedMessage("",guidelib.i18n.strings.draftSavedSuccessMessage));window.guideBridge.trigger("saveCompleted",window.guidelib.event.GuideModelEvent.createEvent("saveCompleted"));
d.isUndefined(g.success)||g.success.call(g.context||this)},error:function(x){a||("503"==x.status?alert(guidelib.util.GuideUtil.getLocalizedMessage("",guidelib.i18n.LogMessages["AEM-AF-901-008"])):alert(guidelib.util.GuideUtil.getLocalizedMessage("",guidelib.i18n.LogMessages["AEM-AF-901-009"])));d.isUndefined(g.error)||g.error.call(g.context||this)}})},error:function(r){h=r;if(null!=h)return console.log(guidelib.util.GuideUtil.getLocalizedMessage("",guidelib.i18n.LogMessages["AEM-AF-901-009"])),0},
fileUploadPath:m+".fp.attach.jsp/"+l})},_handleDraftSaveWrapper:function(g){"undefined"===typeof window.guideBridge.customContextProperty("draftID")||null==window.guideBridge.customContextProperty("draftID")?f.ajax({method:"GET",url:Granite.HTTP.externalize("/content/forms/portal/draftandsubmission.fp.draft.json?func\x3dgetUid"),cache:!1,dataType:"json"}).done(function(a){window.guideBridge.customContextProperty("draftID",a.id+"_af");FD.FP.AF._handleDraftSave(g)}).fail(function(a){alert(guidelib.util.GuideUtil.getLocalizedMessage("",
guidelib.i18n.LogMessages["AEM-AF-901-009"]));return 0}):FD.FP.AF._handleDraftSave(g)}};handleDraftSave=function(g,a){var b={},c=!1,e;if(g){e=(e=g.getAttribute("metadataselector"))&&"local"===e?g.getAttribute("fpmetadata"):(e=window.guideBridge.getGlobalMetaInfo())&&e.hasOwnProperty("metadata")?e.metadata:null;if(e)if("object"===typeof e)for(var l in e){var k=JSON.parse(e[l]);b[k.key]=window.guideBridge._guide._compileExpression(k.value).call(window.guideBridge._guide)}else"string"===typeof e&&(k=
JSON.parse(e),b[k.key]=window.guideBridge._guide._compileExpression(k.value).call(window.guideBridge._guide));g.getAttribute("enableAnonymous")&&(c=g.getAttribute("enableAnonymous"))}d.isUndefined(a)&&(a={});a.metadataToSave=b;a.enableAnonymous=c;a.isAutoSaveTriggered=!1;window.FD.FP.AF._handleDraftSaveWrapper(a)}})(jQuery,_);
(function(){window.FD=window.FD||{};FD.FP=FD.FP||{};FD.FP.SaveConfigChangeListener=function(f){var d=f instanceof CQ.Dialog?f:f.findParentByType("dialog");f=d.getField("./clickExp");if(d=d.getField("./hasClickExpChanged")){var g=d.getValue(),a=f.getValue();g&&"true"==g||"handleDraftSave()"!==a||(f.setValue("handleDraftSave(this)"),d.setValue("true"))}}})();