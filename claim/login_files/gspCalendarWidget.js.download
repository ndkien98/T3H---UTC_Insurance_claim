define(["dojo/query","dojo/on","dojo/dom","dojo/dom-attr","dojo/html",webResourceURL+"/"+coreFolder+"/WebContent/scripts/components/utils.js?v\x3d"+versionWeb,"dojo/domReady!"],function(m,h,f,e,n,k){var c={leftCalendar:null,rightCalendar:null,singleCalendarArr:[],inputElements:[],buttonElements:[],setInitDate:function(b,a){if(""==a.value){var d=new Date;(a=c.getPreferedInitDate(a))?b.setDate(a):b.setDate(d)}else b.setDate(a.value)},loadCalLanguage:function(b){b.hideTime();b.loadUserLanguage(locale)},
setDateFormat:function(b,a){a=c.getPreferedDateFormat(a);var d=c.getDateMap();b.setDateFormat(d[a])},openSingleCalFunction:function(b){b.cancelBubble=!0;b.stopPropagation();for(var a=0;a<c.singleCalendarArr.length;a++){var d=c.inputElements[a];e.get(b.target,"data-met-cal-button")==e.get(d,"data-met-forCal")?c.singleCalendarArr[a]._isVisible()?c.singleCalendarArr[a]._hide():c.singleCalendarArr[a].show():c.singleCalendarArr[a]._hide()}},registerChangeEvent:function(b,a){b.attachEvent("onClick",function(){h.emit(f.byId(a),
"blur",function(a){});h.emit(f.byId(a),"keypress",function(a){});h.emit(f.byId(a),"change",function(a){});h.emit(f.byId(a),"focus",function(a){})})},createSingleCalendar:function(b,a){c.singleCalendarArr=[];c.inputElements=b;for(var d=0;d<b.length;d++)c.singleCalendarArr.push(new dhtmlXCalendarObject(b[d].id)),e.get(b[d],"id")&&"txtAppOwnerDateOfBirth"==e.get(b[d],"id")&&c.registerChangeEvent(c.singleCalendarArr[d],b[d]),e.get(b[d],"calendarFlag")&&"true"==e.get(b[d],"calendarFlag")||k.isNull_Blank_Undefined(a[d])||
h(a[d],"click",c.openSingleCalFunction),e.set(b[d],"calendarFlag","true");for(a=0;a<c.singleCalendarArr.length;a++)c.setInitDate(c.singleCalendarArr[a],b[a]),c.loadCalLanguage(c.singleCalendarArr[a]),c.setDateFormat(c.singleCalendarArr[a],b[a]),c.handleDate(c.singleCalendarArr[a],b[a]),c.registerActionOnLinkedDates(c.singleCalendarArr[a],c.getLinkedCalendarObject(b[a]),b[a]),c.registerChangeEvent(c.singleCalendarArr[a],b[a]);for(a=0;a<c.singleCalendarArr.length;a++)c.triggerActionOnLinkedDates(c.singleCalendarArr[a],
c.getLinkedCalendarObject(b[a]),b[a])},calendarSetup:function(b,a){null!=b&&null!=a&&(c.inputElements=b,c.buttonElements=a,c.createSingleCalendar(b,a))},getDateMap:function(){return{"DD/MM/YYYY":"%d/%m/%Y","MM/DD/YYYY":"%m/%d/%Y","DD/YYYY/MM":"%d/%y/%m","MM/YYYY/DD":"%m/%y/%d","YYYY/MM/DD":"%y/%m/%d","YYYY/DD/MM":"%y/%d/%m"}},handleDate:function(b,a){switch(e.get(a,"data-met-date")){case "futureDate":b.setSensitiveRange(new Date,null);break;case "pastDate":var d=k.isNull_Blank_Undefined(f.byId("hidCurrentDate"))||
k.isNull_Blank_Undefined(f.byId("hidCurrentDate").value)?new Date:f.byId("hidCurrentDate").value;a=new Date(d);a.setFullYear(a.getFullYear()-100);b.setSensitiveRange(a,new Date(d));break;case "PastXDays":var d=k.isNull_Blank_Undefined(f.byId("hiddentxtWULCreationDate"))||k.isNull_Blank_Undefined(f.byId("hiddentxtWULCreationDate").value)?new Date:f.byId("hiddentxtWULCreationDate").value,l=parseInt(f.byId("maxBackdate").value);a=new Date(d);a.setDate(a.getDate()-l);b.setSensitiveRange(a,new Date(d));
break;case "dateRange":a=c.getDateRange(a);d=a[0];"null"==a[0]&&(d=null);l=a[1];"null"==a[1]&&(l=null);b.setSensitiveRange(d,l);break;default:alert("u have given wrong option")}},getTodaysDate:function(b){b=c.getPreferedDateFormat(b);var a=new Date;b=b.replace("DD",a.getDate());b=b.replace("MM",a.getMonth()+1);return b=b.replace("YYYY",a.getFullYear())},getPreferedDateFormat:function(b){(b=e.get(b,"data-met-dateFormat"))||(b=appDateFormat);return b},getDateRange:function(b){b=e.get(b,"data-met-dateRange");
var a=[null,null];null!=b&&""!=b&&(a=b.split(";"));return a},registerActionOnLinkedDates:function(b,a,d){var e=c.getLinkedDateCustAttrValue(d);null!=e[0]&&""!=e[0]&&b.attachEvent("onClick",function(){c.handleLinkedDates(a,e[1],d)})},triggerActionOnLinkedDates:function(b,a,d){b=c.getLinkedDateCustAttrValue(d);null!=b[0]&&""!=b[0]&&c.handleLinkedDates(a,b[1],d)},handleLinkedDates:function(b,a,d){var f=e.get(d,"data-met-date");if(null!=a){var g=d.value;""==g?g=null:"";"MIN"==a?("pastDate"==f?b.setSensitiveRange(g,
c.getTodaysDate(d)):b.setSensitiveRange(g,null),b.setSensitiveRange(g,null)):"MAX"==a&&("futureDate"==f?b.setSensitiveRange(c.getTodaysDate(d),g):b.setSensitiveRange(null,g))}},getPreferedInitDate:function(b){return e.get(b,"data-met-initDate")},getLinkedDateCustAttrValue:function(b){b=e.get(b,"data-met-linkDate");var a=[null,null];null!=b&&""!=b&&(a=b.split(";"));return a},getLinkedCalendarObject:function(b){b=c.getLinkedDateCustAttrValue(b)[0];if(null!=b&&""!=b)for(var a=0;a<c.singleCalendarArr.length;a++)if(c.inputElements[a].id==
b)return c.singleCalendarArr[a];return null},init:function(){datefields=m("[data-met-date]");calButtons=m("[data-met-cal-button]");0<datefields.length&&0<calButtons.length&&c.calendarSetup(datefields,calButtons)}};return c});