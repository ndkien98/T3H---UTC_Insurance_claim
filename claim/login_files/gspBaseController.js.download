define(["dojo/query","dojo/request/xhr","dojo/request/iframe","dojo/on","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-prop","dojo/dom-style","dojo/dom-construct",webResourceURL+"/"+coreFolder+"/WebContent/scripts/components/utils.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/gspCore/gspConstants.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/components/throbber.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/gspCore/gspValidateElements.js?v\x3d"+
versionWeb,webResourceURL+"/"+tenantFolder+"/WebContent/scripts/urlMappings.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/gspCore/gspAjaxDataConfigObj.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/gspCore/gspShowHideElements.js?v\x3d"+versionWeb,"dojo/domReady!"],function(f,x,y,v,l,n,q,r,h,z,d,p,t,m,u,k,w){var e={validate:function(a){return m.validationsOnClick(a)},validateNonMandFields:function(a){return m.validationsOnClickNonMandCheck(a)},validateOnClickAfterMandCheck:function(a){return m.validateOnClickAfterMandCheck(a)},
validatePhoneNumbers:function(a){return m.validatePhoneNumbers(a)},validateNumber:function(a){return m.validateNumber(a)},submit:function(a){switch(a.submissionType){case p.ajaxCall:e.AjaxCall(a);break;case p.formSubmit:e.formSubmit(a);break;case p.fileUpload:e.FileUpload(a);break;default:alert("please set submission type properly")}},sessionUtil:null,AjaxCall:function(a){console.log("BASECONTROLLER: AJAX CALL: "+a.handleAs+a.dataToPass+a.method);var b=a.url,c=/&_eventId=continueToApplication/,g=
/sales\/illustration/,f=/&_eventId=iWSUpload/,l=/&_eventId=applicationComplete/,h=/sales\/application/,d=/&_eventId=illustrationSummaryBtn/,k=/_eventId=calculateBtn/,m=/&_eventId=applicationPayment/,n=/&_eventId=doContestValidation/,c=g.test(b)&&c.test(b),p=/sales\/searchPendingApplicationData/.test(b);h.test(b)&&f.test(b);var f=/&_eventId=sendFileUploadNotification/.test(b),l=h.test(b)&&l.test(b),q=/sales\/fetchPercentageCompleted/.test(b),d=g.test(b)&&d.test(b),k=/sales\/quickIllustration/.test(b)&&
k.test(b),r=h.test(b)&&m.test(b),t=g.test(b)&&m.test(b);/verifyUserDetails/.test(b);var r=h.test(b)&&m.test(b),t=g.test(b)&&m.test(b),h=h.test(b)&&n.test(b),b=g.test(b)&&n.test(b),g=window.navigator.standalone,n=window.navigator.userAgent.toLowerCase(),m=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),u=/iphone|ipod|ipad/.test(n)&&!window.MSStream;console.log("BASECONTROLLER: safari , IOS"+m+u+n+g);c||p||(u||m)&&(f||l||q||d||k||r||t||h||b)?(console.log("BASECONTROLLER:xhrOptions with timeout"),
c={handleAs:a.handleAs,data:a.dataToPass,method:a.method,sync:!1,headers:{"Content-Type":"application/x-www-form-urlencoded"}}):(console.log("BASECONTROLLER:xhrOptions without timeout"),c={handleAs:a.handleAs,data:a.dataToPass,method:a.method,sync:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"}});x(a.url,c).then(function(b){console.log("BASECONTROLLER: actualResponse RECEIVED");null!=e.sessionUtil&&e.sessionUtil.setIdleTimeZero();e.postProcessing.successFunction(a,b);return a.response=
b},function(b){console.log("BASECONTROLLER:Error RESPONSE");e.postProcessing.failureFunction(a,b);a.response="";return b})},formSubmit:function(a){var b=d.getFormObject();b.action=a.action;b.method=a.method;d.isNull_Blank_Undefined(document.getElementById("userId"))||b.appendChild(document.getElementById("userId"));d.getFormObject().submit()},FileUpload:function(a){y(a.url,{handleAs:a.handleAs,form:a.formId,data:a.dataToPass,method:a.method}).then(function(b){b=b.body.innerHTML;e.postProcessing.successFunction(a,
b);return b},function(b){e.postProcessing.failureFunction(a,b);return b})},preProcessing:function(a){console.log("BASECONTROLLER: show throbber");a.preProcessing?a.preProcessing():"";1==a.throbberFlag&&t.showThrobber("throbberDiv",!1)},postProcessing:{successFunction:function(a,b){if(!e.callDroolCheck(b)){if(!d.isNull_Blank_Undefined(a.parentDivToAttachResponse)){r.set(a.parentDivToAttachResponse,"innerHTML",b);var c="",g=n.get(l.byId("jsInit"),"data-met-initjs"),c=c?c+";"+g:g,g=[];c&&(g=c.split(";"));
e.loadPageJs(g)}a.postProcessing.successFunction&&a.postProcessing.successFunction(b)}1==a.throbberFlag?t.removeThrobber():""},failureFunction:function(a,b){a.postProcessing.failureFunction&&a.postProcessing.failureFunction(b);1==a.throbberFlag?t.removeThrobber():""}},loadPageJs:function(a){for(i=0;i<a.length;i++)void 0==a[i]&&(a[i]="applicationUploadDocuments"),a[i].includes("js")||(a[i]+=".js"),require([webResourceURL+"/"+tenantFolder+"/WebContent/scripts/"+a[i]+"?v\x3d"+versionWeb],function(a){a.init()})},
callDroolCheck:function(a){return e.checkBusinessErrors(a)},checkBusinessErrors:function(a){var b=!1,c="";a=z.toDom(a);if(a.hasChildNodes()){for(var g=f("table[id\x3d'businessErrorDiv']",a),m=0;m<g.length;m++){var k=f("tr",g[m]),n;if(!d.isNull_Blank_Undefined(k)&&0<k.length)for(var b=!0,p=0;p<k.length;p++)n=f("td",k[p]),c=c+n[0].innerHTML+"\x3cbr/\x3e"}""!=c&&l.byId("businessErrorMessagesDiv")?(h.set("businessErrorMessagesDiv","display","block"),l.byId("businessErrorMsgText").innerHTML=c,e.displayErrorInput(a)):
l.byId("businessErrorMessagesDiv")&&(l.byId("businessErrorMsgText").innerHTML="",h.set("businessErrorMessagesDiv","display","none"))}return b},displayErrorInput:function(a){a=f("[data-met-errorCode]",a);for(var b=0;b<a.length;b++)if(null!=a[b]&&""!=a[b].value){var c=document.getElementById(a[b].value);"select-one"==c.type?q.add(c.parentNode,"chkboxError"):c.className+=" ErrorTextbox"}},clearDroolsMessage:function(a){a=f("[data-met-formToSubmit]",a)[0].id;a=document.getElementById(a).elements;for(var b=
0;b<a.length;b++)"text"!=a[b].type&&"textarea"!=a[b].type||q.remove(a[b],"ErrorTextbox")},showErrorMessages:function(a,b){for(i=0;i<a.length;i++)e.showErrorMessage(a[i],b[i])},showErrorMessage:function(a,b){a=n.get(a,"data-met-errordiv");r.set(a,"innerHTML",b)},hideErrorMessages:function(a){if(!a||!a.length){a=f("[class\x3derrormsg]");for(var b=f("[id^\x3d'errPxInsured']"),c=0;c<b.length;c++)""!=b[c].innerHTML&&a.push(b[c]);b=f("[id^\x3d'errPxAdInsured']");for(c=0;c<b.length;c++)""!=b[c].innerHTML&&
a.push(b[c])}for(c=0;c<a.length;c++)e.hideErrorMessage(a[c])},hideErrorMessage:function(a){r.set(a,"innerHTML","");h.set(a,"display","none")},showPopUp:function(a){var b=p.overlayBackGroundDivId;a=n.get(a.target,"data-met-showpopup");d.isNull_Blank_Undefined(a)||d.popup_form(a,b)},hidePopUp:function(a){var b=p.overlayBackGroundDivId;a=n.get(a.target,"data-met-hidepopup");d.isNull_Blank_Undefined(a)||d.hide_form(a,b)},registerPopUpEvents:function(){for(var a=f("[data-met-showpopup]"),b=0;b<a.length;b++)v(a[b],
"click",e.showPopUp);a=f("[data-met-hidepopup]");for(b=0;b<a.length;b++)v(a[b],"click",e.hidePopUp)},handleLogout:function(){d.isNull_Blank_Undefined(l.byId("overlayYes"))||(q.remove(l.byId("overlayYes"),"blueBtn"),q.add(l.byId("overlayYes"),"disabledBtn"),l.byId("overlayYes").disabled=!0);e.clearStorage();var a=d.getFormObject();k.refreshObject();k.setSubmissionType(p.formSubmit);var b=u.logout;window.urlMap=b;a.setAttribute("target","_self");k.setAction(b.action);k.setMethod(b.method);e.submit(k)},
handleDuplicateTab:function(){d.getFormObject();k.setParentDivToAttachResponse("wrapper");k.refreshObject();k.setSubmissionType(p.ajaxCall);var a=u.dupTab;k.setUrl(a.action);k.setMethod(a.method);k.postProcessing.successFunction=function(a){a&&(document.getElementById("dashBoardBodyId").innerHTML=a,document.getElementById("dashBoardBodyId").removeAttribute("onbeforeunload"))};e.submit(k)},clearStorage:function(){var a=window.localStorage.getItem("senator"),b=window.sessionStorage.getItem("king");
a&&window.localStorage.removeItem("senator");b&&window.localStorage.removeItem("king")},getUrlMapping:function(a){return u[a]},toggleDiv:function(a){a=l.byId("leftNavigationFragment");"none"==h.get(a,"display")?(h.set(a,"display","block"),q.replace(f("[class\x3d'contentArea1']")[0],"contentArea","contentArea1")):(h.set(a,"display","none"),q.replace(f("[class\x3d'contentArea']")[0],"contentArea1","contentArea"))},toggleDivIcon:function(a){var b=l.byId(n.get(a.target,"data-met-hideShowDiv")),c=l.byId(n.get(a.target,
"data-met-hideShowDiv")).parentNode,g;if(null!=c){var f=c.children[3].getAttribute("id");5==c.children.length&&(g=c.children[4].getAttribute("id"))}"none"==h.get(b,"display")?(h.set(b,"display","block"),null!=c&&-1<f.indexOf("uploadAdditionalDoc")&&h.set(f,"display","block"),null!=c&&g&&-1<g.indexOf("gspeUpload")&&h.set(g,"display","block"),e.hideAllOtherDivs(a.target)):(h.set(b,"display","none"),null!=c&&-1<f.indexOf("uploadAdditionalDoc")&&h.set(f,"display","none"),null!=c&&g&&-1<g.indexOf("gspeUpload")&&
h.set(g,"display","none"))},hideAllOtherDivs:function(a){for(var b=f("[data-met-hideShowDiv]"),c=f("[data-met-upload]"),g=f("[data-met-gspe]"),e=f("[data-met-gspeNext]"),d=0;d<b.length;d++)if(b[d].id!=a.id&&null!=a&&null!=c[d]){var k=n.get(b[d],"data-met-hideShowDiv");h.set(k,"display","none");h.set(l.byId(c[d].id),"display","none")}for(b=0;b<g.length;b++)0!=a.id.indexOf("quoteTextImg")&&h.set(g[b].id,"display","none");for(b=0;b<e.length;b++)0!=a.id.indexOf("quoteTextImg")&&h.set(e[b].id,"display",
"none")},registerEventFortoggleDiv:function(){d.isNull_Blank_Undefined(l.byId("navigationIcon"))||d.registerEventHandler(l.byId("navigationIcon"),"click",e.toggleDiv)},registerEventFortoggleDivIcon:function(a){a=a?f("[data-met-hideShowDiv]",a):f("[data-met-hideShowDiv]");for(var b=0;b<a.length;b++)d.registerEventHandler(a[b],"click",e.toggleDivIcon)},registerBasicValidations:function(){m.validationsOnKeyPress();m.validationsOnBlur();e.registerPopUpEvents();d.registerEventforTrimSpaces();d.textareaFix()},
init:function(a){"function"!==typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});if(a&&a.actionElements)for(var b=0;b<a.actionElements.length;b++)l.byId(a.actionElements[b])&&(a[a.actionElements[b]]=l.byId(a.actionElements[b]));w.init();w.performCheckboxRadioActionOnLoad();m.removeErrorOnCheck()}};return e});