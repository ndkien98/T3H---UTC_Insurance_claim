(function(W,C,m){function X(b,a){a&&a.onError&&!1===a.onError(b)||(this.name="JsRender Error",this.message=b||"JsRender error")}function G(b,a){var c;b=b||{};for(c in a)b[c]=a[c];return b}function ea(b,a,c){if(!N.rTag||b)O=b?b.charAt(0):O,P=b?b.charAt(1):P,y=a?a.charAt(0):y,M=a?a.charAt(1):M,U=c||U,b="\\"+O+"(\\"+U+")?\\"+P,a="\\"+y+"\\"+M,Q="(?:(?:(\\w+(?\x3d[\\/\\s\\"+y+"]))|(?:(\\w+)?(:)|(\x3e)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+y+"]|\\"+y+"(?!\\"+M+"))*?)",N.rTag=Q+")",Q=new RegExp(b+
Q+"(\\/)?|(?:\\/(\\w+)))"+a,"g"),fa=new RegExp("\x3c.*\x3e|([^\\\\]|^)[{}]|"+b+".*"+a);return[O,P,y,M,U]}function qa(b,a){a||(a=b,b=m);var c,f,e,d;e=this;c=!a||"root"===a;if(b){if(d=e.type===a?e:m,!d)if(c=e.views,e._.useKey)for(f in c){if(d=c[f].get(b,a))break}else for(f=0,e=c.length;!d&&f<e;f++)d=c[f].get(b,a)}else if(c)for(;e.parent.parent;)d=e=e.parent;else for(;e&&!d;)d=e.type===a?e:m,e=e.parent;return d}function ga(){var b=this.get("item");return b?b.index:m}function ha(){return this.index}function ra(b){var a,
c=this,f=c.linkCtx,e=(c.ctx||{})[b];e===m&&f&&f.ctx&&(e=f.ctx[b]);e===m&&(e=sa[b]);e&&"function"===typeof e&&(a=function(){return e.apply(this||c,arguments)},G(a,e));return a||e}function ta(b,a){for(var c,f=this;c===m&&f;)c=(c=f.tmpl[b])&&c[a],f=f.parent;return c||w[b][a]}function V(b,a,c,f,e,d,k,g){var h="array"===a;g={key:0,useKey:h?0:1,id:""+ua++,onRender:g,bnds:{}};a={data:f,tmpl:e,content:k,views:h?[]:{},parent:c,type:a,get:qa,getIndex:ha,getRsc:ta,hlp:ra,_:g,_is:"view"};c?(f=c.views,e=c._,e.useKey?
(f[g.key="_"+e.useKey++]=a,a.index=R.debugMode?va:"",a.getIndex=ga,d=e.tag,g.bnd=h&&(!d||!!d._.bnd&&d)):f.splice(g.key=a.index=d,0,a),a.ctx=b||c.ctx):a.ctx=b;return a}function wa(b){var a,c,f,e,d;for(a in S)if(e=S[a],(d=e.compile)&&(c=b[a+"s"]))for(f in c)c[f]=d(f,c[f],b,a,e)}function ia(b,a,c,f,e,d){function k(a){if(""+a===a||0<a.nodeType){try{h=0<a.nodeType?a:!fa.test(a)&&C&&C(W.document).find(a)[0]}catch(D){}h&&(a=h.getAttribute("data-jsv-tmpl"),b=b||a,a=H[a],a||(b=b||"_"+xa++,h.setAttribute("data-jsv-tmpl",
b),a=H[b]=ia(b,h.innerHTML,c,f,e,d)));return a}}var g,h;a=a||"";g=k(a);d=d||(a.markup?a:{});d.tmplName=b;c&&(d._parentTmpl=c);!g&&a.markup&&(g=k(a.markup))&&g.fn&&(g.debug!==a.debug||g.allowCode!==a.allowCode)&&(g=g.markup);if(g!==m)return b&&!c&&(Y[b]=function(){return a.render.apply(a,arguments)}),g.fn||a.fn?g.fn&&(a=b&&b!==g.tmplName?J(d,g):g):(a=ja(g,d),Z(g.replace(ya,"\\$\x26"),a)),wa(d),a}function ja(b,a){var c=R.wrapMap||{},f=G({markup:b,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:aa},
a);a.htmlTag||(b=za.exec(b),f.htmlTag=b?b[1].toLowerCase():"");(b=c[f.htmlTag])&&b!==c.div&&(f.markup=t.trim(f.markup));return f}function Aa(b,a){function c(e,d,k){var g,h,l;if(e&&""+e!==e&&!e.nodeType&&!e.markup){for(g in e)c(g,e[g],d);return w}d===m&&(d=e,e=m);e&&""+e!==e&&(k=d,d=e,e=m);l=k?k[f]=k[f]||{}:c;h=a.compile;if(g=N.onBeforeStoreItem)h=g(l,e,d,h)||h;e?null===d?delete l[e]:l[e]=h?d=h(e,d,k,b,a):d:d=h(m,d);h&&d&&(d._is=b);(g=N.onStoreItem)&&g(l,e,d,h);return d}var f=b+"s";w[f]=c;S[b]=a}function aa(b,
a,c,f,e,d){var k,g,h,l,D,x,n;g=this;var ba=!g.attr||"html"===g.attr,v="";!0===f&&(h=!0,f=0);g.tag?(l=g,g=g.tag,k=g._,x=g.tagName,n=l.tmpl,a=J(a,g.ctx),D=l.content,!1===l.props.link&&(a=a||{},a.link=!1),c=c||l.view,b=b===m?c:b):n=g.jquery&&(g[0]||K('Unknown template: "'+g.selector+'"'))||g;if(n&&(!c&&b&&"view"===b._is&&(c=b),c&&(D=D||c.content,d=d||c._.onRender,b===c&&(b=c.data,e=!0),a=J(a,c.ctx)),c&&c.data!==m||((a=a||{}).root=b),n.fn||(n=H[n]||H(n)),n)){l=d=!1!==(a&&a.link)&&ba&&d;!0===d&&(l=m,d=
c._.onRender);a=n.helpers?J(n.helpers,a):a;if(t.isArray(b)&&!e)for(c=h?c:f!==m&&c||V(a,"array",c,b,n,f,D,d),k=0,g=b.length;k<g;k++)h=b[k],e=V(a,"item",c,h,n,(f||0)+k,D,d),h=n.fn(h,e,w),v+=c._.onRender?c._.onRender(h,e):h;else c=h?c:V(a,x||"data",c,b,n,f,D,d),k&&!g.flow&&(c.tag=g),v+=n.fn(b,c,w);return l?l(v,c):v}return""}function K(b){throw new N.Error(b);}function L(b){K("Syntax error\n"+b)}function Z(b,a,c,f){function e(a){(a-=l)&&x.push(b.substr(l,a).replace(ca,"\\n"))}function d(a){a&&L('Unmatched or missing tag: "{{/'+
a+'}}" in template:\n'+b)}var k,g=a&&a.allowCode,h=[],l=0,m=[],x=h,n=[,,,h];d(m[0]&&m[0][3].pop()[0]);b.replace(Q,function(h,v,p,z,u,q,D,w,B,t,I,E){q&&(u=":",z="html");t=t||c;v=v&&[];var A=q="",r="";D=!t&&!u&&!D;p=p||u;e(E);l=E+h.length;w?g&&x.push(["*","\n"+B.replace(Ba,"$1")+"\n"]):p?("else"===p&&(Ca.test(B)&&L('for "{{else if expr}}" use "{{else expr}}"'),v=n[6],n[7]=b.substring(n[7],E),n=m.pop(),x=n[3],D=!0),B&&(B=B.replace(ca," "),q=da(B,v,a).replace(Da,function(a,b,c){b?r+=c+",":A+=c+",";return""})),
A=A.slice(0,-1),q=q.slice(0,-1),E=A&&A.indexOf("noerror:true")+1&&A||"",k=[p,z||!!f||"",q,D&&[],'params:"'+B+'",props:{'+A+"}"+(r?",ctx:{"+r.slice(0,-1)+"}":""),E,v||0],x.push(k),D&&(m.push(n),n=k,n[7]=l)):I&&(p=n[0],d(I!==p&&"else"!==p&&I),n[7]=b.substring(n[7],E),n=m.pop());d(!n&&I);x=n[3]});e(b.length);(l=h[h.length-1])&&d(""+l!==l&&+l[7]===l[7]&&l[0]);return ka(h,c?b:a,c)}function ka(b,a,c){var f,e,d,k,g,h,l,m,x,n,w,v,p,z,u,q,t,y,B,H,I,E,A=0,r="",F,G={},J=b.length;""+a===a?(u=c?'data-link\x3d"'+
a.replace(ca," ").slice(1,-1)+'"':a,a=0):(u=a.tmplName||"unnamed",a.allowCode&&(G.allowCode=!0),a.debug&&(G.debug=!0),v=a.bnds,z=a.tmpls);for(f=0;f<J;f++)if(e=b[f],""+e===e)r+='\nret+\x3d"'+e+'";';else if(d=e[0],"*"===d)r+=""+e[1];else{k=e[1];g=e[2];y=e[3];h=e[4];F=e[5];B=e[7];(I="else"===d)||(A=0,v&&(p=e[6])&&(A=v.push(p)));(e=":"===d)?(k&&(d="html"===k?"\x3e":k+d),F&&(I="prm"+f,F="try{var "+I+"\x3d["+g+"][0];}catch(e){"+I+'\x3d"";}\n',g=I)):(y&&(q=ja(B,G),q.tmplName=u+"/"+d,ka(y,q),z.push(q)),I||
(t=d,H=r,r=""),q=(q=b[f+1])&&"else"===q[0]);h+=",args:["+g+"]}";if(e&&p||k&&"\x3e"!==d){E=new Function("data,view,j,u"," // "+u+" "+A+" "+d+"\n"+F+"return {"+h+";");E.paths=p;E._ctxs=d;if(c)return E;w=1}r+=e?"\n"+(p?"":F)+(c?"return ":"ret+\x3d")+(w?(w=0,n=!0,'c("'+k+'",view,'+(p?(v[A-1]=E,A):"{"+h)+");"):"\x3e"===d?(m=!0,"h("+g+");"):(x=!0,"(v\x3d"+g+")!\x3d"+(c?"\x3d":"")+'u?v:"";')):(l=!0,"{view:view,tmpl:"+(y?z.length:"0")+","+h+",");if(t&&!q){r="["+r.slice(0,-1)+"]";if(c||p)if(r=new Function("data,view,j,u",
" // "+u+" "+A+" "+t+"\nreturn "+r+";"),p&&((v[A-1]=r).paths=p),r._ctxs=d,c)return r;r=H+'\nret+\x3dt("'+t+'",view,this,'+(A||r)+");";t=p=0}}r="// "+u+"\nvar j\x3dj||"+(C?"jQuery.":"js")+"views"+(x?",v":"")+(l?",t\x3dj._tag":"")+(n?",c\x3dj._cnvt":"")+(m?",h\x3dj.converters.html":"")+(c?";\n":',ret\x3d"";\n')+(R.tryCatch?"try{\n":"")+(G.debug?"debugger;":"")+r+(c?"\n":"\nreturn ret;\n")+(R.tryCatch?"\n}catch(e){return j._err(e);}":"");try{r=new Function("data,view,j,u",r)}catch(Ea){L("Compiled template code:\n\n"+
r,Ea)}a&&(a.fn=r);return r}function da(b,a,c){var f,e,d,k=c.links,g={},h={0:-1},l=0,m=!1,x=!1;return(b+" ").replace(/\)\^/g,").").replace(Fa,function(n,w,v,p,z,u,q,t,D,B,G,I,E,A,r,F,H,J,C,K){function ba(b,c,g,h,k,l,m,n){return g&&(a&&("linkTo"===f&&(e=a._jsvto=a._jsvto||[],e.push(z)),f&&!d||a.push(z.slice(c.length))),"."!==g)?(b=(h?'view.hlp("'+h+'")':k?"view":"data")+(n?(l?"."+l:h?"":k?"":"."+g)+(m||""):(n=h?"":k?l||"":g,"")),b+=n?"."+n:"",c+("view.data"===b.slice(0,9)?b.slice(5):b)):b}u=u||"";v=
v||w||I;z=z||D;B=B||H||"";if(q)L(b);else return!a||!F||x||m||f&&!d&&!e||(q=h[l],K.length-1>C-q&&(q=K.slice(q,C+1),F=P+":"+q+y,F=k[F]=k[F]||Z(O+F+M,c,!0),F.paths||da(q,F.paths=[],c),(e||a).push({_jsvOb:F}))),x?(x=!E,x?n:'"'):m?(m=!A,m?n:'"'):(v?(l++,h[l]=C++,v):"")+(J?l?"":f?(f=d=e=!1,"\b"):",":t?(l&&L(b),f=z,d=p,"\b"+z+":"):z?z.split("^").join(".").replace(Ga,ba)+(B?(g[++l]=!0,"."!==z.charAt(0)&&(h[l]=C),B):u):u?u:r?(g[l--]=!1,r)+(B?(g[++l]=!0,B):""):G?(g[l]||L(b),","):w?"":(x=E,m=A,'"'))})}function J(b,
a){return b&&b!==a?a?G(G({},a),b):b:a&&G({},a)}function la(b){return ma[b]||(ma[b]="\x26#"+b.charCodeAt(0)+";")}function na(b){var a=this.tagCtx,c=!arguments.length,f="",e=c||0;!this.rendering.done&&(c?f=m:b!==m&&(b=this.prep?this.prep(b):b,f+=a.render(b),e+=t.isArray(b)?b.length:1),this.rendering.done=e)&&(this.selected=a.index);return f}if(!(C&&C.views||W.jsviews)){var t,T,Q,fa,O="{",P="{",y="}",M="}",U="^",Ga=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,
Fa=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,ca=/[ \t]*(\r\n|\n|\r)/g,Ba=/\\(['"])/g,ya=/['"\\]/g,Da=/\x08(~)?([^\x08]+)\x08/g,Ca=/^if\s/,za=/<(\w+)[>\s]/,oa=/[\x00`><"'&]/g,xa=0,ua=0,ma={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;","\x00":"\x26#0;","'":"\x26#39;",'"':"\x26#34;","`":"\x26#96;"},Y={},S=
{template:{compile:ia},tag:{compile:function(b,a,c){if("function"===typeof a)a={depends:a.depends,render:a};else{if(b=a.template)a.template=""+b===b?H[b]||H(b):b;!1!==a.init&&(b=a._ctr=function(a){},(b.prototype=a).constructor=b)}c&&(a._parentTmpl=c);return a}},helper:{},converter:{}},w={jsviews:"v1.0.0-beta",render:Y,settings:{delimiters:ea,debugMode:!0,tryCatch:!0},sub:{View:V,Error:X,tmplFn:Z,parse:da,extend:G,error:K,syntaxError:L},_cnvt:function(b,a,c){var f,e,d,k=+c===c&&c,g=a.linkCtx;k&&(c=
(k=a.tmpl.bnds[k-1])(a.data,a,w));d=c.args[0];if(b||k)e=g&&g.tag||{_:{inline:!g,bnd:k},tagName:b+":",flow:!0,_is:"tag"},g&&(g.tag=e,e.linkCtx=e.linkCtx||g,c.ctx=J(c.ctx,g.view.ctx)),e.tagCtx=c,c.view=a,e.ctx=c.ctx||{},delete c.ctx,a._.tag=e,(b="true"!==b&&b)&&((f=a.getRsc("converters",b))||K("Unknown converter: {{"+b+":"))&&(e.depends=f.depends,d=f.apply(e,c.args)),d=k&&a._.onRender?a._.onRender(d,a,k):d,a._.tag=m;return d},_tag:function(b,a,c,f,e){var d,k,g,h,l,t,x,n,y,v,p="",z=+f===f&&f,u=a.linkCtx||
0,q=a.ctx,C=c||a.tmpl,L=a._;"tag"===b._is&&(d=b,b=d.tagName);z&&(f=(n=C.bnds[z-1])(a.data,a,w));t=f.length;d=d||u.tag;for(l=0;l<t;l++)k=f[l],x=k.tmpl,x=k.content=x&&C.tmpls[x-1],c=k.props.tmpl,l||c&&d||(y=a.getRsc("tags",b)||K("Unknown tag: {{"+b+"}}")),c=c||(d?d:y).template||x,c=""+c===c?a.getRsc("templates",c)||H(c):c,G(k,{tmpl:c,render:aa,index:l,view:a,ctx:J(k.ctx,q)}),d||(y._ctr?(d=new y._ctr,v=!!d.init,d.attr=d.attr||y.attr||m):d={render:y.render},d._={inline:!u},u&&(u.attr=d.attr=u.attr||d.attr,
u.tag=d,d.linkCtx=u),(d._.bnd=n||u.fn)?d._.arrVws={}:d.dataBoundOnly&&K("{^{"+b+"}} tag must be data-bound"),d.tagName=b,d.parent=h=q&&q.tag,d._is="tag",d._def=y),L.tag=d,k.tag=d,d.tagCtxs=f,d.flow||(c=k.ctx=k.ctx||{},k=d.parents=c.parentTags=q&&J(c.parentTags,q.parentTags)||{},h&&(k[h.tagName]=h),c.tag=d);d.rendering={};for(l=0;l<t;l++){k=d.tagCtx=f[l];d.ctx=k.ctx;!l&&v&&(d.init(k,u,d.ctx),v=m);h=m;if(b=d.render)h=b.apply(d,k.args);h=h!==m?h:k.tmpl&&k.render()||(e?m:"");p=p?p+(h||""):h}delete d.rendering;
d.tagCtx=d.tagCtxs[0];d.ctx=d.tagCtx.ctx;d._.inline&&(g=d.attr)&&"html"!==g&&(p="text"===g?pa.html(p):"");return z&&a._.onRender?a._.onRender(p,a,z):p},_err:function(b){return R.debugMode?"Error: "+(b.message||b)+". ":""}};(X.prototype=Error()).constructor=X;ga.depends=function(){return[this.get("item"),"index"]};ha.depends=function(){return["index"]};for(T in S)Aa(T,S[T]);var H=w.templates,pa=w.converters,sa=w.helpers;T=w.tags;var N=w.sub,R=w.settings,va="Error: #index in nested view: use #getIndex()";
C?(t=C,t.fn.render=aa):(t=W.jsviews={},t.isArray=Array&&Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)});t.render=Y;t.views=w;t.templates=H=w.templates;T({"else":function(){},"if":{render:function(b){return this.rendering.done||!b&&(arguments.length||!this.tagCtx.index)?"":(this.rendering.done=!0,this.selected=this.tagCtx.index,this.tagCtx.render())},onUpdate:function(b,a,c){var f;for(b=0;(f=this.tagCtxs[b])&&f.args.length;b++)if(f=f.args[0],a=!f!==!c[b].args[0],
f||a)return a;return!1},flow:!0},"for":{render:na,onArrayChange:function(b,a){var c,f=a.change;if(this.tagCtxs[1]&&("insert"===f&&b.target.length===a.items.length||"remove"===f&&!b.target.length||"refresh"===f&&!a.oldItems.length!==!b.target.length))this.refresh();else for(c in this._.arrVws)c=this._.arrVws[c],c.data===b.target&&c._.onArrayChange.apply(c,arguments);b.done=!0},flow:!0},props:{prep:function(b){var a,c=[];for(a in b)c.push({key:a,prop:b[a]});return c},render:na,flow:!0},include:{flow:!0},
"*":{render:function(b){return b},flow:!0}});pa({html:function(b){return b!=m?String(b).replace(oa,la):""},attr:function(b){return b!=m?String(b).replace(oa,la):null===b?b:""},url:function(b){return b!=m?encodeURI(String(b)):null===b?b:""}});ea()}})(this,this.jQuery);