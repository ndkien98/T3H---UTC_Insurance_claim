define(["dojo/query","dojo/on","dojo/dom","dojo/dom-attr","dojo/json","dojo/dom-prop","dojo/dom-style","dojo/number","dojo/i18n!"+webResourceURL+"/"+tenantFolder+"/WebContent/scripts/validations/nls/messages.js?v\x3d"+versionWeb,"dojo/dom-class",webResourceURL+"/"+coreFolder+"/WebContent/scripts/gspCore/gspValidations.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/components/utils.js?v\x3d"+versionWeb,webResourceURL+"/"+coreFolder+"/WebContent/scripts/components/regExp.js?v\x3d"+
versionWeb,"dojo/domReady!"],function(l,r,n,h,A,w,v,y,f,q,t,z,x){var d={elementsToSkipMandatoryCheck:"",showErrorMessage:function(a,b,c){"radio"==b.validationRule?(a=a.parentNode,q.add(a,"radioErrorDiv")):"select"==b.validationRule?(a=a.parentNode,q.add(a,"chkboxError")):q.add(a,"ErrorTextbox");null!=b.errorDivId&&(v.set(b.errorDivId,"display","block"),w.set(b.errorDivId,"innerHTML",c+"\x3cbr/\x3e"))},removeErrorMessage:function(a,b){b.errorDivId&&n.byId(b.errorDivId)&&(n.byId(b.errorDivId).innerHTML=
"");q.remove(a,"ErrorTextbox");b=a.parentNode;q.remove(b,"radioErrorDiv");b=a.parentNode;q.remove(b,"chkboxError")},getErrorMessage:function(a,b){if("mandatory"==b||"radioOnBlur"==b)return f[a.id.replace(/[0-9]/g,"")+"_req"];if("mandCom"==b)return a=h.get(a,"data-met-mandCom").split("_")[0],f[a.replace(/[0-9]/g,"")+"_reqCom"];if("minLength"==b)return f[a.id.replace(/[0-9]/g,"")+"_minreq"];if("email"==b)return f[a.id.replace(/[0-9]/g,"")+"_invalidEmail"];if("percentage"==b)return f[a.id.replace(/[0-9]/g,
"")+"_percent"];if("agentCode"==b)return f[a.id.replace(/[0-9]/g,"")+"_invalidAgentCode"];if("afterMandCheck"==b)return f[a.id.replace(/[0-9]/g,"")+"_afterMandCheck"];if("phoneMandCheck"==b)return f[a.id.replace(/[0-9]/g,"")+"_phoneMandCheck"];if("onKeyPress"==b)return f[a.id.replace(/[0-9]/g,"")+"_onKeyPress"];if("minValueReq"==b)return f[a.id.replace(/[0-9]/g,"")+"_minValueReq"];if("minDateReq"==b)return f[a.id.replace(/[0-9]/g,"")+"_minDateReq"];if("identityDocNum"==b)return f[a.id.replace(/[0-9]/g,
"")+"_identityDocNum"];if("passwordValidate"==b)return f[a.id.replace(/[0-9]/g,"")+"_passwordValidate"];if("dateDaysChk"==b)return f[a.id.replace(/[0-9]/g,"")+"_dateDaysCheck"];if("samePasswordCheck"==b)return f[a.id.replace(/[0-9]/g,"")+"_samePasswordCheck"];if("validatePreviousPasswordCheck"==b)return f[a.id.replace(/[0-9]/g,"")+"_validatePreviousPasswordCheck"];if("validateAllAnswersCheck"==b)return f[a.id.replace(/[0-9]/g,"")+"_validateAllAnswersCheck"];if("sameQues"==b)return f[a.id.replace(/[0-9]/g,
"")+"_sameQues"];if("selectQues"==b)return f[a.id.replace(/[0-9]/g,"")+"_selectQues"];if("zeroStart"==b)return f[a.id.replace(/[0-9]/g,"")+"_zeroStart"];if("comparePhone"==b)return f[a.id.replace(/[0-9]/g,"")+"_comparePhone"];if("reCalcTargetPremium"==b)return f[a.id.replace(/[0-9]/g,"")+"_reCalcTargetPremium"];if("mancheckULD"==b)return f[a.id.split("_")[0].replace(/[0-9]/g,"")+"_req"];if("mancheckEmail"==b)return f[a.id.split("_")[0].replace(/[0-9]/g,"")+"_invalidEmailFormat"];if("zeroNotStart"==
b)return f[a.id.replace(/[0-9]/g,"")+"_zeroNotStart"]},getValidationMap:function(){return{email:{fnName:"checkValidEmail"},identityDocNum:{fnName:"isIdentityDocNum"},agentCode:{fnName:"isAgentCode"},passwordValidate:{fnName:"ispasswordValidate"},minLength:{fnName:"isMinLength"},select:{fnName:"isSelected"},radio:{fnName:"validateRadioButtons"},radioOnBlur:{fnName:"validateRadioButtons"},checkbox:{fnName:"isElementChecked"},alphabets:{fnName:"isAlphabets"},alphaOrVietChars:{fnName:"isAlphaOrVietChars"},
percentage:{fnName:"isPercentageCorrect"},zeroStart:{fnName:"isStartWithZero"},comparePhone:{fnName:"isComparePhone"},zeroNotStart:{fnName:"isStartWithNotZero"}}},getElementState:function(a,b){b=!1;"mandatory"==h.get(a,"data-met-mand")&&(b=!0);h.has(a,"data-met-mandCom")&&(b=!0);"mancheckULD"==h.get(a,"data-met-mand")&&(b=!0);return{validationRule:h.get(a,"data-met-checks"),isMandatory:b,id:h.get(a,"id"),name:h.get(a,"name"),val:a.value,errorDivId:h.get(a,"data-met-errorDiv")}},loop:function(a){var b=
d.getElementState(a),c="",e=d.getValidationMap(),p=!0,g=null!=h.get(a,"data-met-blur")?h.get(a,"data-met-blur"):"",k,f=g.split(";");if(0<f.length&&""!=f[0])for(i=0;i<f.length&&(k=f[i],c=g.includes("email")?d.getErrorMessage(a,"mancheckEmail"):d.getErrorMessage(a,k),b.validationRule=k,k=t[e[b.validationRule].fnName](a),k);i++);h.has(a,"data-met-mandCom")&&(c=d.getErrorMessage(a,"mandCom"));"mancheckULD"==h.get(a,"data-met-mand")&&(c=d.getErrorMessage(a,"mancheckULD"));"mancheckULD"==h.get(a,"data-met-checks")&&
(c=d.getErrorMessage(a,"mancheckULD"),b.validationRule="select");g="radio"==b.type?d.checkIfIdPresentInHiddenArray(a.name):d.checkIfIdPresentInHiddenArray(a.id);b.isMandatory&&!g&&t.isNull(b.val)?(c=d.getErrorMessage(a,"mandatory"),d.showErrorMessage(a,b,c),p=!1):null==b.validationRule||g||(p=t[e[b.validationRule].fnName](a));p?d.removeErrorMessage(a,b):d.showErrorMessage(a,b,c);return p},validationsOnBlur:function(){for(var a=l("[data-met-blur]"),b=0;b<a.length;b++)r(a[b],"blur",d.validateOnBlur);
return!0},validateOnBlur:function(a){var b=h.get(a.target,"data-met-blur"),c=h.get(a.target,"value"),e=b.split(";"),p=!0,g=d.getValidationMap(),k=d.getElementState(a.target),m;if(""!=a.target.value){for(i=0;i<e.length;i++)if(m=d.getErrorMessage(a.target,e[i]),"email"==e[i]&&(m=f[a.target.id.replace(/[0-9]/g,"")+"_invalidEmailFormat"]),!t[g[e[i]].fnName](a.target)){d.showErrorMessage(a.target,k,m);p=!1;break}if(("email"==b||1<e.length&&"email"==e[1])&&("loginUserMap['emailId']"==h.get(a.target,"name")||
"appDataMap['Party.Person.EmailId']"==h.get(a.target,"name"))){b=h.get("BASIC_EMAIL_FORMAT","value");""==b&&(b="^[a-zA-Z0-9][a-zA-Z0-9]?((([._-])?[a-zA-Z0-9])+)?@[a-zA-Z0-9-]+(\\.([a-zA-Z]{2,}))+$");e=new RegExp(b.replace(/\\\\./g,"\\."));b=h.get("EDT_PROF_EMAIL_FORMAT","value");if(e.test(c)&&""!=b)for(e=h.get("userId","value"),g=JSON.parse(b),m=$("#EDT_PROF_EMAIL_FORMAT_KEYS").val().replace(/\[/g,"").replace(/\]/g,"").replace(/\s/g,"").split(","),count=0;count<m.length;count++){var l=m[count].trim().replace(/\./g,
"\\.").replace(/\*/g,".*"),l=0==l.indexOf(".*")?l:"^"+l;if((new RegExp(l+"$")).test(e)){g=g[m[count]];e=0<g.indexOf("\x26\x26")?"\x26\x26":"||";g=g.split(e);for(counter=0;counter<g.length&&""!=b;counter++)if(!(new RegExp(g[counter].trim().replace(/\./g,"\\.").replace(/\*/g,".*")+"$")).test(c)){if(p=!1,"\x26\x26"==e)break}else if("\x26\x26"!=e){p=!0;break}break}}else p=e.test(c)&&""==b?!0:!1;h.get("DISABLE_EMAIL","value")&&"true"==h.get("DISABLE_EMAIL","value")&&(p=!0);p||d.showErrorMessage(a.target,
k,f[a.target.id.replace(/[0-9]/g,"")+"_invalidEmailFormat"])}}p&&d.removeErrorMessage(a.target,k)},displayEmailValidationMsg:function(a){var b=f[a+"_invalidEmailFormat"],c=d.getElementState(a);q.add(a,"ErrorTextbox");v.set(c.errorDivId,"display","block");w.set(c.errorDivId,"innerHTML",b+"\x3cbr/\x3e")},validationsOnClick:function(a){var b=!0,c=!0,e=!0,p=!1,g=[];null!=a&&"true"===a?p=!0:a?g=l(":not([disabled]):not([type\x3d'hidden'])[data-met-mand],:not([disabled]):not([type\x3d'hidden'])[data-met-mandCom],:not([disabled]):not([type\x3d'hidden'])[data-met-checks],:not([disabled]):not([type\x3d'hidden'])[data-met-blur]",
a):g=l(":not([disabled]):not([type\x3d'hidden'])[data-met-mand],:not([disabled]):not([type\x3d'hidden'])[data-met-mandCom],:not([disabled]):not([type\x3d'hidden'])[data-met-checks],:not([disabled]):not([type\x3d'hidden'])[data-met-blur]");a=n.byId("subProductCode");var k=n.byId("packageProductCode"),f=n.byId("addAdsInsFlag");if(a&&"ULD"===a.value&&k&&("PK03"===k.value||"PK02"===k.value)&&f&&"false"===f.value)for(a=0;a<g.length;a++)if(console.log(g[a]),k=g[a].id,"txtAdInsuredName"===k||"adInsuredRelationType"===
k||"txtAdInsuredOtherRelation"===k||"txtAdInsuredDateOfBirth"===k||"addGenderMale"===k||"addGenderfemale"===k)g.splice(a,1),a--;for(a=0;a<g.length;a++)b=d.loop(g[a]),!1===b?c=!1:"",k=h.get(g[a],"data-met-blur"),null==k||"email"!==k&&"zeroStart"!==k||(e=!1),window.scrollTo(0,0);!1===b&&e?n.byId("businessErrorMessagesDiv")&&""!==n.byId("businessErrorMsgText").innerHTML&&v.set("businessErrorMessagesDiv","display","block"):n.byId("businessErrorMessagesDiv")&&v.set("businessErrorMessagesDiv","display",
"none");!p&&n.byId("isError")&&"true"===n.byId("isError").value&&(c=!1);return c},validationsOnKeyPress:function(){for(var a=l("[data-met-keypress]"),b=0;b<a.length;b++)r(a[b],"keypress",d.validateOnKeyPress),r(a[b],"blur",d.handlePastedText),"true"==h.get(a[b],"data-met-leadingZero")&&r(a[b],"blur",d.removeLeadingZero);return!0},validateOnKeyPress:function(a){var b=a.charCode,c=d.isCopyPasteEvent(a);if(0!=b&&!c){var b=String.fromCharCode(b),c=h.get(a.target,"data-met-keypress").split(";"),e=!1;for(i=
0;i<c.length;i++)e=e||d.hasPattern(b,c[i]);e?(b=d.getElementState(a.target),c=d.getErrorMessage(a.target,"onKeyPress"),d.removeErrorMessage(a.target,b,c)):(a.preventDefault(),b=d.getElementState(a.target),c=d.getErrorMessage(a.target,"onKeyPress"),d.showErrorMessage(a.target,b,c))}},isCopyPasteEvent:function(a){var b=a.ctrlKey;a=String.fromCharCode(a.charCode);return!b||"c"!=a&&"C"!=a&&"v"!=a&&"V"!=a?!1:!0},handlePastedText:function(a){for(var b="",c=h.get(a.target,"value"),e=0;e<c.length;e++){var f=
c[e],g=h.get(a.target,"data-met-keypress").split(";"),k=!1;for(j=0;j<g.length;j++)k=k||d.hasPattern(f,g[j]);k&&(b+=f)}h.set(a.target,"value",b)},hasPattern:function(a,b){return""!=a&&null!=a.match(x[b])?!0:!1},validatePhoneNumbers:function(){for(var a=l("[data-met-phoneMandCheck]"),b=!0,c=0;c<a.length;c++){var e=d.getElementState(a[c]);if(t.isNull(e.val))b=!1;else{b=!0;break}}b?n.byId(e.errorDivId).innerHTML="":(a=d.getErrorMessage(n.byId("txtMobile"),"phoneMandCheck"),w.set("errTxtPhone","innerHTML",
a+"\x3cbr/\x3e"));return b},validateOnClickAfterMandCheck:function(a){a=l("[data-met-afterMandCheck]",a);for(count=0;count<a.length;count++){for(var b=!1,c=h.get(a[count],"value"),e=h.get(a[count],"data-met-afterMandCheck").split(";"),f=0;f<e.length;)b=b||x[e[f]].test(c),f++;c=d.getElementState(a[count]);e=d.getErrorMessage(a[count],"afterMandCheck");b?(d.removeErrorMessage(a[count],c,e),b=!0):(d.showErrorMessage(a[count],c,e),b=!1)}return b},validationsOnClickNonMandCheck:function(a){var b=!0;a=
l("[data-met-addnValidation]",a);for(count=0;count<a.length;count++){var c=h.get(a[count],"value"),d=h.get(a[count],"class");""!=c&&"ErrorTextbox"==d&&(b=!1)}return b},modifyHiddenFieldsArray:function(a,b){if(""!=a.trim()&&(a=a.split(","),b))switch(b){case "hide":for(b=0;b<a.length;b++)""==d.elementsToSkipMandatoryCheck.trim()?d.elementsToSkipMandatoryCheck=a[b]:d.checkIfIdPresentInHiddenArray(a[b])||(d.elementsToSkipMandatoryCheck=d.elementsToSkipMandatoryCheck+","+a[b]);break;case "show":for(b=
0;b<a.length;b++)d.checkIfIdPresentInHiddenArray(a[b])&&d.removeIdFromHiddenArray(a[b])}},checkIfIdPresentInHiddenArray:function(a){var b=d.elementsToSkipMandatoryCheck.split(","),c=!1;if(a)for(var e=0;e<b.length;e++)if(a==b[e]){c=!0;break}return c},removeIdFromHiddenArray:function(a){var b=d.elementsToSkipMandatoryCheck.split(","),c="";if(a)for(var e=0;e<b.length;e++)a!=b[e]&&(c=""==c.trim()?b[e]:c+","+b[e]);else c=d.elementsToSkipMandatoryCheck;d.elementsToSkipMandatoryCheck=c},isBlankString:function(a){return a&&
void 0!==a?""!=a?!1:!0:!0},isNullOrUndefined:function(a){return a&&void 0!==a?!1:!0},removeErrorOnCheck:function(){for(var a=l("[data-met-checks]"),b=0;b<a.length;b++)"radio"==h.get(a[b],"data-met-checks")?r(a[b],"click",d.removeRadioErrorDiv):"checkbox"==h.get(a[b],"data-met-checks")?r(a[b],"click",d.removeCheckboxErrorDiv):"select"==h.get(a[b],"data-met-checks")&&r(a[b],"change",d.removeSelectErrorDiv)},removeRadioErrorDiv:function(a){var b=!1,c=a.target;if(d.validateRadioButtons(a.target)){a=l("[name\x3d'"+
c.name+"']");for(c=0;c<a.length;c++)if(t.isElementChecked(a[c])){b=!0;break}if(b)for(c=0;c<a.length;c++)q.remove(a[c].parentNode,"radioErrorDiv"),b=d.getElementState(a[c]),null!=b.errorDivId&&(n.byId(b.errorDivId).innerHTML="")}},removeCheckboxErrorDiv:function(a){t.isElementChecked(a.target)&&(q.remove(a.target.parentNode,"chkboxError"),a=d.getElementState(a.target),null!=a.errorDivId&&(n.byId(a.errorDivId).innerHTML=""))},removeSelectErrorDiv:function(a){t.isSelected(a.target)&&(q.remove(a.target.parentNode,
"chkboxError"),a=d.getElementState(a.target),null!=a.errorDivId&&(n.byId(a.errorDivId).innerHTML=""))},validateRadioButtons:function(a){var b=l("[name\x3d'"+a.name+"']");for(a=0;a<b.length;a++)if(t.isElementChecked(b[a]))return!0;return!1},showRoundedOffToThousandOnBlur:function(a){var b=l("[data-met-roundNum]");for(a=0;a<b.length;a++){var c=b[a].value;""!=c&&null!=c&&(c=1E3*y.round(c/1E3,0),b[a].value=c,c=b[a].value);c=d.autoFormatForAmount(c);b[a].value=c}return c},showRoundedOffAndDivideThousand:function(a){""!=
a&&(a=a.replace(/\./g,""));if(""!=a&&null!=a)var b=y.round(a/1E3,0);return d.autoFormatForAmount(b.toString())},autoFormatForAmount:function(a){""!=a&&(a=a.replace(/\./g,""));var b="",c=a.length;if(3<c){var c=parseInt(c/3),d=a.substring(a.length-3*c,0),f=a.substring(a.length,a.length-3*c);for(a=1;a<=c;a++)var g=f.substring(f.length,f.length-3),b=1==a?g:g+"."+b,f=f.substring(f.length-3,0);""!=d&&(b=d+"."+b)}else b=a;return b},maskInputText:function(a,b){b=a.replace(x.allCharacters_space_allowed,b);
a!=b&&(a=b);return a},revertCurrency:function(){l("[currency\x3dtrue]").forEach(function(a,b,c){d.handleCurrencyFormation(a.id,"Revert","")})},revertCurrencyWithDots:function(){l("[currency\x3dtrue]").forEach(function(a,b,c){b=d.autoFormatForAmount(a.value);a.value=b})},handleCurrencyFormation:function(a,b,c){a=document.getElementById(a);z.isNull_Blank_Undefined(a)||(b=a.value,""!=b&&(b=b.replace(/\./g,""),a.value=b))},checkValidationBeforeSubmit:function(){for(var a=[],b=l("[data-met-blur]"),c=0;c<
b.length;c++){var e=h.get(b[c],"data-met-blur"),p=h.get(b[c],"value"),g=e.split(";"),k=!0,m=d.getValidationMap(),n=d.getElementState(b[c]),q="";if(""!=b[c].value){for(i=0;i<g.length;i++)if(q=d.getErrorMessage(b[c],g[i]),"email"==g[i]&&(q=f[b[c].id.replace(/[0-9]/g,"")+"_invalidEmailFormat"]),!t[m[g[i]].fnName](b[c])){d.showErrorMessage(b[c],n,q);k=!1;setTimeout(function(){},10);break}if(("email"==e||1<g.length&&"email"==g[1])&&("loginUserMap['emailId']"==h.get(b[c],"name")||"appDataMap['Party.Person.EmailId']"==
h.get(b[c],"name"))){e=h.get("BASIC_EMAIL_FORMAT","value");""==e&&(e="^[a-zA-Z0-9][a-zA-Z0-9]?((([._-])?[a-zA-Z0-9])+)?@[a-zA-Z0-9-]+(\\.([a-zA-Z]{2,}))+$");g=new RegExp(e.replace(/\\\\./g,"\\."));e=h.get("EDT_PROF_EMAIL_FORMAT","value");if(g.test(p)&&""!=e){var g=h.get("userId","value"),m=JSON.parse(e),r=$("#EDT_PROF_EMAIL_FORMAT_KEYS").val().replace(/\[/g,"").replace(/\]/g,"").replace(/\s/g,"").split(",");for(count=0;count<r.length;count++){var u=r[count].trim().replace(/\./g,"\\.").replace(/\*/g,
".*"),u=0==u.indexOf(".*")?u:"^"+u;if((new RegExp(u+"$")).test(g)){m=m[r[count]];g=0<m.indexOf("\x26\x26")?"\x26\x26":"||";m=m.split(g);for(counter=0;counter<m.length&&""!=e;counter++)if(!(new RegExp(m[counter].trim().replace(/\./g,"\\.").replace(/\*/g,".*")+"$")).test(p)){if(k=!1,"\x26\x26"==g)break}else if("\x26\x26"!=g){k=!0;break}break}}}else k=g.test(p)&&""==e?!0:!1;$("#txtCustMgmtEmailId").prop("readonly")&&(k=!0);k||d.showErrorMessage(b[c],n,f[b[c].id.replace(/[0-9]/g,"")+"_invalidEmailFormat"])}}k?
d.removeErrorMessage(b[c],n):(d.showErrorMessage(c,n,q),a.push(c.id))}0<a.length&&(k=!1);return k},checkValidationBeforeSubmitForBene:function(a){var b=[],c=[];a?c=l("[data-met-blur]",a):c=l("[data-met-blur]");for(a=0;a<c.length;a++){var e=h.get(c[a],"data-met-blur");h.get(c[a],"value");var f=e.split(";"),e=!0,g=d.getValidationMap(),k=d.getElementState(c[a]),m="";if(""!=c[a].value)for(i=0;i<f.length;i++)if(m=d.getErrorMessage(c[a],f[i]),!t[g[f[i]].fnName](c[a])){d.showErrorMessage(c[a],k,m);e=!1;
setTimeout(function(){},10);break}e?d.removeErrorMessage(c[a],k):(d.showErrorMessage(a,k,m),b.push(a.id))}0<b.length&&(e=!1);return e},removeLeadingZero:function(a){a.target.value=""+Number(a.target.value)}};return d});