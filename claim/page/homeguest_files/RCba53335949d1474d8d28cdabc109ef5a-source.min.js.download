// For license information, see `https://assets.adobedtm.com/6279662c4fd9/8724fef67590/5a66aa684d6d/RCba53335949d1474d8d28cdabc109ef5a-source.js`.
_satellite.__registerScript('https://assets.adobedtm.com/6279662c4fd9/8724fef67590/5a66aa684d6d/RCba53335949d1474d8d28cdabc109ef5a-source.min.js', "function initializeHeartbeat(){var e=setInterval((function(){null!=getPlayerID()&&\"undefined\"!=typeof videojs&&(videojs(getPlayerID()).ready((function(){_satellite.logger.log(\"brightcoveReady function starting\",1);var e=ADB.va.MediaHeartbeat,t=ADB.va.MediaHeartbeatConfig,i=ADB.va.MediaHeartbeatDelegate,a=new t;a.trackingServer=\"metlife.hb.omtrdc.net\",a.playerName=\"Brightcove\",a.channel=\"Video Channel\",a.debugLogging=!0,a.appVersion=\"2.1.0\",a.ssl=!0,a.ovp=\"Brightcove\",window,document,videojs,simpleAnalytics=function(){var t,r,n=this,o=!0,h=!0,l=!1;n.on(\"loadedmetadata\",(function(){console.log(\"loadmetadata =====> Signifying Load Metadata event occurring for \"+n.mediainfo.description),r=new i,t=e.createMediaObject(n.mediainfo.description,n.mediainfo.id,n.mediainfo.duration,e.StreamType.VOD);var h={videoUrl:location.origin+location.pathname+location.search};r.getCurrentPlaybackTime=function(){return n.currentTime()},o?(n.mediaHeartbeat=new e(r,a,s),o=!1,l=!0):(n.mediaHeartbeat=new e(r,a,s),n.mediaHeartbeat.trackSessionStart(t,h),n.mediaHeartbeat.trackPlay(),l=!0)})),n.on(\"play\",(function(){if(h){var e={videoUrl:location.origin+location.pathname+location.search};n.mediaHeartbeat.trackSessionStart(t,e),n.mediaHeartbeat.trackPlay(),h=!1,console.log(\"start =====> Signifying START event initial play for \"+n.mediainfo.description)}else l&&(n.mediaHeartbeat.trackPlay(),console.log(\"play =====> Signifying PLAY event occurring at \"+n.currentTime()))})),n.on(\"pause\",(function(){console.log(\"pause =====> Signifying PAUSE event occurring at \"+n.currentTime()),n.mediaHeartbeat.trackPause()})),n.on(\"seeking\",(function(){console.log(\"seeking =====> Signifying SEEKING event occurring at \"+n.currentTime()),n.mediaHeartbeat.trackEvent(e.Event.SeekStart)})),n.on(\"seeked\",(function(){console.log(\"seeked =====> Signifying SEEKED event occurring at \"+n.currentTime()),n.mediaHeartbeat.trackEvent(e.Event.SeekComplete)})),n.on(\"ended\",(function(){console.log(\"ended =====> Signifying ENDED event occurring at \"+n.currentTime()),n.mediaHeartbeat.trackComplete(),n.mediaHeartbeat.trackSessionEnd(),l=!1}))},videojs.plugin(\"simpleAnalytics\",simpleAnalytics),initializePlayers()})),clearInterval(e))}),100)}function initializePlayers(){var e=videojs.getPlayers();for(var t in e)if(console.log(e[t]),0==e[t].currentTime()){var i=e[t].autoplay();hbVideoStartType=1==i?\"auto\":\"manual\",e[t].simpleAnalytics()}}function getPlayerID(){return document.getElementsByClassName(\"video-js\").length>0&&null!=document.getElementsByClassName(\"video-js\")[0].id?document.getElementsByClassName(\"video-js\")[0].id:null}!function(e,t){\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof module&&module.exports?module.exports=t():e.ADB=t()}(\"undefined\"!=typeof self?self:this,(function(){var e={};return function(){var e;!function(e){if(void 0===t)var t={};if(void 0===i)var i={};if(void 0===a)var a={};if(a.radio||(a.radio={}),a.plugin||(a.plugin={}),void 0===r)var r={};r.clock||(r.clock={}),function(e){\"use strict\";function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,t){return e<<t|e>>>32-t}function a(e,a,r,n,s,o){return t(i(t(t(a,e),t(n,o)),s),r)}function r(e,t,i,r,n,s,o){return a(t&i|~t&r,e,t,n,s,o)}function n(e,t,i,r,n,s,o){return a(t&r|i&~r,e,t,n,s,o)}function s(e,t,i,r,n,s,o){return a(t^i^r,e,t,n,s,o)}function o(e,t,i,r,n,s,o){return a(i^(t|~r),e,t,n,s,o)}function h(e,i){e[i>>5]|=128<<i%32,e[14+(i+64>>>9<<4)]=i;var a,h,l,d,c,p=1732584193,_=-271733879,u=-1732584194,g=271733878;for(a=0;a<e.length;a+=16)h=p,l=_,d=u,c=g,p=r(p,_,u,g,e[a],7,-680876936),g=r(g,p,_,u,e[a+1],12,-389564586),u=r(u,g,p,_,e[a+2],17,606105819),_=r(_,u,g,p,e[a+3],22,-1044525330),p=r(p,_,u,g,e[a+4],7,-176418897),g=r(g,p,_,u,e[a+5],12,1200080426),u=r(u,g,p,_,e[a+6],17,-1473231341),_=r(_,u,g,p,e[a+7],22,-45705983),p=r(p,_,u,g,e[a+8],7,1770035416),g=r(g,p,_,u,e[a+9],12,-1958414417),u=r(u,g,p,_,e[a+10],17,-42063),_=r(_,u,g,p,e[a+11],22,-1990404162),p=r(p,_,u,g,e[a+12],7,1804603682),g=r(g,p,_,u,e[a+13],12,-40341101),u=r(u,g,p,_,e[a+14],17,-1502002290),p=n(p,_=r(_,u,g,p,e[a+15],22,1236535329),u,g,e[a+1],5,-165796510),g=n(g,p,_,u,e[a+6],9,-1069501632),u=n(u,g,p,_,e[a+11],14,643717713),_=n(_,u,g,p,e[a],20,-373897302),p=n(p,_,u,g,e[a+5],5,-701558691),g=n(g,p,_,u,e[a+10],9,38016083),u=n(u,g,p,_,e[a+15],14,-660478335),_=n(_,u,g,p,e[a+4],20,-405537848),p=n(p,_,u,g,e[a+9],5,568446438),g=n(g,p,_,u,e[a+14],9,-1019803690),u=n(u,g,p,_,e[a+3],14,-187363961),_=n(_,u,g,p,e[a+8],20,1163531501),p=n(p,_,u,g,e[a+13],5,-1444681467),g=n(g,p,_,u,e[a+2],9,-51403784),u=n(u,g,p,_,e[a+7],14,1735328473),p=s(p,_=n(_,u,g,p,e[a+12],20,-1926607734),u,g,e[a+5],4,-378558),g=s(g,p,_,u,e[a+8],11,-2022574463),u=s(u,g,p,_,e[a+11],16,1839030562),_=s(_,u,g,p,e[a+14],23,-35309556),p=s(p,_,u,g,e[a+1],4,-1530992060),g=s(g,p,_,u,e[a+4],11,1272893353),u=s(u,g,p,_,e[a+7],16,-155497632),_=s(_,u,g,p,e[a+10],23,-1094730640),p=s(p,_,u,g,e[a+13],4,681279174),g=s(g,p,_,u,e[a],11,-358537222),u=s(u,g,p,_,e[a+3],16,-722521979),_=s(_,u,g,p,e[a+6],23,76029189),p=s(p,_,u,g,e[a+9],4,-640364487),g=s(g,p,_,u,e[a+12],11,-421815835),u=s(u,g,p,_,e[a+15],16,530742520),p=o(p,_=s(_,u,g,p,e[a+2],23,-995338651),u,g,e[a],6,-198630844),g=o(g,p,_,u,e[a+7],10,1126891415),u=o(u,g,p,_,e[a+14],15,-1416354905),_=o(_,u,g,p,e[a+5],21,-57434055),p=o(p,_,u,g,e[a+12],6,1700485571),g=o(g,p,_,u,e[a+3],10,-1894986606),u=o(u,g,p,_,e[a+10],15,-1051523),_=o(_,u,g,p,e[a+1],21,-2054922799),p=o(p,_,u,g,e[a+8],6,1873313359),g=o(g,p,_,u,e[a+15],10,-30611744),u=o(u,g,p,_,e[a+6],15,-1560198380),_=o(_,u,g,p,e[a+13],21,1309151649),p=o(p,_,u,g,e[a+4],6,-145523070),g=o(g,p,_,u,e[a+11],10,-1120210379),u=o(u,g,p,_,e[a+2],15,718787259),_=o(_,u,g,p,e[a+9],21,-343485551),p=t(p,h),_=t(_,l),u=t(u,d),g=t(g,c);return[p,_,u,g]}function l(e){var t,i=\"\";for(t=0;t<32*e.length;t+=8)i+=String.fromCharCode(e[t>>5]>>>t%32&255);return i}function d(e){var t,i=[];for(i[(e.length>>2)-1]=void 0,t=0;t<i.length;t+=1)i[t]=0;for(t=0;t<8*e.length;t+=8)i[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return i}function c(e){return l(h(d(e),8*e.length))}function p(e,t){var i,a,r=d(e),n=[],s=[];for(n[15]=s[15]=void 0,r.length>16&&(r=h(r,8*e.length)),i=0;i<16;i+=1)n[i]=909522486^r[i],s[i]=1549556828^r[i];return a=h(n.concat(d(t)),512+8*t.length),l(h(s.concat(a),640))}function _(e){var t,i,a=\"0123456789abcdef\",r=\"\";for(i=0;i<e.length;i+=1)t=e.charCodeAt(i),r+=a.charAt(t>>>4&15)+a.charAt(15&t);return r}function u(e){return unescape(encodeURIComponent(e))}function g(e){return c(u(e))}function f(e){return _(g(e))}function m(e,t){return p(u(e),u(t))}function v(e,t){return _(m(e,t))}function y(e,t,i){return t?i?m(t,e):v(t,e):i?g(e):f(e)}e.md5=y}(t),function(e){\"use strict\";var t={startsWith:function(e,t){return 0==e.indexOf(t)}};e.StringUtils=t}(t),function(e){\"use strict\";var t={clone:function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},merge:function(e,i){var a=t.clone(e);for(var r in i)i.hasOwnProperty(r)&&(a[r]=i[r]);return a},append:function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])}};e.ObjectUtils=t}(t),function(e){\"use strict\";function t(e,t,i){this.fn=e,this.ctx=t,this.params=i}t.prototype.run=function(){this.params?this.fn.apply(this.ctx,this.params):this.fn.apply(this.ctx)},e.radio.Command=t}(a),function(e){\"use strict\";function t(e,t){this._queue=[],this._lastTs=0,this._isSuspended=void 0!==e&&e,this._delay=void 0!==t?t:0}t.prototype.addCommand=function(e){this._queue.push(e),this._drain()},t.prototype.cancelAllCommands=function(){this._queue=[]},t.prototype.isEmpty=function(){return 0===this._queue.length},t.prototype.suspend=function(){this._isSuspended=!0},t.prototype.resume=function(){this._isSuspended=!1,this._drain()},t.prototype.flush=function(){this._isSuspended=!1;for(var e=0;e<this._queue.length;e++)this._queue[e].run();this._queue=[]},t.prototype._drain=function(){if(!this._isSuspended&&!this._drainInProgress){this._drainInProgress=!0;var e=this;!function t(){var i=e._queue.shift();i?e._runCommand(i,(function(){e._isSuspended||t()})):e._drainInProgress=!1}()}},t.prototype._runCommand=function(e,t){function i(){e.run(),null!=t&&t.call(a)}var a=this;if(0==this._lastTs)i();else{var r=(new Date).getTime(),n=r-this._lastTs;this._lastTs=r,n<this._delay?setTimeout(i,this._delay-n):i()}},e.radio.CommandQueue=t}(a),function(e){\"use strict\";function t(e,t){if(this._name=e,!t)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=t,this._listeners={},this._requests={},this._commands={},this._isShutDown=!1}function i(e,i){if(e===i)return!0;for(var a=(e||\"\").split(t.SEPARATOR),r=(i||\"\").split(t.SEPARATOR),n=!0,s=0;s<a.length;s++)n=n&&(a[s]===t.WILDCARD||a[s]===r[s]);return n}t.WILDCARD=\"*\",t.SEPARATOR=\":\",t.prototype.toString=function(){return\"<channel: \"+this._name+\">\"},t.prototype.shutdown=function(){this._isShutDown||(this._logger.debug(a,\"#shutdown > Shutting down\"),this.off(),this._requests={},this._commands={},this._isShutDown=!0)},t.prototype.on=function(e,t,i){this._isShutDown||(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push({fn:t,ctx:i}))},t.prototype.off=function(e,t,i){if(!this._isShutDown){if(t=\"function\"==typeof t?t:null,!e&&null==t&&!i)return void(this._listeners={});if(e)this._removeListener(e,t,i);else for(e in this._listeners)this._listeners.hasOwnProperty(e)&&this._removeListener(e,t,i)}},t.prototype.trigger=function(e){if(!this._isShutDown)for(var t in this._listeners)if(this._listeners.hasOwnProperty(t)&&i(t,e.name))for(var a=this._listeners[t].slice(0),r=0;r<a.length;r++){var n=a[r];n.fn.call(n.ctx,e)}},t.prototype.comply=function(e,t,i){this._isShutDown||(this._commands[e]={cmd:t,ctx:i})},t.prototype.command=function(e,t){if(!this._isShutDown){var i=this._commands[e];if(!i)return void this._logger.warn(a,\"#command > No command handler for: \"+e);i.cmd.call(i.ctx,t)}},t.prototype.reply=function(e,t,i){this._isShutDown||(this._requests[e]={fn:t,ctx:i})},t.prototype.request=function(e){if(!this._isShutDown){var t=this._requests[e];return t?t.fn.call(t.ctx):(this._logger.warn(a,\"#request > No request handler for: \"+e),null)}},t.prototype._removeListener=function(e,t,i){t=\"function\"==typeof t?t:null;var a=this._listeners[e];if(a){if(!a.length||null==t&&!i)return void delete this._listeners[e];for(var r=0;r<a.length;r++){var n=a[r];null!==t&&t!==n.fn||i&&i!==n.ctx||this._listeners[e].splice(r,1)}}};var a=\"radio::Channel\";e.radio.Channel=t}(a),function(e){\"use strict\";function t(e){if(!e)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=e,this._channels={}}var i=e.radio.Channel;t.prototype.channel=function(e){return this._channels[e]||(this._channels[e]=new i(e,this._logger)),this._channels[e]},t.prototype.shutdown=function(){for(var e in this._channels)this._channels.hasOwnProperty(e)&&this._channels[e].shutdown()},e.radio.Radio=t}(a),function(e){\"use strict\";function t(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e}e.extend=t}(a),function(e){\"use strict\";function t(){}t.prototype.write=function(){throw new Error(\"Implementation error: Method must be overridden.\")},e.ILogWriter=t}(a),function(e){\"use strict\";function t(){}t.prototype.write=function(e){window.console&&window.console.log&&window.console.log(e)},e.LogWriter=t}(a),function(e){\"use strict\";function t(){}t.prototype.setLogWriter=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.getLogWriter=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.getEnabled=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.enable=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.disable=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.debug=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.info=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.warn=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.error=function(){throw new Error(\"Implementation error: Method must be overridden.\")},e.ILogger=t}(a),function(e){\"use strict\";function t(){this._logWriter=new a}function i(e){return e<10?\"00\"+e:e<100?\"0\"+e:\"\"+e}var a=e.LogWriter;t.prototype.setLogWriter=function(e){if(!e)throw new Error(\"Reference to the ILogWriter object cannot be NULL\");this._logWriter=e,this._enabled=!1},t.prototype.getLogWriter=function(){return this._logWriter},t.prototype.getEnabled=function(){return this._enabled},t.prototype.enable=function(){this._enabled=!0},t.prototype.disable=function(){this._enabled=!1},t.prototype.debug=function(e,t){this._log(e,n,t)},t.prototype.info=function(e,t){this._log(e,r,t)},t.prototype.warn=function(e,t){this._log(e,s,t)},t.prototype.error=function(e,t){this._log(e,o,t)},t.prototype._log=function(e,t,a){if(t==o||this._enabled){var r=\"\",n=new Date;r+=\"[\"+n.toTimeString()+\".\"+i(n.getMilliseconds())+\"] [\"+t+\"] \",r+=\"[\"+e+\"] \"+a,this._logWriter.write(r)}};var r=\"INFO\",n=\"DEBUG\",s=\"WARN\",o=\"ERROR\";e.Logger=t}(a),function(e){\"use strict\";function t(e,t){this._pluginName=e,this._eventName=t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getEventName=function(){return this._eventName},t.prototype.getName=function(){return this._pluginName+i.SEPARATOR+this._eventName},e.Trigger=t}(a),function(e){\"use strict\";function t(e,t){this.name=e,this.data=t}t.SUCCESS=\"success\",t.ERROR=\"error\",t.createFromTrigger=function(e){return new t(e.getName())},e.Event=t}(a),function(e){\"use strict\";function t(){this._events={}}t.prototype.addEventListener=function(e,t,i){e&&t&&(i=i||window,this._events[e]=this._events[e]||[],this._events[e].push({cb:t,ctx:i}))},t.prototype.removeEventListener=function(e,t,i){if(e&&t){i=i||window;var a,r,n=!1;for(r in this._events)if(e===r){n=!0;break}if(n){for(a=this._events[r].length-1;a>=0;a--){var s=this._events[r][a];t===s.cb&&i===s.ctx&&this._events[r].splice(a,1)}this._events[r].length||delete this._events[r]}}},t.prototype.dispatchEvent=function(e){var t,i;if(e.name)for(t in this._events)if(this._events.hasOwnProperty(t)&&e.name===t){var a=this._events[t].slice(0),r=a.length;for(i=0;i<r;i++)a[i].cb.call(a[i].ctx,e);break}},t.prototype.removeAllListeners=function(e){var t,i;if(e){for(i in this._events)if(this._events.hasOwnProperty(i)){for(t=this._events[i].length-1;t>=0;t--){this._events[i][t].ctx===e&&this._events[i].splice(t,1)}this._events[i].length||delete this._events[i]}}else this._events={}},e.EventDispatcher=t}(a),function(e){\"use strict\";function t(){}function i(e,t){this.url=e||null,this.method=t,this._xmlhttp=null}function a(){a.__super__.constructor.call(this),this._connection=null}var r=e.Event,n=e.EventDispatcher;t.GET=\"GET\",a.RESPONSE=\"response\",a.INSTANCE=\"instance\",e.extend(a,n),a.prototype.close=function(){this.removeAllListeners(null)},a.prototype.load=function(e){e&&e.method&&e.url&&(e._xmlhttp=this._createCORSRequest(e),e._xmlhttp?e._xmlhttp.send():this._loadImage(e))},a.prototype._createCORSRequest=function(e){var t=null;if(void 0!==window.XMLHttpRequest){var i=new window.XMLHttpRequest;\"withCredentials\"in i&&(t=i).open(e.method,e.url,!0)}if(null==t&&void 0!==window.XDomainRequest&&(t=new window.XDomainRequest).open(e.method,e.url),t){var n={};n[a.INSTANCE]=this;var s=this;t.onload=function(){if(t.status&&parseInt(t.status,10)>=400)return this.onerror();n[a.RESPONSE]=t.responseText,s.dispatchEvent(new r(r.SUCCESS,n))},t.onerror=function(){s.dispatchEvent(new r(r.ERROR,n))}}return t},a.prototype._loadImage=function(e){this._connection||(this._connection=new Image,this._connection.alt=\"\"),this._connection.src=e.url;var t={};t[a.RESPONSE]=\"\",t[a.INSTANCE]=this,this.dispatchEvent(new r(r.SUCCESS,t))},e.URLRequestMethod=t,e.URLRequest=i,e.URLLoader=a}(a),function(e){\"use strict\";var t=\"2.1.0.161\",i=\"43bccc\",a={getVersion:function(){return\"js-\"+t+\"-\"+i},getMajor:function(){return a.getNumberAtPosition(0)},getMinor:function(){return a.getNumberAtPosition(1)},getMicro:function(){return a.getNumberAtPosition(2)},getPatch:function(){return a.getNumberAtPosition(3)},getBuild:function(){return i},getApiLevel:function(){return 4},getNumberAtPosition:function(e){return t.split(\".\")[e]}};e.Version=a}(i),function(e){\"use strict\";function t(e,t){this._message=e,this._details=t}t.prototype.getMessage=function(){return this._message},t.prototype.getDetails=function(){return this._details},e.ErrorInfo=t}(i),function(e){\"use strict\";function t(){this.debugLogging=!1}e.HeartbeatConfig=t}(i),function(e){\"use strict\";function t(){}t.prototype.onError=function(){},e.HeartbeatDelegate=t}(i),function(e){\"use strict\";function t(){}t.prototype.configure=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.bootstrap=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.setup=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.destroy=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.enable=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.disable=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.getName=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.isInitialized=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.resolveData=function(){throw new Error(\"Implementation error: Method must be overridden.\")},e.plugin.IPlugin=t}(a),function(e){\"use strict\";function t(e,t,i,a){this.trigger=e,this.action=i,this.plugin=t,this._paramMappings={},this.mergeParams(a)}var i=e.plugin.ParamMapping;t.prototype.mergeParams=function(e){if(e)for(var t=0;t<e.length;t++){var i=e[t];this._paramMappings[i.getKeyName()]=i}},t.prototype.getParams=function(){var e=[];for(var t in this._paramMappings)this._paramMappings.hasOwnProperty(t)&&e.push(this._paramMappings[t]);return e},t.prototype.addParam=function(e){this._paramMappings[e.getKeyName()]=e},t.prototype.removeParam=function(e,t){var a=new i(e,t);this._paramMappings.hasOwnProperty(a.getKeyName())&&delete this._paramMappings[a.getKeyName()]},e.plugin.Behaviour=t}(a),function(e){\"use strict\";function t(e,t,a){this._pluginName=e,this._key=t,this._paramName=a||e+i.SEPARATOR+t}var i=e.radio.Channel;t.prototype.getPluginName=function(){return this._pluginName},t.prototype.getKey=function(){return this._key},t.prototype.getKeyName=function(){return this._pluginName+i.SEPARATOR+this._key},t.prototype.getParamName=function(){return this._paramName},e.plugin.ParamMapping=t}(a),function(e){\"use strict\";function t(e){if(!e)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=e,this._plugins={},this._behaviours={},this._radio=new a(this._logger),this._dataChannel=this._radio.channel(s),this._ctrlChannel=this._radio.channel(o)}var i=e.Event,a=e.radio.Radio,r=e.radio.Channel,n=e.plugin.Behaviour;t.ERROR=\"error\",t.prototype.addPlugin=function(e){var t=e.getName();this._plugins[t]&&this._logger.warn(h,\"#addPlugin > Replacing plugin: \"+t),this._plugins[t]=e,e.bootstrap(this)},t.prototype.setupPlugins=function(){for(var e in this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].setup()},t.prototype.pluginExists=function(e){return!!this._plugins[e]},t.prototype.isPluginInitialized=function(e){return this._plugins[e]&&this._plugins[e].isInitialized()},t.prototype.on=function(e,t,i,a){this._dataChannel.on(e+r.SEPARATOR+t,i,a)},t.prototype.off=function(e,t,i,a){var n=e&&t?e+r.SEPARATOR+t:null;this._dataChannel.off(n,i,a)},t.prototype.trigger=function(e){var t=e.name,i=this._behaviours[t];if(i){var a,r,n,s,o,h={},l={};for(a=0;a<i.length;a++)if(s=(n=i[a]).getParams())for(r=0;r<s.length;r++)h[(o=s[r]).getPluginName()]=h[o.getPluginName()]||[],o.key in h[o.getPluginName()]||h[o.getPluginName()].push(o.getKey());for(var d in h)h.hasOwnProperty(d)&&(l[d]=this.request(d,h[d]));for(a=0;a<i.length;a++){var c={_behaviour:n=i[a],_eventData:e.data||{}};if(s=n.getParams()){for(r=0;r<s.length;r++)c[(o=s[r]).getParamName()]=l[o.getPluginName()]?l[o.getPluginName()][o.getKey()]:null;this.command(n.plugin.getName(),n.action,c)}}}this._dataChannel.trigger(e)},t.prototype.request=function(e,t){var i=this._plugins[e];return i&&t&&0!=t.length?i.resolveData(t):null},t.prototype.raise=function(e){this._errorInfo=e;var a=new i(t.ERROR,e);this._ctrlChannel.trigger(a)},t.prototype.getErrorInfo=function(){return this._errorInfo},t.prototype.destroy=function(){for(var e in this._radio.shutdown(),this._plugins)this._plugins.hasOwnProperty(e)&&this._plugins[e].destroy()},t.prototype.comply=function(e,t,i){this._dataChannel.comply(e.getName()+r.SEPARATOR+t,i,e)},t.prototype.command=function(e,t,i){this._dataChannel.command(e+r.SEPARATOR+t,i)},t.prototype.registerBehaviour=function(e,t,i,a){var r=e.getName(),s=new n(e,t,i,a);this._behaviours[r]=this._behaviours[r]||[],this._behaviours[r].push(s)};var s=\"data_channel\",o=\"ctrl_channel\",h=\"plugin::PluginManager\";e.plugin.PluginManager=t}(a),function(e,t){\"use strict\";function i(e){this._name=e,this._isInitialized=!1,this._isDestroyed=!1,this._isEnabled=!0,this._dataResolver={},this._logTag=\"plugin::\"+this.getName(),this._logger=new a}var a=e.Logger,r=e.Trigger,n=e.Event,s=t.ErrorInfo;i.INITIALIZED=\"initialized\",i.prototype.configure=function(){},i.prototype.bootstrap=function(e){this._pluginManager=e,this._isDestroyed&&this._pluginManager.raise(new s(\"Invalid state.\",\"Plugin already destroyed.\"))},i.prototype.setup=function(){this._trigger(i.INITIALIZED),this._isInitialized=!0},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._teardown())},i.prototype.enable=function(){this._isEnabled=!0,this._enabled()},i.prototype.disable=function(){this._isEnabled=!1,this._disabled()},i.prototype.getName=function(){return this._name},i.prototype.getLogger=function(){return this._logger},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.resolveData=function(e){if(!this._isEnabled||!this._isInitialized)return this._logger.warn(this._logTag,\"Unable to retrieve plugin data. Plugin: \"+this._name+\". Enabled: \"+this._isEnabled+\". Initialized: \"+this._isInitialized+\".\"),null;if(\"function\"==typeof this._dataResolver)return this._dataResolver.call(this,e);var t=null;if(e)for(var i=0;i<e.length;i++){var a=e[i];this._dataResolver.hasOwnProperty(a)&&(t=t||{},\"function\"==typeof this._dataResolver[a]?t[a]=this._dataResolver[a].call(this):t[a]=this._dataResolver[a])}return t},i.prototype.toString=function(){return\"<plugin: \"+this._name+\">\"},i.prototype._enabled=function(){},i.prototype._disabled=function(){},i.prototype._teardown=function(){},i.prototype._canProcess=function(){return this._isEnabled?!this._isDestroyed||(this._logger.error(this._logTag,\"Plugin destroyed.\"),!1):(this._logger.error(this._logTag,\"Plugin disabled.\"),!1)},i.prototype._trigger=function(e,t){var i=n.createFromTrigger(new r(this.getName(),e));i.data=t,this._pluginManager.trigger(i)},e.plugin.BasePlugin=i}(a,i),function(e){\"use strict\";function t(e,t,i){this.name=e,this.interval=t,this.isActive=!1,this.repeatCount=void 0!==i?i:r,this._nextTickTimestamp=0,this.reset()}function i(e,t){if(!e)throw new Error(\"Reference to the ClockService object cannot be NULL\");if(this._service=e,!t)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=t,this._isDestroyed=!1,this._timers={};var i=this;this._clock=window.setInterval((function(){i._onTick()}),1e3*n)}t.prototype.reset=function(){this.tick=0,this._createdTimestamp=(new Date).getTime(),this._updateNextTickTimestamp()},t.prototype.shouldTick=function(){return(new Date).getTime()>this._nextTickTimestamp-s/2&&(this.tick++,this._updateNextTickTimestamp(),!0)},t.prototype._updateNextTickTimestamp=function(){var e=(new Date).getTime();this._nextTickTimestamp=e+1e3*this.interval-1},i.prototype.createTimer=function(e,i,a){this._timers[e]=new t(e,i,a)},i.prototype.destroyTimer=function(e){delete this._timers[e]},i.prototype.resumeTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(a,\"#resumeTimer(name=\"+e+\", reset=\"+t+\")\");var i=this._timers[e];i&&(i.isActive=!0,t&&i.reset())},i.prototype.pauseTimer=function(e,t){t=void 0!==t&&t,this._logger.debug(a,\"#pauseTimer(name=\"+e+\", reset=\"+t+\")\");var i=this._timers[e];i&&(i.isActive=!1,t&&i.reset())},i.prototype.isTimerPaused=function(e){var t=this._timers[e];return!!t&&!t.isActive},i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._timers={},window.clearInterval(this._clock))},i.prototype._onTick=function(){for(var e in this._timers)if(this._timers.hasOwnProperty(e)){var t=this._timers[e];t.isActive&&t.shouldTick()&&(t.interval>1&&this._logger.debug(a,\"#_onTick() > \"+t.name+\"(\"+t.tick+\" | \"+t.repeatCount+\")\"),0!=t.repeatCount?(this._service.onTick(t.name,t.interval,t.tick),t.repeatCount!=r&&t.repeatCount--):this.destroyTimer(t.name))}};var a=\"service.clock::TimerManager\",r=-1,n=.25,s=1e3*n;e.clock.TimerDescriptor=t,e.clock.TimerManager=i}(r),function(e,t,i){\"use strict\";function a(e){if(a.__super__.constructor.call(this,o),!e)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=e,this._timerManager=new r(this,this._logger),this._setupDataResolver()}var r=i.clock.TimerManager,n=t.StringUtils,s=e.plugin.BasePlugin;e.extend(a,s),a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._pluginManager.comply(this,h,this._cmdCreate),this._pluginManager.comply(this,d,this._cmdResume),this._pluginManager.comply(this,l,this._cmdPause),this._pluginManager.comply(this,c,this._cmdDestroy)},a.prototype._teardown=function(){this._timerManager.destroy()},a.prototype._cmdCreate=function(e){var t=e[u]||v;this._timerManager.createTimer(e[p],e[_],t)},a.prototype._cmdPause=function(e){this._timerManager.pauseTimer(e[p],!!e[f])},a.prototype._cmdResume=function(e){this._timerManager.resumeTimer(e[p],!!e[f])},a.prototype._cmdDestroy=function(e){this._timerManager.destroyTimer(e[p])},a.prototype.onTick=function(e,t,i){e+=\".tick\";var a={};a[p]=e,a[_]=t,a[g]=i,this._trigger(e,a)},a.prototype._setupDataResolver=function(){var e={},t=this._timerManager;e[m]=function(e){return t.isTimerPaused(e)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var r=t[a];if(i=i||{},n.startsWith(r,m)){var s=r.split(m+\".\");s.length>0&&(i[r]=e[m].call(this,s[1]))}}return i}};var o=\"service.clock\",h=\"create\",l=\"pause\",d=\"resume\",c=\"destroy\",p=\"name\",_=\"interval\",u=\"repeat_count\",g=\"tick\",f=\"reset\",m=\"is_paused\",v=-1;i.clock.ClockService=a}(a,t,r),function(e,t,i){\"use strict\";function a(e,t){if(this._logger=new r,this._pluginManager=new n(this._logger),this._pluginManager.addPlugin(new s(this._logger)),t)for(var i=0;i<t.length;i++)this._pluginManager.addPlugin(t[i]);this._pluginManager.setupPlugins(),this._isDestroyed=!1}var r=e.Logger,n=e.plugin.PluginManager,s=t.clock.ClockService;a.prototype.configure=function(e){if(!e)throw new Error(\"Configuration object cannot be NULL.\");e.debugLogging?this._logger.enable():this._logger.disable(),this._isDestroyed&&this._logger.error(o,\"Instance is destroyed.\")},a.prototype.destroy=function(){this._isDestroyed||(this._pluginManager.destroy(),this._isDestroyed=!0)};var o=\"Heartbeat\";i.Heartbeat=a}(a,r,i),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=a),e.ADB.va||(e.ADB.va=i),e.ADB.va.utils||(e.ADB.va.utils=t),e.ADB.va.plugins||(e.ADB.va.plugins={})}(this),function(e){if(void 0===t)var t={};!function(e){\"use strict\";var t={ASSET_TYPE_VOD:\"vod\",ASSET_TYPE_LIVE:\"live\",ASSET_TYPE_LINEAR:\"linear\"};e.AssetType=t}(t),function(e){\"use strict\";function t(){this.playerName=null,this.name=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return\"playerName=\"+this.playerName+\", name=\"+this.name+\", position=\"+this.position+\", startTime=\"+this.startTime},e.AdBreakInfo=t}(t),function(e){\"use strict\";function t(){this.id=null,this.name=null,this.length=null,this.position=null,this.granularTracking=!0}t.prototype.toString=function(){return\"id=\"+this.id+\", name=\"+this.name+\", length=\"+this.length+\", position=\"+this.position+\", granularTracking=\"+this.granularTracking},e.AdInfo=t}(t),function(e){\"use strict\";function t(){this.name=null,this.length=null,this.position=null,this.startTime=null}t.prototype.toString=function(){return\"name=\"+this.name+\", length=\"+this.length+\", position=\"+this.position+\", startTime=\"+this.startTime},e.ChapterInfo=t}(t),function(e){\"use strict\";function t(){this.bitrate=null,this.fps=null,this.droppedFrames=null,this.startupTime=null}t.prototype.toString=function(){return\"bitrate=\"+this.bitrate+\", fps=\"+this.fps+\", droppedFrames=\"+this.droppedFrames+\", startupTime=\"+this.startupTime},e.QoSInfo=t}(t),function(e){\"use strict\";function t(){this.playerName=null,this.id=null,this.name=null,this.length=null,this.playhead=null,this.streamType=null,this.resumed=!1}t.prototype.toString=function(){return\"playerName=\"+this.playerName+\", id=\"+this.id+\", name=\"+this.name+\", length=\"+this.length+\", playhead=\"+this.playhead+\", streamType=\"+this.streamType+\", resumed=\"+this.resumed},e.VideoInfo=t}(t),function(e){\"use strict\";function t(){this.debugLogging=!1}e.VideoPlayerPluginConfig=t}(t),function(e){\"use strict\";function t(){}t.prototype.getVideoInfo=function(){throw new Error(\"Implementation error: Method must be overridden.\")},t.prototype.getAdBreakInfo=function(){return null},t.prototype.getAdInfo=function(){return null},t.prototype.getChapterInfo=function(){return null},t.prototype.getQoSInfo=function(){return null},e.VideoPlayerPluginDelegate=t}(t),function(e,t){\"use strict\";function i(e){if(i.__super__.constructor.call(this,o),!e)throw new Error(\"PlayerPlugin delegate cannot be NULL.\");this._delegate=e,this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._setupDataResolver()}var a=e.plugin.ParamMapping,r=e.Trigger,n=e.plugin.BasePlugin,s=t.VideoPlayerPluginConfig;e.extend(i,n),i.prototype.configure=function(e){if(!e)throw new Error(\"Reference to the configuration data cannot be NULL.\");if(!(e instanceof s))throw new Error(\"Expected config data to be instance of VideoPlayerPluginConfig.\");e.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,\"#configure(debugLogging=\"+e.debugLogging+\")\")},i.prototype.bootstrap=function(e){i.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},i.prototype._cmdVideoIdleStart=function(){this._logger.info(this._logTag,\"#_cmdVideoIdleStart()\"),this._videoIdle=!0},i.prototype._cmdVideoIdleResume=function(e){this._logger.info(this._logTag,\"#_cmdVideoIdleResume()\"),this._videoIdle&&(this._trigger(g),this._trigger(f),e.isInChapter&&this._trigger(N),e.isInAd&&(this._trigger(T),this._isTrackingAd=!0)),this._videoIdle=!1},i.prototype.trackSessionStart=function(){if(this._logger.info(this._logTag,\"#trackSessionStart()\"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,\"#trackSessionStart() > No active tracking session.\");if(this._isTrackingSessionStarted)return void this._logger.info(this._logTag,\"#trackSessionStart() > Tracking session already started.\");this._trigger(g),this._isTrackingSessionStarted=!0;var e=this._dataResolver([\"video.resumed\"]);e.hasOwnProperty(\"video.resumed\")&&e[\"video.resumed\"]&&this._trigger(f)}},i.prototype.trackVideoLoad=function(){this._logger.info(this._logTag,\"#trackVideoLoad()\"),this._canProcess()&&(this._isTrackingAd=!1,this._contentStarted=!1,this._isPaused=!0,this._isBuffering=!1,this._isSeeking=!1,this._playheadTimer=null,this._previousPlayhead=-1,this._stalledPlayheadCount=0,this._playheadStalled=!1,this._videoIdle=!1,this._trigger(p),this._isTrackingSessionActive=!0,this._isTrackingSessionStarted=!1)},i.prototype.trackVideoUnload=function(){if(this._logger.info(this._logTag,\"#trackVideoUnload()\"),this._canProcess()){if(!this._isTrackingSessionActive)return void this._logger.warn(this._logTag,\"#trackVideoUnload() > No active tracking session.\");this._stopPlayheadTimer(),this._trigger(_),this._isTrackingSessionActive=!1,this._isTrackingSessionStarted=!1,this._contentStarted=!1}},i.prototype.trackPlay=function(){this._logger.info(this._logTag,\"#trackPlay()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackPlay\")&&(this._isPaused=!1,this._trigger(E),\nthis._startPlayheadTimer())},i.prototype.trackPause=function(){if(this._logger.info(this._logTag,\"#trackPause()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackPause\")){this._stopPlayheadTimer();var e={};e[F]=!1,this._isPaused=!0,this._trigger(I,e)}},i.prototype.trackBufferStart=function(){this._logger.info(this._logTag,\"#trackBufferStart()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackBufferStart\")&&(this._stopPlayheadTimer(),this._isBuffering=!0,this._trigger(S))},i.prototype.trackBufferComplete=function(){this._logger.info(this._logTag,\"#trackBufferComplete()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackBufferComplete\")&&(this._isBuffering=!1,this._trigger(P),this._startPlayheadTimer())},i.prototype.trackSeekStart=function(){this._logger.info(this._logTag,\"#trackSeekStart()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackSeekStart\")&&(this._stopPlayheadTimer(),this._isSeeking=!0,this._trigger(D))},i.prototype.trackSeekComplete=function(){if(this._logger.info(this._logTag,\"#trackSeekComplete()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackSeekComplete\")){this._isSeeking=!1,this._trigger(w),this._startPlayheadTimer();var e=this._dataResolver([\"ad.isInAd\"]);this._isTrackingAd=e.hasOwnProperty(\"ad.isInAd\")&&e[\"ad.isInAd\"]}},i.prototype.trackComplete=function(e,t){if(this._logger.info(this._logTag,\"#trackComplete()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackComplete\")){this._stopPlayheadTimer();var i={};i[L]=e,(t=void 0===t||!!t)?this._trigger(m,i):(this._trigger(v),this._trigger(u,i))}},i.prototype.trackTimedMetadata=function(e){this._logger.info(this._logTag,\"#trackComplete()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackTimedMetadata\")&&this._trigger(y,e)},i.prototype.trackChapterStart=function(){this._logger.info(this._logTag,\"#trackChapterStart()\"),this._canProcess()&&this._startSessionIfNeeded(\"#trackChapterStart\")&&this._trigger(N)},i.prototype.trackChapterComplete=function(){this._logger.info(this._logTag,\"#trackChapterComplete()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackChapterComplete\")&&this._trigger(M)},i.prototype.trackChapterSkip=function(){this._logger.info(this._logTag,\"#trackChapterSkip()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackChapterSkip\")&&this._trigger(C)},i.prototype.trackAdStart=function(){this._logger.info(this._logTag,\"#trackAdStart()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackAdStart\")&&(this._trigger(T),this._isTrackingAd=!0)},i.prototype.trackAdComplete=function(){this._logger.info(this._logTag,\"#trackAdComplete()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackAdComplete\")&&(this._trigger(k),this._isTrackingAd=!1)},i.prototype.trackAdSkip=function(){this._logger.info(this._logTag,\"#trackAdSkip()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackAdSkip\")&&(this._trigger(b),this._isTrackingAd=!1)},i.prototype.trackBitrateChange=function(){this._logger.info(this._logTag,\"#trackBitrateChange()\"),this._canProcess()&&this._startSessionIfNeeded(\"trackBitrateChange\")&&this._trigger(R)},i.prototype.trackVideoPlayerError=function(e){if(this._logger.info(this._logTag,\"#trackVideoPlayerError(errorId=\"+e+\")\"),this._startSessionIfNeeded(\"trackVideoPlayerError\")){var t={};t[Y]=c,t[H]=e,this._trigger(O,t)}},i.prototype.trackApplicationError=function(e){if(this._logger.info(this._logTag,\"#trackApplicationError(errorId=\"+e+\")\"),this._startSessionIfNeeded(\"trackApplicationError\")){var t={};t[Y]=d,t[H]=e,this._trigger(O,t)}},i.prototype._registerCommands=function(){this._pluginManager.comply(this,\"handleVideoIdleStart\",this._cmdVideoIdleStart),this._pluginManager.comply(this,\"handleVideoIdleResume\",this._cmdVideoIdleResume)},i.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new r(l,V),this,\"handleVideoIdleStart\"),this._pluginManager.registerBehaviour(new r(l,B),this,\"handleVideoIdleResume\",[new a(h,\"ad.isInAd\",\"isInAd\"),new a(h,\"chapter.isInChapter\",\"isInChapter\")])},i.prototype._setupDataResolver=function(){function e(){return s.video||(s.video=o._delegate.getVideoInfo(),o._logger.info(o._logTag,\"Data from delegate > VideoInfo: \"+s.video)),s.video}function t(){return s.ad||(s.ad=o._delegate.getAdInfo(),o._logger.info(o._logTag,\"Data from delegate > AdInfo: \"+s.ad)),s.ad}function i(){return s.pod||(s.pod=o._delegate.getAdBreakInfo(),o._logger.info(o._logTag,\"Data from delegate > AdBreakInfo: \"+s.pod)),s.pod}function a(){return s.chapter||(s.chapter=o._delegate.getChapterInfo(),o._logger.info(o._logTag,\"Data from delegate > ChapterInfo: \"+s.chapter)),s.chapter}function r(){return s.qos||(s.qos=o._delegate.getQoSInfo(),o._logger.info(o._logTag,\"Data from delegate > QoSInfo: \"+s.qos)),s.qos}var n={},s={},o=this;n[\"video.id\"]=function(){var t=e(),i=t?t.id:null;return o._logger.debug(o._logTag,\"Resolving video.id: \"+i),i},n[\"video.name\"]=function(){var t=e(),i=t?t.name:null;return o._logger.debug(o._logTag,\"Resolving video.name: \"+i),i},n[\"video.length\"]=function(){var t=e(),i=t?t.length:NaN;return o._logger.debug(o._logTag,\"Resolving video.length: \"+i),i},n[\"video.playerName\"]=function(){var t=e(),i=t?t.playerName:null;return o._logger.debug(o._logTag,\"Resolving video.playerName: \"+i),i},n[\"video.streamType\"]=function(){var t=e(),i=t?t.streamType:null;return o._logger.debug(o._logTag,\"Resolving video.streamType: \"+i),i},n[\"video.playhead\"]=function(){var t=e(),i=t?t.playhead:NaN;return o._logger.debug(o._logTag,\"Resolving video.playhead: \"+i),i},n[\"video.resumed\"]=function(){var t=e(),i=!!t&&t.resumed;return o._logger.debug(o._logTag,\"Resolving video.resumed: \"+i),i},n[\"video.playheadStalled\"]=function(){return this._playheadStalled},n[\"pod.name\"]=function(){var e=i(),t=e?e.name:null;return o._logger.debug(o._logTag,\"Resolving pod.name: \"+t),t},n[\"pod.playerName\"]=function(){var e=i(),t=e?e.playerName:null;return o._logger.debug(o._logTag,\"Resolving pod.playerName: \"+t),t},n[\"pod.position\"]=function(){var e=i(),t=e?e.position:NaN;return o._logger.debug(o._logTag,\"Resolving pod.position: \"+t),t},n[\"pod.startTime\"]=function(){var e=i(),t=e?e.startTime:NaN;return o._logger.debug(o._logTag,\"Resolving pod.startTime: \"+t),t},n[\"ad.isInAd\"]=function(){var e=null!=t();return o._logger.debug(o._logTag,\"Resolving ad.isInAd: \"+e),e},n[\"ad.isInAdBreak\"]=function(){var e=null!=i();return o._logger.debug(o._logTag,\"Resolving ad.isInAdBreak: \"+e),e},n[\"ad.id\"]=function(){var e=t(),i=e?e.id:null;return o._logger.debug(o._logTag,\"Resolving ad.id: \"+i),i},n[\"ad.name\"]=function(){var e=t(),i=e?e.name:null;return o._logger.debug(o._logTag,\"Resolving ad.name: \"+i),i},n[\"ad.length\"]=function(){var e=t(),i=e?e.length:NaN;return o._logger.debug(o._logTag,\"Resolving ad.length: \"+i),i},n[\"ad.position\"]=function(){var e=t(),i=e?e.position:NaN;return o._logger.debug(o._logTag,\"Resolving ad.position: \"+i),i},n[\"ad.granularTracking\"]=function(){var e=t(),i=!!e&&e.granularTracking;return o._logger.debug(o._logTag,\"Resolving ad.granularTracking: \"+i),i},n[\"ad.trackingInterval\"]=function(){var e=j;return o._logger.debug(o._logTag,\"Resolving ad.trackingInterval: \"+e),e},n[\"chapter.isInChapter\"]=function(){var e=null!=a();return o._logger.debug(o._logTag,\"Resolving chapter.isInChapter: \"+e),e},n[\"chapter.name\"]=function(){var e=a(),t=e?e.name:null;return o._logger.debug(o._logTag,\"Resolving chapter.name: \"+t),t},n[\"chapter.length\"]=function(){var e=a(),t=e?e.length:NaN;return o._logger.debug(o._logTag,\"Resolving chapter.length: \"+t),t},n[\"chapter.position\"]=function(){var e=a(),t=e?e.position:NaN;return o._logger.debug(o._logTag,\"Resolving chapter.position: \"+t),t},n[\"chapter.startTime\"]=function(){var e=a(),t=e?e.startTime:NaN;return o._logger.debug(o._logTag,\"Resolving chapter.startTime: \"+t),t},n[\"qos.bitrate\"]=function(){var e=r(),t=e?e.bitrate:NaN;return o._logger.debug(o._logTag,\"Resolving qos.bitrate: \"+t),t},n[\"qos.fps\"]=function(){var e=r(),t=e?e.fps:NaN;return o._logger.debug(o._logTag,\"Resolving qos.fps: \"+t),t},n[\"qos.droppedFrames\"]=function(){var e=r(),t=e?e.droppedFrames:NaN;return o._logger.debug(o._logTag,\"Resolving qos.droppedFrames: \"+t),t},n[\"qos.startupTime\"]=function(){var e=r(),t=e?1e3*e.startupTime:NaN;return o._logger.debug(o._logTag,\"Resolving qos.startupTime: \"+t),t},this._dataResolver=function(e){if(!e||0==e.length)return null;s={};for(var t=null,i=0;i<e.length;i++){var a=e[i];(t=t||{})[a]=n.hasOwnProperty(a)?n[a].call(this):null}return t}},i.prototype._trackPlayheadStall=function(){this._canProcess()&&(this._playheadStalled||(this._logger.info(this._logTag,\"#_trackPlayheadStall()\"),this._stalledPlayheadCount=0,this._playheadStalled=!0,this._trigger(I)))},i.prototype._trackExitStall=function(){this._canProcess()&&(this._stalledPlayheadCount=0,!this._playheadStalled||this._isPaused||this._isSeeking||this._isBuffering||(this._logger.info(this._logTag,\"#_trackExitStall()\"),this._playheadStalled=!1,this._trigger(E)))},i.prototype._startPlayheadTimer=function(){var e=this;this._playheadTimer||this._isPaused||this._isSeeking||this._isBuffering||(this._playheadTimer=setInterval((function(){if(e._canProcess()){var t=e._dataResolver([\"ad.isInAd\",\"video.playhead\"]);if(e._isTrackingAd)e._playheadStalled&&e._trackExitStall(),t.hasOwnProperty(\"ad.isInAd\")&&!t[\"ad.isInAd\"]&&(e._isTrackingAd=!1);else{var i=t[\"video.playhead\"];i!=e._previousPlayhead?e._trackExitStall():e._previousPlayhead>=0&&i==e._previousPlayhead&&++e._stalledPlayheadCount==x&&e._trackPlayheadStall(),i!=e._previousPlayhead&&i>0&&!e._contentStarted&&(e._isPaused||e._isBuffering||e._isSeeking||(e._logger.info(e._logTag,\"#_playheadTimer playhead progress to: \"+i),e._trigger(A),e._contentStarted=!0)),e._previousPlayhead=i}}}),q))},i.prototype._stopPlayheadTimer=function(){this._playheadTimer&&(clearInterval(this._playheadTimer),this._playheadTimer=null),this._trackExitStall()},i.prototype._startSessionIfNeeded=function(e){return this._isTrackingSessionActive?(this._isTrackingSessionStarted||(this._logger.info(this._logTag,\"#\"+e+\"() > Tracking session auto-start.\"),this.trackSessionStart()),!0):(this._logger.warn(this._logTag,\"#\"+e+\"() > No active tracking session.\"),!1)};var o=\"player\",h=o,l=\"adobe-heartbeat\",d=\"sourceErrorExternal\",c=\"sourceErrorSDK\",p=\"video_load\",_=\"video_unload\",u=\"video_session_end\",g=\"video_start\",f=\"video_resume\",m=\"video_complete\",v=\"video_skip\",y=\"timed_metadata\",E=\"play\",I=\"pause\",A=\"content_start\",T=\"ad_start\",k=\"ad_complete\",b=\"ad_skip\",S=\"buffer_start\",P=\"buffer_complete\",D=\"seek_start\",w=\"seek_complete\",N=\"chapter_start\",M=\"chapter_complete\",C=\"chapter_skip\",R=\"bitrate_change\",O=\"track_error\",V=\"video_idle_start\",B=\"video_idle_resume\",L=\"callback\",F=\"filter_report\",Y=\"source\",H=\"error_id\",q=1001,j=1,x=2;t.VideoPlayerPlugin=i}(e.ADB.core,t),e.ADB.va.plugins.videoplayer||(e.ADB.va.plugins.videoplayer=t)}(this),function(e){if(void 0===t)var t={};t.clock||(t.clock={}),t.context||(t.context={}),t.filter||(t.filter={}),t.model||(t.model={}),t.network||(t.network={}),function(e,t){\"use strict\";function i(e,t,i,a,r){if(!t)throw new Error(\"Reference to the channel object cannot be NULL\");if(this._channel=t,!e)throw new Error(\"Reference to the pluginManager object cannot be NULL\");if(this._pluginManager=e,!r)throw new Error(\"Reference to the logger object cannot be NULL\");this._logTag=\"ah::Timer.\"+i,this._logger=r,this._isDestroyed=!1,this._createTimer(i,a),this._installHandlers()}var a=e.Event;i.KEY_NAME=\"name\",i.KEY_INTERVAL=\"interval\",i.KEY_RESET=\"reset\",i.prototype.resume=function(e){this._logger.debug(this._logTag,\"Starting timer: \"+this._name);var t={};t[i.KEY_NAME]=r+\".\"+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(n,h,t)},i.prototype.pause=function(e){this._logger.debug(this._logTag,\"Stopping timer: \"+this._name);var t={};t[i.KEY_NAME]=r+\".\"+this._name,t[i.KEY_RESET]=e,this._pluginManager.command(n,o,t)},i.prototype.destroy=function(){if(!this._isDestroyed){this._isDestroyed=!0,this._uninstallHandlers();var e={};e[i.KEY_NAME]=r+\".\"+this._name,this._pluginManager.command(n,l,e)}},i.prototype.setInterval=function(e){var t=d+\".\"+r+\".\"+this._name,i=this._pluginManager.request(n,[t])[t];this.pause(!0),this._createTimer(this._name,e),i||this.resume(!0)},i.prototype._cmdResume=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.resume(t)},i.prototype._cmdPause=function(e){var t=!1;null!=e&&e.hasOwnProperty(i.KEY_RESET)&&(t=e[i.KEY_RESET]),this.pause(t)},i.prototype._onTick=function(e,t){this._channel.trigger(new a(\"clock:\"+this._name+\".tick\",t))},i.prototype._installHandlers=function(){this._channel.comply(\"clock:\"+this._name+\".resume\",this._cmdResume,this),this._channel.comply(\"clock:\"+this._name+\".pause\",this._cmdPause,this),this._pluginManager.on(n,r+\".\"+this._name+\".tick\",this._onTick,this)},i.prototype._uninstallHandlers=function(){this._channel.off(null,null,this),this._pluginManager.off(null,null,null,this)},i.prototype._createTimer=function(e,t){this._name=e,this._interval=t;var a={};a[i.KEY_NAME]=r+\".\"+this._name,a[i.KEY_INTERVAL]=this._interval,this._pluginManager.command(n,s,a)};var r=\"heartbeat\",n=\"service.clock\",s=\"create\",o=\"pause\",h=\"resume\",l=\"destroy\",d=\"is_paused\";t.clock.Timer=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t,a){i.__super__.constructor.call(this,e,t,n,o,a)}var a=e.Event,r=t.clock.Timer;e.extend(i,r),i.prototype._onCheckStatusComplete=function(e){var t=e.data[c];if(this._logger.debug(this._logTag,\"#_onCheckStatusComplete(interval=\"+t+\")\"),t){if(t==this._interval)return void this._logger.debug(this._logTag,\"#_onCheckStatusComplete() > Interval value not changed.\");t>s?(this._logger.warn(this._logTag,\"#_onCheckStatusComplete() > Interval value too large: \"+t),this.setInterval(s)):(this._logger.debug(this._logTag,\"#_onCheckStatusComplete() > Interval changed to: \"+t),this.setInterval(t))}else this._logger.warn(this._logTag,\"#_onCheckStatusComplete() > Invalid interval value.\"),this.setInterval(o)},i.prototype._getSettings=function(){this._logger.debug(this._logTag,\"#_getSettings()\"),this._channel.trigger(new a(h))},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(l,this._getSettings,this),this._channel.on(d,this._onCheckStatusComplete,this),this._channel.reply(c,(function(){return this._interval}),this)};var n=\"check_status\",s=600,o=60,h=\"clock:check_status.tick\",l=\"clock:check_status.get_settings\",d=\"net:check_status_complete\",c=\"check_status_interval\";t.clock.CheckStatusTimer=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,n,a),this._doNotOverrideInterval=!1}var a=t.clock.Timer;e.extend(i,a),i.prototype._onCheckStatusComplete=function(e){var t=e.data[s];if(this._logger.debug(this._logTag,\"#_onCheckStatusComplete(interval=\"+t+\")\"),this._doNotOverrideInterval)this._logger.debug(this._logTag,\"#_onCheckStatusComplete() > Interval value not changed. (doNotOverrideInterval = true)\");else if(t){if(t==this._interval)return void this._logger.debug(this._logTag,\"#_onCheckStatusComplete() > Interval value not changed.\");this._logger.debug(this._logTag,\"#_onCheckStatusComplete() > Interval changed to: \"+t),this.setInterval(t)}else this._logger.warn(this._logTag,\"#_onCheckStatusComplete() > Invalid interval value.\"),this.setInterval(n)},i.prototype._onUpdateReportingInterval=function(e){var t=e.data[s];if(this._doNotOverrideInterval=!!e.data[o],this._logger.debug(this._logTag,\"#_onUpdateReportingInterval(interval=\"+t+\", doNotOverrideInterval=\"+this._doNotOverrideInterval+\")\"),t){if(t==this._interval)return void this._logger.debug(this._logTag,\"#_onUpdateReportingInterval() > Interval value not changed.\");this._logger.debug(this._logTag,\"#_onUpdateReportingInterval() > Interval changed to: \"+t),this.setInterval(t)}else this._logger.warn(this._logTag,\"#_onUpdateReportingInterval() > Invalid interval value.\"),this.setInterval(n)},i.prototype._installHandlers=function(){i.__super__._installHandlers.call(this),this._channel.on(l,this._onCheckStatusComplete,this),this._channel.on(h,this._onUpdateReportingInterval,this),this._channel.reply(s,(function(){return this._interval}),this)};var r=\"reporting\",n=10,s=\"reporting_interval\",o=\"do_not_override_interval\",h=\"reporting:update_interval\",l=\"net:check_status_complete\";t.clock.ReportingTimer=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,n,a)}var a=t.clock.Timer;e.extend(i,a);var r=\"idle\",n=1800;t.clock.IdleTimer=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t,a){i.__super__.constructor.call(this,e,t,r,n,a)}var a=t.clock.Timer;e.extend(i,a);var r=\"flush_filter\",n=.25;t.clock.FlushFilterTimer=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t,i){if(!e)throw new Error(\"Reference to the pluginManager object cannot be NULL\");if(!t)throw new Error(\"Reference to the channel object cannot be NULL\");if(!i)throw new Error(\"Reference to the logger object cannot be NULL\");this._isDestroyed=!1,this._reportingTimer=new n(e,t,i),this._checkStatusTimer=new a(e,t,i),this._flushFilterTimer=new r(e,t,i),this._idleTimer=new s(e,t,i)}var a=t.clock.CheckStatusTimer,r=t.clock.FlushFilterTimer,n=t.clock.ReportingTimer,s=t.clock.IdleTimer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._reportingTimer.destroy(),this._checkStatusTimer.destroy(),this._flushFilterTimer.destroy(),this._idleTimer.destroy())},t.clock.Clock=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t){this.value=e,this.hint=t}function a(e){this.realm=e,this.data={}}i.HINT_SHORT=\"short\",a.prototype.setField=function(e,t,a){this.data[e]=new i(t,a)},a.prototype._createAccessor=function(e,t,i){var a=this;return function(){return arguments.length&&(a[e]=arguments[0],a.setField(t,arguments[0],i)),a[e]}},t.model.Dao=a,t.model.DaoField=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"asset\"),this.adId=this._createAccessor(\"_adId\",\"ad_id\",null),this.sid=this._createAccessor(\"_sid\",\"ad_sid\",null),this.resolver=this._createAccessor(\"_resolver\",\"resolver\",null),this.podId=this._createAccessor(\"_podId\",\"pod_id\",null),this.podPosition=this._createAccessor(\"_podPosition\",\"pod_position\",null),this.podOffset=this._createAccessor(\"_podOffset\",\"pod_offset\",null),this.podName=this._createAccessor(\"_podName\",\"pod_name\",null),this.adLength=this._createAccessor(\"_adLength\",\"ad_length\",null),this.adName=this._createAccessor(\"_adName\",\"ad_name\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.adId(e.adId()),this.sid(e.sid()),this.resolver(e.resolver()),this.podId(e.podId()),this.podPosition(e.podPosition()),this.podOffset(e.podOffset()),this.podName(e.podName()),this.adLength(e.adLength()),this.adName(e.adName())}else this.adId(\"\"),this.sid(\"\"),this.resolver(\"\"),this.podId(\"\"),this.podPosition(\"\"),this.podOffset(0),this.podName(\"\"),this.adLength(0),this.adName(\"\")}var a=t.model.Dao;e.extend(i,a),t.model.AdDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"sc\"),this.reportSuiteId=this._createAccessor(\"_reportSuiteId\",\"rsid\",null),this.trackingServer=this._createAccessor(\"_trackingServer\",\"tracking_server\",null),this.ssl=this._createAccessor(\"_ssl\",\"ssl\",r.HINT_SHORT),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.reportSuiteId(e.reportSuiteId()),this.trackingServer(e.trackingServer()),this.ssl(e.ssl())}else this.reportSuiteId(\"\"),this.trackingServer(\"\"),this.ssl(0)}var a=t.model.Dao,r=t.model.DaoField;e.extend(i,a),t.model.AdobeAnalyticsDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"stream\"),this.id=this._createAccessor(\"_id\",\"chapter_id\",null),this.sid=this._createAccessor(\"_sid\",\"chapter_sid\",null),this.name=this._createAccessor(\"_name\",\"chapter_name\",null),this.position=this._createAccessor(\"_position\",\"chapter_pos\",null),this.length=this._createAccessor(\"_length\",\"chapter_length\",null),this.offset=this._createAccessor(\"_offset\",\"chapter_offset\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.id(e.id()),this.sid(e.sid()),this.name(e.name()),this.position(e.position()),this.length(e.length()),this.offset(e.offset())}else this.id(\"\"),this.sid(\"\"),this.name(\"\"),this.position(0),this.length(0),this.offset(0)}var a=t.model.Dao;e.extend(i,a),t.model.ChapterDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"asset\"),this.type=this._createAccessor(\"_type\",\"type\",null),this.videoId=this._createAccessor(\"_videoId\",\"video_id\",null),this.publisher=this._createAccessor(\"_publisher\",\"publisher\",null),this.adData=this._createAccessor(\"_adData\",\"ad_data\",null),this.chapterData=this._createAccessor(\"_chapterData\",\"chapter_data\",null),this.length=this._createAccessor(\"_length\",\"length\",null),this.name=this._createAccessor(\"_name\",\"name\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.name(e.name()),this.videoId(e.videoId()),this.publisher(e.publisher()),this.length(e.length());var t=e.adData()?new r(e.adData()):null;this.adData(t);var a=e.chapterData()?new n(e.chapterData()):null;this.chapterData(a)}else this.type(\"\"),this.name(\"\"),this.videoId(\"\"),this.publisher(\"\"),this.length(0),this.adData(null),this.chapterData(null)}var a=t.model.Dao,r=t.model.AdDao,n=t.model.ChapterDao;e.extend(i,a),i.TYPE_AD=\"ad\",i.TYPE_MAIN_CONTENT=\"main\",t.model.AssetDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"event\"),this.type=this._createAccessor(\"_type\",\"type\",null),this.duration=this._createAccessor(\"_duration\",\"duration\",null),this.playhead=this._createAccessor(\"_playhead\",\"playhead\",null),this.id=this._createAccessor(\"_id\",\"id\",null),this.source=this._createAccessor(\"_source\",\"source\",null),this.ts=this._createAccessor(\"_ts\",\"ts\",null),this.prevTs=this._createAccessor(\"_prevTs\",\"prev_ts\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type()),this.duration(e.duration()),this.playhead(e.playhead()),this.id(e.id()),this.source(e.source()),this.ts(e.ts()),this.prevTs(e.prevTs())}else this.type(\"\"),this.duration(0),this.playhead(0),this.id(\"\"),this.source(\"\"),this.ts(0),this.prevTs(-1)}var a=t.model.Dao;e.extend(i,a),i.EVENT_TYPE_AA_START=\"aa_start\",i.EVENT_TYPE_AA_AD_START=\"aa_ad_start\",i.EVENT_TYPE_START=\"start\",i.EVENT_TYPE_RESUME=\"resume\",i.EVENT_TYPE_CHAPTER_START=\"chapter_start\",i.EVENT_TYPE_CHAPTER_COMPLETE=\"chapter_complete\",i.EVENT_TYPE_CHAPTER_SKIP=\"chapter_skip\",i.EVENT_TYPE_PLAY=\"play\",i.EVENT_TYPE_PAUSE=\"pause\",i.EVENT_TYPE_STALL=\"stall\",i.EVENT_TYPE_BUFFER=\"buffer\",i.EVENT_TYPE_BITRATE_CHANGE=\"bitrate_change\",i.EVENT_TYPE_ERROR=\"error\",i.EVENT_TYPE_COMPLETE=\"complete\",i.EVENT_TYPE_SKIP=\"skip\",i.EVENT_TYPE_END=\"end\",t.model.EventDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"stream\"),this.bitrate=this._createAccessor(\"_bitrate\",\"bitrate\",null),this.fps=this._createAccessor(\"_fps\",\"fps\",null),this.droppedFrames=this._createAccessor(\"_droppedFrames\",\"dropped_frames\",null),this.startupTime=this._createAccessor(\"_startup_time\",\"startup_time\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.bitrate(e.bitrate()),this.fps(e.fps()),this.droppedFrames(e.droppedFrames()),this.startupTime(e.startupTime()),this.isStartupTimeOverridden=e.isStartupTimeOverridden}else this.bitrate(0),this.fps(0),this.droppedFrames(0),this.startupTime(0),this.isStartupTimeOverridden=!1}var a=t.model.Dao;e.extend(i,a),t.model.QoSDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"sp\"),this.ovp=this._createAccessor(\"_ovp\",\"ovp\",null),this.sdk=this._createAccessor(\"_sdk\",\"sdk\",null),this.channel=this._createAccessor(\"_channel\",\"channel\",null),this.playerName=this._createAccessor(\"_playerName\",\"player_name\",null),this.libVersion=this._createAccessor(\"_libVersion\",\"hb_version\",null),this.apiLevel=this._createAccessor(\"_apiLevel\",\"hb_api_lvl\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.ovp(e.ovp()),this.sdk(e.sdk()),this.channel(e.channel()),this.playerName(e.playerName()),this.libVersion(e.libVersion()),this.apiLevel(e.apiLevel())}else this.ovp(r),this.sdk(r),this.channel(r),this.playerName(\"\"),this.libVersion(\"\"),this.apiLevel(0)}var a=t.model.Dao;e.extend(i,a);var r=\"unknown\";t.model.ServiceProviderDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"event\"),this.sessionId=this._createAccessor(\"_sessionId\",\"sid\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.sessionId(e.sessionId())}else this.sessionId(null)}var a=t.model.Dao;e.extend(i,a),t.model.SessionDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"stream\"),this.type=this._createAccessor(\"_type\",\"type\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.type(e.type())}else this.type(null)}var a=t.model.Dao;e.extend(i,a),t.model.StreamDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"user\"),this.analyticsVisitorId=this._createAccessor(\"_analyticsVisitorId\",\"aid\",null),this.marketingCloudVisitorId=this._createAccessor(\"_marketingCloudVisitorId\",\"mid\",null),this.visitorId=this._createAccessor(\"_visitorId\",\"id\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.analyticsVisitorId(e.analyticsVisitorId()),this.marketingCloudVisitorId(e.marketingCloudVisitorId()),this.visitorId(e.visitorId())}else this.analyticsVisitorId(null),this.marketingCloudVisitorId(null),this.visitorId(null)}var a=t.model.Dao;e.extend(i,a),t.model.UserDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(){if(i.__super__.constructor.call(this,\"aam\"),this.audienceManagerBlob=this._createAccessor(\"_audienceManagerBlob\",\"blob\",null),this.audienceManagerLocationHint=this._createAccessor(\"_audienceManagerLocationHint\",\"loc_hint\",null),arguments.length&&arguments[0]instanceof i){var e=arguments[0];this.audienceManagerBlob(e.audienceManagerBlob()),this.audienceManagerLocationHint(e.audienceManagerLocationHint())}else this.audienceManagerBlob(null),this.audienceManagerLocationHint(null)}var a=t.model.Dao;e.extend(i,a),t.model.AudienceManagerDao=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t,i,h,l){this.eventData=new r,this.eventData.type(t),this.eventData.duration(0),this.eventData.ts((new Date).getTime()),this.eventData.playhead(i),this.assetData=new n(e._assetData),this.streamData=new s(e._streamData),this.qosData=new o(e._qosData),this.cuserData=a.clone(e._cuserData),this.meta=h,this.callback=l,this.filterReport=!0}var a=e.ObjectUtils,r=t.model.EventDao,n=t.model.AssetDao,s=t.model.StreamDao,o=t.model.QoSDao;t.model.TrackItem=i}(e.ADB.va.utils,t),function(e,t){\"use strict\";function i(e,t,i,h,l,d){this.adobeAnalyticsData=e,this.userData=t,this.aamData=i,this.serviceProviderData=h,this.sessionData=l,this.eventData=new r(d.eventData),this.assetData=new n(d.assetData),this.streamData=new s(d.streamData),this.qosData=new o(d.qosData),this.cuserData=a.clone(d.cuserData),this.meta=a.clone(d.meta),this.callback=d.callback,this.filterReport=d.filterReport}var a=e.ObjectUtils,r=t.model.EventDao,n=t.model.AssetDao,s=t.model.StreamDao,o=t.model.QoSDao;t.model.CUserDao,t.model.Report=i}(e.ADB.va.utils,t),function(e){\"use strict\";function t(){}t.prototype.serializeReport=function(){},t.prototype.serializeDao=function(){},t.prototype.serializeMap=function(){},t.prototype.serializeNumber=function(){},t.prototype.serializeString=function(){},e.model.ISerializer=t}(t),function(e,t){\"use strict\";function i(e){if(!e)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=e}var a=t.model.Dao,r=t.model.DaoField,n=t.model.ISerializer;e.extend(i,n),i.prototype.serializeReport=function(e){var t=[];return t.push(this.serializeDao(e.adobeAnalyticsData)),t.push(this.serializeDao(e.userData)),t.push(this.serializeDao(e.aamData)),t.push(this.serializeMap(e.cuserData,\"cuser\")),t.push(this.serializeDao(e.serviceProviderData)),t.push(this.serializeDao(e.sessionData)),t.push(this.serializeDao(e.eventData)),t.push(this.serializeDao(e.assetData)),t.push(this.serializeDao(e.streamData)),t.push(this.serializeDao(e.qosData)),t.push(this.serializeMap(e.meta,\"meta\")),{serializedOutput:t.filter((function(e){return!!e})).join(\"&\"),callback:e.callback}},i.prototype.serializeDao=function(e){return this._processDao(e).filter((function(e){return!!e})).join(\"&\")},i.prototype.serializeMap=function(e,t){var i=[],a=t||\"meta\";for(var r in e)e.hasOwnProperty(r)&&e[r]&&i.push(\"s:\"+a+\":\"+r+\"=\"+window.encodeURIComponent(e[r]));return i.join(\"&\")},i.prototype.serializeNumber=function(e,t,i,a){var n=o;return null==t||isNaN(t)?null:(a===r.HINT_SHORT&&(n=h),n+\":\"+i+\":\"+e+\"=\"+Math.floor(t))},i.prototype.serializeString=function(e,t,i){return t?l+\":\"+i+\":\"+e+\"=\"+window.encodeURIComponent(t):null},i.prototype._processDao=function(e){var t=[];for(var i in e.data)if(e.data.hasOwnProperty(i)){var r=e.data[i],n=r.value,o=r.hint,h=null,l=e.realm;if(null==n)continue;\"number\"==typeof n?h=this.serializeNumber(i,n,l,o):\"string\"==typeof n?h=this.serializeString(i,n,l,o):n instanceof a?h=this.serializeDao(n):this._logger.warn(s,\"#_processDao() > Unable to serialize DAO. Field: \"+i+\". Value: \"+n+\".\"),h&&t.push(h)}return t};var s=\"ah::QuerystringSerializer\",o=\"l\",h=\"h\",l=\"s\";t.model.QuerystringSerializer=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t){if(!e)throw new Error(\"Reference to the data object cannot be NULL\");if(this._data=e,!t)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=t}i.prototype.parse=function(){var e,t,i,h,l,d;window.DOMParser?l=(new window.DOMParser).parseFromString(this._data,\"text/xml\"):((l=new window.ActiveXObject(\"Microsoft.XMLDOM\")).async=!1,l.loadXML(this._data)),(d=parseInt(l.getElementsByTagName(\"trackingInterval\")[0].childNodes[0].nodeValue,10))&&(e=d),(d=parseInt(l.getElementsByTagName(\"setupCheckInterval\")[0].childNodes[0].nodeValue,10))&&(t=d),(d=parseInt(l.getElementsByTagName(\"trackExternalErrors\")[0].childNodes[0].nodeValue,10))&&(i=1==d),l.getElementsByTagName(\"nielsenEnabled\")[0]?h=1==(d=parseInt(l.getElementsByTagName(\"nielsenEnabled\")[0].childNodes[0].nodeValue,10)):h=!0;var c={};return c[r]=e,c[n]=t,c[s]=i,c[o]=h,this._logger.debug(a,\"#parse() > Obtained configuration settings.\"),c};var a=\"ah::SettingsParser\",r=\"reporting_interval\",n=\"check_status_interval\",s=\"track_external_errors\",o=\"nielsen_enabled\";t.network.SettingsParser=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t){if(this._trackingServer=null,this._checkStatusServer=null,this._publisher=null,this._isConfigured=!1,this._isDestroyed=!1,this._quietMode=!1,this._visitorOptedOut=!1,this._prevReportSent=null,!e)throw new Error(\"Reference to the channel object cannot be NULL\");if(this._channel=e,!t)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=t,this._serializer=new h(t),this._installEventListeners()}var a=e.Event,r=e.URLRequestMethod,n=e.URLRequest,s=e.URLLoader,o=t.network.SettingsParser,h=t.model.QuerystringSerializer;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(l,\"#destroy()\"),this._uninstallEventListeners())},i.prototype._onApiConfig=function(e){var t=e.data;this._logger.debug(l,\"#_onApiConfig(sb_server=\"+t[d]+\", check_status_server=\"+t[c]+\", publisher=\"+t[p]+\", quiet_mode=\"+t[_]+\", ssl=\"+t[u]+\")\"),this._trackingServer=this._updateRequestProtocol(t[d],t[u]),this._checkStatusServer=this._updateRequestProtocol(t[c],t[u]),this._publisher=t[p],this._quietMode=t[_],this._isConfigured=!0},i.prototype._onUpdateVisitorOptOut=function(e){var t=e.data;this._logger.debug(l,\"#_onUpdateVisitorOptOut(visitor_opt_out=\"+t[f]+\")\"),this._visitorOptedOut=t[f]},i.prototype._onFilterReportAvailable=function(e){var t=e.data;if(this._isConfigured){var i=t[g],o=this._serializer.serializeReport(i),h=this._trackingServer+\"/?\"+o.serializedOutput;if(this._prevReportSent&&this._prevReportSent.eventData&&i.eventData&&this._prevReportSent.eventData.playhead==i.eventData.playhead&&this._prevReportSent.eventData.ts==i.eventData.ts&&this._prevReportSent.eventData.prevTs==i.eventData.prevTs&&this._prevReportSent.eventData.type==i.eventData.type)this._logger.debug(l,\"#_onFilterReportAvailable() > Duplicate heartbeat report not sent for URL:\\n\"+h);else{this._prevReportSent=i;var d=new n(h,r.GET);this._logger.debug(l,\"#_onFilterReportAvailable() > \"+d.url);var c=this,p=function(){u.close(),\no.callback&&o.callback.call(null)},_=function(){u.close(),c._logger.warn(l,\"#_onFilterReportAvailable() > Failed to send heartbeat report.\"),o.callback&&o.callback.call(null)};if(!this._quietMode&&!this._visitorOptedOut){var u=new s;u.addEventListener(a.SUCCESS,p,this),u.addEventListener(a.ERROR,_,this),u.load(d)}}}else this._logger.warn(l,\"#_onFilterReportAvailable() > Unable to send request: not configured.\")},i.prototype._onClockCheckStatusTick=function(){function e(e){if(e.data){var t=new o(e.data.response,i._logger).parse();t?i._channel.trigger(new a(I,t)):i._logger.warn(l,\"#_onClockCheckStatusTick() > Failed to parse the config. settings.\")}p.close()}function t(){i._logger.warn(l,\"#_onClockCheckStatusTick() > Failed to obtain the config. settings.\"),p.close()}if(this._isConfigured)if(this._publisher){var i=this,h=this._publisher.replace(/[^a-zA-Z0-9]+/,\"-\").toLocaleLowerCase(),d=this._checkStatusServer+h+\".xml?r=\"+(new Date).getTime(),c=new n(d,r.GET),p=new s;p.addEventListener(a.SUCCESS,e,this),p.addEventListener(a.ERROR,t,this),this._logger.debug(l,\"#_onClockCheckStatusTick() > Get new settings from: \"+d),p.load(c)}else this._logger.warn(l,\"#_onClockCheckStatusTick() > Publisher is NULL.\");else this._logger.warn(l,\"#_onClockCheckStatusTick() > Unable to send request: not configured.\")},i.prototype._updateRequestProtocol=function(e,t){var i=e;return 0===i.indexOf(\"http://\")?i=i.slice(7):0===i.indexOf(\"https://\")&&(i=i.slice(8)),t?\"https://\"+i:\"http://\"+i},i.prototype._installEventListeners=function(){this._channel.on(m,this._onApiConfig,this),this._channel.on(v,this._onUpdateVisitorOptOut,this),this._channel.on(y,this._onFilterReportAvailable,this),this._channel.on(E,this._onClockCheckStatusTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var l=\"ah::Network\",d=\"tracking_server\",c=\"check_status_server\",p=\"publisher\",_=\"quiet_mode\",u=\"ssl\",g=\"report\",f=\"visitor_opt_out\",m=\"api:config\",v=\"api:update_visitor_optout\",y=\"filter:data_available\",E=\"clock:check_status.tick\",I=\"net:check_status_complete\";t.network.Network=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t){if(!e)throw new Error(\"Reference to the channel object cannot be NULL\");if(this._channel=e,!t)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=t,this._isDestroyed=!1,this._isBufferingInProgress=!1,this._reportBuffer={},this._tsHistory={},this._workQueue=new h,this._installEventListeners()}function a(e){var t=[];return e&&e.forEach((function(e){e.eventData.type()==d.EVENT_TYPE_PAUSE||e.eventData.type()==d.EVENT_TYPE_STALL?(!e.filterReport||e.eventData.duration()>E)&&t.push(e):t.push(e)})),t}function r(e){var t=-1,i=-1,a=[];return e.forEach((function(e){e.eventData.type()==d.EVENT_TYPE_START?e.assetData.type()==c.TYPE_MAIN_CONTENT?-1==t?t=a.push(e)-1:(e.eventData.prevTs(-1),a[t]=e):-1==i?i=a.push(e)-1:(e.eventData.prevTs(-1),a[i]=e):a.push(e)})),a}function n(e){var t=[];return e.forEach((function(i){if(i.eventData.type()==d.EVENT_TYPE_PLAY){if(i.eventData.duration()>y)t.push(i);else if(0==i.eventData.duration()&&i.assetData.type()==c.TYPE_MAIN_CONTENT){var a=s(e);a.indexOf(i)==a.length-1&&t.push(i)}}else t.push(i)})),t}function s(e){var t=[];return e.forEach((function(e){e.eventData.type()!=d.EVENT_TYPE_PLAY&&e.eventData.type()!=d.EVENT_TYPE_BUFFER&&e.eventData.type()!=d.EVENT_TYPE_START||t.push(e)})),t}var o=e.radio.Command,h=e.radio.CommandQueue,l=e.Event,d=t.model.EventDao,c=t.model.AssetDao;i.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(A,\"#destroy()\"),this._uninstallEventListeners(),this.clear())},i.prototype.clear=function(){this._logger.debug(A,\"#clear()\"),this._workQueue.cancelAllCommands(),this._reportBuffer={},this._tsHistory={},this._isBufferingInProgress=!1},i.prototype.flush=function(){this._workQueue.addCommand(new o(this._flushBufferReport,this))},i.prototype._bufferReport=function(e){if(!this._isDestroyed){var t=e[f];if(t){var i=t.sessionData.sessionId();this._reportBuffer[i]=this._reportBuffer[i]||[],this._reportBuffer[i].push(t)}if(!this._isBufferingInProgress){this._isBufferingInProgress=!0;var a={};a[g]=!0,a[m]=1,this._channel.command(v,a)}}},i.prototype._flushBufferReport=function(){function e(e){if(e)for(var i=0;i<e.length;i++){var a=e[i],r=a.sessionData.sessionId();t._tsHistory[r]=t._tsHistory[r]||{};var n=a.eventData.type()+\".\"+(a.assetData.type()==c.TYPE_AD?a.assetData.adData().adId():a.assetData.videoId());t._tsHistory[r].hasOwnProperty(n)&&a.eventData.prevTs(t._tsHistory[r][n]),t._tsHistory[r][n]=a.eventData.ts()}}if(!this._isDestroyed){var t=this;for(var i in this._reportBuffer)if(this._reportBuffer.hasOwnProperty(i)){var s=n(r(a(this._reportBuffer[i])));e(s);for(var o=0;o<s.length;o++){var h=s[o],d={};d[f]=h,this._channel.trigger(new l(_,d))}}this._reportBuffer={};var p=this._channel.request(I),u=this._tsHistory[p]||{};this._tsHistory={},this._tsHistory[p]=u,this._isBufferingInProgress=!1}},i.prototype._onContextReportAvailable=function(e){var t=e.data;this._workQueue.addCommand(new o(this._bufferReport,this,[t]))},i.prototype._onClockFlushFilterTick=function(){this.flush()},i.prototype._installEventListeners=function(){this._channel.on(p,this._onContextReportAvailable,this),this._channel.on(u,this._onClockFlushFilterTick,this)},i.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)};var p=\"context:report_available\",_=\"filter:data_available\",u=\"clock:flush_filter.tick\",g=\"reset\",f=\"report\",m=\"repeat_count\",v=\"clock:flush_filter.resume\",y=250,E=250,I=\"session_id\",A=\"ah::ReportFilter\";t.filter.ReportFilter=i}(e.ADB.core,t),function(e,t){\"use strict\";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail(\"Data cannot be null\");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case\"videoId\":if(!e.hasOwnProperty(\"videoId\"))return this._fail(\"The ID for the main video must be specified.\");if(\"string\"!=typeof e.videoId)return this._fail(\"The ID for the main video must be a String.\");if(\"\"===e.videoId)return this._fail(\"The ID for the main video cannot be an empty string.\");break;case\"streamType\":if(!e.hasOwnProperty(\"streamType\"))return this._fail(\"The stream type for the main video must be specified.\");if(\"string\"!=typeof e.streamType)return this._fail(\"The stream type for the main video must be a String.\");if(\"\"===e.streamType)return this._fail(\"The stream type for the main video cannot be an empty string.\");break;case\"videoLength\":if(!e.hasOwnProperty(\"videoLength\"))return this._fail(\"The length of the main video must be specified.\");if(\"number\"!=typeof e.videoLength)return this._fail(\"The length of the main video must be a Number.\");if(isNaN(e.videoLength))return this._fail(\"The length of the main video cannot be NaN.\");break;case\"playhead\":if(!e.hasOwnProperty(\"playhead\"))return this._fail(\"The playhead for the main video must be specified.\");if(\"number\"!=typeof e.playhead)return this._fail(\"The playhead for the main video must be a Number.\");if(isNaN(e.playhead))return this._fail(\"The playhead for the main video cannot be NaN.\");break;case\"playerName\":if(!e.hasOwnProperty(\"playerName\"))return this._fail(\"The player name for the main video must be specified.\");if(\"string\"!=typeof e.playerName)return this._fail(\"The player name for the main video must be a String.\");if(\"\"===e.playerName)return this._fail(\"The player name for the main video cannot be an empty string.\");break;case\"rsid\":if(!e.hasOwnProperty(\"rsid\"))return this._fail(\"account (rsid) is required and has to be set in the AppMeasurement instance.\");if(\"string\"!=typeof e.rsid)return this._fail(\"account (rsid) of the AppMeasurement instance must be a String.\");if(\"\"===e.rsid)return this._fail(\"account (rsid) of the AppMeasurement instance  cannot be an empty string.\");break;case\"trackingServer\":if(!e.hasOwnProperty(\"trackingServer\"))return this._fail(\"trackingServer is required and has to be set in the AppMeasurement instance.\");if(\"string\"!=typeof e.trackingServer)return this._fail(\"trackingServer of the AppMeasurement instance must be a String.\");if(\"\"===e.trackingServer)return this._fail(\"trackingServer of the AppMeasurement instance cannot be an empty string.\");break;case\"podPlayerName\":if(!e.hasOwnProperty(\"podPlayerName\"))return this._fail(\"The player name for the ad-break must be specified.\");if(\"string\"!=typeof e.podPlayerName)return this._fail(\"The player name for the ad-break must be a String.\");if(\"\"===e.podPlayerName)return this._fail(\"The player name for the ad-break cannot be an empty string.\");break;case\"podPosition\":if(!e.hasOwnProperty(\"podPosition\"))return this._fail(\"Position (index) of the ad-break must be specified.\");if(\"number\"!=typeof e.podPosition)return this._fail(\"Position (index) of the ad-break must be a Number.\");if(isNaN(e.podPosition))return this._fail(\"Position (index) of the ad-break cannot be NaN.\");break;case\"adId\":if(!e.hasOwnProperty(\"adId\"))return this._fail(\"The ad ID must be specified.\");if(\"string\"!=typeof e.adId)return this._fail(\"The ad ID must be a String.\");if(\"\"===e.adId)return this._fail(\"The ad ID cannot be an empty string.\");break;case\"adPosition\":if(!e.hasOwnProperty(\"adPosition\"))return this._fail(\"Position (index) of the ad must be specified.\");if(\"number\"!=typeof e.adPosition)return this._fail(\"Position (index) of the ad must be a Number.\");if(isNaN(e.adPosition))return this._fail(\"Position (index) of the ad cannot be NaN.\");break;case\"chapterPosition\":if(!e.hasOwnProperty(\"chapterPosition\"))return this._fail(\"Position (index) of the chapter must be specified.\");if(\"number\"!=typeof e.chapterPosition)return this._fail(\"Position (index) of the chapter must be a Number.\");if(isNaN(e.chapterPosition))return this._fail(\"Position (index) of the chapter cannot be NaN.\");break;case\"chapterOffset\":if(!e.hasOwnProperty(\"chapterOffset\"))return this._fail(\"Chapter start-time (offset) must be specified.\");if(\"number\"!=typeof e.chapterOffset)return this._fail(\"Chapter start-time (offset) must be a Number.\");if(isNaN(e.chapterOffset))return this._fail(\"Chapter start-time (offset) cannot be NaN.\");break;case\"chapterLength\":if(!e.hasOwnProperty(\"chapterLength\"))return this._fail(\"The length of the chapter must be specified.\");if(\"number\"!=typeof e.chapterLength)return this._fail(\"The length of the chapter must be a Number.\");if(isNaN(e.chapterLength))return this._fail(\"The length of the chapter cannot be NaN.\");break;default:return this._fail(\"Unable to validate unknown parameter: \"+a)}}return!0},i.prototype._fail=function(e){var t=new a(\"Invalid input data\",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.context.InputDataValidator=i}(e.ADB.va,t),function(e,t){\"use strict\";function i(e,t){if(!t)throw new Error(\"Reference to the logger object cannot be NULL\");if(this._logger=t,!e)throw new Error(\"Reference to the context object cannot be NULL\");this._context=e}var a=t.model.Report;i.prototype.createReportForItem=function(e){return this._logger.debug(r,\"Creating report for item: \"+e.eventData.type()),new a(this._context._adobeAnalyticsData,this._context._userData,this._context._aamData,this._context._serviceProviderData,this._context._sessionData,e)};var r=\"ah::ReportFactory\";t.context.ReportFactory=i}(e.ADB.core,t),function(e,t,i,a){\"use strict\";function r(e,t){if(!e)throw new Error(\"Reference to the channel object cannot be NULL\");if(this._channel=e,!t)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=t,this._lastInBandItem=null,this._autoComputedStartupTime=0,this._reportingInterval=pe,this._assetData=null,this._streamData=null,this._qosData=null,this._sessionData=null,this._cuserData=null,this._adobeAnalyticsData=new l,this._serviceProviderData=new d,this._userData=new c,this._aamData=new p,this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._isDestroyed=!1,this._doNotOverrideEventDuration=!1,this._reportFactory=new E(this,this._logger),this._inputDataValidator=new I((function(e){this._logger.error(A,e.getMessage()+\" | \"+e.getDetails()),this._channel.trigger(new o(k,e))}),this),this._trackExternalErrors=!0,this._installEventListeners()}var n=i.md5,s=i.ObjectUtils,o=e.Event,h=a.model.SessionDao,l=a.model.AdobeAnalyticsDao,d=a.model.ServiceProviderDao,c=a.model.UserDao,p=a.model.AudienceManagerDao,_=a.model.EventDao,u=a.model.AssetDao,g=a.model.StreamDao,f=a.model.QoSDao,m=a.model.AdDao,v=a.model.ChapterDao,y=a.model.TrackItem,E=a.context.ReportFactory,I=a.context.InputDataValidator;r.prototype.destroy=function(){this._isDestroyed||(this._isDestroyed=!0,this._logger.debug(A,\"#destroy()\"),this._uninstallEventListeners())},r.prototype._onApiAnalyticsStart=function(e){this._logger.debug(A,\"#_onApiAnalyticsStart()\");var t=e.data;if(this._checkCall(\"_onApiAnalyticsStart\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){this._userData.visitorId(t.vid),this._userData.analyticsVisitorId(t.aid),this._userData.marketingCloudVisitorId(t.mid),this._aamData.audienceManagerBlob(t.blob),this._aamData.audienceManagerLocationHint(t.loc_hint),t.customerIDs&&(this._cuserData=t.customerIDs),this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_AA_START,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(u.TYPE_MAIN_CONTENT),this._cuserData=null,this._sendHit(i)}},r.prototype._onApiAnalyticsAdStart=function(e){this._logger.debug(A,\"#_onApiAnalyticsAdStart()\");var t=e.data;if(this._checkCall(\"_onApiAnalyticsAdStart\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_AA_AD_START,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiVideoLoad=function(e){var t=e.data;this._logger.debug(A,\"#_onApiVideoLoad(rsid=\"+t.rsid+\", aa_trackingServer=\"+t.trackingServer+\")\"),this._resetInternalState(),this._inputDataValidator.validateFields(t,[\"rsid\",\"trackingServer\"])&&(this._sessionData.sessionId(this._generateSessionId()),this._isTrackingSessionActive=!0)},r.prototype._onApiVideoUnload=function(){this._logger.debug(A,\"#_onApiVideoUnload()\"),this._isTrackingSessionActive?this._isTrackingSessionActive=!1:this._logger.debug(A,\"#_onApiVideoUnload() > No active tracking session.\")},r.prototype._onApiVideoStart=function(e){var t=e.data;if(this._logger.debug(A,\"#_onApiVideoStart(id=\"+t.videoId+\", name=\"+t.videoName+\", length=\"+t.videoLength+\", type=\"+t.streamType+\", playerName=\"+t.playerName+\")\"),this._checkCall(\"_onApiVideoStart\")&&this._inputDataValidator.validateFields(t,[\"videoId\",\"streamType\",\"videoLength\",\"playhead\",\"playerName\"])){this._lastInBandItem=null,this._adobeAnalyticsData.reportSuiteId(t.rsid),this._adobeAnalyticsData.trackingServer(t.trackingServer),this._adobeAnalyticsData.ssl(Number(t.useSsl)),this._serviceProviderData.ovp(t.ovp),this._serviceProviderData.sdk(t.sdk),this._serviceProviderData.channel(t.channel),this._serviceProviderData.libVersion(t.version),this._serviceProviderData.apiLevel(t.apiLvl),this._serviceProviderData.playerName(t.playerName),this._assetData.adData(null),this._assetData.chapterData(null),this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(u.TYPE_MAIN_CONTENT),this._assetData.publisher(t.publisher),this._assetData.name(t.videoName),this._streamData.type(t.streamType),this._updateQoSInfo(t);var i=t.metaNielsen?s.merge(t.metaVideo,t.metaNielsen):t.metaVideo,a=new y(this,_.EVENT_TYPE_START,t.playhead,i,t._eventData[N]);this._sendHit(a)}},r.prototype._onApiVideoResume=function(e){var t=e.data;if(this._logger.debug(A,\"#_onApiVideoResume(id=\"+t.videoId+\", name=\"+t.videoName+\", length=\"+t.videoLength+\", type=\"+t.streamType+\", playerName=\"+t.playerName+\")\"),this._checkCall(\"_onApiVideoResume\")&&this._inputDataValidator.validateFields(t,[\"videoId\",\"streamType\",\"videoLength\",\"playhead\",\"playerName\"])){this._assetData.videoId(t.videoId),this._assetData.length(t.videoLength),this._assetData.type(u.TYPE_MAIN_CONTENT),this._assetData.name(t.videoName),this._streamData.type(t.streamType);var i=new y(this,_.EVENT_TYPE_RESUME,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiVideoSessionEnd=function(e){this._logger.debug(A,\"#_onApiVideoSessionEnd()\");var t=e.data;if(this._checkCall(\"_onApiVideoSessionEnd\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){var i=new y(this,_.EVENT_TYPE_END,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(u.TYPE_MAIN_CONTENT),this._sendHit(i)}},r.prototype._onApiVideoComplete=function(e){this._logger.debug(A,\"#_onApiVideoComplete()\");var t=e.data;if(this._checkCall(\"_onApiVideoComplete\")){var i=new y(this,_.EVENT_TYPE_COMPLETE,this._assetData.length(),null,t._eventData[N]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiVideoSkip=function(e){this._logger.debug(A,\"#_onApiVideoSkip()\");var t=e.data;if(this._checkCall(\"_onApiVideoSkip\")){var i=new y(this,_.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[N]);this._sendHit(i),this._isVideoComplete=!0}},r.prototype._onApiPlay=function(e){this._logger.debug(A,\"#_onApiPlay()\");var t=e.data;if(this._checkCall(\"_onApiPlay\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_PLAY,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiPause=function(e){this._logger.debug(A,\"#_onApiPause()\");var t=e.data;if(this._checkCall(\"_onApiPause\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){this._updateQoSInfo(t);var i=t.playheadStalled?_.EVENT_TYPE_STALL:_.EVENT_TYPE_PAUSE,a=new y(this,i,t.playhead,null,t._eventData[N]);t._eventData.hasOwnProperty(M)&&(a.filterReport=t._eventData[M]),this._sendHit(a)}},r.prototype._onApiBufferStart=function(e){this._logger.debug(A,\"#_onApiBufferStart()\");var t=e.data;if(this._checkCall(\"_onApiBufferStart\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_BUFFER,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiSeekStart=function(){this._logger.debug(A,\"#_onApiSeekStart()\")},r.prototype._onApiSeekComplete=function(e){this._logger.debug(A,\"#_onApiSeekComplete()\");var t=e.data;if(this._checkCall(\"_onApiSeekComplete\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){var i=this._assetData.adData(),a=this._assetData.chapterData();if(t.isInAd){if(!this._inputDataValidator.validateFields(t,[\"adId\",\"adPosition\",\"podPosition\",\"podPlayerName\"]))return;var r=n(this._assetData.videoId())+\"_\"+t.podPosition;if(!i||i.podId()!=r||parseInt(i.podPosition(),10)!=t.adPosition){var s=new m;s.adId(t.adId),s.adName(t.adName),s.adLength(t.adLength),s.podId(r),s.resolver(t.podPlayerName),s.podPosition(t.adPosition+\"\"),s.podName(t.podName),s.podOffset(t.podSecond),s.sid(this._generateSessionId()),this._assetData.adData(s)}this._assetData.type(u.TYPE_AD)}else this._assetData.adData(null),this._assetData.type(u.TYPE_MAIN_CONTENT);if(t.isInChapter){if(!this._inputDataValidator.validateFields(t,[\"chapterPosition\",\"chapterLength\",\"chapterOffset\"]))return;if(!a||t.chapterPosition!=a.position()){var o=new v;o.id(n(this._assetData.videoId())+\"_\"+t.chapterPosition),o.name(t.chapterName),o.length(t.chapterLength),o.position(t.chapterPosition),o.offset(t.chapterOffset),o.sid(this._generateSessionId()),this._assetData.chapterData(o)}}else this._assetData.chapterData(null)}},r.prototype._onApiAdStart=function(e){var t=e.data;if(this._logger.debug(A,\"#_onApiAdStart(id=\"+t.adId+\", player_name=\"+t.podPlayerName+\", parent_name=\"+this._assetData.videoId()+\", pod_pos=\"+t.adPosition+\")\"),this._checkCall(\"_onApiAdStart\")&&this._inputDataValidator.validateFields(t,[\"playhead\",\"podPosition\",\"podPlayerName\",\"adId\",\"adPosition\"])){var i=new m;i.adId(t.adId),i.adName(t.adName),i.adLength(t.adLength),i.resolver(t.podPlayerName),i.podId(n(this._assetData.videoId())+\"_\"+t.podPosition),i.podPosition(t.adPosition+\"\"),i.podName(t.podName),i.podOffset(t.podSecond),i.sid(this._generateSessionId()),this._assetData.adData(i),this._assetData.type(u.TYPE_AD),this._updateQoSInfo(t);var a=s.merge(t.metaVideo,t.metaAd);a=t.metaNielsen?s.merge(a,t.metaNielsen):a;var r=new y(this,_.EVENT_TYPE_START,t.playhead,a,t._eventData[N]);if(this._sendHit(r),t.adGranularTracking){var o=t.adTrackingInterval?t.adTrackingInterval:this._reportingInterval;this._updateReportingInterval(o,!0)}}},r.prototype._onApiAdComplete=function(e){this._logger.debug(A,\"#_onApiAdComplete()\");var t=e.data;if(this._checkCall(\"_onApiAdComplete\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){if(this._assetData.type()!=u.TYPE_AD)return void this._logger.warn(A,\"#_onApiAdComplete() > Ignoring the ad complete event, because we are no longer in an ad.\");this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_COMPLETE,t.playhead,null,t._eventData[N]);this._sendHit(i),this._assetData.adData(null),this._assetData.type(u.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiAdSkip=function(e){this._logger.debug(A,\"#_onApiAdSkip()\");var t=e.data;if(this._checkCall(\"_onApiAdSkip\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){if(this._assetData.type()!=u.TYPE_AD)return void this._logger.warn(A,\"#_onApiAdSkip() > Ignoring the ad skip event, because we are no longer in an ad.\");this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_SKIP,t.playhead,null,t._eventData[N]);this._sendHit(i),this._assetData.adData(null),this._assetData.type(u.TYPE_MAIN_CONTENT),this._updateReportingInterval(this._reportingInterval,!1)}},r.prototype._onApiChapterStart=function(e){var t=e.data;if(this._logger.debug(A,\"#_onApiChapterStart(name=\"+t.chapterName+\", length=\"+t.chapterLength+\", position=\"+t.chapterPosition+\", chapter_offset=\"+t.chapterOffset+\")\"),this._checkCall(\"_onApiChapterStart\")&&this._inputDataValidator.validateFields(t,[\"playhead\",\"chapterPosition\",\"chapterOffset\",\"chapterLength\"])){var i=new v;i.id(n(this._assetData.videoId())+\"_\"+t.chapterPosition),i.name(t.chapterName),i.length(t.chapterLength),i.position(t.chapterPosition),i.offset(t.chapterOffset),i.sid(this._generateSessionId()),this._assetData.chapterData(i),this._updateQoSInfo(t);var a=s.merge(t.metaVideo,t.metaChapter),r=new y(this,_.EVENT_TYPE_CHAPTER_START,t.playhead,a,t._eventData[N]);r.assetData.adData(null),r.assetData.type(u.TYPE_MAIN_CONTENT),this._sendHit(r)}},r.prototype._onApiChapterComplete=function(e){this._logger.debug(A,\"#_onApiChapterComplete()\");var t=e.data;if(this._checkCall(\"_onApiChapterComplete\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){if(!this._assetData.chapterData())return void this._logger.warn(A,\"#_onApiChapterComplete() > Ignoring the chapter complete event, because we are no longer in a chapter.\");this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_CHAPTER_COMPLETE,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(u.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiChapterSkip=function(e){this._logger.debug(A,\"#_onApiChapterSkip()\");var t=e.data;if(this._checkCall(\"_onApiChapterSkip\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){if(!this._assetData.chapterData())return void this._logger.warn(A,\"#_onApiChapterSkip() > Ignoring the chapter skip event, because we are no longer in a chapter.\");this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_CHAPTER_SKIP,t.playhead,null,t._eventData[N]);i.assetData.adData(null),i.assetData.type(u.TYPE_MAIN_CONTENT),this._sendHit(i),this._assetData.chapterData(null)}},r.prototype._onApiBitrateChange=function(e){this._logger.debug(A,\"#_onApiBitrateChange()\");var t=e.data;if(this._checkCall(\"_onApiBitrateChange\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_BITRATE_CHANGE,t.playhead,null,t._eventData[N]);this._sendHit(i)}},r.prototype._onApiTrackError=function(e){var t=e.data;if(this._logger.debug(A,\"#_onApiTrackError(source=\"+t._eventData.source+\", err_id=\"+t._eventData.error_id+\")\"),this._isTrackingSessionActive){if(this._trackExternalErrors||t._eventData.source===T){this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_ERROR,0,null,t._eventData[N]);i.eventData.id(t._eventData.error_id),i.eventData.source(t._eventData.source),this._sendHit(i)}}else this._logger.warn(A,\"#_onApiTrackError() > No active tracking session.\")},r.prototype._onApiTrackInternalError=function(e){var t=e.data;this._logger.debug(A,\"#_onApiTrackInternalError(source=\"+t.source+\", err_id=\"+t.error_id+\")\"),this._updateQoSInfo(t);var i=new y(this,_.EVENT_TYPE_ERROR,0);i.eventData.id(t.error_id),i.eventData.source(t.source),this._sendHit(i)},r.prototype._onApiQuantumEnd=function(e){this._logger.debug(A,\"#_onApiQuantumEnd(interval=\"+this._channel.request(P)+\")\");var t=e.data;if(this._checkCall(\"_onApiQuantumEnd\")&&this._inputDataValidator.validateFields(t,[\"playhead\"])){var i=this._lastInBandItem;if(i){this._updateQoSInfo(t);var a=new y(this,i.eventData.type(),t.playhead,i.meta,i.callback);a.filterReport=i.filterReport,this._sendHit(a,!0)}}},r.prototype._onNetworkCheckStatusComplete=function(e){var t=e.data;this._trackExternalErrors=t[O],this._reportingInterval=t[V],this._reportingInterval||(this._reportingInterval=pe),this._logger.debug(A,\"#_onNetworkCheckStatusComplete(track_ext_err=\"+this._trackExternalErrors+\")\")},r.prototype._onResetSessionId=function(){var e=this._generateSessionId();this._sessionData=new h,this._sessionData.sessionId(e),this._logger.debug(A,\"#_resetSessionId(new sessionId=\"+e+\")\")},r.prototype._installEventListeners=function(){this._channel.on(L,this._onApiAnalyticsStart,this),this._channel.on(F,this._onApiAnalyticsAdStart,this),this._channel.on(Y,this._onApiVideoLoad,this),this._channel.on(H,this._onApiVideoUnload,this),this._channel.on(q,this._onApiVideoStart,this),this._channel.on(j,this._onApiVideoComplete,this),this._channel.on(x,this._onApiVideoSkip,this),this._channel.on(K,this._onApiVideoResume,this),this._channel.on(U,this._onApiVideoSessionEnd,this),this._channel.on(z,this._onApiAdStart,this),this._channel.on(Q,this._onApiAdComplete,this),this._channel.on(W,this._onApiAdSkip,this),this._channel.on(G,this._onApiPlay,this),this._channel.on(X,this._onApiPause,this),this._channel.on(Z,this._onApiBufferStart,this),this._channel.on(J,this._onApiSeekStart,this),this._channel.on($,this._onApiSeekComplete,this),this._channel.on(ee,this._onApiChapterStart,this),this._channel.on(te,this._onApiChapterComplete,this),this._channel.on(ie,this._onApiChapterSkip,this),this._channel.on(ne,this._onApiBitrateChange,this),this._channel.on(ae,this._onApiTrackError,this),this._channel.on(re,this._onApiTrackInternalError,this),this._channel.on(se,this._onApiQuantumEnd,this),this._channel.on(he,this._onNetworkCheckStatusComplete,this),this._channel.on(w,this._onResetSessionId,this),this._channel.reply(D,(function(){return this._sessionData&&this._sessionData.sessionId()?this._sessionData.sessionId():null}),this)},r.prototype._uninstallEventListeners=function(){this._channel.off(null,null,this)},r.prototype._resetInternalState=function(){this._logger.debug(A,\"#_resetInternalState()\"),this._isTrackingSessionActive=!1,this._isVideoComplete=!1,this._autoComputedStartupTime=0,this._lastInBandItem=null,this._streamData=new g,this._qosData=new f,this._sessionData=new h,this._assetData=new u,this._cuserData=null},r.prototype._generateSessionId=function(){return\"\"+(new Date).getTime()+Math.floor(1e9*Math.random())},r.prototype._updateQoSInfo=function(e){this._qosData.bitrate(e.bitrate||0),this._qosData.fps(e.fps||0),this._qosData.droppedFrames(e.droppedFrames||0),null==e.startupTime||isNaN(e.startupTime)?(this._qosData.startupTime(this._autoComputedStartupTime),this._qosData.isStartupTimeOverridden=!1):(this._qosData.startupTime(e.startupTime),this._qosData.isStartupTimeOverridden=!0)},r.prototype._checkCall=function(e){return this._isTrackingSessionActive?!this._isVideoComplete||\"_onApiVideoSessionEnd\"===e||(this._logger.warn(A,\"#\"+e+\"() > The video content already completed.\"),!1):(this._logger.warn(A,\"#\"+e+\"() > No active tracking session.\"),!1)},r.prototype._updateReportingInterval=function(e,t){var i={};i[B]=!!t,i[V]=e,this._channel.trigger(new o(le,i))},r.prototype._updateLastInBandItem=function(e){var t=this._lastInBandItem,i=(new Date).getTime(),a=t.assetData.type()===u.TYPE_AD||e.assetData.type()===u.TYPE_AD,r=1e3*Math.abs(e.eventData.playhead()-t.eventData.playhead()),n=Math.abs(i-t.eventData.ts()),s=Math.abs(r-n),o=n;o>de?(this._logger.warn(A,\" Resetting duration in lastInBandItem[\"+t.assetData.type()+\":\"+t.eventData.type()+\"] call to 0 as calculated duration (\"+o+\")exceeds 10mins\"),o=0):t.eventData.type()==_.EVENT_TYPE_PLAY&&!a&&!this._doNotOverrideEventDuration&&s>ce&&(o=Math.min(r,n),this._logger.warn(A,\" Resetting duration in lastInBandItem[\"+t.assetData.type()+\":\"+t.eventData.type()+\"] call to \"+o+\" as calculated error delta (\"+s+\")exceeds 2sec\")),this._doNotOverrideEventDuration=!1,t.eventData.duration(o),t.eventData.ts(i),t.eventData.playhead(e.eventData.playhead()),t.qosData.startupTime(e.qosData.startupTime()),t.qosData.isStartupTimeOverridden=e.qosData.isStartupTimeOverridden},r.prototype._createAndSendReport=function(e){var t=this._reportFactory.createReportForItem(e);t.qosData.isStartupTimeOverridden||t.qosData.startupTime(this._autoComputedStartupTime);var i={};if(i[C]=t,this._channel.trigger(new o(oe,i)),t.eventData.type()==_.EVENT_TYPE_START||t.eventData.type()==_.EVENT_TYPE_PLAY||t.eventData.type()==_.EVENT_TYPE_PAUSE||t.eventData.type()==_.EVENT_TYPE_STALL||t.eventData.type()==_.EVENT_TYPE_BUFFER){var a={};a[R]=!0,this._channel.command(b,a)}},r.prototype._sendHit=function(e,t){switch(e.eventData.type()){case _.EVENT_TYPE_START:case _.EVENT_TYPE_PLAY:case _.EVENT_TYPE_PAUSE:case _.EVENT_TYPE_STALL:case _.EVENT_TYPE_BUFFER:this._lastInBandItem?(this._updateLastInBandItem(e),this._lastInBandItem.eventData.type()==_.EVENT_TYPE_START&&this._lastInBandItem.assetData.type()==u.TYPE_MAIN_CONTENT&&(this._autoComputedStartupTime+=this._lastInBandItem.eventData.duration()),this._createAndSendReport(this._lastInBandItem),t&&this._lastInBandItem.eventData.type()==e.eventData.type()||this._createAndSendReport(e)):this._createAndSendReport(e),this._lastInBandItem=e;break;case _.EVENT_TYPE_COMPLETE:case _.EVENT_TYPE_SKIP:if(this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==_.EVENT_TYPE_SKIP&&this._createAndSendReport(e),e.assetData.type()==u.TYPE_MAIN_CONTENT){this._lastInBandItem=null;var i={};i[R]=!0,this._channel.command(S,i)}else e.assetData.type()==u.TYPE_AD&&(this._lastInBandItem.assetData.adData(null),this._lastInBandItem.assetData.type(u.TYPE_MAIN_CONTENT),this._doNotOverrideEventDuration=!0);break;case _.EVENT_TYPE_CHAPTER_START:case _.EVENT_TYPE_CHAPTER_COMPLETE:case _.EVENT_TYPE_CHAPTER_SKIP:this._lastInBandItem&&(this._updateLastInBandItem(e),this._createAndSendReport(this._lastInBandItem)),e.eventData.type()!==_.EVENT_TYPE_CHAPTER_SKIP&&this._createAndSendReport(e),this._lastInBandItem&&(this._lastInBandItem.assetData.chapterData(e.eventData.type()==_.EVENT_TYPE_CHAPTER_START?new v(e.assetData.chapterData()):null),this._lastInBandItem.eventData.duration(0),this._createAndSendReport(this._lastInBandItem));break;default:this._createAndSendReport(e)}};var A=\"ah::Context\",T=\"sourceErrorSDK\",k=\"error\",b=\"clock:reporting.resume\",S=\"clock:reporting.pause\",P=\"reporting_interval\",D=\"session_id\",w=\"reset_session_id\",N=\"callback\",M=\"filter_report\",C=\"report\",R=\"reset\",O=\"track_external_errors\",V=\"reporting_interval\",B=\"do_not_override_interval\",L=\"api:aa_start\",F=\"api:aa_ad_start\",Y=\"api:video_load\",H=\"api:video_unload\",q=\"api:video_start\",j=\"api:video_complete\",x=\"api:video_skip\",K=\"api:video_resume\",U=\"api:video_session_end\",z=\"api:ad_start\",Q=\"api:ad_complete\",W=\"api:ad_skip\",G=\"api:play\",X=\"api:pause\",Z=\"api:buffer_start\",J=\"api:seek_start\",$=\"api:seek_complete\",ee=\"api:chapter_start\",te=\"api:chapter_complete\",ie=\"api:chapter_skip\",ae=\"api:track_error\",re=\"api:track_internal_error\",ne=\"api:bitrate_change\",se=\"api:quantum_end\",oe=\"context:report_available\",he=\"net:check_status_complete\",le=\"reporting:update_interval\",de=6e5,ce=2e3,pe=10;a.context.Context=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){\"use strict\";function t(e,t){this.trackingServer=e,this.publisher=t,this.ssl=!1,this.ovp=i,this.sdk=i,this.quietMode=!1,this.debugLogging=!1,this.__isPrimetime=!1,this.__psdkVersion=null}var i=\"unknown\";e.AdobeHeartbeatPluginConfig=t}(t),function(e){\"use strict\";function t(){}t.prototype.onError=function(){},\ne.AdobeHeartbeatPluginDelegate=t}(t),function(e,t,i){\"use strict\";function a(e){a.__super__.constructor.call(this,f),this._radio=new h(this._logger),this._channel=this._radio.channel(k),this._delegate=e,this._context=new c(this._channel,this._logger),this._filter=new p(this._channel,this._logger),this._network=new _(this._channel,this._logger),this._setupDataResolver()}var r=e.Event,n=e.Trigger,s=e.plugin.BasePlugin,o=e.plugin.ParamMapping,h=e.radio.Radio,l=t.ErrorInfo,d=t.Version,c=i.context.Context,p=i.filter.ReportFilter,_=i.network.Network,u=i.clock.Clock,g=i.AdobeHeartbeatPluginConfig;e.extend(a,s),a.prototype.configure=function(e){if(!e)throw new Error(\"Reference to the configuration data cannot be NULL.\");if(!(e instanceof g))throw new Error(\"Expected config data to be instance of AdobeHeartbeatPluginConfig.\");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,\"#configure({trackingServer=\"+this._config.trackingServer+\", publisher=\"+this._config.publisher+\", quietMode=\"+this._config.quietMode+\", ssl=\"+this._config.ssl+\"})\");var t=this._config.trackingServer+\"/settings/\",i={};i[re]=this._config.trackingServer,i[ne]=t,i[se]=this._config.publisher,i[oe]=this._config.quietMode,i[he]=this._config.ssl,this._channel.trigger(new r(pe,i)),this._isConfigured=!0},a.prototype.bootstrap=function(e){a.__super__.bootstrap.call(this,e),this._channel.on(b,this._onError,this),this._clock=new u(this._pluginManager,this._channel,this._logger),this._channel.command(Le),this._channel.trigger(new r(Ke)),this._registerCommands(),this._registerBehaviours()},a.prototype._teardown=function(){this._logger.debug(this._logTag,\"#_teardown()\"),this._radio.shutdown(),this._context.destroy(),this._clock.destroy(),this._filter.destroy(),this._network.destroy()},a.prototype._canProcess=function(){return this._isConfigured?this._errorInfo?(this._logger.error(this._logTag,\"_canProcess() > Plugin in ERROR state.\"),!1):a.__super__._canProcess.call(this):(this._logger.error(this._logTag,\"_canProcess() > Plugin not configured.\"),!1)},a.prototype._cmdAnalyticsError=function(){this._errorInfo||(this._errorInfo=new l(\"Internal error\",\"AdobeAnalyticsPlugin is in ERROR state.\"),this._trigger(b,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},a.prototype._cmdAnalyticsStart=function(e){if(this._canProcess()){var t={};t[le]=e.visitorOptedOut,this._channel.trigger(new r(_e,t)),this._channel.trigger(new r(de,e))}},a.prototype._cmdAnalyticsAdStart=function(e){this._canProcess()&&this._channel.trigger(new r(ce,e))},a.prototype._cmdVideoLoad=function(e){this._errorInfo=null,this._canProcess()&&(this._isTrackingSessionActive&&this._channel.trigger(new r(ge,e)),this._isTrackingSessionActive=!1,this._isPaused=!0,this._isSeeking=!1,this._isBuffering=!1,this._isVideoIdle=!1,this._filter.clear(),this._channel.trigger(new r(ue,e)),this._isTrackingSessionActive=!0)},a.prototype._cmdVideoUnload=function(e){this._errorInfo=null,this._canProcess()&&(this._channel.trigger(new r(ge,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._isTrackingSessionActive=!1)},a.prototype._cmdVideoSessionEnd=function(e){this._canProcess()&&this._channel.trigger(new r(Ee,e))},a.prototype._cmdVideoStart=function(e){this._canProcess()&&(this._channel.trigger(new r(fe,e)),this._filter.flush())},a.prototype._cmdVideoComplete=function(e){this._canProcess()&&this._channel.trigger(new r(me,e))},a.prototype._cmdVideoSkip=function(e){this._canProcess()&&this._channel.trigger(new r(ve,e))},a.prototype._cmdVideoResume=function(e){this._canProcess()&&this._channel.trigger(new r(ye,e))},a.prototype._cmdPlay=function(e){this._canProcess()&&(this._isPaused=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdPause=function(e){this._canProcess()&&(this._channel.trigger(new r(be,e)),this._isPaused=!0,this._runIdleTimer(!0))},a.prototype._cmdAdStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Ie,e)),this._resumePlaybackIfPossible(e))},a.prototype._cmdAdComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(Ae,e)),e.isInAdBreak||this._resumePlaybackIfPossible(e))},a.prototype._cmdAdSkip=function(e){this._canProcess()&&(this._channel.trigger(new r(Te,e)),e.isInAdBreak||this._resumePlaybackIfPossible(e))},a.prototype._cmdBufferStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Se,e)),this._isBuffering=!0,this._runIdleTimer(!0))},a.prototype._cmdBufferComplete=function(e){this._canProcess()&&(this._isBuffering=!1,this._isPaused?this._channel.trigger(new r(be,e)):this._resumePlaybackIfPossible(e))},a.prototype._cmdSeekStart=function(e){this._canProcess()&&(this._channel.trigger(new r(Pe,e)),this._channel.trigger(new r(be,e)),this._isSeeking=!0,this._runIdleTimer(!0))},a.prototype._cmdSeekComplete=function(e){this._canProcess()&&(this._channel.trigger(new r(De,e)),this._isSeeking=!1,this._resumePlaybackIfPossible(e))},a.prototype._cmdChapterStart=function(e){this._canProcess()&&this._channel.trigger(new r(we,e))},a.prototype._cmdChapterComplete=function(e){this._canProcess()&&this._channel.trigger(new r(Ne,e))},a.prototype._cmdChapterSkip=function(e){this._canProcess()&&this._channel.trigger(new r(Me,e))},a.prototype._cmdBitrateChange=function(e){this._canProcess()&&this._channel.trigger(new r(Oe,e))},a.prototype._cmdTrackError=function(e){this._canProcess()&&this._channel.trigger(new r(Ce,e))},a.prototype._cmdClockReportingTick=function(e){this._canProcess()&&this._channel.trigger(new r(Ve,e))},a.prototype._cmdIdleTick=function(e){this._canProcess()&&(this._isVideoIdle=!0,this._trigger(J),this._channel.trigger(new r(Ee,e)),this._filter.flush(),this._runReportingTimer(!1),this._runFlushFilterTimer(!1),this._runIdleTimer(!1),this._trigger(X))},a.prototype._onError=function(e){this._errorInfo=e.data;var t={};t[ie]=Be,t[ae]=this._errorInfo.getMessage()+\"|\"+this._errorInfo.getDetails(),this._channel.trigger(new r(Re,t)),this._runReportingTimer(!1),this._trigger(b,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo)},a.prototype._runIdleTimer=function(e){var t={};t[te]=!0,e?this._channel.command(je,t):this._channel.command(xe,t)},a.prototype._runFlushFilterTimer=function(e){var t={};t[te]=!0,e?this._channel.command(He,t):this._channel.command(qe,t)},a.prototype._runReportingTimer=function(e){var t={};t[te]=!0,e?this._channel.command(Fe,t):this._channel.command(Ye,t)},a.prototype._registerCommands=function(){this._pluginManager.comply(this,\"handleAnalyticsError\",this._cmdAnalyticsError),this._pluginManager.comply(this,\"handleAnalyticsStart\",this._cmdAnalyticsStart),this._pluginManager.comply(this,\"handleAnalyticsAdStart\",this._cmdAnalyticsAdStart),this._pluginManager.comply(this,\"handleVideoLoad\",this._cmdVideoLoad),this._pluginManager.comply(this,\"handleVideoUnload\",this._cmdVideoUnload),this._pluginManager.comply(this,\"handleVideoSessionEnd\",this._cmdVideoSessionEnd),this._pluginManager.comply(this,\"handleVideoStart\",this._cmdVideoStart),this._pluginManager.comply(this,\"handleVideoComplete\",this._cmdVideoComplete),this._pluginManager.comply(this,\"handleVideoSkip\",this._cmdVideoSkip),this._pluginManager.comply(this,\"handleVideoResume\",this._cmdVideoResume),this._pluginManager.comply(this,\"handlePlay\",this._cmdPlay),this._pluginManager.comply(this,\"handlePause\",this._cmdPause),this._pluginManager.comply(this,\"handleAdStart\",this._cmdAdStart),this._pluginManager.comply(this,\"handleAdComplete\",this._cmdAdComplete),this._pluginManager.comply(this,\"handleAdSkip\",this._cmdAdSkip),this._pluginManager.comply(this,\"handleBufferStart\",this._cmdBufferStart),this._pluginManager.comply(this,\"handleBufferComplete\",this._cmdBufferComplete),this._pluginManager.comply(this,\"handleSeekStart\",this._cmdSeekStart),this._pluginManager.comply(this,\"handleSeekComplete\",this._cmdSeekComplete),this._pluginManager.comply(this,\"handleChapterStart\",this._cmdChapterStart),this._pluginManager.comply(this,\"handleChapterComplete\",this._cmdChapterComplete),this._pluginManager.comply(this,\"handleChapterSkip\",this._cmdChapterSkip),this._pluginManager.comply(this,\"handleBitrateChange\",this._cmdBitrateChange),this._pluginManager.comply(this,\"handleTrackError\",this._cmdTrackError),this._pluginManager.comply(this,\"handleClockReportingTick\",this._cmdClockReportingTick),this._pluginManager.comply(this,\"handleIdleTick\",this._cmdIdleTick)},a.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new n(y,D),this,\"handleVideoLoad\",[new o(v,\"rsid\",\"rsid\"),new o(v,\"tracking_server\",\"trackingServer\")]),this._pluginManager.registerBehaviour(new n(y,w),this,\"handleVideoUnload\"),this._pluginManager.registerBehaviour(new n(y,N),this,\"handleVideoSessionEnd\",[new o(y,\"video.playhead\",\"playhead\")]),this._pluginManager.registerBehaviour(new n(y,M),this,\"handleVideoStart\",[new o(y,\"video.id\",\"videoId\"),new o(y,\"video.name\",\"videoName\"),new o(y,\"video.length\",\"videoLength\"),new o(y,\"video.playhead\",\"playhead\"),new o(y,\"video.playerName\",\"playerName\"),new o(y,\"video.streamType\",\"streamType\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\"),new o(v,\"rsid\",\"rsid\"),new o(v,\"tracking_server\",\"trackingServer\"),new o(v,\"channel\",\"channel\"),new o(v,\"meta.video.*\",\"metaVideo\"),new o(v,\"ssl\",\"useSsl\"),new o(E,\"meta\",\"metaNielsen\"),new o(m,\"publisher\",\"publisher\"),new o(m,\"sdk\",\"sdk\"),new o(m,\"ovp\",\"ovp\"),new o(m,\"version\",\"version\"),new o(m,\"api_level\",\"apiLvl\")]),this._pluginManager.registerBehaviour(new n(y,R),this,\"handleVideoComplete\",[new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,O),this,\"handleVideoSkip\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,C),this,\"handleVideoResume\",[new o(y,\"video.id\",\"videoId\"),new o(y,\"video.name\",\"videoName\"),new o(y,\"video.length\",\"videoLength\"),new o(y,\"video.playhead\",\"playhead\"),new o(y,\"video.playerName\",\"playerName\"),new o(y,\"video.streamType\",\"streamType\")]),this._pluginManager.registerBehaviour(new n(y,V),this,\"handlePlay\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,B),this,\"handlePause\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"video.playheadStalled\",\"playheadStalled\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,F),this,\"handleAdStart\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"ad.id\",\"adId\"),new o(y,\"ad.name\",\"adName\"),new o(y,\"ad.length\",\"adLength\"),new o(y,\"ad.position\",\"adPosition\"),new o(y,\"ad.granularTracking\",\"adGranularTracking\"),new o(y,\"ad.trackingInterval\",\"adTrackingInterval\"),new o(y,\"pod.name\",\"podName\"),new o(y,\"pod.playerName\",\"podPlayerName\"),new o(y,\"pod.position\",\"podPosition\"),new o(y,\"pod.startTime\",\"podSecond\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\"),new o(v,\"meta.video.*\",\"metaVideo\"),new o(v,\"meta.ad.*\",\"metaAd\"),new o(E,\"meta\",\"metaNielsen\")]),this._pluginManager.registerBehaviour(new n(y,Y),this,\"handleAdComplete\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"ad.isInAdBreak\",\"isInAdBreak\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,H),this,\"handleAdSkip\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"ad.isInAdBreak\",\"isInAdBreak\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,q),this,\"handleBufferStart\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,j),this,\"handleBufferComplete\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"video.playheadStalled\",\"playheadStalled\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,x),this,\"handleSeekStart\",[new o(y,\"video.playhead\",\"playhead\")]),this._pluginManager.registerBehaviour(new n(y,K),this,\"handleSeekComplete\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"ad.isInAd\",\"isInAd\"),new o(y,\"ad.id\",\"adId\"),new o(y,\"ad.position\",\"adPosition\"),new o(y,\"pod.playerName\",\"podPlayerName\"),new o(y,\"pod.position\",\"podPosition\"),new o(y,\"chapter.isInChapter\",\"isInChapter\"),new o(y,\"chapter.position\",\"chapterPosition\"),new o(y,\"chapter.name\",\"chapterName\"),new o(y,\"chapter.length\",\"chapterLength\"),new o(y,\"chapter.startTime\",\"chapterOffset\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,U),this,\"handleChapterStart\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"chapter.position\",\"chapterPosition\"),new o(y,\"chapter.name\",\"chapterName\"),new o(y,\"chapter.length\",\"chapterLength\"),new o(y,\"chapter.startTime\",\"chapterOffset\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\"),new o(v,\"meta.video.*\",\"metaVideo\"),new o(v,\"meta.chapter.*\",\"metaChapter\"),new o(E,\"meta\",\"metaNielsen\")]),this._pluginManager.registerBehaviour(new n(y,z),this,\"handleChapterComplete\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,Q),this,\"handleChapterSkip\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,W),this,\"handleBitrateChange\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,G),this,\"handleTrackError\"),this._pluginManager.registerBehaviour(new n(I,$),this,\"handleClockReportingTick\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(y,L),this,\"handleClockReportingTick\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(I,ee),this,\"handleIdleTick\",[new o(y,\"video.playhead\",\"playhead\")]),this._pluginManager.registerBehaviour(new n(m,J),this,\"handleClockReportingTick\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(v,b),this,\"handleAnalyticsError\"),this._pluginManager.registerBehaviour(new n(v,S),this,\"handleAnalyticsStart\",[new o(v,\"vid\",\"vid\"),new o(v,\"aid\",\"aid\"),new o(v,\"mid\",\"mid\"),new o(v,\"customerIDs\",\"customerIDs\"),new o(v,\"visitorOptedOut\",\"visitorOptedOut\"),new o(v,\"blob\",\"blob\"),new o(v,\"loc_hint\",\"loc_hint\"),new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")]),this._pluginManager.registerBehaviour(new n(v,P),this,\"handleAnalyticsAdStart\",[new o(y,\"video.playhead\",\"playhead\"),new o(y,\"qos.fps\",\"fps\"),new o(y,\"qos.droppedFrames\",\"droppedFrames\"),new o(y,\"qos.bitrate\",\"bitrate\"),new o(y,\"qos.startupTime\",\"startupTime\")])},a.prototype._setupDataResolver=function(){var e={},t=this;e.version=function(){return d.getVersion()},e.api_level=function(){return d.getApiLevel()},e.tracking_server=function(){return t._config?t._config.trackingServer:null},e.publisher=function(){return t._config?t._config.publisher:null},e.quiet_mode=function(){return!!t._config&&t._config.quietMode},e.ovp=function(){return t._config?t._config.ovp:null},e.sdk=function(){return t._config?t._config.sdk:null},e.is_primetime=function(){return!!t._config&&t._config.__isPrimetime},e.psdk_version=function(){return t._config?t._config.__psdkVersion:null},e.session_id=function(){return t._channel.request(A)},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var r=t[a];(i=i||{})[r]=e.hasOwnProperty(r)?e[r].call(this):null}return i}},a.prototype._resumePlaybackIfPossible=function(e){this._errorInfo||this._isPaused||this._isSeeking||this._isBuffering||(this._isVideoIdle&&(this._isVideoIdle=!1,this._resumePlaybackFromIdle()),this._runIdleTimer(!1),this._channel.trigger(new r(ke,e)))},a.prototype._resumePlaybackFromIdle=function(){this._trigger(J),this._filter.clear(),this._channel.trigger(new r(T)),this._trigger(Z),this._runReportingTimer(!0),this._runFlushFilterTimer(!0)};var f=\"adobe-heartbeat\",m=f,v=\"adobe-analytics\",y=\"player\",E=\"nielsen\",I=\"service.clock\",A=\"session_id\",T=\"reset_session_id\",k=\"heartbeat-channel\",b=\"error\",S=\"aa_start\",P=\"sc_ad_start\",D=\"video_load\",w=\"video_unload\",N=\"video_session_end\",M=\"video_start\",C=\"video_resume\",R=\"video_complete\",O=\"video_skip\",V=\"play\",B=\"pause\",L=\"content_start\",F=\"ad_start\",Y=\"ad_complete\",H=\"ad_skip\",q=\"buffer_start\",j=\"buffer_complete\",x=\"seek_start\",K=\"seek_complete\",U=\"chapter_start\",z=\"chapter_complete\",Q=\"chapter_skip\",W=\"bitrate_change\",G=\"track_error\",X=\"video_idle_start\",Z=\"video_idle_resume\",J=\"quantum_close\",$=\"heartbeat.reporting\"+\".tick\",ee=\"heartbeat.idle\"+\".tick\",te=\"reset\",ie=\"source\",ae=\"error_id\",re=\"tracking_server\",ne=\"check_status_server\",se=\"publisher\",oe=\"quiet_mode\",he=\"ssl\",le=\"visitor_opt_out\",de=\"api:aa_start\",ce=\"api:aa_ad_start\",pe=\"api:config\",_e=\"api:update_visitor_optout\",ue=\"api:video_load\",ge=\"api:video_unload\",fe=\"api:video_start\",me=\"api:video_complete\",ve=\"api:video_skip\",ye=\"api:video_resume\",Ee=\"api:video_session_end\",Ie=\"api:ad_start\",Ae=\"api:ad_complete\",Te=\"api:ad_skip\",ke=\"api:play\",be=\"api:pause\",Se=\"api:buffer_start\",Pe=\"api:seek_start\",De=\"api:seek_complete\",we=\"api:chapter_start\",Ne=\"api:chapter_complete\",Me=\"api:chapter_skip\",Ce=\"api:track_error\",Re=\"api:track_internal_error\",Oe=\"api:bitrate_change\",Ve=\"api:quantum_end\",Be=\"sourceErrorHeartbeat\",Le=\"clock:check_status.resume\",Fe=\"clock:reporting.resume\",Ye=\"clock:reporting.pause\",He=\"clock:flush_filter.resume\",qe=\"clock:flush_filter.pause\",je=\"clock:idle.resume\",xe=\"clock:idle.pause\",Ke=\"clock:check_status.get_settings\";i.AdobeHeartbeatPlugin=a}(e.ADB.core,e.ADB.va,t),e.ADB.va.plugins.ah||(e.ADB.va.plugins.ah=t)}(this),function(e){if(void 0===t)var t={};!function(e,t){\"use strict\";function i(e,t){this._onFail={fn:e,ctx:t}}var a=e.ErrorInfo;i.prototype.validateFields=function(e,t){if(!e)return this._fail(\"Data cannot be null\");if(t)for(var i=0;i<t.length;i++){var a=t[i];switch(a){case\"videoId\":if(!e.hasOwnProperty(\"videoId\"))return this._fail(\"The ID for the main video must be specified.\");if(\"string\"!=typeof e.videoId)return this._fail(\"The ID for the main video must be a String.\");if(\"\"===e.videoId)return this._fail(\"The ID for the main video cannot be an empty string.\");break;case\"streamType\":if(!e.hasOwnProperty(\"streamType\"))return this._fail(\"The stream type for the main video must be specified.\");if(\"string\"!=typeof e.streamType)return this._fail(\"The stream type for the main video must be a String.\");if(\"\"===e.streamType)return this._fail(\"The stream type for the main video cannot be an empty string.\");break;case\"playerName\":if(!e.hasOwnProperty(\"playerName\"))return this._fail(\"The player name for the main video must be specified.\");if(\"string\"!=typeof e.playerName)return this._fail(\"The player name for the main video must be a String.\");if(\"\"===e.playerName)return this._fail(\"The player name for the main video cannot be an empty string.\");break;case\"videoLength\":if(!e.hasOwnProperty(\"videoLength\"))return this._fail(\"The length of the main video must be specified.\");if(\"number\"!=typeof e.videoLength)return this._fail(\"The length of the main video must be a Number.\");if(isNaN(e.videoLength))return this._fail(\"The length of the main video cannot be NaN.\");break;case\"podPlayerName\":if(!e.hasOwnProperty(\"podPlayerName\"))return this._fail(\"The player name for the ad-break must be specified.\");if(\"string\"!=typeof e.podPlayerName)return this._fail(\"The player name for the ad-break must be a String.\");if(\"\"===e.podPlayerName)return this._fail(\"The player name for the ad-break cannot be an empty string.\");break;case\"podPosition\":if(!e.hasOwnProperty(\"podPosition\"))return this._fail(\"Position (index) of the ad-break must be specified.\");if(\"number\"!=typeof e.podPosition)return this._fail(\"Position (index) of the ad-break must be a Number.\");if(isNaN(e.podPosition))return this._fail(\"Position (index) of the ad-break cannot be NaN.\");break;case\"adId\":if(!e.hasOwnProperty(\"adId\"))return this._fail(\"The ad ID must be specified.\");if(\"string\"!=typeof e.adId)return this._fail(\"The ad ID must be a String.\");if(\"\"===e.adId)return this._fail(\"The ad ID cannot be an empty string.\");break;case\"adPosition\":if(!e.hasOwnProperty(\"adPosition\"))return this._fail(\"Position (index) of the ad must be specified.\");if(\"number\"!=typeof e.adPosition)return this._fail(\"Position (index) of the ad must be a Number.\");if(isNaN(e.adPosition))return this._fail(\"Position (index) of the ad cannot be NaN.\");break;case\"adLength\":if(!e.hasOwnProperty(\"adLength\"))return this._fail(\"The length of the ad must be specified.\");if(\"number\"!=typeof e.adLength)return this._fail(\"The length of the ad must be a Number.\");if(isNaN(e.adLength))return this._fail(\"The length of the ad cannot be NaN.\");break;default:return this._fail(\"Unable to validate unknown parameter: \"+a)}}return!0},i.prototype._fail=function(e){var t=new a(\"Invalid input data\",e);return this._onFail.fn&&this._onFail.fn.call(this._onFail.ctx,t),!1},t.InputDataValidator=i}(e.ADB.va,t),function(e){\"use strict\";function t(){this.channel=i,this.debugLogging=!1}var i=\"\";e.AdobeAnalyticsPluginConfig=t}(t),function(e){\"use strict\";function t(){}t.prototype.onError=function(){},e.AdobeAnalyticsPluginDelegate=t}(t),function(e,t,i,a){\"use strict\";function r(e,t){if(r.__super__.constructor.call(this,m),!e)throw new Error(\"The reference to the AppMeasurement object cannot be NULL.\");if(e.unsupportedBrowser)throw new Error(\"AppMeasurement is not supported in current browser.\");this._appMeasurement=e,this._delegate=t,this._videoMetadata={},this._adMetadata={},this._chapterMetadata={},this._errorInfo=null,this._workQueue=new d(!0,A),this._inputDataValidator=new f((function(e){this._errorInfo=e,this._logger.error(this._logTag,e.getMessage()+\" | \"+e.getDetails());var t=this;setTimeout((function(){t._trigger(T,e),t._delegate&&t._delegate.onError(t._errorInfo)}),0)}),this),this._appMeasurement.isReadyToTrack(),this._setupDataResolver()}var n=e.Trigger,s=e.plugin.BasePlugin,o=e.plugin.ParamMapping,h=e.radio.Channel,l=e.radio.Command,d=e.radio.CommandQueue,c=t.ErrorInfo,p=i.md5,_=i.StringUtils,u=i.ObjectUtils,g=a.AdobeAnalyticsPluginConfig,f=a.InputDataValidator;e.extend(r,s),r.prototype.configure=function(e){if(!e)throw new Error(\"Reference to the configuration data cannot be NULL.\");if(!(e instanceof g))throw new Error(\"Expected config data to be instance of AdobeAnalyticsPluginConfig.\");this._config=e,this._config.debugLogging?this._logger.enable():this._logger.disable(),this._logger.debug(this._logTag,\"#configure({trackingServer=\"+this._config.debugLogging+\", channel=\"+this._config.channel+\", ssl=\"+this._appMeasurement.ssl+\"})\")},r.prototype.bootstrap=function(e){r.__super__.bootstrap.call(this,e),this._registerCommands(),this._registerBehaviours()},r.prototype.setup=function(){this._appMeasurement.isReadyToTrack()?this._onAppMeasurementReady():this._appMeasurement.callbackWhenReadyToTrack(this,this._onAppMeasurementReady,[]),r.__super__.setup.call(this)},r.prototype.setVideoMetadata=function(e){this._videoMetadata=u.clone(e)},r.prototype.setAdMetadata=function(e){this._adMetadata=u.clone(e)},r.prototype.setChapterMetadata=function(e){this._chapterMetadata=u.clone(e)},r.prototype._canProcess=function(){return this._errorInfo?(this._logger.error(this._logTag,\"#_canProcess() > In ERROR state.\"),!1):r.__super__._canProcess.call(this)},r.prototype._cmdVideoLoad=function(){this._errorInfo=null},r.prototype._cmdVideoStart=function(e){this._logger.debug(this._logTag,\"#_cmdVideoStart()\"),this._canProcess()&&this._workQueue.addCommand(new l(this._executeOpen,this,[e]))},r.prototype._cmdAdStart=function(e){this._logger.debug(this._logTag,\"#_cmdAdStart()\"),this._canProcess()&&this._workQueue.addCommand(new l(this._executeOpenAd,this,[e]))},r.prototype._cmdHeartbeatPluginError=function(){this._errorInfo||(this._errorInfo=new c(\"Internal error\",\"HeartbeatPlugin is in ERROR state.\"),this._trigger(T,this._errorInfo),this._delegate&&this._delegate.onError(this._errorInfo))},r.prototype._track=function(e){if(!this._appMeasurement.visitorOptedOut){var t=this._appMeasurement.linkTrackVars;this._appMeasurement.linkTrackVars=\"\",this._appMeasurement.track(e),this._appMeasurement.linkTrackVars=t}},r.prototype._executeOpen=function(e){if(this._logger.debug(this._logTag,\"#_executeOpen(id=\"+e.videoId+\", videoName=\"+e.videoName+\", streamType=\"+e.streamType+\", length=\"+e.videoLength+\", playerName=\"+e.playerName+\", channel=\"+e.channel+\", isPrimetime=\"+e.isPrimetime+\", sessionId=\"+e.sessionId+\")\"),this._canProcess()&&this._inputDataValidator.validateFields(e,[\"videoId\",\"streamType\",\"videoLength\",\"playerName\"])){var t={};for(var i in e.metaVideo)e.metaVideo.hasOwnProperty(i)&&(t[i]=e.metaVideo[i]);if(e.metaNielsen)for(var i in e.metaNielsen)e.metaNielsen.hasOwnProperty(i)&&(t[i]=e.metaNielsen[i]);t[\"a.contentType\"]=e.streamType,t[\"a.media.name\"]=e.videoId,t[\"a.media.friendlyName\"]=e.videoName||\"\",t[\"a.media.length\"]=Math.floor(e.videoLength)||\"0.0\",t[\"a.media.playerName\"]=e.playerName,t[\"a.media.channel\"]=e.channel||\"\",t[\"a.media.view\"]=!0,t[\"a.media.vsid\"]=e.sessionId;var a={};a.contextData=t,a.pev3=k,a.pe=e.isPrimetime?P:S,this._track(a);var r=this;setTimeout((function(){r._trigger(N,e)}),0)}},r.prototype._executeOpenAd=function(e){var t=p(e.videoId)+\"_\"+e.podPosition;if(this._logger.debug(this._logTag,\"#_executeOpenAd(id=\"+e.adId+\", streamType=\"+e.streamType+\", length=\"+e.adLength+\", podPlayerName=\"+e.podPlayerName+\", parentId=\"+e.videoId+\", podId=\"+t+\", parentPodPosition=\"+e.adPosition+\", podSecond=\"+e.podSecond+\")\"),this._canProcess()&&this._inputDataValidator.validateFields(e,[\"videoId\",\"streamType\",\"playerName\",\"adId\",\"adLength\",\"podPlayerName\",\"adPosition\"])){e.podSecond=null==e.podSecond||isNaN(e.podSecond)?e.playhead:e.podSecond;var i={};for(a in e.metaVideo)e.metaVideo.hasOwnProperty(a)&&(i[a]=e.metaVideo[a]);for(a in e.metaAd)e.metaAd.hasOwnProperty(a)&&(i[a]=e.metaAd[a]);if(e.metaNielsen)for(var a in e.metaNielsen)e.metaNielsen.hasOwnProperty(a)&&(i[a]=e.metaNielsen[a]);i[\"a.contentType\"]=e.streamType,i[\"a.media.name\"]=e.videoId,i[\"a.media.playerName\"]=e.playerName,i[\"a.media.channel\"]=e.channel||\"\",i[\"a.media.vsid\"]=e.sessionId,i[\"a.media.friendlyName\"]=e.videoName||\"\",i[\"a.media.length\"]=Math.floor(e.videoLength)||\"0.0\",i[\"a.media.ad.name\"]=e.adId,i[\"a.media.ad.friendlyName\"]=e.adName||\"\",i[\"a.media.ad.podFriendlyName\"]=e.podName||\"\",i[\"a.media.ad.length\"]=Math.floor(e.adLength)||\"0.0\",i[\"a.media.ad.playerName\"]=e.podPlayerName,i[\"a.media.ad.pod\"]=t,i[\"a.media.ad.podPosition\"]=Math.floor(e.adPosition)||\"0.0\",i[\"a.media.ad.podSecond\"]=Math.floor(e.podSecond)||\"0.0\",i[\"a.media.ad.view\"]=!0;var r={};r.contextData=i,r.pev3=b,r.pe=e.isPrimetime?w:D,this._track(r);var n=this;setTimeout((function(){n._trigger(M,e)}),0)}},r.prototype._setupDataResolver=function(){var e={},t=this;e.rsid=function(){return t._appMeasurement.account},e.tracking_server=function(){return t._appMeasurement.ssl&&t._appMeasurement.trackingServerSecure?t._appMeasurement.trackingServerSecure:t._appMeasurement.trackingServer},e.ssl=function(){return t._appMeasurement.ssl},e.vid=function(){return t._appMeasurement.visitorID},e.aid=function(){return t._appMeasurement.analyticsVisitorID},e.mid=function(){return t._appMeasurement.marketingCloudVisitorID},e.blob=function(){return t._appMeasurement.audienceManagerBlob},e.loc_hint=function(){return t._appMeasurement.audienceManagerLocationHint?parseInt(t._appMeasurement.audienceManagerLocationHint):\"\"},e.customerIDs=function(){var e={},i=t._appMeasurement.visitor.getCustomerIDs();for(var a in i)if(i.hasOwnProperty(a)){var r=i[a];if(\"object\"==typeof r){for(var n in r)r.hasOwnProperty(n)&&(\"authState\"==n?e[a+\".as\"]=r[n]:e[a+\".\"+n]=r[n]);e[a+\".as\"]||(e[a+\".as\"]=\"0\")}}return e},e.visitorOptedOut=function(){return!!t._appMeasurement.visitorOptedOut},e.channel=function(){return t._config?t._config.channel:null},e.meta=function(e){var i=e.split(\".\");if(i.length<2)return null;var a=i.shift();switch(e=i.join(\".\"),a){case\"video\":return e==h.WILDCARD?t._videoMetadata:t._videoMetadata[e];case\"ad\":return e==h.WILDCARD?t._adMetadata:t._adMetadata[e];case\"chapter\":return e==h.WILDCARD?t._chapterMetadata:t._chapterMetadata[e];default:return null}},this._dataResolver=function(t){if(!t||0==t.length)return null;for(var i=null,a=0;a<t.length;a++){var r=t[a];i=i||{},_.startsWith(r,\"meta.\")?i[r]=e.meta(r.split(\"meta.\")[1]):i[r]=e.hasOwnProperty(r)?e[r].call(this):null}return i}},r.prototype._registerCommands=function(){this._pluginManager.comply(this,\"handleVideoLoad\",this._cmdVideoLoad),this._pluginManager.comply(this,\"handleVideoStart\",this._cmdVideoStart),this._pluginManager.comply(this,\"handleAdStart\",this._cmdAdStart),this._pluginManager.comply(this,\"handleHeartbeatPluginError\",this._cmdHeartbeatPluginError)},r.prototype._registerBehaviours=function(){this._pluginManager.registerBehaviour(new n(E,C),this,\"handleVideoLoad\"),this._pluginManager.registerBehaviour(new n(E,R),this,\"handleVideoStart\",[new o(E,\"video.id\",\"videoId\"),new o(E,\"video.streamType\",\"streamType\"),new o(E,\"video.name\",\"videoName\"),new o(E,\"video.length\",\"videoLength\"),new o(E,\"video.playerName\",\"playerName\"),new o(E,\"video.streamType\",\"streamType\"),new o(I,\"is_primetime\",\"isPrimetime\"),new o(I,\"session_id\",\"sessionId\"),new o(v,\"channel\",\"channel\"),new o(v,\"meta.video.*\",\"metaVideo\"),new o(y,\"meta\",\"metaNielsen\")]),this._pluginManager.registerBehaviour(new n(E,O),this,\"handleAdStart\",[new o(E,\"video.id\",\"videoId\"),new o(E,\"video.streamType\",\"streamType\"),new o(E,\"video.playhead\",\"playhead\"),new o(E,\"video.playerName\",\"playerName\"),new o(E,\"video.name\",\"videoName\"),new o(E,\"video.length\",\"videoLength\"),new o(E,\"ad.id\",\"adId\"),new o(E,\"ad.length\",\"adLength\"),new o(E,\"ad.position\",\"adPosition\"),new o(E,\"ad.name\",\"adName\"),new o(E,\"pod.name\",\"podName\"),new o(E,\"pod.position\",\"podPosition\"),new o(E,\"pod.playerName\",\"podPlayerName\"),new o(E,\"pod.startTime\",\"podSecond\"),new o(I,\"is_primetime\",\"isPrimetime\"),new o(I,\"session_id\",\"sessionId\"),new o(v,\"channel\",\"channel\"),new o(v,\"meta.video.*\",\"metaVideo\"),new o(v,\"meta.ad.*\",\"metaAd\"),new o(y,\"meta\",\"metaNielsen\")]),this._pluginManager.registerBehaviour(new n(I,T),this,\"handleHeartbeatPluginError\")},r.prototype._onAppMeasurementReady=function(){this._logger.debug(this._logTag,\"[Init] #_onAppMeasurementReady\"),this._workQueue.resume()};var m=\"adobe-analytics\",v=m,y=\"nielsen\",E=\"player\",I=\"adobe-heartbeat\",A=2e3,T=\"error\",k=\"video\",b=\"videoAd\",S=\"ms_s\",P=\"msp_s\",D=\"msa_s\",w=\"mspa_s\",N=\"aa_start\",M=\"sc_ad_start\",C=\"video_load\",R=\"video_start\",O=\"ad_start\";a.AdobeAnalyticsPlugin=r}(e.ADB.core,e.ADB.va,e.ADB.va.utils,t),function(e){\"use strict\";var t={\nSHOW:\"a.media.show\",SEASON:\"a.media.season\",EPISODE:\"a.media.episode\",ASSET_ID:\"a.media.asset\",GENRE:\"a.media.genre\",FIRST_AIR_DATE:\"a.media.airDate\",FIRST_DIGITAL_DATE:\"a.media.digitalDate\",RATING:\"a.media.rating\",ORIGINATOR:\"a.media.originator\",NETWORK:\"a.media.network\",SHOW_TYPE:\"a.media.type\",AD_LOAD:\"a.media.adLoad\",MVPD:\"a.media.pass.mvpd\",AUTHORIZED:\"a.media.pass.auth\",DAY_PART:\"a.media.dayPart\",FEED:\"a.media.feed\",STREAM_FORMAT:\"a.media.format\"},i={ADVERTISER:\"a.media.ad.advertiser\",CAMPAIGN_ID:\"a.media.ad.campaign\",CREATIVE_ID:\"a.media.ad.creative\",PLACEMENT_ID:\"a.media.ad.placement\",SITE_ID:\"a.media.ad.site\",CREATIVE_URL:\"a.media.ad.creativeURL\"};e.VideoMetadataKeys=t,e.AdMetadataKeys=i}(t),e.ADB.va.plugins.aa||(e.ADB.va.plugins.aa=t)}(this),function(e,t){\"use strict\";function i(){this._processAction=!0,this._store={}}function a(e){if(!e)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=e,this._rules=[]}i.prototype.setRuleName=function(e){this._ruleName=e},i.prototype.getRuleName=function(){return this._ruleName},i.prototype.setData=function(e,t){this._store[e]=t},i.prototype.getData=function(e){return this._store[e]},i.prototype.shouldProcessAction=function(){return this._processAction},i.prototype.stopProcessingAction=function(){this._processAction=!1},i.prototype.startProcessingAction=function(){this._processAction=!0},a.createContext=function(){return new i},a.createPredicate=function(e,t,i){return{fn:e,expectedValue:t,msg:i}},a.prototype.registerRule=function(e,t,i,a,r){this._rules.push({name:e,desc:t,preconditions:i,actions:a,scope:r})},a.prototype.registerEnterExitAction=function(e,t){this._enterAction=e,this._exitAction=t},a.prototype._handleFailure=function(e,t){this._logger.error(r,e.desc+\" -  \"+t.msg)},a.prototype._getRule=function(e){for(var t=0;t<this._rules.length;++t)if(this._rules[t].name===e)return this._rules[t];return null},a.prototype.processRule=function(e,t){var i=!0,n=this._getRule(e);if(n){var s=n.scope;t||(t=a.createContext()),t.setRuleName(e);for(var o=!1,h=0;h<n.preconditions.length;++h){var l=n.preconditions[h];if(o=!!l.fn.call(s,t)!==l.expectedValue){this._handleFailure(n,l);break}}if(o)i=!1;else{for(t.startProcessingAction(),this._enterAction&&this._enterAction.call(s,t),h=0;h<n.actions.length;++h){var d=n.actions[h];if(!t.shouldProcessAction()){this._logger.info(r,\"Stopping actions for \"+n.desc);break}d.call(s,t)}this._exitAction&&t.shouldProcessAction()&&this._exitAction.call(s,t)}}else this._logger.warn(r,\"No registered event found for ruleName \"+e),i=!1;return i};var r=\"RuleEngine\";t._RuleEngine=a}((e=this).ADB.core,e.ADB.va),function(e,t){\"use strict\";function i(e,t,i){this.taskFn=e,this.scope=t,this.interval=i,this.remainingInterval=i}function a(e){if(!e)throw new Error(\"Reference to the logger object cannot be NULL\");this._logger=e,this._tasks=[],this._pausedTasks=[]}i.prototype.elapsedTime=function(e){this.remainingInterval-=e},i.prototype.shouldExecute=function(){return this.remainingInterval<=0},i.prototype.execute=function(){this.taskFn.call(this.scope)},a.prototype._getCurrentTimeInMS=function(){return(new Date).getTime()},a.prototype._runTasksForTime=function(e){var t=[],i=e-this._lastTickTime;this._lastTickTime=e;for(var a=0;a<this._tasks.length;){var r=this._tasks[a];r.elapsedTime(i),r.shouldExecute()?(t.push(r),this._tasks.splice(a,1)):++a}for(this._checkStopTimer(),a=0;a<t.length;++a)t[a].execute()},a.prototype._onTick=function(){var e=this._getCurrentTimeInMS();this._runTasksForTime(e)},a.prototype._startTimer=function(){var e=this;this._timer||(this._logger.info(r,\"#startTimer()\"),e._lastTickTime=this._getCurrentTimeInMS(),this._timer=window.setInterval((function(){e._onTick()}),n))},a.prototype._stopTimer=function(){this._timer&&(this._logger.info(r,\"#stopTimer()\"),window.clearInterval(this._timer),this._timer=null)},a.prototype._checkStartTimer=function(){this._tasks.length>0&&this._startTimer()},a.prototype._checkStopTimer=function(){0===this._tasks.length&&this._stopTimer()},a.prototype._removeTask=function(e,t){for(var i=0;i<e.length;++i)if(e[i]===t)return e.splice(i,1),!0;return!1},a.prototype.scheduleTask=function(e,t,a){if(this._logger.info(r,\"#scheduleTask()\"),!e)throw new Error(\"Reference to the taskFn cannot be NULL\");var n=new i(e,t,a);return this._tasks.push(n),this._checkStartTimer(),n},a.prototype.cancelTask=function(e){this._logger.info(r,\"#cancelTask()\"),this._removeTask(this._tasks,e),this._checkStopTimer()},a.prototype.pauseTask=function(e){this._logger.info(r,\"#pauseTask()\"),this._removeTask(this._tasks,e)&&this._pausedTasks.push(e),this._checkStopTimer()},a.prototype.resumeTask=function(e){this._logger.info(r,\"#resumeTask()\"),this._removeTask(this._pausedTasks,e)&&this._tasks.push(e),this._checkStartTimer()},a.prototype.clearTasks=function(){this._stopTimer(),this._tasks=[],this._pausedTasks=[]};var r=\"TaskScheduler\",n=250;t._TaskScheduler=a}(e.ADB.core,e.ADB.va),function(e){\"use strict\";function t(){this.trackingServer=void 0,this.channel=void 0,this.ovp=void 0,this.appVersion=void 0,this.playerName=void 0,this.ssl=!1,this.debugLogging=!1}e.MediaHeartbeatConfig=t,e.MediaHeartbeatConfig.sharedInstance=new t}(e.ADB.va),function(e){\"use strict\";function t(){this.data={}}var i=e.plugins.videoplayer.VideoInfo,a=e.plugins.videoplayer.AdBreakInfo,r=e.plugins.videoplayer.AdInfo,n=e.plugins.videoplayer.ChapterInfo,s=e.plugins.videoplayer.QoSInfo;t.MEDIAINFO_KEY_NAME=\"a.name\",t.MEDIAINFO_KEY_VIDEOID=\"a.videoId\",t.MEDIAINFO_KEY_ADID=\"a.adId\",t.MEDIAINFO_KEY_LENGTH=\"a.length\",t.MEDIAINFO_KEY_PLAYHEAD=\"a.playhead\",t.MEDIAINFO_KEY_STREAMTYPE=\"a.streamType\",t.MEDIAINFO_KEY_POSITION=\"a.position\",t.MEDIAINFO_KEY_STARTTIME=\"a.startTime\",t.MEDIAINFO_KEY_BITRATE=\"a.bitrate\",t.MEDIAINFO_KEY_FPS=\"a.fps\",t.MEDIAINFO_KEY_DROPPEDFRAMES=\"a.droppedFrames\",t.MEDIAINFO_KEY_STARTUPTIME=\"a.startupTime\",t.MEDIAINFO_KEY_TIMEDMETADATA=\"a.timedMetadata\",t.prototype.setValue=function(e,t){this.data[e]=t},t.prototype.getValue=function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},t.prototype.createVideoInfo=function(){var e=new i;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_VIDEOID)?this.getValue(t.MEDIAINFO_KEY_VIDEOID):\"\",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):\"\",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.playhead=null!=this.getValue(t.MEDIAINFO_KEY_PLAYHEAD)?this.getValue(t.MEDIAINFO_KEY_PLAYHEAD):0,e.streamType=null!=this.getValue(t.MEDIAINFO_KEY_STREAMTYPE)?this.getValue(t.MEDIAINFO_KEY_STREAMTYPE):\"\",e},t.prototype.createAdBreakInfo=function(){var e=new a;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):\"\",e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e},t.prototype.createAdInfo=function(){var e=new r;return e.id=null!=this.getValue(t.MEDIAINFO_KEY_ADID)?this.getValue(t.MEDIAINFO_KEY_ADID):\"\",e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):\"\",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createChapterInfo=function(){var e=new n;return e.name=null!=this.getValue(t.MEDIAINFO_KEY_NAME)?this.getValue(t.MEDIAINFO_KEY_NAME):\"\",e.length=null!=this.getValue(t.MEDIAINFO_KEY_LENGTH)?this.getValue(t.MEDIAINFO_KEY_LENGTH):0,e.startTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTTIME)?this.getValue(t.MEDIAINFO_KEY_STARTTIME):0,e.position=null!=this.getValue(t.MEDIAINFO_KEY_POSITION)?this.getValue(t.MEDIAINFO_KEY_POSITION):0,e},t.prototype.createQoSInfo=function(){var e=new s;return e.bitrate=null!=this.getValue(t.MEDIAINFO_KEY_BITRATE)?this.getValue(t.MEDIAINFO_KEY_BITRATE):0,e.fps=null!=this.getValue(t.MEDIAINFO_KEY_FPS)?this.getValue(t.MEDIAINFO_KEY_FPS):0,e.droppedFrames=null!=this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES)?this.getValue(t.MEDIAINFO_KEY_DROPPEDFRAMES):0,e.startupTime=null!=this.getValue(t.MEDIAINFO_KEY_STARTUPTIME)?this.getValue(t.MEDIAINFO_KEY_STARTUPTIME):0,e},t.prototype.isEqual=function(e){if(this===e)return!0;if(!e||\"object\"!=typeof e||\"function\"!=typeof e.getValue)return!1;for(var i=[t.MEDIAINFO_KEY_NAME,t.MEDIAINFO_KEY_VIDEOID,t.MEDIAINFO_KEY_ADID,t.MEDIAINFO_KEY_LENGTH,t.MEDIAINFO_KEY_PLAYHEAD,t.MEDIAINFO_KEY_STREAMTYPE,t.MEDIAINFO_KEY_POSITION,t.MEDIAINFO_KEY_STARTTIME,t.MEDIAINFO_KEY_BITRATE,t.MEDIAINFO_KEY_FPS,t.MEDIAINFO_KEY_DROPPEDFRAMES,t.MEDIAINFO_KEY_STARTUPTIME,t.MEDIAINFO_KEY_TIMEDMETADATA],a=0;a<i.length;++a){var r=i[a];if(this.getValue(r)!==e.getValue(r))return!1}return!0},e.MediaObject=t}(e.ADB.va),function(e,t){\"use strict\";function i(e){i.__super__.constructor.call(this),this._heartbeat=e}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}function r(e){r.__super__.constructor.call(this),this._heartbeat=e}function n(e){n.__super__.constructor.call(this),this._heartbeat=e}e.extend(i,t.plugins.aa.AdobeAnalyticsPluginDelegate),i.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(a,t.plugins.ah.AdobeHeartbeatPluginDelegate),a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(r,t.HeartbeatDelegate),r.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},e.extend(n,t.plugins.videoplayer.VideoPlayerPluginDelegate),n.prototype.getVideoInfo=function(){return this._heartbeat&&this._heartbeat._videoInfo?(this._heartbeat._delegate&&(this._heartbeat._videoInfo.playhead=this._heartbeat._delegate.getCurrentPlaybackTime()),this._heartbeat._videoInfo):null},n.prototype.getAdBreakInfo=function(){return this._heartbeat&&this._heartbeat._adBreakInfo?this._heartbeat._adBreakInfo:null},n.prototype.getAdInfo=function(){return this._heartbeat&&this._heartbeat._adInfo?this._heartbeat._adInfo:null},n.prototype.getChapterInfo=function(){return this._heartbeat&&this._heartbeat._chapterInfo?this._heartbeat._chapterInfo:null},n.prototype.getQoSInfo=function(){if(this._heartbeat&&this._heartbeat._delegate&&this._heartbeat._delegate.getQoSObject()){var e=this._heartbeat._delegate.getQoSObject();if(e&&\"object\"==typeof e&&e.setValue)return e.createQoSInfo()}return null},t._MediaAnalyticsPluginDelegate=i,t._MediaHeartbeatPluginDelegate=a,t._ADBMediaHeartbeatDelegate=r,t._MediaHeartbeatVideoPlayerPluginDelegate=n}(e.ADB.core,e.ADB.va),function(e,t){\"use strict\";function i(){}function a(e){a.__super__.constructor.call(this),this._heartbeat=e}var r=t.MediaHeartbeatConfig;t.plugins.nielsen&&(i.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA=\"media_nielsen_content_metadata\",i.MEDIAHEARTBEAT_NIELSEN_AD_METADATA=\"media_nielsen_ad_metadata\",i.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA=\"media_nielsen_channel_metadata\",r.prototype.nielsenConfigKey=void 0,r.prototype.nielsenAppInfo=void 0,e.extend(a,t.plugins.nielsen.NielsenPluginDelegate),a.prototype.getMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(i.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA);if(\"object\"==typeof e)return e}return null},a.prototype.getAdMetadataInfo=function(){if(this._heartbeat&&this._heartbeat._currentAdObject){var e=this._heartbeat._currentAdObject.getValue(i.MEDIAHEARTBEAT_NIELSEN_AD_METADATA);if(\"object\"==typeof e)return e}return null},a.prototype.getChannelInfo=function(){if(this._heartbeat&&this._heartbeat._currentMediaObject){var e=this._heartbeat._currentMediaObject.getValue(i.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA);if(\"object\"==typeof e)return e}return null},a.prototype.onError=function(e){this._heartbeat&&this._heartbeat._onDelegateError(e)},t._MediaHeartbeatNielsen=i,t._MediaHeartbeatNielsenPluginDelegate=a)}(e.ADB.core,e.ADB.va),function(t,i){\"use strict\";function a(){}function r(t,a,r){if(this._appMeasurement=r||e.s,!this._appMeasurement)throw new Error(\"MediaHeartbeat needs a valid AppMeasurement instance.\");if(!this._appMeasurement.visitor||!this._appMeasurement.visitor.marketingCloudOrgID)throw new Error(\"MediaHeartbeat needs a valid visitor instance with marketingCloudOrgId set.\");if(!t)throw new Error(\"MediaHeartbeat needs a valid delegate object.\");if(!a||\"object\"!=typeof a||!a.trackingServer)throw new Error(\"MediaHeartbeat needs a valid config object with trackingServer set.\");this._config=a,this._delegate=t,this._debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._logger=new n,this._debugLogging?this._logger.enable():this._logger.disable(),this._ruleEngine=new E(this._logger),this._taskScheduler=new I(this._logger),this._resetState(),this._setupRules()}var n=t.Logger,s=i.plugins.videoplayer.AssetType,o=i.MediaObject,h=i.Heartbeat,l=i.HeartbeatConfig,d=i._ADBMediaHeartbeatDelegate,c=i.plugins.videoplayer.VideoPlayerPlugin,p=i.plugins.videoplayer.VideoPlayerPluginConfig,_=i._MediaHeartbeatVideoPlayerPluginDelegate,u=i.plugins.aa.AdobeAnalyticsPlugin,g=i.plugins.aa.AdobeAnalyticsPluginConfig,f=i._MediaAnalyticsPluginDelegate,m=i.plugins.ah.AdobeHeartbeatPlugin,v=i.plugins.ah.AdobeHeartbeatPluginConfig,y=i._MediaHeartbeatPluginDelegate,E=i._RuleEngine,I=i._TaskScheduler,A=i.utils.ObjectUtils;if(a.prototype.getCurrentPlaybackTime=function(){return null},a.prototype.getQoSObject=function(){return null},r.Event={AdBreakStart:\"adBreakStart\",AdBreakComplete:\"adBreakComplete\",AdStart:\"adStart\",AdComplete:\"adComplete\",AdSkip:\"adSkip\",ChapterStart:\"chapterStart\",ChapterComplete:\"chapterComplete\",ChapterSkip:\"chapterSkip\",SeekStart:\"seekStart\",SeekComplete:\"seekComplete\",BufferStart:\"bufferStart\",BufferComplete:\"bufferComplete\",BitrateChange:\"bitrateChange\",TimedMetadataUpdate:\"timedMetadataUpdate\"},r.StreamType={VOD:\"vod\",LIVE:\"live\",LINEAR:\"linear\"},r.MediaObjectKey={StandardVideoMetadata:\"media_standard_content_metadata\",StandardAdMetadata:\"media_standard_ad_metadata\",VideoResumed:\"resumed\",PrerollTrackingWaitingTime:\"preroll_tracking_waiting_time\"},r.VideoMetadataKeys=i.plugins.aa.VideoMetadataKeys,r.AdMetadataKeys=i.plugins.aa.AdMetadataKeys,r.createMediaObject=function(e,t,i,a){var r=new o;r.setValue(o.MEDIAINFO_KEY_VIDEOID,t),r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_LENGTH,i),r.setValue(o.MEDIAINFO_KEY_PLAYHEAD,0);var n=a||s.ASSET_TYPE_VOD;return r.setValue(o.MEDIAINFO_KEY_STREAMTYPE,n),r},r.createAdBreakObject=function(e,t,i){var a=new o;return a.setValue(o.MEDIAINFO_KEY_NAME,e),a.setValue(o.MEDIAINFO_KEY_POSITION,t),a.setValue(o.MEDIAINFO_KEY_STARTTIME,i),a},r.createAdObject=function(e,t,i,a){var r=new o;return r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_ADID,t),r.setValue(o.MEDIAINFO_KEY_POSITION,i),r.setValue(o.MEDIAINFO_KEY_LENGTH,a),r},r.createChapterObject=function(e,t,i,a){var r=new o;return r.setValue(o.MEDIAINFO_KEY_NAME,e),r.setValue(o.MEDIAINFO_KEY_POSITION,t),r.setValue(o.MEDIAINFO_KEY_LENGTH,i),r.setValue(o.MEDIAINFO_KEY_STARTTIME,a),r},r.createQoSObject=function(e,t,i,a){var r=new o;return r.setValue(o.MEDIAINFO_KEY_BITRATE,e),r.setValue(o.MEDIAINFO_KEY_FPS,i),r.setValue(o.MEDIAINFO_KEY_DROPPEDFRAMES,a),r.setValue(o.MEDIAINFO_KEY_STARTUPTIME,t),r},r.createTimedMetadataObject=function(e){var t=new o;return t.setValue(o.MEDIAINFO_KEY_TIMEDMETADATA,e),t},r.version=function(){return i.Version.getVersion()},r.prototype.trackSessionStart=function(e,t){this._logger.info(P,\"#::trackSessionStart()\");var i=E.createContext();i.setData(D,e),i.setData(R,this._cleanContextData(t)),this._processRule(b.SessionStart,i)},r.prototype.trackPlay=function(){this._logger.info(P,\"#::trackPlay()\"),this._processRule(b.Play)},r.prototype.trackPause=function(){this._logger.info(P,\"#::trackPause()\"),this._processRule(b.Pause)},r.prototype.trackComplete=function(){this._logger.info(P,\"#::trackComplete()\"),this._processRule(b.VideoComplete)},r.prototype.trackSessionEnd=function(){this._logger.info(P,\"#::trackSessionEnd()\"),this._processRule(b.SessionEnd)},r.prototype.trackError=function(e){this._logger.info(P,\"#::trackError()\");var t=E.createContext();t.setData(O,e),this._processRule(b.Error,t)},r.prototype.trackEvent=function(e,t,i){this._logger.info(P,\"#::trackEvent() - \"+e);var a,n=E.createContext();switch(e){case r.Event.AdBreakStart:n.setData(w,t),n.setData(R,this._cleanContextData(i)),a=b.AdBreakStart;break;case r.Event.AdBreakComplete:a=b.AdBreakComplete;break;case r.Event.AdStart:n.setData(N,t),n.setData(R,this._cleanContextData(i)),a=b.AdStart;break;case r.Event.AdComplete:a=b.AdComplete;break;case r.Event.AdSkip:a=b.AdSkip;break;case r.Event.SeekStart:a=b.SeekStart;break;case r.Event.SeekComplete:a=b.SeekComplete;break;case r.Event.ChapterStart:n.setData(M,t),n.setData(R,this._cleanContextData(i)),a=b.ChapterStart;break;case r.Event.ChapterComplete:a=b.ChapterComplete;break;case r.Event.ChapterSkip:a=b.ChapterSkip;break;case r.Event.BufferStart:a=b.BufferStart;break;case r.Event.BufferComplete:a=b.BufferComplete;break;case r.Event.BitrateChange:a=b.BitrateChange;break;case r.Event.TimedMetadataUpdate:a=b.TimedMetadataUpdate,n.setData(C,t);break;default:return void this._logger.error(P,\"Incorrect event name.\")}this._processRule(a,n)},i.plugins.nielsen){var T=i._MediaHeartbeatNielsen;r.MediaObjectKey.NielsenContentMetadata=T.MEDIAHEARTBEAT_NIELSEN_CONTENT_METADATA,r.MediaObjectKey.NielsenAdMetadata=T.MEDIAHEARTBEAT_NIELSEN_AD_METADATA,r.MediaObjectKey.NielsenChannelMetadata=T.MEDIAHEARTBEAT_NIELSEN_CHANNEL_METADATA,r.prototype.nielsenLoadMetadata=function(e){this._nielsenPlugin&&this._nielsenPlugin.loadMetadata(e)}}r.prototype._setState=function(e,t){this._mediaState[e]=t},r.prototype._isInState=function(e){return this._mediaState[e]},r.prototype._isInSession=function(){return this._isInState(k.Session)},r.prototype._isInMedia=function(){return this._isInState(k.Media)},r.prototype._isInAd=function(){return this._isInState(k.Ad)},r.prototype._isInAdBreak=function(){return this._isInState(k.AdBreak)},r.prototype._isInChapter=function(){return this._isInState(k.Chapter)},r.prototype._isInPlay=function(){return this._isInState(k.PlayPause)},r.prototype._isInPause=function(){return!this._isInState(k.PlayPause)},r.prototype._isInBuffer=function(){return this._isInState(k.Buffer)},r.prototype._isInSeek=function(){return this._isInState(k.Seek)},r.prototype._isPlatformTrackingSupported=function(){return!this._appMeasurement.unsupportedBrowser},r.prototype._isValidMediaObject=function(e){var t=e.getData(D);if(t&&t instanceof o){var i=t.getValue(r.MediaObjectKey.VideoResumed);null!=i&&\"boolean\"!=typeof i&&this._logger.warn(P,\"Ignoring value set for MediaHeartbeat.MediaObjectKey.VideoResumed in MediaObject as we expect a boolean value\");var a=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);null!=a&&((\"string\"==typeof a||\"number\"==typeof a)&&!isNaN(a)||this._logger.warn(P,\"Ignoring value set for MediaHeartbeat.MediaObjectKey.PrerollTrackingWaitingTime in MediaObject as we expect a valid duration as number in milliseconds.\"));var n=t.getValue(r.MediaObjectKey.StandardVideoMetadata);return null!=n&&\"object\"!=typeof n&&this._logger.warn(P,\"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardVideoMetadata in MediaObject as we expect a valid object with kv pairs.\"),!0}return!1},r.prototype._isValidAdBreakObject=function(e){var t=e.getData(w);return t&&t instanceof o},r.prototype._isDifferentAdBreakObject=function(e){var t=e.getData(w);return!(this._currentAdBreakObject&&this._currentAdBreakObject.isEqual(t))},r.prototype._isValidAdObject=function(e){var t=e.getData(N);if(t&&t instanceof o){var i=t.getValue(B);null!=i&&\"boolean\"!=typeof i&&this._logger.warn(P,\"Ignoring value set for MediaHeartbeat.MediaObjectKey.GranularAdTracking in AdObject as we expect a boolean value.\");var a=t.getValue(r.MediaObjectKey.StandardAdMetadata);return null!=a&&\"object\"!=typeof a&&this._logger.warn(P,\"Ignoring value set for MediaHeartbeat.MediaObjectKey.StandardAdMetadata in AdObject as we expect a valid object with kv pairs.\"),!0}return!1},r.prototype._isDifferentAdObject=function(e){var t=e.getData(N);return!(this._currentAdObject&&this._currentAdObject.isEqual(t))},r.prototype._isValidChapterObject=function(e){var t=e.getData(M);return t&&t instanceof o},r.prototype._isDifferentChapterObject=function(e){var t=e.getData(M);return!(this._currentChapterObject&&this._currentChapterObject.isEqual(t))},r.prototype._isValidTimedMetadataObject=function(e){var t=e.getData(C);if(t&&t instanceof o){var i=t.getValue(o.MEDIAINFO_KEY_TIMEDMETADATA);return i&&\"string\"==typeof i}return!1},r.prototype._deferredTrackPlay=function(){this._prerollWaitEnabled&&(this._logger.info(P,\"Executing deferred API:trackPlay.\"),this._prerollWaitEnabled=!1,this._playTaskHandle=null,this._processRule(b.Play))},r.prototype._cmdEnterAction=function(e){var t=e.getRuleName();if(this._prerollWaitEnabled)if(this._playReceived)switch(t){case b.SeekStart:case b.BufferStart:this._logger.info(P,\"Cancelling scheduled API:trackPlay because of SeekStart/BufferStart event\"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null;break;case b.SeekComplete:case b.BufferComplete:this._logger.info(P,\"Rescheduled API:trackPlay after SeekComplete/BufferComplete event\"),this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime);break;case b.Play:this._logger.info(P,\"Dropping API:trackPlay as we already have a API:trackPlay scheduled.\"),e.stopProcessingAction();break;case b.Pause:this._logger.info(P,\"Cancelling scheduled API:trackPlay because of API:trackPause call.\"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1;break;case b.AdBreakStart:this._logger.info(P,\"Received API:trackEvent(AdBreakStart) within \"+this._prerollWaitTime+\" ms after API:trackPlay. We will track this as preroll AdBreak.\"),this._taskScheduler.cancelTask(this._playTaskHandle),this._playTaskHandle=null,this._prerollWaitEnabled=!1,this._playAfterAdStart=!0}else switch(t){case b.Play:this._logger.info(P,\"Deferring API:trackPlay for \"+this._prerollWaitTime+\" ms.\"),this._playReceived=!0,this._playTaskHandle=this._taskScheduler.scheduleTask(this._deferredTrackPlay,this,this._prerollWaitTime),e.stopProcessingAction();break;case b.AdBreakStart:this._logger.info(P,\"Received trackEvent(AdBreakStart) before first trackPlay.\"),this._prerollWaitEnabled=!1}},r.prototype._cmdExitAction=function(e){var t=e.getRuleName();this._playAfterAdStart&&(t===b.AdStart?(this._cmdPlay(e),this._playAfterAdStart=!1):t===b.AdBreakComplete&&(this._playAfterAdStart=!1)),t!==b.AdStart||this._isInState(k.FPlayPause)||this._cmdPlay(e)},r.prototype._cmdConfigure=function(){this._resetState(),this._configureAdobeAnalyticsPlugin(),this._configureAdobeHearbeatPlugin(),this._configureVideoPlayerPlugin(),this._configureOtherPlugins(),this._configureHeartbeat()},r.prototype._cmdSessionStart=function(e){var t=e.getData(D),i=e.getData(R);this._currentMediaObject=t,this._videoInfo=t.createVideoInfo(),this._videoInfo.playerName=this._config.playerName?this._config.playerName:\"\";var a=t.getValue(r.MediaObjectKey.StandardVideoMetadata);a&&\"object\"==typeof a&&(i||(i={}),A.append(i,this._cleanContextData(a)));var n=t.getValue(r.MediaObjectKey.VideoResumed);\"boolean\"==typeof n&&(this._videoInfo.resumed=n);var s=t.getValue(r.MediaObjectKey.PrerollTrackingWaitingTime);\"string\"!=typeof s&&\"number\"!=typeof s||isNaN(s)||(this._prerollWaitTime=Number(s),this._prerollWaitTime<=0&&(this._prerollWaitEnabled=!1)),this._aaPlugin.setVideoMetadata(i),this._playerPlugin.trackVideoLoad(),this._playerPlugin.trackSessionStart(),this._setState(k.Session,!0),this._setState(k.Media,!0)},r.prototype._cmdVideoEnd=function(e){var t=e.getRuleName()===b.VideoComplete;if(this._isInState(k.Media)){var i=this._heartbeat,a=this._playerPlugin;this._playerPlugin.trackComplete((function(){a&&a.trackVideoUnload(),i&&i.destroy()}),t)}this._setState(k.Media,!1)},r.prototype._cmdHandleMediaComplete=function(e){this._isInMedia(e)||(this._logger.info(P,\"API:trackComplete has already cleaned up Heartbeat instance.\"),this._cmdSessionEnd(e),e.stopProcessingAction())},r.prototype._cmdSessionEnd=function(){this._setState(k.Session,!1),this._resetState()},r.prototype._cmdBufferStart=function(){this._playerPlugin.trackBufferStart(),this._setState(k.Buffer,!0)},r.prototype._cmdBufferComplete=function(){this._isInState(k.Buffer)&&this._playerPlugin.trackBufferComplete(),this._setState(k.Buffer,!1)},r.prototype._cmdSeekStart=function(){this._playerPlugin.trackSeekStart(),this._setState(k.Seek,!0)},r.prototype._cmdSeekComplete=function(){this._isInState(k.Seek)&&this._playerPlugin.trackSeekComplete(),this._setState(k.Seek,!1)},r.prototype._cmdPlay=function(){this._playerPlugin.trackPlay(),this._setState(k.PlayPause,!0),this._setState(k.FPlayPause,!0)},r.prototype._cmdPause=function(){this._playerPlugin.trackPause(),this._setState(k.PlayPause,!1),this._setState(k.FPlayPause,!0)},r.prototype._cmdAdBreakStart=function(e){var t=e.getData(w);this._currentAdBreakObject=t,this._adBreakInfo=t.createAdBreakInfo(),this._adBreakInfo.playerName=this._config.playerName?this._config.playerName:\"\",this._setState(k.AdBreak,!0)},r.prototype._cmdAdBreakComplete=function(){this._currentAdBreakObject=null,this._adBreakInfo=null,this._setState(k.AdBreak,!1)},r.prototype._cmdAdStart=function(e){var t=e.getData(N),i=e.getData(R);this._currentAdObject=t,this._adInfo=t.createAdInfo();var a=t.getValue(B);\"boolean\"==typeof a&&(this._adInfo.granularTracking=a);var n=t.getValue(r.MediaObjectKey.StandardAdMetadata);n&&\"object\"==typeof n&&(i||(i={}),A.append(i,this._cleanContextData(n))),this._aaPlugin.setAdMetadata(i),this._playerPlugin.trackAdStart(),this._setState(k.Ad,!0)},r.prototype._cmdAdComplete=function(){this._currentAdObject=null,this._adInfo=null,this._isInState(k.Ad)&&this._playerPlugin.trackAdComplete(),this._setState(k.Ad,!1)},r.prototype._cmdAdSkip=function(){this._currentAdObject=null,this._adInfo=null,this._isInState(k.Ad)&&this._playerPlugin.trackAdSkip(),this._setState(k.Ad,!1)},r.prototype._cmdChapterStart=function(e){var t=e.getData(M),i=e.getData(R);this._currentChapterObject=t,this._chapterInfo=t.createChapterInfo(),this._aaPlugin.setChapterMetadata(i),this._playerPlugin.trackChapterStart(),this._setState(k.Chapter,!0)},r.prototype._cmdChapterComplete=function(){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(k.Chapter)&&this._playerPlugin.trackChapterComplete(),this._setState(k.Chapter,!1)},r.prototype._cmdChapterSkip=function(){this._currentChapterObject=null,this._chapterInfo=null,this._isInState(k.Chapter)&&this._playerPlugin.trackChapterSkip(),this._setState(k.Chapter,!1)},r.prototype._cmdError=function(e){var t=e.getData(O);t||(t=\"unknown_error_id\"),this._playerPlugin.trackVideoPlayerError(t)},r.prototype._cmdBitrate=function(){this._playerPlugin.trackBitrateChange()},r.prototype._cmdTimedMetadataUpdate=function(e){var t=e.getData(C).getValue(o.MEDIAINFO_KEY_TIMEDMETADATA);this._playerPlugin.trackTimedMetadata(t)},r.prototype._processRule=function(e,t){return this._ruleEngine.processRule(e,t)},r.prototype._setupRules=function(){this._ruleEngine.registerEnterExitAction(this._cmdEnterAction,this._cmdExitAction),this._ruleEngine.registerRule(b.SessionStart,\"API:trackSessionStart\",[E.createPredicate(this._isPlatformTrackingSupported,!0,S.ErrUnSupportedPlatform),E.createPredicate(this._isInSession,!1,S.ErrInSession),E.createPredicate(this._isValidMediaObject,!0,S.ErrInvalidMediaObject)],[this._cmdConfigure,this._cmdSessionStart],this),this._ruleEngine.registerRule(b.SessionEnd,\"API:trackSessionEnd\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession)],[this._cmdHandleMediaComplete,this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd,this._cmdSessionEnd],this),this._ruleEngine.registerRule(b.VideoComplete,\"API:trackComplete\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdChapterSkip,this._cmdVideoEnd],this),this._ruleEngine.registerRule(b.Error,\"API:trackError\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia)],[this._cmdError],this),this._ruleEngine.registerRule(b.Play,\"API:trackPlay\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia)],[this._cmdSeekComplete,this._cmdBufferComplete,this._cmdPlay],this),this._ruleEngine.registerRule(b.Pause,\"API:trackPause\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInBuffer,!1,S.ErrInBuffer),E.createPredicate(this._isInSeek,!1,S.ErrInSeek)],[this._cmdPause],this),this._ruleEngine.registerRule(b.BufferStart,\"API:trackEvent(BufferStart)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInBuffer,!1,S.ErrInBuffer),E.createPredicate(this._isInSeek,!1,S.ErrInSeek)],[this._cmdBufferStart],this),this._ruleEngine.registerRule(b.BufferComplete,\"API:trackEvent(BufferComplete)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInBuffer,!0,S.ErrNotInBuffer)],[this._cmdBufferComplete],this),this._ruleEngine.registerRule(b.SeekStart,\"API:trackEvent(SeekStart)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInSeek,!1,S.ErrInSeek),E.createPredicate(this._isInBuffer,!1,S.ErrInBuffer)],[this._cmdSeekStart],this),this._ruleEngine.registerRule(b.SeekComplete,\"API:trackEvent(SeekComplete)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInSeek,!0,S.ErrNotInSeek)],[this._cmdSeekComplete],this),this._ruleEngine.registerRule(b.AdBreakStart,\"API:trackEvent(AdBreakStart)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isValidAdBreakObject,!0,S.ErrInvalidAdBreakObject),E.createPredicate(this._isDifferentAdBreakObject,!0,S.ErrDuplicateAdBreakObject)],[this._cmdAdSkip,this._cmdAdBreakComplete,this._cmdAdBreakStart],this),this._ruleEngine.registerRule(b.AdBreakComplete,\"API:trackEvent(AdBreakComplete)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInAdBreak,!0,S.ErrNotInAdBreak)],[this._cmdAdSkip,this._cmdAdBreakComplete],this),this._ruleEngine.registerRule(b.AdStart,\"API:trackEvent(AdStart)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInAdBreak,!0,S.ErrNotInAdBreak),E.createPredicate(this._isValidAdObject,!0,S.ErrInvalidAdObject),E.createPredicate(this._isDifferentAdObject,!0,S.ErrDuplicateAdObject)],[this._cmdAdSkip,this._cmdAdStart],this),this._ruleEngine.registerRule(b.AdComplete,\"API:trackEvent(AdComplete)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInAdBreak,!0,S.ErrNotInAdBreak),E.createPredicate(this._isInAd,!0,S.ErrNotInAd)],[this._cmdAdComplete],this),this._ruleEngine.registerRule(b.AdSkip,\"API:trackEvent(AdSkip)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInAdBreak,!0,S.ErrNotInAdBreak),E.createPredicate(this._isInAd,!0,S.ErrNotInAd)],[this._cmdAdSkip],this),this._ruleEngine.registerRule(b.ChapterStart,\"API:trackEvent(ChapterStart)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isValidChapterObject,!0,S.ErrInvalidChapterObject),E.createPredicate(this._isDifferentChapterObject,!0,S.ErrDuplicateChapterObject)],[this._cmdChapterSkip,this._cmdChapterStart],this),this._ruleEngine.registerRule(b.ChapterComplete,\"API:trackEvent(ChapterComplete)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInChapter,!0,S.ErrNotInChapter)],[this._cmdChapterComplete],this),\nthis._ruleEngine.registerRule(b.ChapterSkip,\"API:trackEvent(ChapterSkip)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isInChapter,!0,S.ErrNotInChapter)],[this._cmdChapterSkip],this),this._ruleEngine.registerRule(b.BitrateChange,\"API:trackEvent(BitrateChange)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia)],[this._cmdBitrate],this),this._ruleEngine.registerRule(b.TimedMetadataUpdate,\"API:trackEvent(TimedMetadataUpdate)\",[E.createPredicate(this._isInSession,!0,S.ErrNotInSession),E.createPredicate(this._isInMedia,!0,S.ErrNotInMedia),E.createPredicate(this._isValidTimedMetadataObject,!0,S.ErrInvalidTimedMetadataObject)],[this._cmdTimedMetadataUpdate],this)},r.prototype._configureAdobeAnalyticsPlugin=function(){this._aaPlugin=new u(this._appMeasurement,new f(this));var e=new g;e.channel=this._config.channel?this._config.channel:\"\",e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._aaPlugin.configure(e),this._plugins.push(this._aaPlugin)},r.prototype._configureAdobeHearbeatPlugin=function(){var e=this._appMeasurement.visitor?this._appMeasurement.visitor.marketingCloudOrgID:\"\";this._ahPlugin=new m(new y(this));var t=new v(this._config.trackingServer,e);t.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,t.ovp=this._config.ovp?this._config.ovp:\"\",t.ssl=this._config.ssl,t.sdk=this._config.appVersion?this._config.appVersion:\"\";var a=this._primetimeTVSDKVersion();a&&a.length>0&&(t.__primetime=!0,t.__psdkVersion=a),this._ahPlugin.configure(t),this._plugins.push(this._ahPlugin)},r.prototype._configureVideoPlayerPlugin=function(){this._playerPlugin=new c(new _(this));var e=new p;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._playerPlugin.configure(e),this._plugins.push(this._playerPlugin)},r.prototype._configureOtherPlugins=function(){if(i.plugins.nielsen&&this._config.nielsenConfigKey&&this._config.nielsenAppInfo){this._nielsenPlugin=new i.plugins.nielsen.NielsenPlugin(new i._MediaHeartbeatNielsenPluginDelegate(this));var e=new i.plugins.nielsen.NielsenPluginConfig;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,e.appInfo=this._config.nielsenAppInfo,e.configKey=this._config.nielsenConfigKey,this._nielsenPlugin.configure(e),this._plugins.push(this._nielsenPlugin)}},r.prototype._configureHeartbeat=function(){var e=new l;e.debugLogging=i.MediaHeartbeat._debugLogging||this._config.debugLogging,this._heartbeat=new h(new d(this),this._plugins),this._heartbeat.configure(e)},r.prototype._resetState=function(){this._taskScheduler.clearTasks(),this._mediaState={},this._plugins=[],this._playerPlugin=null,this._aaPlugin=null,this._ahPlugin=null,this._nielsenPlugin=null,this._heartbeat=null,this._currentMediaObject=null,this._currentAdBreakObject=null,this._currentAdObject=null,this._currentChapterObject=null,this._videoInfo=null,this._adBreakInfo=null,this._adInfo=null,this._chapterInfo=null,this._prerollWaitEnabled=!0,this._prerollWaitTime=L,this._playReceived=!1,this._playTaskHandle=null,this._playAfterAdStart=!1},r.prototype._primetimeTVSDKVersion=function(){return this._currentMediaObject?this._currentMediaObject.getValue(V):null},r.prototype._cleanContextData=function(e){if(null==e||\"object\"!=typeof e)return null;var t={};for(var i in e)if(e.hasOwnProperty(i)){var a=e[i];\"number\"!=typeof a&&\"string\"!=typeof a&&\"boolean\"!=typeof a||(t[i]=a)}return t},r.prototype._onDelegateError=function(e){this._logger.error(P,e.getMessage()+\" | \"+e.getDetails())};var k={Session:0,Media:1,AdBreak:2,Ad:3,Chapter:4,PlayPause:5,Buffer:6,Seek:7,FPlayPause:8},b={SessionStart:0,SessionEnd:1,VideoComplete:2,Play:3,Pause:4,Error:5,AdBreakStart:6,AdBreakComplete:7,AdStart:8,AdComplete:9,AdSkip:10,ChapterStart:11,ChapterComplete:12,ChapterSkip:13,SeekStart:14,SeekComplete:15,BufferStart:16,BufferComplete:17,BitrateChange:18,TimedMetadataUpdate:19},S={ErrUnSupportedPlatform:\"MediaHeartbeat does not support tracking due to AppMeasurement or VisitorAPI not supporting the browser.\",ErrNotInSession:'MediaHeartbeat is not in active tracking session, call \"API:trackSessionStart\" to begin a new tracking session.',ErrInSession:'MediaHeartbeat is in active tracking session, call \"API:trackSessionEnd\" to end current tracking session.',ErrNotInMedia:'MediaHeartbeat has completed tracking session, call \"API:trackSessionEnd\" first to end current session and then begin a new tracking session.',ErrInBuffer:'MediaHeartbeat is tracking buffer events, call \"API:trackEvent(BufferComplete)\" first to stop tracking buffer events.',ErrNotInBuffer:'MediaHeartbeat is not tracking buffer events, call \"API:trackEvent(BufferStart)\" before \"API:trackEvent(BufferComplete)\".',ErrInSeek:'MediaHeartbeat is tracking seek events, call \"API:trackEvent(SeekComplete)\" first to stop tracking seek events.',ErrNotInSeek:'MediaHeartbeat is not tracking seek events, call \"API:trackEvent(SeekStart)\" before \"API:trackEvent(SeekComplete)\".',ErrNotInAdBreak:'MediaHeartbeat is not tracking any AdBreak, call \"API:trackEvent(AdBreakStart)\" to begin tracking AdBreak',ErrNotInAd:'MediaHeartbeat is not tracking any Ad, call \"API:trackEvent(AdStart)\" to begin tracking Ad',ErrNotInChapter:'MediaHeartbeat is not tracking any Chapter, call \"API:trackEvent(ChapterStart)\" to begin tracking Chapter',ErrInvalidMediaObject:'MediaInfo passed into \"API:trackSessionStart\" is invalid.',ErrInvalidAdBreakObject:'AdBreakInfo passed into \"API:trackEvent(AdBreakStart)\" is invalid.',ErrDuplicateAdBreakObject:'MediaHeartbeat is currently tracking the AdBreak passed into \"API:trackEvent(AdBreakStart)\".',ErrInvalidAdObject:'AdInfo passed into \"API:trackEvent(AdStart)\" is invalid.',ErrDuplicateAdObject:'MediaHeartbeat is currently tracking the Ad passed into \"API:trackEvent(AdStart)\".',ErrInvalidChapterObject:'ChapterInfo passed into \"API:trackEvent(ChapterStart)\" is invalid.',ErrDuplicateChapterObject:'MediaHeartbeat is currently tracking the Chapter passed into \"API:trackEvent(ChapterStart)\".',ErrInvalidTimedMetadataObject:'TimedMetadata passed into \"API:trackEvent(TimedMetadataUpdate)\" is invalid.'},P=\"MediaHeartbeat\",D=\"key_media_object\",w=\"key_adbreak_object\",N=\"key_ad_object\",M=\"key_chapter_object\",C=\"key_timed_metadata_object\",R=\"key_custom_metadata\",O=\"key_error_id\",V=\"a.__pttvsdkVersion\",B=\"granular_ad_tracking\",L=250;i._MediaHeartbeatErrorMessage=S,i.MediaHeartbeatDelegate=a,i.MediaHeartbeat=r,i.MediaHeartbeat._debugLogging=!1}(e.ADB.core,e.ADB.va),e.ADB||(e.ADB={}),e.ADB.core||(e.ADB.core=core),e.ADB.va||(e.ADB.va=va),e.ADB.va.plugins||(e.ADB.va.plugins={})}.call(e),e.ADB})),initializeHeartbeat();");