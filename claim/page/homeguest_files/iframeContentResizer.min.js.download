/*
 iFrame Resizer (iframeSizer.contentWindow.min.js) - v3.5.0 - 2015-10-26
  Desc: Include this file in any page being loaded into an iframe
        to force the iframe to resize to the content size.
  Requires: iframeResizer.min.js on host page.
  Copyright: (c) 2015 David J. Bradshaw - dave@bradshaw.net
  License: MIT
*/
!function(g){function H(a,b,e){"addEventListener"in g?a.addEventListener(b,e,!1):"attachEvent"in g&&a.attachEvent("on"+b,e)}function ca(a,b,e){"removeEventListener"in g?a.removeEventListener(b,e,!1):"detachEvent"in g&&a.detachEvent("on"+b,e)}function da(a){return a.charAt(0).toUpperCase()+a.slice(1)}function d(a){O&&"object"==typeof g.console&&console.log(A+"["+B+"] "+a)}function y(a){"object"==typeof g.console&&console.warn(A+"["+B+"] "+a)}function Ca(){var a=ea.substr(fa).split(":");B=a[0];P=void 0!==
a[1]?Number(a[1]):P;I=void 0!==a[2]?"true"===a[2]?!0:!1:I;O=void 0!==a[3]?"true"===a[3]?!0:!1:O;x=void 0!==a[4]?Number(a[4]):x;t=void 0!==a[6]?"true"===a[6]?!0:!1:t;J=a[7];p=void 0!==a[8]?a[8]:p;ha=a[9];ia=a[10];K=void 0!==a[11]?Number(a[11]):K;C.enable=void 0!==a[12]?"true"===a[12]?!0:!1:!1;Q=void 0!==a[13]?a[13]:Q;q=void 0!==a[14]?a[14]:q}function Da(){if("iFrameResizer"in g&&Object===g.iFrameResizer.constructor){var a=g.iFrameResizer;d("Reading data from page: "+JSON.stringify(a));R="messageCallback"in
a?a.messageCallback:R;S="readyCallback"in a?a.readyCallback:S;D="targetOrigin"in a?a.targetOrigin:D;p="heightCalculationMethod"in a?a.heightCalculationMethod:p;q="widthCalculationMethod"in a?a.widthCalculationMethod:q}d("TargetOrigin for parent set to: "+D)}function T(a,b){void 0!==b&&""!==b&&"null"!==b&&(document.body.style[a]=b,d("Body "+a+' set to "'+b+'"'))}function Ea(){void 0===J&&(J=P+"px");var a=J;var b=(-1!==a.indexOf("-")&&(y("Negative CSS value ignored for margin"),a=""),a);T("margin",
b)}function m(a){function b(){u(a.eventName,a.eventType)}var e={add:function(c){H(g,c,b)},remove:function(c){ca(g,c,b)}};a.eventNames&&Array.prototype.map?(a.eventName=a.eventNames[0],a.eventNames.map(e[a.method])):e[a.method](a.eventName);d(da(a.method)+" event listener: "+a.eventType)}function ja(a){m({method:a,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]});m({method:a,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]});
m({method:a,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]});m({method:a,eventType:"Input",eventName:"input"});m({method:a,eventType:"Mouse Up",eventName:"mouseup"});m({method:a,eventType:"Mouse Down",eventName:"mousedown"});m({method:a,eventType:"Orientation Change",eventName:"orientationchange"});m({method:a,eventType:"Touch Start",eventName:"touchstart"});m({method:a,eventType:"Touch End",eventName:"touchend"});m({method:a,eventType:"Touch Cancel",eventName:"touchcancel"});
m({method:a,eventType:"Print",eventName:["afterprint","beforeprint"]});m({method:a,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]});m({method:a,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]});m({method:a,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd",
"oTransitionEnd","otransitionend"]});"child"===Q&&m({method:a,eventType:"IFrame Resized",eventName:"resize"})}function U(a,b,e,c){return b!==a&&(a in e||(y(a+" is not a valid option for "+c+"CalculationMethod."),a=b),d(c+' calculation method set to "'+a+'"')),a}function ka(){p=U(p,V,v,"height")}function la(){if(!0===t){ja("add");var a=0>x;g.MutationObserver||g.WebKitMutationObserver?a?ma():W=Fa():(d("MutationObserver not supported in this browser!"),ma())}else d("Auto Resize disabled")}function na(){ja("remove");
null!==W&&W.disconnect();clearInterval(oa)}function Ga(){var a=document.createElement("div");a.style.clear="both";a.style.display="block";document.body.appendChild(a)}function Ha(){function a(c){c=c.split("#")[1]||c;var f=decodeURIComponent(c);f=document.getElementById(f)||document.getElementsByName(f)[0];if(void 0!==f){var h=f.getBoundingClientRect();f=void 0!==g.pageXOffset?g.pageXOffset:document.documentElement.scrollLeft;var n=void 0!==g.pageYOffset?g.pageYOffset:document.documentElement.scrollTop;
f=parseInt(h.left,10)+parseInt(f,10);h=parseInt(h.top,10)+parseInt(n,10);d("Moving to in page link (#"+c+") at x: "+f+" y: "+h);r(h,f,"scrollToOffset")}else d("In page link (#"+c+") not found in iFrame, so sending to parent"),r(0,0,"inPageLink","#"+c)}function b(){""!==location.hash&&"#"!==location.hash&&a(location.href)}function e(){Array.prototype.forEach.call(document.querySelectorAll('a[href^\x3d"#"]'),function(c){function f(h){h.preventDefault();a(this.getAttribute("href"))}"#"!==c.getAttribute("href")&&
H(c,"click",f)})}C.enable?Array.prototype.forEach&&document.querySelectorAll?(d("Setting up location.hash handlers"),e(),H(g,"hashchange",b),setTimeout(b,X)):y("In page linking not fully supported in this browser! (See README.md for IE8 workaround)"):d("In page linking not enabled");return{findTarget:a}}function Ia(){d("Enable public methods");Ja.parentIFrame={autoResize:function(a){return!0===a&&!1===t?(t=!0,la()):!1===a&&!0===t&&(t=!1,na()),t},close:function(){r(0,0,"close");d("Disable outgoing messages");
pa=!1;d("Remove event listener: Message");ca(g,"message",qa);!0===t&&na()},getId:function(){return B},getPageInfo:function(a){"function"==typeof a?(Y=a,r(0,0,"pageInfo")):(Y=a,r(0,0,"pageInfoStop"))},moveToAnchor:function(a){C.findTarget(a)},reset:function(){ra("parentIFrame.reset")},scrollTo:function(a,b){r(b,a,"scrollTo")},scrollToOffset:function(a,b){r(b,a,"scrollToOffset")},sendMessage:function(a,b){r(0,0,"message",JSON.stringify(a),b)},setHeightCalculationMethod:function(a){p=a;ka()},setWidthCalculationMethod:function(a){q=
a;q=U(q,Z,w,"width")},setTargetOrigin:function(a){d("Set targetOrigin: "+a);D=a},size:function(a,b){u("size","parentIFrame.size("+((a?a:"")+(b?","+b:""))+")",a,b)}}}function ma(){0!==x&&(d("setInterval: "+x+"ms"),oa=setInterval(function(){u("interval","setInterval: "+x)},Math.abs(x)))}function Fa(){function a(k){function sa(E){!1===E.complete&&(d("Attach listeners to "+E.src),E.addEventListener("load",e,!1),E.addEventListener("error",c,!1),h.push(E))}"attributes"===k.type&&"src"===k.attributeName?
sa(k.target):"childList"===k.type&&Array.prototype.forEach.call(k.target.querySelectorAll("img"),sa)}function b(k){d("Remove listeners from "+k.src);k.removeEventListener("load",e,!1);k.removeEventListener("error",c,!1);h.splice(h.indexOf(k),1)}function e(k){b(k.target);u("imageLoad","Image loaded: "+k.target.src,void 0,void 0)}function c(k){b(k.target);u("imageLoadFailed","Image load failed: "+k.target.src,void 0,void 0)}function f(k){u("mutationObserver","mutationObserver: "+k[0].target+" "+k[0].type);
k.forEach(a)}var h=[],n=g.MutationObserver||g.WebKitMutationObserver,l=function(){var k=document.querySelector("body");return l=new n(f),d("Create body MutationObserver"),l.observe(k,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),l}();return{disconnect:function(){"disconnect"in l&&(d("Disconnect body MutationObserver"),l.disconnect(),h.forEach(b))}}}function aa(a){var b=document.body;if("defaultView"in document&&"getComputedStyle"in document.defaultView)b=
document.defaultView.getComputedStyle(b,null),b=null!==b?b[a]:0;else if(a=b.currentStyle[a],/^\d+(px)?$/i.test(a))b=parseInt(a,ta);else{var e=b.style.left,c=b.runtimeStyle.left;b=(b.runtimeStyle.left=b.currentStyle.left,b.style.left=a||0,a=b.style.pixelLeft,b.style.left=e,b.runtimeStyle.left=c,a)}return parseInt(b,ta)}function ba(a,b){for(var e=b.length,c,f=0,h=da(a),n=L(),l=0;e>l;l++)c=b[l].getBoundingClientRect()[a]+aa("margin"+h),c>f&&(f=c);n=L()-n;d("Parsed "+e+" HTML elements");d("Element position calculated in "+
n+"ms");n>F/2&&(F=2*n,d("Event throttle increased to "+F+"ms"));return f}function M(a){return[a.bodyOffset(),a.bodyScroll(),a.documentElementOffset(),a.documentElementScroll()]}function ua(a,b){var e=document.querySelectorAll("["+b+"]");return 0===e.length?(y("No tagged elements ("+b+") found on page"),z):ba(a,e)}function u(a,b,e,c){N&&a in Ka?d("Trigger event cancelled: "+a):(a in{reset:1,resetPage:1,init:1}||d("Trigger event: "+b),La(a,b,e,c))}function va(){N||(N=!0,d("Trigger event lock on"));
clearTimeout(wa);wa=setTimeout(function(){N=!1;d("Trigger event lock off");d("--")},X)}function xa(a){z=v[p]();G=w[q]();r(z,G,a)}function ra(a){var b=p;p=V;d("Reset trigger event: "+a);va();xa("reset");p=b}function r(a,b,e,c,f){!0===pa&&(void 0===f?f=D:d("Message targetOrigin: "+f),a=B+":"+(a+":"+b)+":"+e+(void 0!==c?":"+c:""),d("Sending message to host page ("+a+")"),ya.postMessage(A+a,f))}function qa(a){function b(){ea=a.data;ya=a.source;Ca();d("Initialising iFrame ("+location.href+")");Da();Ea();
T("background",ha);T("padding",ia);Ga();ka();q=U(q,Z,w,"width");document.documentElement.style.height="";document.body.style.height="";d('HTML \x26 body height set to "auto"');Ia();la();C=Ha();u("init","Init message from host page");S();za=!1;setTimeout(function(){Aa=!1},X)}function e(){var l=c();C.findTarget(l)}function c(){return a.data.substr(a.data.indexOf(":")+1)}function f(){var l=c();d("MessageCallback called from parent: "+l);R(JSON.parse(l));d(" --")}function h(){var l=c();d("PageInfoFromParent called from parent: "+
l);Y(JSON.parse(l));d(" --")}function n(){return a.data.split(":")[2]in{"true":1,"false":1}}if(A===(""+a.data).substr(0,fa))if(!1===za)switch(a.data.split("]")[1].split(":")[0]){case "reset":Aa?d("Page reset ignored by init"):(d("Page size reset by host page"),xa("resetPage"));break;case "resize":u("resizeParent","Parent window requested size check");break;case "moveToAnchor":e();break;case "message":f();break;case "pageInfo":h();break;default:"iFrameResize"in g||n()||y("Unexpected message ("+a.data+
")")}else n()?b():d('Ignored message of type "'+a.data.split("]")[1].split(":")[0]+'". Received before initialization.')}var t=!0,ta=10,ha="",P=0,J="",W=null,ia="",I=!1,Ka={resize:1,click:1},X=128,za=!0,z=1,V="bodyOffset",p=V,Aa=!0,ea="",C={},x=32,oa=null,O=!1,A="[iFrameSizer]",fa=A.length,B="",Ba={max:1,min:1,bodyScroll:1,documentElementScroll:1},Q="child",pa=!0,ya=g.parent,D="*",K=0,N=!1,wa=null,F=16,G=1,Z="scroll",q=Z,Ja=g,R=function(){y("MessageCallback function not defined")},S=function(){},
Y=function(){},L=Date.now||function(){return(new Date).getTime()},v={bodyOffset:function(){return document.body.offsetHeight+aa("marginTop")+aa("marginBottom")},offset:function(){return v.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,M(v))},min:function(){return Math.min.apply(null,
M(v))},grow:function(){return v.max()},lowestElement:function(){return Math.max(v.bodyOffset(),ba("bottom",document.querySelectorAll("body *")))},taggedElement:function(){return ua("bottom","data-iframe-height")}},w={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(w.bodyScroll(),
w.documentElementScroll())},max:function(){return Math.max.apply(null,M(w))},min:function(){return Math.min.apply(null,M(w))},rightMostElement:function(){return ba("right",document.querySelectorAll("body *"))},taggedElement:function(){return ua("right","data-iframe-width")}},La=function(a){var b,e,c,f=null,h=0,n=function(){h=L();f=null;c=a.apply(b,e);f||(b=e=null)};return function(){var l=L();h||(h=l);var k=F-(l-h);return b=this,e=arguments,0>=k||k>F?(f&&(clearTimeout(f),f=null),h=l,c=a.apply(b,e),
f||(b=e=null)):f||(f=setTimeout(n,k)),c}}(function(a,b,e,c){var f,h;(f=void 0!==e?e:v[p](),h=void 0!==c?c:w[q](),Math.abs(z-f)<=K&&(!I||Math.abs(G-h)<=K))&&"init"!==a?a in{init:1,interval:1,size:1}||!(p in Ba||I&&q in Ba)?a in{interval:1}||d("No change in size detected"):ra(b):(va(),z=f,G=h,r(z,G,a))});H(g,"message",qa);"loading"!==document.readyState&&g.parent.postMessage("[iFrameResizerChild]Ready","*")}(window||{});